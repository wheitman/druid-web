import{s as safe_not_equal,d as create_slot,u as update_slot_base,g as get_all_dirty_from_scope,e as get_slot_changes,r as run_all,x as bubble,y as src_url_equal,o as onMount,n as noop}from"../chunks/scheduler.C3VTXn_k.js";import{S as SvelteComponent,i as init,e as element,c as claim_element,a as children,d as detach,o as attr,y as toggle_class,g as insert_hydration,z as listen,n as transition_in,l as transition_out,s as space,t as text,u as create_component,A as head_selector,f as claim_space,B as get_svelte_dataset,b as claim_text,v as claim_component,h as append_hydration,w as mount_component,j as set_data,x as destroy_component}from"../chunks/index.BHtGCp6z.js";const globals=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global,prerender=!0,_page=Object.freeze(Object.defineProperty({__proto__:null,prerender},Symbol.toStringTag,{value:"Module"}));/*!
 * ONNX Runtime Web v1.18.0
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Licensed under the MIT License.
 */var vd=Object.create,Pn=Object.defineProperty,_d=Object.getOwnPropertyDescriptor,Od=Object.getOwnPropertyNames,Id=Object.getPrototypeOf,Sd=Object.prototype.hasOwnProperty,L=(e,t)=>()=>(e&&(t=e(e=0)),t),me=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Sr=(e,t)=>{for(var a in t)Pn(e,a,{get:t[a],enumerable:!0})},Va=(e,t,a,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let u of Od(t))!Sd.call(e,u)&&u!==a&&Pn(e,u,{get:()=>t[u],enumerable:!(i=_d(t,u))||i.enumerable});return e},Ar=(e,t,a)=>(a=e!=null?vd(Id(e)):{},Va(!e||!e.__esModule?Pn(a,"default",{value:e,enumerable:!0}):a,e)),ar=e=>Va(Pn({},"__esModule",{value:!0}),e),En,sr,Pr,Ad,Dn,Ln=L(()=>{En=new Map,sr=[],Pr=(e,t,a)=>{if(t&&typeof t.init=="function"&&typeof t.createInferenceSessionHandler=="function"){let i=En.get(e);if(i===void 0)En.set(e,{backend:t,priority:a});else{if(i.priority>a)return;if(i.priority===a&&i.backend!==t)throw new Error(`cannot register backend "${e}" using priority ${a}`)}if(a>=0){let u=sr.indexOf(e);u!==-1&&sr.splice(u,1);for(let n=0;n<sr.length;n++)if(En.get(sr[n]).priority<=a){sr.splice(n,0,e);return}sr.push(e)}return}throw new TypeError("not a valid backend")},Ad=async e=>{let t=En.get(e);if(!t)return"backend not found.";if(t.initialized)return t.backend;if(t.aborted)return t.error;{let a=!!t.initPromise;try{return a||(t.initPromise=t.backend.init(e)),await t.initPromise,t.initialized=!0,t.backend}catch(i){return a||(t.error=`${i}`,t.aborted=!0),t.error}finally{delete t.initPromise}}},Dn=async e=>{let t=e.executionProviders||[],a=t.map(p=>typeof p=="string"?p:p.name),i=a.length===0?sr:a,u,n=[],o=new Set;for(let p of i){let r=await Ad(p);typeof r=="string"?n.push({name:p,err:r}):(u||(u=r),u===r&&o.add(p))}if(!u)throw new Error(`no available backend found. ERR: ${n.map(p=>`[${p.name}] ${p.err}`).join(", ")}`);for(let{name:p,err:r}of n)a.includes(p)&&console.warn(`removing requested execution provider "${p}" from session options because it is not available: ${r}`);let c=t.filter(p=>o.has(typeof p=="string"?p:p.name));return[u,new Proxy(e,{get:(p,r)=>r==="executionProviders"?c:Reflect.get(p,r)})]}}),Wa=L(()=>{Ln()}),Ha,qa=L(()=>{Ha="1.18.0"}),ja,ut,Vo=L(()=>{qa(),ja="warning",ut={wasm:{},webgl:{},webgpu:{},versions:{common:Ha},set logLevel(e){if(e!==void 0){if(typeof e!="string"||["verbose","info","warning","error","fatal"].indexOf(e)===-1)throw new Error(`Unsupported logging level: ${e}`);ja=e}},get logLevel(){return ja}},Object.defineProperty(ut,"logLevel",{enumerable:!0})}),Z,Ya=L(()=>{Vo(),Z=ut}),Xa,Ka,Ja=L(()=>{Xa=(e,t)=>{let a=typeof document<"u"?document.createElement("canvas"):new OffscreenCanvas(1,1);a.width=e.dims[3],a.height=e.dims[2];let i=a.getContext("2d");if(i!=null){let u,n;(t==null?void 0:t.tensorLayout)!==void 0&&t.tensorLayout==="NHWC"?(u=e.dims[2],n=e.dims[3]):(u=e.dims[3],n=e.dims[2]);let o=(t==null?void 0:t.format)!==void 0?t.format:"RGB",c=t==null?void 0:t.norm,p,r;c===void 0||c.mean===void 0?p=[255,255,255,255]:typeof c.mean=="number"?p=[c.mean,c.mean,c.mean,c.mean]:(p=[c.mean[0],c.mean[1],c.mean[2],0],c.mean[3]!==void 0&&(p[3]=c.mean[3])),c===void 0||c.bias===void 0?r=[0,0,0,0]:typeof c.bias=="number"?r=[c.bias,c.bias,c.bias,c.bias]:(r=[c.bias[0],c.bias[1],c.bias[2],0],c.bias[3]!==void 0&&(r[3]=c.bias[3]));let l=n*u,s=0,h=l,d=l*2,m=-1;o==="RGBA"?(s=0,h=l,d=l*2,m=l*3):o==="RGB"?(s=0,h=l,d=l*2):o==="RBG"&&(s=0,d=l,h=l*2);for(let b=0;b<n;b++)for(let v=0;v<u;v++){let O=(e.data[s++]-r[0])*p[0],T=(e.data[h++]-r[1])*p[1],E=(e.data[d++]-r[2])*p[2],$=m===-1?255:(e.data[m++]-r[3])*p[3];i.fillStyle="rgba("+O+","+T+","+E+","+$+")",i.fillRect(v,b,1,1)}if("toDataURL"in a)return a.toDataURL();throw new Error("toDataURL is not supported")}else throw new Error("Can not access image data")},Ka=(e,t)=>{let a=typeof document<"u"?document.createElement("canvas").getContext("2d"):new OffscreenCanvas(1,1).getContext("2d"),i;if(a!=null){let u,n,o;(t==null?void 0:t.tensorLayout)!==void 0&&t.tensorLayout==="NHWC"?(u=e.dims[2],n=e.dims[1],o=e.dims[3]):(u=e.dims[3],n=e.dims[2],o=e.dims[1]);let c=t!==void 0&&t.format!==void 0?t.format:"RGB",p=t==null?void 0:t.norm,r,l;p===void 0||p.mean===void 0?r=[255,255,255,255]:typeof p.mean=="number"?r=[p.mean,p.mean,p.mean,p.mean]:(r=[p.mean[0],p.mean[1],p.mean[2],255],p.mean[3]!==void 0&&(r[3]=p.mean[3])),p===void 0||p.bias===void 0?l=[0,0,0,0]:typeof p.bias=="number"?l=[p.bias,p.bias,p.bias,p.bias]:(l=[p.bias[0],p.bias[1],p.bias[2],0],p.bias[3]!==void 0&&(l[3]=p.bias[3]));let s=n*u;if(t!==void 0&&(t.format!==void 0&&o===4&&t.format!=="RGBA"||o===3&&t.format!=="RGB"&&t.format!=="BGR"))throw new Error("Tensor format doesn't match input tensor dims");let h=4,d=0,m=1,b=2,v=3,O=0,T=s,E=s*2,$=-1;c==="RGBA"?(O=0,T=s,E=s*2,$=s*3):c==="RGB"?(O=0,T=s,E=s*2):c==="RBG"&&(O=0,E=s,T=s*2),i=a.createImageData(u,n);for(let C=0;C<n*u;d+=h,m+=h,b+=h,v+=h,C++)i.data[d]=(e.data[O++]-l[0])*r[0],i.data[m]=(e.data[T++]-l[1])*r[1],i.data[b]=(e.data[E++]-l[2])*r[2],i.data[v]=$===-1?255:(e.data[$++]-l[3])*r[3]}else throw new Error("Can not access image data");return i}}),Wo,Za,Qa,es,ts,rs=L(()=>{Cn(),Wo=(e,t)=>{if(e===void 0)throw new Error("Image buffer must be defined");if(t.height===void 0||t.width===void 0)throw new Error("Image height and width must be defined");if(t.tensorLayout==="NHWC")throw new Error("NHWC Tensor layout is not supported yet");let{height:a,width:i}=t,u=t.norm??{mean:255,bias:0},n,o;typeof u.mean=="number"?n=[u.mean,u.mean,u.mean,u.mean]:n=[u.mean[0],u.mean[1],u.mean[2],u.mean[3]??255],typeof u.bias=="number"?o=[u.bias,u.bias,u.bias,u.bias]:o=[u.bias[0],u.bias[1],u.bias[2],u.bias[3]??0];let c=t.format!==void 0?t.format:"RGBA",p=t.tensorFormat!==void 0&&t.tensorFormat!==void 0?t.tensorFormat:"RGB",r=a*i,l=p==="RGBA"?new Float32Array(r*4):new Float32Array(r*3),s=4,h=0,d=1,m=2,b=3,v=0,O=r,T=r*2,E=-1;c==="RGB"&&(s=3,h=0,d=1,m=2,b=-1),p==="RGBA"?E=r*3:p==="RBG"?(v=0,T=r,O=r*2):p==="BGR"&&(T=0,O=r,v=r*2);for(let $=0;$<r;$++,h+=s,m+=s,d+=s,b+=s)l[v++]=(e[h]+o[0])/n[0],l[O++]=(e[d]+o[1])/n[1],l[T++]=(e[m]+o[2])/n[2],E!==-1&&b!==-1&&(l[E++]=(e[b]+o[3])/n[3]);return p==="RGBA"?new Je("float32",l,[1,4,a,i]):new Je("float32",l,[1,3,a,i])},Za=async(e,t)=>{let a=typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement,i=typeof ImageData<"u"&&e instanceof ImageData,u=typeof ImageBitmap<"u"&&e instanceof ImageBitmap,n=typeof e=="string",o,c=t??{},p=()=>{if(typeof document<"u")return document.createElement("canvas");if(typeof OffscreenCanvas<"u")return new OffscreenCanvas(1,1);throw new Error("Canvas is not supported")},r=l=>l instanceof HTMLCanvasElement||l instanceof OffscreenCanvas?l.getContext("2d"):null;if(a){let l=p();l.width=e.width,l.height=e.height;let s=r(l);if(s!=null){let h=e.height,d=e.width;if(t!==void 0&&t.resizedHeight!==void 0&&t.resizedWidth!==void 0&&(h=t.resizedHeight,d=t.resizedWidth),t!==void 0){if(c=t,t.tensorFormat!==void 0)throw new Error("Image input config format must be RGBA for HTMLImageElement");c.tensorFormat="RGBA",c.height=h,c.width=d}else c.tensorFormat="RGBA",c.height=h,c.width=d;s.drawImage(e,0,0),o=s.getImageData(0,0,d,h).data}else throw new Error("Can not access image data")}else if(i){let l,s;if(t!==void 0&&t.resizedWidth!==void 0&&t.resizedHeight!==void 0?(l=t.resizedHeight,s=t.resizedWidth):(l=e.height,s=e.width),t!==void 0&&(c=t),c.format="RGBA",c.height=l,c.width=s,t!==void 0){let h=p();h.width=s,h.height=l;let d=r(h);if(d!=null)d.putImageData(e,0,0),o=d.getImageData(0,0,s,l).data;else throw new Error("Can not access image data")}else o=e.data}else if(u){if(t===void 0)throw new Error("Please provide image config with format for Imagebitmap");let l=p();l.width=e.width,l.height=e.height;let s=r(l);if(s!=null){let h=e.height,d=e.width;return s.drawImage(e,0,0,d,h),o=s.getImageData(0,0,d,h).data,c.height=h,c.width=d,Wo(o,c)}else throw new Error("Can not access image data")}else{if(n)return new Promise((l,s)=>{let h=p(),d=r(h);if(!e||!d)return s();let m=new Image;m.crossOrigin="Anonymous",m.src=e,m.onload=()=>{h.width=m.width,h.height=m.height,d.drawImage(m,0,0,h.width,h.height);let b=d.getImageData(0,0,h.width,h.height);c.height=h.height,c.width=h.width,l(Wo(b.data,c))}});throw new Error("Input data provided is not supported - aborted tensor creation")}if(o!==void 0)return Wo(o,c);throw new Error("Input data provided is not supported - aborted tensor creation")},Qa=(e,t)=>{let{width:a,height:i,download:u,dispose:n}=t,o=[1,i,a,4];return new Je({location:"texture",type:"float32",texture:e,dims:o,download:u,dispose:n})},es=(e,t)=>{let{dataType:a,dims:i,download:u,dispose:n}=t;return new Je({location:"gpu-buffer",type:a??"float32",gpuBuffer:e,dims:i,download:u,dispose:n})},ts=(e,t,a)=>new Je({location:"cpu-pinned",type:e,data:t,dims:a??[t.length]})}),ur,Qr,ns,os,is=L(()=>{ur=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array]]),Qr=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]),ns=!1,os=()=>{if(!ns){ns=!0;let e=typeof BigInt64Array<"u"&&BigInt64Array.from,t=typeof BigUint64Array<"u"&&BigUint64Array.from,a=typeof Float16Array<"u"&&Float16Array.from;e&&(ur.set("int64",BigInt64Array),Qr.set(BigInt64Array,"int64")),t&&(ur.set("uint64",BigUint64Array),Qr.set(BigUint64Array,"uint64")),a?(ur.set("float16",Float16Array),Qr.set(Float16Array,"float16")):ur.set("float16",Uint16Array)}}}),as,ss,us=L(()=>{Cn(),as=e=>{let t=1;for(let a=0;a<e.length;a++){let i=e[a];if(typeof i!="number"||!Number.isSafeInteger(i))throw new TypeError(`dims[${a}] must be an integer, got: ${i}`);if(i<0)throw new RangeError(`dims[${a}] must be a non-negative integer, got: ${i}`);t*=i}return t},ss=(e,t)=>{switch(e.location){case"cpu":return new Je(e.type,e.data,t);case"cpu-pinned":return new Je({location:"cpu-pinned",data:e.data,type:e.type,dims:t});case"texture":return new Je({location:"texture",texture:e.texture,type:e.type,dims:t});case"gpu-buffer":return new Je({location:"gpu-buffer",gpuBuffer:e.gpuBuffer,type:e.type,dims:t});default:throw new Error(`tensorReshape: tensor location ${e.location} is not supported`)}}}),Je,Cn=L(()=>{Ja(),rs(),is(),us(),Je=class{constructor(e,t,a){os();let i,u;if(typeof e=="object"&&"location"in e)switch(this.dataLocation=e.location,i=e.type,u=e.dims,e.location){case"cpu-pinned":{let o=ur.get(i);if(!o)throw new TypeError(`unsupported type "${i}" to create tensor from pinned buffer`);if(!(e.data instanceof o))throw new TypeError(`buffer should be of type ${o.name}`);this.cpuData=e.data;break}case"texture":{if(i!=="float32")throw new TypeError(`unsupported type "${i}" to create tensor from texture`);this.gpuTextureData=e.texture,this.downloader=e.download,this.disposer=e.dispose;break}case"gpu-buffer":{if(i!=="float32"&&i!=="float16"&&i!=="int32"&&i!=="int64"&&i!=="uint32"&&i!=="uint8"&&i!=="bool")throw new TypeError(`unsupported type "${i}" to create tensor from gpu buffer`);this.gpuBufferData=e.gpuBuffer,this.downloader=e.download,this.disposer=e.dispose;break}default:throw new Error(`Tensor constructor: unsupported location '${this.dataLocation}'`)}else{let o,c;if(typeof e=="string")if(i=e,c=a,e==="string"){if(!Array.isArray(t))throw new TypeError("A string tensor's data must be a string array.");o=t}else{let p=ur.get(e);if(p===void 0)throw new TypeError(`Unsupported tensor type: ${e}.`);if(Array.isArray(t)){if(e==="float16"&&p===Uint16Array)throw new TypeError("Creating a float16 tensor from number array is not supported. Please use Uint16Array as data.");e==="uint64"||e==="int64"?o=p.from(t,BigInt):o=p.from(t)}else if(t instanceof p)o=t;else throw new TypeError(`A ${i} tensor's data must be type of ${p}`)}else if(c=t,Array.isArray(e)){if(e.length===0)throw new TypeError("Tensor type cannot be inferred from an empty array.");let p=typeof e[0];if(p==="string")i="string",o=e;else if(p==="boolean")i="bool",o=Uint8Array.from(e);else throw new TypeError(`Invalid element type of data array: ${p}.`)}else{let p=Qr.get(e.constructor);if(p===void 0)throw new TypeError(`Unsupported type for tensor data: ${e.constructor}.`);i=p,o=e}if(c===void 0)c=[o.length];else if(!Array.isArray(c))throw new TypeError("A tensor's dims must be a number array");u=c,this.cpuData=o,this.dataLocation="cpu"}let n=as(u);if(this.cpuData&&n!==this.cpuData.length)throw new Error(`Tensor's size(${n}) does not match data length(${this.cpuData.length}).`);this.type=i,this.dims=u,this.size=n}static async fromImage(e,t){return Za(e,t)}static fromTexture(e,t){return Qa(e,t)}static fromGpuBuffer(e,t){return es(e,t)}static fromPinnedBuffer(e,t,a){return ts(e,t,a)}toDataURL(e){return Xa(this,e)}toImageData(e){return Ka(this,e)}get data(){if(this.ensureValid(),!this.cpuData)throw new Error("The data is not on CPU. Use `getData()` to download GPU data to CPU, or use `texture` or `gpuBuffer` property to access the GPU data directly.");return this.cpuData}get location(){return this.dataLocation}get texture(){if(this.ensureValid(),!this.gpuTextureData)throw new Error("The data is not stored as a WebGL texture.");return this.gpuTextureData}get gpuBuffer(){if(this.ensureValid(),!this.gpuBufferData)throw new Error("The data is not stored as a WebGPU buffer.");return this.gpuBufferData}async getData(e){switch(this.ensureValid(),this.dataLocation){case"cpu":case"cpu-pinned":return this.data;case"texture":case"gpu-buffer":{if(!this.downloader)throw new Error("The current tensor is not created with a specified data downloader.");if(this.isDownloading)throw new Error("The current tensor is being downloaded.");try{this.isDownloading=!0;let t=await this.downloader();return this.downloader=void 0,this.dataLocation="cpu",this.cpuData=t,e&&this.disposer&&(this.disposer(),this.disposer=void 0),t}finally{this.isDownloading=!1}}default:throw new Error(`cannot get data from location: ${this.dataLocation}`)}}dispose(){if(this.isDownloading)throw new Error("The current tensor is being downloaded.");this.disposer&&(this.disposer(),this.disposer=void 0),this.cpuData=void 0,this.gpuTextureData=void 0,this.gpuBufferData=void 0,this.downloader=void 0,this.isDownloading=void 0,this.dataLocation="none"}ensureValid(){if(this.dataLocation==="none")throw new Error("The tensor is disposed.")}reshape(e){if(this.ensureValid(),this.downloader||this.disposer)throw new Error("Cannot reshape a tensor that owns GPU resource.");return ss(this,e)}}}),Me,Fn=L(()=>{Cn(),Me=Je}),ls,fs,lr,fr,Ho=L(()=>{Vo(),ls=(e,t)=>{(typeof ut.trace>"u"?!ut.wasm.trace:!ut.trace)||console.timeStamp(`${e}::ORT::${t}`)},fs=(e,t)=>{var u;let a=((u=new Error().stack)==null?void 0:u.split(/\r\n|\r|\n/g))||[],i=!1;for(let n=0;n<a.length;n++){if(i&&!a[n].includes("TRACE_FUNC")){let o=`FUNC_${e}::${a[n].trim().split(" ")[1]}`;t&&(o+=`::${t}`),ls("CPU",o);return}a[n].includes("TRACE_FUNC")&&(i=!0)}},lr=e=>{(typeof ut.trace>"u"?!ut.wasm.trace:!ut.trace)||fs("BEGIN",e)},fr=e=>{(typeof ut.trace>"u"?!ut.wasm.trace:!ut.trace)||fs("END",e)}}),$n,cs=L(()=>{Ln(),Fn(),Ho(),$n=class Ta{constructor(t){this.handler=t}async run(t,a,i){lr();let u={},n={};if(typeof t!="object"||t===null||t instanceof Me||Array.isArray(t))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let o=!0;if(typeof a=="object"){if(a===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(a instanceof Me)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(a)){if(a.length===0)throw new TypeError("'fetches' cannot be an empty array.");o=!1;for(let r of a){if(typeof r!="string")throw new TypeError("'fetches' must be a string array or an object.");if(this.outputNames.indexOf(r)===-1)throw new RangeError(`'fetches' contains invalid output name: ${r}.`);u[r]=null}if(typeof i=="object"&&i!==null)n=i;else if(typeof i<"u")throw new TypeError("'options' must be an object.")}else{let r=!1,l=Object.getOwnPropertyNames(a);for(let s of this.outputNames)if(l.indexOf(s)!==-1){let h=a[s];(h===null||h instanceof Me)&&(r=!0,o=!1,u[s]=h)}if(r){if(typeof i=="object"&&i!==null)n=i;else if(typeof i<"u")throw new TypeError("'options' must be an object.")}else n=a}}else if(typeof a<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(let r of this.inputNames)if(typeof t[r]>"u")throw new Error(`input '${r}' is missing in 'feeds'.`);if(o)for(let r of this.outputNames)u[r]=null;let c=await this.handler.run(t,u,n),p={};for(let r in c)if(Object.hasOwnProperty.call(c,r)){let l=c[r];l instanceof Me?p[r]=l:p[r]=new Me(l.type,l.data,l.dims)}return fr(),p}async release(){return this.handler.dispose()}static async create(t,a,i,u){lr();let n,o={};if(typeof t=="string"){if(n=t,typeof a=="object"&&a!==null)o=a;else if(typeof a<"u")throw new TypeError("'options' must be an object.")}else if(t instanceof Uint8Array){if(n=t,typeof a=="object"&&a!==null)o=a;else if(typeof a<"u")throw new TypeError("'options' must be an object.")}else if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer){let l=t,s=0,h=t.byteLength;if(typeof a=="object"&&a!==null)o=a;else if(typeof a=="number"){if(s=a,!Number.isSafeInteger(s))throw new RangeError("'byteOffset' must be an integer.");if(s<0||s>=l.byteLength)throw new RangeError(`'byteOffset' is out of range [0, ${l.byteLength}).`);if(h=t.byteLength-s,typeof i=="number"){if(h=i,!Number.isSafeInteger(h))throw new RangeError("'byteLength' must be an integer.");if(h<=0||s+h>l.byteLength)throw new RangeError(`'byteLength' is out of range (0, ${l.byteLength-s}].`);if(typeof u=="object"&&u!==null)o=u;else if(typeof u<"u")throw new TypeError("'options' must be an object.")}else if(typeof i<"u")throw new TypeError("'byteLength' must be a number.")}else if(typeof a<"u")throw new TypeError("'options' must be an object.");n=new Uint8Array(l,s,h)}else throw new TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");let[c,p]=await Dn(o),r=await c.createInferenceSessionHandler(n,p);return fr(),new Ta(r)}startProfiling(){this.handler.startProfiling()}endProfiling(){this.handler.endProfiling()}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}}}),Pd,ps=L(()=>{cs(),Pd=$n}),ds=L(()=>{}),hs=L(()=>{}),ms=L(()=>{}),bs=L(()=>{}),Ed,kn,gs=L(()=>{Ln(),Fn(),Ed="Training backend could not be resolved. Make sure you're using the correct configuration & WebAssembly files.",kn=class xa{constructor(t,a,i){this.handler=t,this.hasOptimizerModel=a,this.hasEvalModel=i}get trainingInputNames(){return this.handler.inputNames}get trainingOutputNames(){return this.handler.outputNames}get evalInputNames(){if(this.hasEvalModel)return this.handler.evalInputNames;throw new Error("This training session has no evalModel loaded.")}get evalOutputNames(){if(this.hasEvalModel)return this.handler.evalOutputNames;throw new Error("This training session has no evalModel loaded.")}static async create(t,a){let i=t.evalModel||"",u=t.optimizerModel||"",n=a||{},[o,c]=await Dn(n);if(o.createTrainingSessionHandler){let p=await o.createTrainingSessionHandler(t.checkpointState,t.trainModel,i,u,c);return new xa(p,!!t.optimizerModel,!!t.evalModel)}else throw new Error(Ed)}typeNarrowingForRunStep(t,a,i,u,n){let o={},c={};if(typeof i!="object"||i===null||i instanceof Me||Array.isArray(i))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let p=!0;if(typeof u=="object"){if(u===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(u instanceof Me)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(u)){if(u.length===0)throw new TypeError("'fetches' cannot be an empty array.");p=!1;for(let r of u){if(typeof r!="string")throw new TypeError("'fetches' must be a string array or an object.");if(a.indexOf(r)===-1)throw new RangeError(`'fetches' contains invalid output name: ${r}.`);o[r]=null}if(typeof n=="object"&&n!==null)c=n;else if(typeof n<"u")throw new TypeError("'options' must be an object.")}else{let r=!1,l=Object.getOwnPropertyNames(u);for(let s of a)if(l.indexOf(s)!==-1){let h=u[s];(h===null||h instanceof Me)&&(r=!0,p=!1,o[s]=h)}if(r){if(typeof n=="object"&&n!==null)c=n;else if(typeof n<"u")throw new TypeError("'options' must be an object.")}else c=u}}else if(typeof u<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(let r of t)if(typeof i[r]>"u")throw new Error(`input '${r}' is missing in 'feeds'.`);if(p)for(let r of a)o[r]=null;return[o,c]}convertHandlerReturnTypeToMapOfTensors(t){let a={};for(let i in t)if(Object.hasOwnProperty.call(t,i)){let u=t[i];u instanceof Me?a[i]=u:a[i]=new Me(u.type,u.data,u.dims)}return a}async lazyResetGrad(){await this.handler.lazyResetGrad()}async runTrainStep(t,a,i){let[u,n]=this.typeNarrowingForRunStep(this.trainingInputNames,this.trainingOutputNames,t,a,i),o=await this.handler.runTrainStep(t,u,n);return this.convertHandlerReturnTypeToMapOfTensors(o)}async runOptimizerStep(t){if(this.hasOptimizerModel)await this.handler.runOptimizerStep(t||{});else throw new Error("This TrainingSession has no OptimizerModel loaded.")}async runEvalStep(t,a,i){if(this.hasEvalModel){let[u,n]=this.typeNarrowingForRunStep(this.evalInputNames,this.evalOutputNames,t,a,i),o=await this.handler.runEvalStep(t,u,n);return this.convertHandlerReturnTypeToMapOfTensors(o)}else throw new Error("This TrainingSession has no EvalModel loaded.")}async getParametersSize(t=!0){return this.handler.getParametersSize(t)}async loadParametersBuffer(t,a=!0){let i=await this.getParametersSize(a);if(t.length!==4*i)throw new Error("Size of the buffer passed into loadParametersBuffer must match the number of parameters in the model. Please use getParametersSize method to check.");return this.handler.loadParametersBuffer(t,a)}async getContiguousParameters(t=!0){return this.handler.getContiguousParameters(t)}async release(){return this.handler.dispose()}}}),Dd,ys=L(()=>{gs(),Dd=kn}),qo={};Sr(qo,{InferenceSession:()=>Pd,TRACE:()=>ls,TRACE_FUNC_BEGIN:()=>lr,TRACE_FUNC_END:()=>fr,Tensor:()=>Me,TrainingSession:()=>Dd,env:()=>Z,registerBackend:()=>Pr});var Ot=L(()=>{Wa(),Ya(),ps(),Fn(),ds(),hs(),Ho(),ms(),bs(),ys()});function Xt(e,t,a,i){if(t===void 0)return Cd(e);if(a===void 0)Bn(e,t);else if(typeof a=="number"&&i===void 0)Bn(e,t);else if(typeof a=="string"&&i===void 0)Bn(e,a,1,t);else if(typeof a=="string"&&typeof i=="number")Bn(e,a,i,t);else throw new TypeError("input is valid")}function Cd(e){return{verbose:Xt.verbose.bind(null,e),info:Xt.info.bind(null,e),warning:Xt.warning.bind(null,e),error:Xt.error.bind(null,e),fatal:Xt.fatal.bind(null,e)}}function Bn(e,t,a,i){let u=en[i||""]||en[""];xs[e]<xs[u.minimalSeverity]||(u.logDateTime&&(t=`${new Date().toISOString()}|${t}`),u.logSourceLocation,Ld[u.provider].log(e,t,i))}var jo,Yo,xs,Ld,ws,en,ce,Rn,Mn,Gn,Nn,lt=L(()=>{jo=class{log(e,t,a){}},Yo=class{log(e,t,a){console.log(`${this.color(e)} ${a?"\x1B[35m"+a+"\x1B[0m ":""}${t}`)}color(e){switch(e){case"verbose":return"\x1B[34;40mv\x1B[0m";case"info":return"\x1B[32mi\x1B[0m";case"warning":return"\x1B[30;43mw\x1B[0m";case"error":return"\x1B[31;40me\x1B[0m";case"fatal":return"\x1B[101mf\x1B[0m";default:throw new Error(`unsupported severity: ${e}`)}}},xs={verbose:1e3,info:2e3,warning:4e3,error:5e3,fatal:6e3},Ld={none:new jo,console:new Yo},ws={provider:"console",minimalSeverity:"warning",logDateTime:!0,logSourceLocation:!1},en={"":ws},(e=>{function t(r,l){e("verbose",r,l)}e.verbose=t;function a(r,l){e("info",r,l)}e.info=a;function i(r,l){e("warning",r,l)}e.warning=i;function u(r,l){e("error",r,l)}e.error=u;function n(r,l){e("fatal",r,l)}e.fatal=n;function o(r){en={},c("",r||{})}e.reset=o;function c(r,l){if(r==="*")o(l);else{let s=en[r]||ws;en[r]={provider:l.provider||s.provider,minimalSeverity:l.minimalSeverity||s.minimalSeverity,logDateTime:l.logDateTime===void 0?s.logDateTime:l.logDateTime,logSourceLocation:l.logSourceLocation===void 0?s.logSourceLocation:l.logSourceLocation}}}e.set=c;function p(r){let l={};r.logLevel&&(l.minimalSeverity=r.logLevel),c("",l)}e.setWithEnv=p})(Xt||(Xt={})),ce=Xt,Rn=class{constructor(e,t,a,i,u,n){this.category=e,this.name=t,this.startTime=a,this.endCallback=i,this.timer=u,this.ctx=n}async end(){return this.endCallback(this)}async checkTimer(){if(this.ctx===void 0||this.timer===void 0)throw new Error("No webgl timer found");return this.ctx.endTimer(),this.ctx.waitForQueryAndGetTime(this.timer)}},Mn=class{constructor(e,t,a,i){this.category=e,this.name=t,this.startTime=a,this.endTime=i}},Gn=class{constructor(e,t,a){this._started=!1,this._flushPointer=0,this._started=!1,this._maxNumberEvents=e===void 0?1e4:e,this._flushBatchSize=t===void 0?10:t,this._flushIntervalInMilliseconds=a===void 0?5e3:a}static create(e){return e===void 0?new this:new this(e.maxNumberEvents,e.flushBatchSize,e.flushIntervalInMilliseconds)}start(){this._started=!0,this._timingEvents=[],this._flushTime=Nn(),this._flushPointer=0}stop(){for(this._started=!1;this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer])}event(e,t,a,i){let u=this._started?this.begin(e,t,i):void 0,n=!1,o=a();if(o&&typeof o.then=="function")return n=!0,new Promise((c,p)=>{o.then(async r=>{u&&await u.end(),c(r)},async r=>{u&&await u.end(),p(r)})});if(!n&&u){let c=u.end();if(c&&typeof c.then=="function")return new Promise((p,r)=>{c.then(()=>{p(o)},l=>{r(l)})})}return o}begin(e,t,a){if(!this._started)throw new Error("profiler is not started yet");if(a===void 0){let i=Nn();return this.flush(i),new Rn(e,t,i,u=>this.endSync(u))}else{let i=a.beginTimer();return new Rn(e,t,0,async u=>this.end(u),i,a)}}async end(e){let t=await e.checkTimer();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new Mn(e.category,e.name,e.startTime,t)),this.flush(t))}endSync(e){let t=Nn();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new Mn(e.category,e.name,e.startTime,t)),this.flush(t))}logOneEvent(e){ce.verbose(`Profiler.${e.category}`,`${(e.endTime-e.startTime).toFixed(2)}ms on event '${e.name}' at ${e.endTime.toFixed(2)}`)}flush(e){if(this._timingEvents.length-this._flushPointer>=this._flushBatchSize||e-this._flushTime>=this._flushIntervalInMilliseconds){for(let t=this._flushPointer;this._flushPointer<t+this._flushBatchSize&&this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer]);this._flushTime=Nn()}}get started(){return this._started}},Nn=typeof performance<"u"&&performance.now?()=>performance.now():Date.now});function vs(e,t,a){for(let i of a){let u=i[0],n=i[1],o=i[2],c=i[3],p=i[4];if(e.opType===u){for(let r of t)if((r.domain===n||r.domain==="ai.onnx"&&n==="")&&Fd(r.version,o))return{opImpl:c,opInit:p}}}throw new TypeError(`cannot resolve operator '${e.opType}' with opsets: ${t.map(i=>`${i.domain||"ai.onnx"} v${i.version}`).join(", ")}`)}function Fd(e,t){if(t.endsWith("+")){let a=Number.parseInt(t.substring(0,t.length-1),10);return!isNaN(a)&&a<=e}else if(t.split("-").length===2){let a=t.split("-"),i=Number.parseInt(a[0],10),u=Number.parseInt(a[1],10);return!isNaN(i)&&!isNaN(u)&&i<=e&&e<=u}else return Number.parseInt(t,10)===e}var _s=L(()=>{}),Os=me(e=>{e.__esModule=!0;var t=function(){function a(i){if(!i)throw new TypeError("Invalid argument; `value` has no value.");this.value=a.EMPTY,i&&a.isGuid(i)&&(this.value=i)}return a.isGuid=function(i){var u=i.toString();return i&&(i instanceof a||a.validator.test(u))},a.create=function(){return new a([a.gen(2),a.gen(1),a.gen(1),a.gen(1),a.gen(3)].join("-"))},a.createEmpty=function(){return new a("emptyguid")},a.parse=function(i){return new a(i)},a.raw=function(){return[a.gen(2),a.gen(1),a.gen(1),a.gen(1),a.gen(3)].join("-")},a.gen=function(i){for(var u="",n=0;n<i;n++)u+=((1+Math.random())*65536|0).toString(16).substring(1);return u},a.prototype.equals=function(i){return a.isGuid(i)&&this.value===i.toString()},a.prototype.isEmpty=function(){return this.value===a.EMPTY},a.prototype.toString=function(){return this.value},a.prototype.toJSON=function(){return{value:this.value}},a.validator=new RegExp("^[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$","i"),a.EMPTY="00000000-0000-0000-0000-000000000000",a}();e.Guid=t});function be(e,t,a){this.low=e|0,this.high=t|0,this.unsigned=!!a}function Xe(e){return(e&&e.__isLong__)===!0}function Is(e){var t=Math.clz32(e&-e);return e?31-t:t}function cr(e,t){var a,i,u;return t?(e>>>=0,(u=0<=e&&e<256)&&(i=As[e],i)?i:(a=le(e,0,!0),u&&(As[e]=a),a)):(e|=0,(u=-128<=e&&e<128)&&(i=Ss[e],i)?i:(a=le(e,e<0?-1:0,!1),u&&(Ss[e]=a),a))}function ct(e,t){if(isNaN(e))return t?zt:It;if(t){if(e<0)return zt;if(e>=Ls)return $s}else{if(e<=-Es)return nt;if(e+1>=Es)return Fs}return e<0?ct(-e,t).neg():le(e%Dr|0,e/Dr|0,t)}function le(e,t,a){return new be(e,t,a)}function Jo(e,t,a){if(e.length===0)throw Error("empty string");if(typeof t=="number"?(a=t,t=!1):t=!!t,e==="NaN"||e==="Infinity"||e==="+Infinity"||e==="-Infinity")return t?zt:It;if(a=a||10,a<2||36<a)throw RangeError("radix");var i;if((i=e.indexOf("-"))>0)throw Error("interior hyphen");if(i===0)return Jo(e.substring(1),t,a).neg();for(var u=ct(Un(a,8)),n=It,o=0;o<e.length;o+=8){var c=Math.min(8,e.length-o),p=parseInt(e.substring(o,o+c),a);if(c<8){var r=ct(Un(a,c));n=n.mul(r).add(ct(p))}else n=n.mul(u),n=n.add(ct(p))}return n.unsigned=t,n}function St(e,t){return typeof e=="number"?ct(e,t):typeof e=="string"?Jo(e,t):le(e.low,e.high,typeof t=="boolean"?t:e.unsigned)}var ft,Ss,As,Un,Ps,kd,Dr,Ls,Es,Ds,It,zt,Er,Cs,Ko,Fs,$s,nt,B,Vt,Zo=L(()=>{ft=null;try{ft=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}be.prototype.__isLong__,Object.defineProperty(be.prototype,"__isLong__",{value:!0}),be.isLong=Xe,Ss={},As={},be.fromInt=cr,be.fromNumber=ct,be.fromBits=le,Un=Math.pow,be.fromString=Jo,be.fromValue=St,Ps=65536,kd=1<<24,Dr=Ps*Ps,Ls=Dr*Dr,Es=Ls/2,Ds=cr(kd),It=cr(0),be.ZERO=It,zt=cr(0,!0),be.UZERO=zt,Er=cr(1),be.ONE=Er,Cs=cr(1,!0),be.UONE=Cs,Ko=cr(-1),be.NEG_ONE=Ko,Fs=le(-1,2147483647,!1),be.MAX_VALUE=Fs,$s=le(-1,-1,!0),be.MAX_UNSIGNED_VALUE=$s,nt=le(0,-2147483648,!1),be.MIN_VALUE=nt,B=be.prototype,B.toInt=function(){return this.unsigned?this.low>>>0:this.low},B.toNumber=function(){return this.unsigned?(this.high>>>0)*Dr+(this.low>>>0):this.high*Dr+(this.low>>>0)},B.toString=function(e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(nt)){var t=ct(e),a=this.div(t),i=a.mul(t).sub(this);return a.toString(e)+i.toInt().toString(e)}else return"-"+this.neg().toString(e);for(var u=ct(Un(e,6),this.unsigned),n=this,o="";;){var c=n.div(u),p=n.sub(c.mul(u)).toInt()>>>0,r=p.toString(e);if(n=c,n.isZero())return r+o;for(;r.length<6;)r="0"+r;o=""+r+o}},B.getHighBits=function(){return this.high},B.getHighBitsUnsigned=function(){return this.high>>>0},B.getLowBits=function(){return this.low},B.getLowBitsUnsigned=function(){return this.low>>>0},B.getNumBitsAbs=function(){if(this.isNegative())return this.eq(nt)?64:this.neg().getNumBitsAbs();for(var e=this.high!=0?this.high:this.low,t=31;t>0&&!(e&1<<t);t--);return this.high!=0?t+33:t+1},B.isZero=function(){return this.high===0&&this.low===0},B.eqz=B.isZero,B.isNegative=function(){return!this.unsigned&&this.high<0},B.isPositive=function(){return this.unsigned||this.high>=0},B.isOdd=function(){return(this.low&1)===1},B.isEven=function(){return(this.low&1)===0},B.equals=function(e){return Xe(e)||(e=St(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low},B.eq=B.equals,B.notEquals=function(e){return!this.eq(e)},B.neq=B.notEquals,B.ne=B.notEquals,B.lessThan=function(e){return this.comp(e)<0},B.lt=B.lessThan,B.lessThanOrEqual=function(e){return this.comp(e)<=0},B.lte=B.lessThanOrEqual,B.le=B.lessThanOrEqual,B.greaterThan=function(e){return this.comp(e)>0},B.gt=B.greaterThan,B.greaterThanOrEqual=function(e){return this.comp(e)>=0},B.gte=B.greaterThanOrEqual,B.ge=B.greaterThanOrEqual,B.compare=function(e){if(Xe(e)||(e=St(e)),this.eq(e))return 0;var t=this.isNegative(),a=e.isNegative();return t&&!a?-1:!t&&a?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},B.comp=B.compare,B.negate=function(){return!this.unsigned&&this.eq(nt)?nt:this.not().add(Er)},B.neg=B.negate,B.add=function(e){Xe(e)||(e=St(e));var t=this.high>>>16,a=this.high&65535,i=this.low>>>16,u=this.low&65535,n=e.high>>>16,o=e.high&65535,c=e.low>>>16,p=e.low&65535,r=0,l=0,s=0,h=0;return h+=u+p,s+=h>>>16,h&=65535,s+=i+c,l+=s>>>16,s&=65535,l+=a+o,r+=l>>>16,l&=65535,r+=t+n,r&=65535,le(s<<16|h,r<<16|l,this.unsigned)},B.subtract=function(e){return Xe(e)||(e=St(e)),this.add(e.neg())},B.sub=B.subtract,B.multiply=function(e){if(this.isZero())return this;if(Xe(e)||(e=St(e)),ft){var t=ft.mul(this.low,this.high,e.low,e.high);return le(t,ft.get_high(),this.unsigned)}if(e.isZero())return this.unsigned?zt:It;if(this.eq(nt))return e.isOdd()?nt:It;if(e.eq(nt))return this.isOdd()?nt:It;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(Ds)&&e.lt(Ds))return ct(this.toNumber()*e.toNumber(),this.unsigned);var a=this.high>>>16,i=this.high&65535,u=this.low>>>16,n=this.low&65535,o=e.high>>>16,c=e.high&65535,p=e.low>>>16,r=e.low&65535,l=0,s=0,h=0,d=0;return d+=n*r,h+=d>>>16,d&=65535,h+=u*r,s+=h>>>16,h&=65535,h+=n*p,s+=h>>>16,h&=65535,s+=i*r,l+=s>>>16,s&=65535,s+=u*p,l+=s>>>16,s&=65535,s+=n*c,l+=s>>>16,s&=65535,l+=a*r+i*p+u*c+n*o,l&=65535,le(h<<16|d,l<<16|s,this.unsigned)},B.mul=B.multiply,B.divide=function(e){if(Xe(e)||(e=St(e)),e.isZero())throw Error("division by zero");if(ft){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;var t=(this.unsigned?ft.div_u:ft.div_s)(this.low,this.high,e.low,e.high);return le(t,ft.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?zt:It;var a,i,u;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return zt;if(e.gt(this.shru(1)))return Cs;u=zt}else{if(this.eq(nt)){if(e.eq(Er)||e.eq(Ko))return nt;if(e.eq(nt))return Er;var n=this.shr(1);return a=n.div(e).shl(1),a.eq(It)?e.isNegative()?Er:Ko:(i=this.sub(e.mul(a)),u=a.add(i.div(e)),u)}else if(e.eq(nt))return this.unsigned?zt:It;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();u=It}for(i=this;i.gte(e);){a=Math.max(1,Math.floor(i.toNumber()/e.toNumber()));for(var o=Math.ceil(Math.log(a)/Math.LN2),c=o<=48?1:Un(2,o-48),p=ct(a),r=p.mul(e);r.isNegative()||r.gt(i);)a-=c,p=ct(a,this.unsigned),r=p.mul(e);p.isZero()&&(p=Er),u=u.add(p),i=i.sub(r)}return u},B.div=B.divide,B.modulo=function(e){if(Xe(e)||(e=St(e)),ft){var t=(this.unsigned?ft.rem_u:ft.rem_s)(this.low,this.high,e.low,e.high);return le(t,ft.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))},B.mod=B.modulo,B.rem=B.modulo,B.not=function(){return le(~this.low,~this.high,this.unsigned)},B.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},B.clz=B.countLeadingZeros,B.countTrailingZeros=function(){return this.low?Is(this.low):Is(this.high)+32},B.ctz=B.countTrailingZeros,B.and=function(e){return Xe(e)||(e=St(e)),le(this.low&e.low,this.high&e.high,this.unsigned)},B.or=function(e){return Xe(e)||(e=St(e)),le(this.low|e.low,this.high|e.high,this.unsigned)},B.xor=function(e){return Xe(e)||(e=St(e)),le(this.low^e.low,this.high^e.high,this.unsigned)},B.shiftLeft=function(e){return Xe(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?le(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):le(0,this.low<<e-32,this.unsigned)},B.shl=B.shiftLeft,B.shiftRight=function(e){return Xe(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?le(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):le(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},B.shr=B.shiftRight,B.shiftRightUnsigned=function(e){return Xe(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?le(this.low>>>e|this.high<<32-e,this.high>>>e,this.unsigned):e===32?le(this.high,0,this.unsigned):le(this.high>>>e-32,0,this.unsigned)},B.shru=B.shiftRightUnsigned,B.shr_u=B.shiftRightUnsigned,B.rotateLeft=function(e){var t;return Xe(e)&&(e=e.toInt()),(e&=63)===0?this:e===32?le(this.high,this.low,this.unsigned):e<32?(t=32-e,le(this.low<<e|this.high>>>t,this.high<<e|this.low>>>t,this.unsigned)):(e-=32,t=32-e,le(this.high<<e|this.low>>>t,this.low<<e|this.high>>>t,this.unsigned))},B.rotl=B.rotateLeft,B.rotateRight=function(e){var t;return Xe(e)&&(e=e.toInt()),(e&=63)===0?this:e===32?le(this.high,this.low,this.unsigned):e<32?(t=32-e,le(this.high<<t|this.low>>>e,this.low<<t|this.high>>>e,this.unsigned)):(e-=32,t=32-e,le(this.low<<t|this.high>>>e,this.high<<t|this.low>>>e,this.unsigned))},B.rotr=B.rotateRight,B.toSigned=function(){return this.unsigned?le(this.low,this.high,!1):this},B.toUnsigned=function(){return this.unsigned?this:le(this.low,this.high,!0)},B.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},B.toBytesLE=function(){var e=this.high,t=this.low;return[t&255,t>>>8&255,t>>>16&255,t>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]},B.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,t>>>24,t>>>16&255,t>>>8&255,t&255]},be.fromBytes=function(e,t,a){return a?be.fromBytesLE(e,t):be.fromBytesBE(e,t)},be.fromBytesLE=function(e,t){return new be(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},be.fromBytesBE=function(e,t){return new be(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)},Vt=be}),_,zn=L(()=>{_={},_.Offset,_.Table,_.SIZEOF_SHORT=2,_.SIZEOF_INT=4,_.FILE_IDENTIFIER_LENGTH=4,_.SIZE_PREFIX_LENGTH=4,_.Encoding={UTF8_BYTES:1,UTF16_STRING:2},_.int32=new Int32Array(2),_.float32=new Float32Array(_.int32.buffer),_.float64=new Float64Array(_.int32.buffer),_.isLittleEndian=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1,_.Long=function(e,t){this.low=e|0,this.high=t|0},_.Long.create=function(e,t){return e==0&&t==0?_.Long.ZERO:new _.Long(e,t)},_.Long.prototype.toFloat64=function(){return(this.low>>>0)+this.high*4294967296},_.Long.prototype.equals=function(e){return this.low==e.low&&this.high==e.high},_.Long.ZERO=new _.Long(0,0),_.Builder=function(e){if(e)var t=e;else var t=1024;this.bb=_.ByteBuffer.allocate(t),this.space=t,this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},_.Builder.prototype.clear=function(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},_.Builder.prototype.forceDefaults=function(e){this.force_defaults=e},_.Builder.prototype.dataBuffer=function(){return this.bb},_.Builder.prototype.asUint8Array=function(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())},_.Builder.prototype.prep=function(e,t){e>this.minalign&&(this.minalign=e);for(var a=~(this.bb.capacity()-this.space+t)+1&e-1;this.space<a+e+t;){var i=this.bb.capacity();this.bb=_.Builder.growByteBuffer(this.bb),this.space+=this.bb.capacity()-i}this.pad(a)},_.Builder.prototype.pad=function(e){for(var t=0;t<e;t++)this.bb.writeInt8(--this.space,0)},_.Builder.prototype.writeInt8=function(e){this.bb.writeInt8(this.space-=1,e)},_.Builder.prototype.writeInt16=function(e){this.bb.writeInt16(this.space-=2,e)},_.Builder.prototype.writeInt32=function(e){this.bb.writeInt32(this.space-=4,e)},_.Builder.prototype.writeInt64=function(e){this.bb.writeInt64(this.space-=8,e)},_.Builder.prototype.writeFloat32=function(e){this.bb.writeFloat32(this.space-=4,e)},_.Builder.prototype.writeFloat64=function(e){this.bb.writeFloat64(this.space-=8,e)},_.Builder.prototype.addInt8=function(e){this.prep(1,0),this.writeInt8(e)},_.Builder.prototype.addInt16=function(e){this.prep(2,0),this.writeInt16(e)},_.Builder.prototype.addInt32=function(e){this.prep(4,0),this.writeInt32(e)},_.Builder.prototype.addInt64=function(e){this.prep(8,0),this.writeInt64(e)},_.Builder.prototype.addFloat32=function(e){this.prep(4,0),this.writeFloat32(e)},_.Builder.prototype.addFloat64=function(e){this.prep(8,0),this.writeFloat64(e)},_.Builder.prototype.addFieldInt8=function(e,t,a){(this.force_defaults||t!=a)&&(this.addInt8(t),this.slot(e))},_.Builder.prototype.addFieldInt16=function(e,t,a){(this.force_defaults||t!=a)&&(this.addInt16(t),this.slot(e))},_.Builder.prototype.addFieldInt32=function(e,t,a){(this.force_defaults||t!=a)&&(this.addInt32(t),this.slot(e))},_.Builder.prototype.addFieldInt64=function(e,t,a){(this.force_defaults||!t.equals(a))&&(this.addInt64(t),this.slot(e))},_.Builder.prototype.addFieldFloat32=function(e,t,a){(this.force_defaults||t!=a)&&(this.addFloat32(t),this.slot(e))},_.Builder.prototype.addFieldFloat64=function(e,t,a){(this.force_defaults||t!=a)&&(this.addFloat64(t),this.slot(e))},_.Builder.prototype.addFieldOffset=function(e,t,a){(this.force_defaults||t!=a)&&(this.addOffset(t),this.slot(e))},_.Builder.prototype.addFieldStruct=function(e,t,a){t!=a&&(this.nested(t),this.slot(e))},_.Builder.prototype.nested=function(e){if(e!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")},_.Builder.prototype.notNested=function(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")},_.Builder.prototype.slot=function(e){this.vtable[e]=this.offset()},_.Builder.prototype.offset=function(){return this.bb.capacity()-this.space},_.Builder.growByteBuffer=function(e){var t=e.capacity();if(t&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");var a=t<<1,i=_.ByteBuffer.allocate(a);return i.setPosition(a-t),i.bytes().set(e.bytes(),a-t),i},_.Builder.prototype.addOffset=function(e){this.prep(_.SIZEOF_INT,0),this.writeInt32(this.offset()-e+_.SIZEOF_INT)},_.Builder.prototype.startObject=function(e){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=e;for(var t=0;t<e;t++)this.vtable[t]=0;this.isNested=!0,this.object_start=this.offset()},_.Builder.prototype.endObject=function(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);for(var e=this.offset(),t=this.vtable_in_use-1;t>=0&&this.vtable[t]==0;t--);for(var a=t+1;t>=0;t--)this.addInt16(this.vtable[t]!=0?e-this.vtable[t]:0);var i=2;this.addInt16(e-this.object_start);var u=(a+i)*_.SIZEOF_SHORT;this.addInt16(u);var n=0,o=this.space;e:for(t=0;t<this.vtables.length;t++){var c=this.bb.capacity()-this.vtables[t];if(u==this.bb.readInt16(c)){for(var p=_.SIZEOF_SHORT;p<u;p+=_.SIZEOF_SHORT)if(this.bb.readInt16(o+p)!=this.bb.readInt16(c+p))continue e;n=this.vtables[t];break}}return n?(this.space=this.bb.capacity()-e,this.bb.writeInt32(this.space,n-e)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-e,this.offset()-e)),this.isNested=!1,e},_.Builder.prototype.finish=function(e,t,a){var i=a?_.SIZE_PREFIX_LENGTH:0;if(t){var u=t;if(this.prep(this.minalign,_.SIZEOF_INT+_.FILE_IDENTIFIER_LENGTH+i),u.length!=_.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+_.FILE_IDENTIFIER_LENGTH);for(var n=_.FILE_IDENTIFIER_LENGTH-1;n>=0;n--)this.writeInt8(u.charCodeAt(n))}this.prep(this.minalign,_.SIZEOF_INT+i),this.addOffset(e),i&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)},_.Builder.prototype.finishSizePrefixed=function(e,t){this.finish(e,t,!0)},_.Builder.prototype.requiredField=function(e,t){var a=this.bb.capacity()-e,i=a-this.bb.readInt32(a),u=this.bb.readInt16(i+t)!=0;if(!u)throw new Error("FlatBuffers: field "+t+" must be set")},_.Builder.prototype.startVector=function(e,t,a){this.notNested(),this.vector_num_elems=t,this.prep(_.SIZEOF_INT,e*t),this.prep(a,e*t)},_.Builder.prototype.endVector=function(){return this.writeInt32(this.vector_num_elems),this.offset()},_.Builder.prototype.createString=function(e){if(e instanceof Uint8Array)var t=e;else for(var t=[],a=0;a<e.length;){var i,u=e.charCodeAt(a++);if(u<55296||u>=56320)i=u;else{var n=e.charCodeAt(a++);i=(u<<10)+n+-56613888}i<128?t.push(i):(i<2048?t.push(i>>6&31|192):(i<65536?t.push(i>>12&15|224):t.push(i>>18&7|240,i>>12&63|128),t.push(i>>6&63|128)),t.push(i&63|128))}this.addInt8(0),this.startVector(1,t.length,1),this.bb.setPosition(this.space-=t.length);for(var a=0,o=this.space,c=this.bb.bytes();a<t.length;a++)c[o++]=t[a];return this.endVector()},_.Builder.prototype.createLong=function(e,t){return _.Long.create(e,t)},_.ByteBuffer=function(e){this.bytes_=e,this.position_=0},_.ByteBuffer.allocate=function(e){return new _.ByteBuffer(new Uint8Array(e))},_.ByteBuffer.prototype.clear=function(){this.position_=0},_.ByteBuffer.prototype.bytes=function(){return this.bytes_},_.ByteBuffer.prototype.position=function(){return this.position_},_.ByteBuffer.prototype.setPosition=function(e){this.position_=e},_.ByteBuffer.prototype.capacity=function(){return this.bytes_.length},_.ByteBuffer.prototype.readInt8=function(e){return this.readUint8(e)<<24>>24},_.ByteBuffer.prototype.readUint8=function(e){return this.bytes_[e]},_.ByteBuffer.prototype.readInt16=function(e){return this.readUint16(e)<<16>>16},_.ByteBuffer.prototype.readUint16=function(e){return this.bytes_[e]|this.bytes_[e+1]<<8},_.ByteBuffer.prototype.readInt32=function(e){return this.bytes_[e]|this.bytes_[e+1]<<8|this.bytes_[e+2]<<16|this.bytes_[e+3]<<24},_.ByteBuffer.prototype.readUint32=function(e){return this.readInt32(e)>>>0},_.ByteBuffer.prototype.readInt64=function(e){return new _.Long(this.readInt32(e),this.readInt32(e+4))},_.ByteBuffer.prototype.readUint64=function(e){return new _.Long(this.readUint32(e),this.readUint32(e+4))},_.ByteBuffer.prototype.readFloat32=function(e){return _.int32[0]=this.readInt32(e),_.float32[0]},_.ByteBuffer.prototype.readFloat64=function(e){return _.int32[_.isLittleEndian?0:1]=this.readInt32(e),_.int32[_.isLittleEndian?1:0]=this.readInt32(e+4),_.float64[0]},_.ByteBuffer.prototype.writeInt8=function(e,t){this.bytes_[e]=t},_.ByteBuffer.prototype.writeUint8=function(e,t){this.bytes_[e]=t},_.ByteBuffer.prototype.writeInt16=function(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8},_.ByteBuffer.prototype.writeUint16=function(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8},_.ByteBuffer.prototype.writeInt32=function(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8,this.bytes_[e+2]=t>>16,this.bytes_[e+3]=t>>24},_.ByteBuffer.prototype.writeUint32=function(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8,this.bytes_[e+2]=t>>16,this.bytes_[e+3]=t>>24},_.ByteBuffer.prototype.writeInt64=function(e,t){this.writeInt32(e,t.low),this.writeInt32(e+4,t.high)},_.ByteBuffer.prototype.writeUint64=function(e,t){this.writeUint32(e,t.low),this.writeUint32(e+4,t.high)},_.ByteBuffer.prototype.writeFloat32=function(e,t){_.float32[0]=t,this.writeInt32(e,_.int32[0])},_.ByteBuffer.prototype.writeFloat64=function(e,t){_.float64[0]=t,this.writeInt32(e,_.int32[_.isLittleEndian?0:1]),this.writeInt32(e+4,_.int32[_.isLittleEndian?1:0])},_.ByteBuffer.prototype.getBufferIdentifier=function(){if(this.bytes_.length<this.position_+_.SIZEOF_INT+_.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");for(var e="",t=0;t<_.FILE_IDENTIFIER_LENGTH;t++)e+=String.fromCharCode(this.readInt8(this.position_+_.SIZEOF_INT+t));return e},_.ByteBuffer.prototype.__offset=function(e,t){var a=e-this.readInt32(e);return t<this.readInt16(a)?this.readInt16(a+t):0},_.ByteBuffer.prototype.__union=function(e,t){return e.bb_pos=t+this.readInt32(t),e.bb=this,e},_.ByteBuffer.prototype.__string=function(e,t){e+=this.readInt32(e);var a=this.readInt32(e),i="",u=0;if(e+=_.SIZEOF_INT,t===_.Encoding.UTF8_BYTES)return this.bytes_.subarray(e,e+a);for(;u<a;){var n,o=this.readUint8(e+u++);if(o<192)n=o;else{var c=this.readUint8(e+u++);if(o<224)n=(o&31)<<6|c&63;else{var p=this.readUint8(e+u++);if(o<240)n=(o&15)<<12|(c&63)<<6|p&63;else{var r=this.readUint8(e+u++);n=(o&7)<<18|(c&63)<<12|(p&63)<<6|r&63}}}n<65536?i+=String.fromCharCode(n):(n-=65536,i+=String.fromCharCode((n>>10)+55296,(n&1023)+56320))}return i},_.ByteBuffer.prototype.__indirect=function(e){return e+this.readInt32(e)},_.ByteBuffer.prototype.__vector=function(e){return e+this.readInt32(e)+_.SIZEOF_INT},_.ByteBuffer.prototype.__vector_len=function(e){return this.readInt32(e+this.readInt32(e))},_.ByteBuffer.prototype.__has_identifier=function(e){if(e.length!=_.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+_.FILE_IDENTIFIER_LENGTH);for(var t=0;t<_.FILE_IDENTIFIER_LENGTH;t++)if(e.charCodeAt(t)!=this.readInt8(this.position_+_.SIZEOF_INT+t))return!1;return!0},_.ByteBuffer.prototype.createLong=function(e,t){return _.Long.create(e,t)}}),V,tn=L(()=>{zn(),(e=>{(t=>{(a=>{(i=>(i[i.UNDEFINED=0]="UNDEFINED",i[i.FLOAT=1]="FLOAT",i[i.INT=2]="INT",i[i.STRING=3]="STRING",i[i.TENSOR=4]="TENSOR",i[i.GRAPH=5]="GRAPH",i[i.FLOATS=6]="FLOATS",i[i.INTS=7]="INTS",i[i.STRINGS=8]="STRINGS",i[i.TENSORS=9]="TENSORS",i[i.GRAPHS=10]="GRAPHS",i[i.SPARSE_TENSOR=11]="SPARSE_TENSOR",i[i.SPARSE_TENSORS=12]="SPARSE_TENSORS"))(a.AttributeType||(a.AttributeType={}))})(t.fbs||(t.fbs={}))})(e.experimental||(e.experimental={}))})(V||(V={})),(e=>{(t=>{(a=>{(i=>(i[i.UNKNOWN=0]="UNKNOWN",i[i.VALUE=1]="VALUE",i[i.PARAM=2]="PARAM"))(a.DimensionValueType||(a.DimensionValueType={}))})(t.fbs||(t.fbs={}))})(e.experimental||(e.experimental={}))})(V||(V={})),(e=>{(t=>{(a=>{(i=>(i[i.UNDEFINED=0]="UNDEFINED",i[i.FLOAT=1]="FLOAT",i[i.UINT8=2]="UINT8",i[i.INT8=3]="INT8",i[i.UINT16=4]="UINT16",i[i.INT16=5]="INT16",i[i.INT32=6]="INT32",i[i.INT64=7]="INT64",i[i.STRING=8]="STRING",i[i.BOOL=9]="BOOL",i[i.FLOAT16=10]="FLOAT16",i[i.DOUBLE=11]="DOUBLE",i[i.UINT32=12]="UINT32",i[i.UINT64=13]="UINT64",i[i.COMPLEX64=14]="COMPLEX64",i[i.COMPLEX128=15]="COMPLEX128",i[i.BFLOAT16=16]="BFLOAT16",i[i.FLOAT8E4M3FN=17]="FLOAT8E4M3FN",i[i.FLOAT8E4M3FNUZ=18]="FLOAT8E4M3FNUZ",i[i.FLOAT8E5M2=19]="FLOAT8E5M2",i[i.FLOAT8E5M2FNUZ=20]="FLOAT8E5M2FNUZ"))(a.TensorDataType||(a.TensorDataType={}))})(t.fbs||(t.fbs={}))})(e.experimental||(e.experimental={}))})(V||(V={})),(e=>{(t=>{(a=>{(i=>(i[i.Primitive=0]="Primitive",i[i.Fused=1]="Fused"))(a.NodeType||(a.NodeType={}))})(t.fbs||(t.fbs={}))})(e.experimental||(e.experimental={}))})(V||(V={})),(e=>{(t=>{(a=>{(i=>(i[i.NONE=0]="NONE",i[i.tensor_type=1]="tensor_type",i[i.sequence_type=2]="sequence_type",i[i.map_type=3]="map_type"))(a.TypeInfoValue||(a.TypeInfoValue={}))})(t.fbs||(t.fbs={}))})(e.experimental||(e.experimental={}))})(V||(V={})),(e=>{(t=>{(a=>{class i{constructor(){this.bb=null,this.bb_pos=0}__init(n,o){return this.bb_pos=n,this.bb=o,this}static getRootAsShape(n,o){return(o||new i).__init(n.readInt32(n.position())+n.position(),n)}static getSizePrefixedRootAsShape(n,o){return n.setPosition(n.position()+_.SIZE_PREFIX_LENGTH),(o||new i).__init(n.readInt32(n.position())+n.position(),n)}dim(n,o){let c=this.bb.__offset(this.bb_pos,4);return c?(o||new e.experimental.fbs.Dimension).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+c)+n*4),this.bb):null}dimLength(){let n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__vector_len(this.bb_pos+n):0}static startShape(n){n.startObject(1)}static addDim(n,o){n.addFieldOffset(0,o,0)}static createDimVector(n,o){n.startVector(4,o.length,4);for(let c=o.length-1;c>=0;c--)n.addOffset(o[c]);return n.endVector()}static startDimVector(n,o){n.startVector(4,o,4)}static endShape(n){return n.endObject()}static createShape(n,o){return i.startShape(n),i.addDim(n,o),i.endShape(n)}}a.Shape=i})(t.fbs||(t.fbs={}))})(e.experimental||(e.experimental={}))})(V||(V={})),(e=>{(t=>{(a=>{class i{constructor(){this.bb=null,this.bb_pos=0}__init(n,o){return this.bb_pos=n,this.bb=o,this}static getRootAsDimension(n,o){return(o||new i).__init(n.readInt32(n.position())+n.position(),n)}static getSizePrefixedRootAsDimension(n,o){return n.setPosition(n.position()+_.SIZE_PREFIX_LENGTH),(o||new i).__init(n.readInt32(n.position())+n.position(),n)}value(n){let o=this.bb.__offset(this.bb_pos,4);return o?(n||new e.experimental.fbs.DimensionValue).__init(this.bb.__indirect(this.bb_pos+o),this.bb):null}denotation(n){let o=this.bb.__offset(this.bb_pos,6);return o?this.bb.__string(this.bb_pos+o,n):null}static startDimension(n){n.startObject(2)}static addValue(n,o){n.addFieldOffset(0,o,0)}static addDenotation(n,o){n.addFieldOffset(1,o,0)}static endDimension(n){return n.endObject()}static createDimension(n,o,c){return i.startDimension(n),i.addValue(n,o),i.addDenotation(n,c),i.endDimension(n)}}a.Dimension=i})(t.fbs||(t.fbs={}))})(e.experimental||(e.experimental={}))})(V||(V={})),(e=>{(t=>{(a=>{class i{constructor(){this.bb=null,this.bb_pos=0}__init(n,o){return this.bb_pos=n,this.bb=o,this}static getRootAsDimensionValue(n,o){return(o||new i).__init(n.readInt32(n.position())+n.position(),n)}static getSizePrefixedRootAsDimensionValue(n,o){return n.setPosition(n.position()+_.SIZE_PREFIX_LENGTH),(o||new i).__init(n.readInt32(n.position())+n.position(),n)}dimType(){let n=this.bb.__offset(this.bb_pos,4);return n?this.bb.readInt8(this.bb_pos+n):0}dimValue(){let n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readInt64(this.bb_pos+n):this.bb.createLong(0,0)}dimParam(n){let o=this.bb.__offset(this.bb_pos,8);return o?this.bb.__string(this.bb_pos+o,n):null}static startDimensionValue(n){n.startObject(3)}static addDimType(n,o){n.addFieldInt8(0,o,0)}static addDimValue(n,o){n.addFieldInt64(1,o,n.createLong(0,0))}static addDimParam(n,o){n.addFieldOffset(2,o,0)}static endDimensionValue(n){return n.endObject()}static createDimensionValue(n,o,c,p){return i.startDimensionValue(n),i.addDimType(n,o),i.addDimValue(n,c),i.addDimParam(n,p),i.endDimensionValue(n)}}a.DimensionValue=i})(t.fbs||(t.fbs={}))})(e.experimental||(e.experimental={}))})(V||(V={})),(e=>{(t=>{(a=>{class i{constructor(){this.bb=null,this.bb_pos=0}__init(n,o){return this.bb_pos=n,this.bb=o,this}static getRootAsTensorTypeAndShape(n,o){return(o||new i).__init(n.readInt32(n.position())+n.position(),n)}static getSizePrefixedRootAsTensorTypeAndShape(n,o){return n.setPosition(n.position()+_.SIZE_PREFIX_LENGTH),(o||new i).__init(n.readInt32(n.position())+n.position(),n)}elemType(){let n=this.bb.__offset(this.bb_pos,4);return n?this.bb.readInt32(this.bb_pos+n):0}shape(n){let o=this.bb.__offset(this.bb_pos,6);return o?(n||new e.experimental.fbs.Shape).__init(this.bb.__indirect(this.bb_pos+o),this.bb):null}static startTensorTypeAndShape(n){n.startObject(2)}static addElemType(n,o){n.addFieldInt32(0,o,0)}static addShape(n,o){n.addFieldOffset(1,o,0)}static endTensorTypeAndShape(n){return n.endObject()}static createTensorTypeAndShape(n,o,c){return i.startTensorTypeAndShape(n),i.addElemType(n,o),i.addShape(n,c),i.endTensorTypeAndShape(n)}}a.TensorTypeAndShape=i})(t.fbs||(t.fbs={}))})(e.experimental||(e.experimental={}))})(V||(V={})),(e=>{(t=>{(a=>{class i{constructor(){this.bb=null,this.bb_pos=0}__init(n,o){return this.bb_pos=n,this.bb=o,this}static getRootAsMapType(n,o){return(o||new i).__init(n.readInt32(n.position())+n.position(),n)}static getSizePrefixedRootAsMapType(n,o){return n.setPosition(n.position()+_.SIZE_PREFIX_LENGTH),(o||new i).__init(n.readInt32(n.position())+n.position(),n)}keyType(){let n=this.bb.__offset(this.bb_pos,4);return n?this.bb.readInt32(this.bb_pos+n):0}valueType(n){let o=this.bb.__offset(this.bb_pos,6);return o?(n||new e.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+o),this.bb):null}static startMapType(n){n.startObject(2)}static addKeyType(n,o){n.addFieldInt32(0,o,0)}static addValueType(n,o){n.addFieldOffset(1,o,0)}static endMapType(n){return n.endObject()}static createMapType(n,o,c){return i.startMapType(n),i.addKeyType(n,o),i.addValueType(n,c),i.endMapType(n)}}a.MapType=i})(t.fbs||(t.fbs={}))})(e.experimental||(e.experimental={}))})(V||(V={})),(e=>{(t=>{(a=>{class i{constructor(){this.bb=null,this.bb_pos=0}__init(n,o){return this.bb_pos=n,this.bb=o,this}static getRootAsSequenceType(n,o){return(o||new i).__init(n.readInt32(n.position())+n.position(),n)}static getSizePrefixedRootAsSequenceType(n,o){return n.setPosition(n.position()+_.SIZE_PREFIX_LENGTH),(o||new i).__init(n.readInt32(n.position())+n.position(),n)}elemType(n){let o=this.bb.__offset(this.bb_pos,4);return o?(n||new e.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+o),this.bb):null}static startSequenceType(n){n.startObject(1)}static addElemType(n,o){n.addFieldOffset(0,o,0)}static endSequenceType(n){return n.endObject()}static createSequenceType(n,o){return i.startSequenceType(n),i.addElemType(n,o),i.endSequenceType(n)}}a.SequenceType=i})(t.fbs||(t.fbs={}))})(e.experimental||(e.experimental={}))})(V||(V={})),(e=>{(t=>{(a=>{class i{constructor(){this.bb=null,this.bb_pos=0}__init(n,o){return this.bb_pos=n,this.bb=o,this}nodeIndex(){return this.bb.readUint32(this.bb_pos)}srcArgIndex(){return this.bb.readInt32(this.bb_pos+4)}dstArgIndex(){return this.bb.readInt32(this.bb_pos+8)}static createEdgeEnd(n,o,c,p){return n.prep(4,12),n.writeInt32(p),n.writeInt32(c),n.writeInt32(o),n.offset()}}a.EdgeEnd=i})(t.fbs||(t.fbs={}))})(e.experimental||(e.experimental={}))})(V||(V={})),(e=>{(t=>{(a=>{class i{constructor(){this.bb=null,this.bb_pos=0}__init(n,o){return this.bb_pos=n,this.bb=o,this}static getRootAsNodeEdge(n,o){return(o||new i).__init(n.readInt32(n.position())+n.position(),n)}static getSizePrefixedRootAsNodeEdge(n,o){return n.setPosition(n.position()+_.SIZE_PREFIX_LENGTH),(o||new i).__init(n.readInt32(n.position())+n.position(),n)}nodeIndex(){let n=this.bb.__offset(this.bb_pos,4);return n?this.bb.readUint32(this.bb_pos+n):0}inputEdges(n,o){let c=this.bb.__offset(this.bb_pos,6);return c?(o||new e.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+c)+n*12,this.bb):null}inputEdgesLength(){let n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__vector_len(this.bb_pos+n):0}outputEdges(n,o){let c=this.bb.__offset(this.bb_pos,8);return c?(o||new e.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+c)+n*12,this.bb):null}outputEdgesLength(){let n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__vector_len(this.bb_pos+n):0}static startNodeEdge(n){n.startObject(3)}static addNodeIndex(n,o){n.addFieldInt32(0,o,0)}static addInputEdges(n,o){n.addFieldOffset(1,o,0)}static startInputEdgesVector(n,o){n.startVector(12,o,4)}static addOutputEdges(n,o){n.addFieldOffset(2,o,0)}static startOutputEdgesVector(n,o){n.startVector(12,o,4)}static endNodeEdge(n){return n.endObject()}static createNodeEdge(n,o,c,p){return i.startNodeEdge(n),i.addNodeIndex(n,o),i.addInputEdges(n,c),i.addOutputEdges(n,p),i.endNodeEdge(n)}}a.NodeEdge=i})(t.fbs||(t.fbs={}))})(e.experimental||(e.experimental={}))})(V||(V={})),(e=>{(t=>{(a=>{class i{constructor(){this.bb=null,this.bb_pos=0}__init(n,o){return this.bb_pos=n,this.bb=o,this}static getRootAsNode(n,o){return(o||new i).__init(n.readInt32(n.position())+n.position(),n)}static getSizePrefixedRootAsNode(n,o){return n.setPosition(n.position()+_.SIZE_PREFIX_LENGTH),(o||new i).__init(n.readInt32(n.position())+n.position(),n)}name(n){let o=this.bb.__offset(this.bb_pos,4);return o?this.bb.__string(this.bb_pos+o,n):null}docString(n){let o=this.bb.__offset(this.bb_pos,6);return o?this.bb.__string(this.bb_pos+o,n):null}domain(n){let o=this.bb.__offset(this.bb_pos,8);return o?this.bb.__string(this.bb_pos+o,n):null}sinceVersion(){let n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readInt32(this.bb_pos+n):0}index(){let n=this.bb.__offset(this.bb_pos,12);return n?this.bb.readUint32(this.bb_pos+n):0}opType(n){let o=this.bb.__offset(this.bb_pos,14);return o?this.bb.__string(this.bb_pos+o,n):null}type(){let n=this.bb.__offset(this.bb_pos,16);return n?this.bb.readInt32(this.bb_pos+n):0}executionProviderType(n){let o=this.bb.__offset(this.bb_pos,18);return o?this.bb.__string(this.bb_pos+o,n):null}inputs(n,o){let c=this.bb.__offset(this.bb_pos,20);return c?this.bb.__string(this.bb.__vector(this.bb_pos+c)+n*4,o):null}inputsLength(){let n=this.bb.__offset(this.bb_pos,20);return n?this.bb.__vector_len(this.bb_pos+n):0}outputs(n,o){let c=this.bb.__offset(this.bb_pos,22);return c?this.bb.__string(this.bb.__vector(this.bb_pos+c)+n*4,o):null}outputsLength(){let n=this.bb.__offset(this.bb_pos,22);return n?this.bb.__vector_len(this.bb_pos+n):0}attributes(n,o){let c=this.bb.__offset(this.bb_pos,24);return c?(o||new e.experimental.fbs.Attribute).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+c)+n*4),this.bb):null}attributesLength(){let n=this.bb.__offset(this.bb_pos,24);return n?this.bb.__vector_len(this.bb_pos+n):0}inputArgCounts(n){let o=this.bb.__offset(this.bb_pos,26);return o?this.bb.readInt32(this.bb.__vector(this.bb_pos+o)+n*4):0}inputArgCountsLength(){let n=this.bb.__offset(this.bb_pos,26);return n?this.bb.__vector_len(this.bb_pos+n):0}inputArgCountsArray(){let n=this.bb.__offset(this.bb_pos,26);return n?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+n),this.bb.__vector_len(this.bb_pos+n)):null}implicitInputs(n,o){let c=this.bb.__offset(this.bb_pos,28);return c?this.bb.__string(this.bb.__vector(this.bb_pos+c)+n*4,o):null}implicitInputsLength(){let n=this.bb.__offset(this.bb_pos,28);return n?this.bb.__vector_len(this.bb_pos+n):0}static startNode(n){n.startObject(13)}static addName(n,o){n.addFieldOffset(0,o,0)}static addDocString(n,o){n.addFieldOffset(1,o,0)}static addDomain(n,o){n.addFieldOffset(2,o,0)}static addSinceVersion(n,o){n.addFieldInt32(3,o,0)}static addIndex(n,o){n.addFieldInt32(4,o,0)}static addOpType(n,o){n.addFieldOffset(5,o,0)}static addType(n,o){n.addFieldInt32(6,o,0)}static addExecutionProviderType(n,o){n.addFieldOffset(7,o,0)}static addInputs(n,o){n.addFieldOffset(8,o,0)}static createInputsVector(n,o){n.startVector(4,o.length,4);for(let c=o.length-1;c>=0;c--)n.addOffset(o[c]);return n.endVector()}static startInputsVector(n,o){n.startVector(4,o,4)}static addOutputs(n,o){n.addFieldOffset(9,o,0)}static createOutputsVector(n,o){n.startVector(4,o.length,4);for(let c=o.length-1;c>=0;c--)n.addOffset(o[c]);return n.endVector()}static startOutputsVector(n,o){n.startVector(4,o,4)}static addAttributes(n,o){n.addFieldOffset(10,o,0)}static createAttributesVector(n,o){n.startVector(4,o.length,4);for(let c=o.length-1;c>=0;c--)n.addOffset(o[c]);return n.endVector()}static startAttributesVector(n,o){n.startVector(4,o,4)}static addInputArgCounts(n,o){n.addFieldOffset(11,o,0)}static createInputArgCountsVector(n,o){n.startVector(4,o.length,4);for(let c=o.length-1;c>=0;c--)n.addInt32(o[c]);return n.endVector()}static startInputArgCountsVector(n,o){n.startVector(4,o,4)}static addImplicitInputs(n,o){n.addFieldOffset(12,o,0)}static createImplicitInputsVector(n,o){n.startVector(4,o.length,4);for(let c=o.length-1;c>=0;c--)n.addOffset(o[c]);return n.endVector()}static startImplicitInputsVector(n,o){n.startVector(4,o,4)}static endNode(n){return n.endObject()}static createNode(n,o,c,p,r,l,s,h,d,m,b,v,O,T){return i.startNode(n),i.addName(n,o),i.addDocString(n,c),i.addDomain(n,p),i.addSinceVersion(n,r),i.addIndex(n,l),i.addOpType(n,s),i.addType(n,h),i.addExecutionProviderType(n,d),i.addInputs(n,m),i.addOutputs(n,b),i.addAttributes(n,v),i.addInputArgCounts(n,O),i.addImplicitInputs(n,T),i.endNode(n)}}a.Node=i})(t.fbs||(t.fbs={}))})(e.experimental||(e.experimental={}))})(V||(V={})),(e=>{(t=>{(a=>{class i{constructor(){this.bb=null,this.bb_pos=0}__init(n,o){return this.bb_pos=n,this.bb=o,this}static getRootAsValueInfo(n,o){return(o||new i).__init(n.readInt32(n.position())+n.position(),n)}static getSizePrefixedRootAsValueInfo(n,o){return n.setPosition(n.position()+_.SIZE_PREFIX_LENGTH),(o||new i).__init(n.readInt32(n.position())+n.position(),n)}name(n){let o=this.bb.__offset(this.bb_pos,4);return o?this.bb.__string(this.bb_pos+o,n):null}docString(n){let o=this.bb.__offset(this.bb_pos,6);return o?this.bb.__string(this.bb_pos+o,n):null}type(n){let o=this.bb.__offset(this.bb_pos,8);return o?(n||new e.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+o),this.bb):null}static startValueInfo(n){n.startObject(3)}static addName(n,o){n.addFieldOffset(0,o,0)}static addDocString(n,o){n.addFieldOffset(1,o,0)}static addType(n,o){n.addFieldOffset(2,o,0)}static endValueInfo(n){return n.endObject()}static createValueInfo(n,o,c,p){return i.startValueInfo(n),i.addName(n,o),i.addDocString(n,c),i.addType(n,p),i.endValueInfo(n)}}a.ValueInfo=i})(t.fbs||(t.fbs={}))})(e.experimental||(e.experimental={}))})(V||(V={})),(e=>{(t=>{(a=>{class i{constructor(){this.bb=null,this.bb_pos=0}__init(n,o){return this.bb_pos=n,this.bb=o,this}static getRootAsTypeInfo(n,o){return(o||new i).__init(n.readInt32(n.position())+n.position(),n)}static getSizePrefixedRootAsTypeInfo(n,o){return n.setPosition(n.position()+_.SIZE_PREFIX_LENGTH),(o||new i).__init(n.readInt32(n.position())+n.position(),n)}denotation(n){let o=this.bb.__offset(this.bb_pos,4);return o?this.bb.__string(this.bb_pos+o,n):null}valueType(){let n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readUint8(this.bb_pos+n):0}value(n){let o=this.bb.__offset(this.bb_pos,8);return o?this.bb.__union(n,this.bb_pos+o):null}static startTypeInfo(n){n.startObject(3)}static addDenotation(n,o){n.addFieldOffset(0,o,0)}static addValueType(n,o){n.addFieldInt8(1,o,0)}static addValue(n,o){n.addFieldOffset(2,o,0)}static endTypeInfo(n){return n.endObject()}static createTypeInfo(n,o,c,p){return i.startTypeInfo(n),i.addDenotation(n,o),i.addValueType(n,c),i.addValue(n,p),i.endTypeInfo(n)}}a.TypeInfo=i})(t.fbs||(t.fbs={}))})(e.experimental||(e.experimental={}))})(V||(V={})),(e=>{(t=>{(a=>{class i{constructor(){this.bb=null,this.bb_pos=0}__init(n,o){return this.bb_pos=n,this.bb=o,this}static getRootAsOperatorSetId(n,o){return(o||new i).__init(n.readInt32(n.position())+n.position(),n)}static getSizePrefixedRootAsOperatorSetId(n,o){return n.setPosition(n.position()+_.SIZE_PREFIX_LENGTH),(o||new i).__init(n.readInt32(n.position())+n.position(),n)}domain(n){let o=this.bb.__offset(this.bb_pos,4);return o?this.bb.__string(this.bb_pos+o,n):null}version(){let n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readInt64(this.bb_pos+n):this.bb.createLong(0,0)}static startOperatorSetId(n){n.startObject(2)}static addDomain(n,o){n.addFieldOffset(0,o,0)}static addVersion(n,o){n.addFieldInt64(1,o,n.createLong(0,0))}static endOperatorSetId(n){return n.endObject()}static createOperatorSetId(n,o,c){return i.startOperatorSetId(n),i.addDomain(n,o),i.addVersion(n,c),i.endOperatorSetId(n)}}a.OperatorSetId=i})(t.fbs||(t.fbs={}))})(e.experimental||(e.experimental={}))})(V||(V={})),(e=>{(t=>{(a=>{class i{constructor(){this.bb=null,this.bb_pos=0}__init(n,o){return this.bb_pos=n,this.bb=o,this}static getRootAsTensor(n,o){return(o||new i).__init(n.readInt32(n.position())+n.position(),n)}static getSizePrefixedRootAsTensor(n,o){return n.setPosition(n.position()+_.SIZE_PREFIX_LENGTH),(o||new i).__init(n.readInt32(n.position())+n.position(),n)}name(n){let o=this.bb.__offset(this.bb_pos,4);return o?this.bb.__string(this.bb_pos+o,n):null}docString(n){let o=this.bb.__offset(this.bb_pos,6);return o?this.bb.__string(this.bb_pos+o,n):null}dims(n){let o=this.bb.__offset(this.bb_pos,8);return o?this.bb.readInt64(this.bb.__vector(this.bb_pos+o)+n*8):this.bb.createLong(0,0)}dimsLength(){let n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__vector_len(this.bb_pos+n):0}dataType(){let n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readInt32(this.bb_pos+n):0}rawData(n){let o=this.bb.__offset(this.bb_pos,12);return o?this.bb.readUint8(this.bb.__vector(this.bb_pos+o)+n):0}rawDataLength(){let n=this.bb.__offset(this.bb_pos,12);return n?this.bb.__vector_len(this.bb_pos+n):0}rawDataArray(){let n=this.bb.__offset(this.bb_pos,12);return n?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+n),this.bb.__vector_len(this.bb_pos+n)):null}stringData(n,o){let c=this.bb.__offset(this.bb_pos,14);return c?this.bb.__string(this.bb.__vector(this.bb_pos+c)+n*4,o):null}stringDataLength(){let n=this.bb.__offset(this.bb_pos,14);return n?this.bb.__vector_len(this.bb_pos+n):0}static startTensor(n){n.startObject(6)}static addName(n,o){n.addFieldOffset(0,o,0)}static addDocString(n,o){n.addFieldOffset(1,o,0)}static addDims(n,o){n.addFieldOffset(2,o,0)}static createDimsVector(n,o){n.startVector(8,o.length,8);for(let c=o.length-1;c>=0;c--)n.addInt64(o[c]);return n.endVector()}static startDimsVector(n,o){n.startVector(8,o,8)}static addDataType(n,o){n.addFieldInt32(3,o,0)}static addRawData(n,o){n.addFieldOffset(4,o,0)}static createRawDataVector(n,o){n.startVector(1,o.length,1);for(let c=o.length-1;c>=0;c--)n.addInt8(o[c]);return n.endVector()}static startRawDataVector(n,o){n.startVector(1,o,1)}static addStringData(n,o){n.addFieldOffset(5,o,0)}static createStringDataVector(n,o){n.startVector(4,o.length,4);for(let c=o.length-1;c>=0;c--)n.addOffset(o[c]);return n.endVector()}static startStringDataVector(n,o){n.startVector(4,o,4)}static endTensor(n){return n.endObject()}static createTensor(n,o,c,p,r,l,s){return i.startTensor(n),i.addName(n,o),i.addDocString(n,c),i.addDims(n,p),i.addDataType(n,r),i.addRawData(n,l),i.addStringData(n,s),i.endTensor(n)}}a.Tensor=i})(t.fbs||(t.fbs={}))})(e.experimental||(e.experimental={}))})(V||(V={})),(e=>{(t=>{(a=>{class i{constructor(){this.bb=null,this.bb_pos=0}__init(n,o){return this.bb_pos=n,this.bb=o,this}static getRootAsSparseTensor(n,o){return(o||new i).__init(n.readInt32(n.position())+n.position(),n)}static getSizePrefixedRootAsSparseTensor(n,o){return n.setPosition(n.position()+_.SIZE_PREFIX_LENGTH),(o||new i).__init(n.readInt32(n.position())+n.position(),n)}values(n){let o=this.bb.__offset(this.bb_pos,4);return o?(n||new e.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+o),this.bb):null}indices(n){let o=this.bb.__offset(this.bb_pos,6);return o?(n||new e.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+o),this.bb):null}dims(n){let o=this.bb.__offset(this.bb_pos,8);return o?this.bb.readInt64(this.bb.__vector(this.bb_pos+o)+n*8):this.bb.createLong(0,0)}dimsLength(){let n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__vector_len(this.bb_pos+n):0}static startSparseTensor(n){n.startObject(3)}static addValues(n,o){n.addFieldOffset(0,o,0)}static addIndices(n,o){n.addFieldOffset(1,o,0)}static addDims(n,o){n.addFieldOffset(2,o,0)}static createDimsVector(n,o){n.startVector(8,o.length,8);for(let c=o.length-1;c>=0;c--)n.addInt64(o[c]);return n.endVector()}static startDimsVector(n,o){n.startVector(8,o,8)}static endSparseTensor(n){return n.endObject()}static createSparseTensor(n,o,c,p){return i.startSparseTensor(n),i.addValues(n,o),i.addIndices(n,c),i.addDims(n,p),i.endSparseTensor(n)}}a.SparseTensor=i})(t.fbs||(t.fbs={}))})(e.experimental||(e.experimental={}))})(V||(V={})),(e=>{(t=>{(a=>{class i{constructor(){this.bb=null,this.bb_pos=0}__init(n,o){return this.bb_pos=n,this.bb=o,this}static getRootAsAttribute(n,o){return(o||new i).__init(n.readInt32(n.position())+n.position(),n)}static getSizePrefixedRootAsAttribute(n,o){return n.setPosition(n.position()+_.SIZE_PREFIX_LENGTH),(o||new i).__init(n.readInt32(n.position())+n.position(),n)}name(n){let o=this.bb.__offset(this.bb_pos,4);return o?this.bb.__string(this.bb_pos+o,n):null}docString(n){let o=this.bb.__offset(this.bb_pos,6);return o?this.bb.__string(this.bb_pos+o,n):null}type(){let n=this.bb.__offset(this.bb_pos,8);return n?this.bb.readInt32(this.bb_pos+n):0}f(){let n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readFloat32(this.bb_pos+n):0}i(){let n=this.bb.__offset(this.bb_pos,12);return n?this.bb.readInt64(this.bb_pos+n):this.bb.createLong(0,0)}s(n){let o=this.bb.__offset(this.bb_pos,14);return o?this.bb.__string(this.bb_pos+o,n):null}t(n){let o=this.bb.__offset(this.bb_pos,16);return o?(n||new e.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+o),this.bb):null}g(n){let o=this.bb.__offset(this.bb_pos,18);return o?(n||new e.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+o),this.bb):null}floats(n){let o=this.bb.__offset(this.bb_pos,20);return o?this.bb.readFloat32(this.bb.__vector(this.bb_pos+o)+n*4):0}floatsLength(){let n=this.bb.__offset(this.bb_pos,20);return n?this.bb.__vector_len(this.bb_pos+n):0}floatsArray(){let n=this.bb.__offset(this.bb_pos,20);return n?new Float32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+n),this.bb.__vector_len(this.bb_pos+n)):null}ints(n){let o=this.bb.__offset(this.bb_pos,22);return o?this.bb.readInt64(this.bb.__vector(this.bb_pos+o)+n*8):this.bb.createLong(0,0)}intsLength(){let n=this.bb.__offset(this.bb_pos,22);return n?this.bb.__vector_len(this.bb_pos+n):0}strings(n,o){let c=this.bb.__offset(this.bb_pos,24);return c?this.bb.__string(this.bb.__vector(this.bb_pos+c)+n*4,o):null}stringsLength(){let n=this.bb.__offset(this.bb_pos,24);return n?this.bb.__vector_len(this.bb_pos+n):0}tensors(n,o){let c=this.bb.__offset(this.bb_pos,26);return c?(o||new e.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+c)+n*4),this.bb):null}tensorsLength(){let n=this.bb.__offset(this.bb_pos,26);return n?this.bb.__vector_len(this.bb_pos+n):0}graphs(n,o){let c=this.bb.__offset(this.bb_pos,28);return c?(o||new e.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+c)+n*4),this.bb):null}graphsLength(){let n=this.bb.__offset(this.bb_pos,28);return n?this.bb.__vector_len(this.bb_pos+n):0}static startAttribute(n){n.startObject(13)}static addName(n,o){n.addFieldOffset(0,o,0)}static addDocString(n,o){n.addFieldOffset(1,o,0)}static addType(n,o){n.addFieldInt32(2,o,0)}static addF(n,o){n.addFieldFloat32(3,o,0)}static addI(n,o){n.addFieldInt64(4,o,n.createLong(0,0))}static addS(n,o){n.addFieldOffset(5,o,0)}static addT(n,o){n.addFieldOffset(6,o,0)}static addG(n,o){n.addFieldOffset(7,o,0)}static addFloats(n,o){n.addFieldOffset(8,o,0)}static createFloatsVector(n,o){n.startVector(4,o.length,4);for(let c=o.length-1;c>=0;c--)n.addFloat32(o[c]);return n.endVector()}static startFloatsVector(n,o){n.startVector(4,o,4)}static addInts(n,o){n.addFieldOffset(9,o,0)}static createIntsVector(n,o){n.startVector(8,o.length,8);for(let c=o.length-1;c>=0;c--)n.addInt64(o[c]);return n.endVector()}static startIntsVector(n,o){n.startVector(8,o,8)}static addStrings(n,o){n.addFieldOffset(10,o,0)}static createStringsVector(n,o){n.startVector(4,o.length,4);for(let c=o.length-1;c>=0;c--)n.addOffset(o[c]);return n.endVector()}static startStringsVector(n,o){n.startVector(4,o,4)}static addTensors(n,o){n.addFieldOffset(11,o,0)}static createTensorsVector(n,o){n.startVector(4,o.length,4);for(let c=o.length-1;c>=0;c--)n.addOffset(o[c]);return n.endVector()}static startTensorsVector(n,o){n.startVector(4,o,4)}static addGraphs(n,o){n.addFieldOffset(12,o,0)}static createGraphsVector(n,o){n.startVector(4,o.length,4);for(let c=o.length-1;c>=0;c--)n.addOffset(o[c]);return n.endVector()}static startGraphsVector(n,o){n.startVector(4,o,4)}static endAttribute(n){return n.endObject()}static createAttribute(n,o,c,p,r,l,s,h,d,m,b,v,O,T){return i.startAttribute(n),i.addName(n,o),i.addDocString(n,c),i.addType(n,p),i.addF(n,r),i.addI(n,l),i.addS(n,s),i.addT(n,h),i.addG(n,d),i.addFloats(n,m),i.addInts(n,b),i.addStrings(n,v),i.addTensors(n,O),i.addGraphs(n,T),i.endAttribute(n)}}a.Attribute=i})(t.fbs||(t.fbs={}))})(e.experimental||(e.experimental={}))})(V||(V={})),(e=>{(t=>{(a=>{class i{constructor(){this.bb=null,this.bb_pos=0}__init(n,o){return this.bb_pos=n,this.bb=o,this}static getRootAsGraph(n,o){return(o||new i).__init(n.readInt32(n.position())+n.position(),n)}static getSizePrefixedRootAsGraph(n,o){return n.setPosition(n.position()+_.SIZE_PREFIX_LENGTH),(o||new i).__init(n.readInt32(n.position())+n.position(),n)}initializers(n,o){let c=this.bb.__offset(this.bb_pos,4);return c?(o||new e.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+c)+n*4),this.bb):null}initializersLength(){let n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__vector_len(this.bb_pos+n):0}nodeArgs(n,o){let c=this.bb.__offset(this.bb_pos,6);return c?(o||new e.experimental.fbs.ValueInfo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+c)+n*4),this.bb):null}nodeArgsLength(){let n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__vector_len(this.bb_pos+n):0}nodes(n,o){let c=this.bb.__offset(this.bb_pos,8);return c?(o||new e.experimental.fbs.Node).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+c)+n*4),this.bb):null}nodesLength(){let n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__vector_len(this.bb_pos+n):0}maxNodeIndex(){let n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readUint32(this.bb_pos+n):0}nodeEdges(n,o){let c=this.bb.__offset(this.bb_pos,12);return c?(o||new e.experimental.fbs.NodeEdge).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+c)+n*4),this.bb):null}nodeEdgesLength(){let n=this.bb.__offset(this.bb_pos,12);return n?this.bb.__vector_len(this.bb_pos+n):0}inputs(n,o){let c=this.bb.__offset(this.bb_pos,14);return c?this.bb.__string(this.bb.__vector(this.bb_pos+c)+n*4,o):null}inputsLength(){let n=this.bb.__offset(this.bb_pos,14);return n?this.bb.__vector_len(this.bb_pos+n):0}outputs(n,o){let c=this.bb.__offset(this.bb_pos,16);return c?this.bb.__string(this.bb.__vector(this.bb_pos+c)+n*4,o):null}outputsLength(){let n=this.bb.__offset(this.bb_pos,16);return n?this.bb.__vector_len(this.bb_pos+n):0}sparseInitializers(n,o){let c=this.bb.__offset(this.bb_pos,18);return c?(o||new e.experimental.fbs.SparseTensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+c)+n*4),this.bb):null}sparseInitializersLength(){let n=this.bb.__offset(this.bb_pos,18);return n?this.bb.__vector_len(this.bb_pos+n):0}static startGraph(n){n.startObject(8)}static addInitializers(n,o){n.addFieldOffset(0,o,0)}static createInitializersVector(n,o){n.startVector(4,o.length,4);for(let c=o.length-1;c>=0;c--)n.addOffset(o[c]);return n.endVector()}static startInitializersVector(n,o){n.startVector(4,o,4)}static addNodeArgs(n,o){n.addFieldOffset(1,o,0)}static createNodeArgsVector(n,o){n.startVector(4,o.length,4);for(let c=o.length-1;c>=0;c--)n.addOffset(o[c]);return n.endVector()}static startNodeArgsVector(n,o){n.startVector(4,o,4)}static addNodes(n,o){n.addFieldOffset(2,o,0)}static createNodesVector(n,o){n.startVector(4,o.length,4);for(let c=o.length-1;c>=0;c--)n.addOffset(o[c]);return n.endVector()}static startNodesVector(n,o){n.startVector(4,o,4)}static addMaxNodeIndex(n,o){n.addFieldInt32(3,o,0)}static addNodeEdges(n,o){n.addFieldOffset(4,o,0)}static createNodeEdgesVector(n,o){n.startVector(4,o.length,4);for(let c=o.length-1;c>=0;c--)n.addOffset(o[c]);return n.endVector()}static startNodeEdgesVector(n,o){n.startVector(4,o,4)}static addInputs(n,o){n.addFieldOffset(5,o,0)}static createInputsVector(n,o){n.startVector(4,o.length,4);for(let c=o.length-1;c>=0;c--)n.addOffset(o[c]);return n.endVector()}static startInputsVector(n,o){n.startVector(4,o,4)}static addOutputs(n,o){n.addFieldOffset(6,o,0)}static createOutputsVector(n,o){n.startVector(4,o.length,4);for(let c=o.length-1;c>=0;c--)n.addOffset(o[c]);return n.endVector()}static startOutputsVector(n,o){n.startVector(4,o,4)}static addSparseInitializers(n,o){n.addFieldOffset(7,o,0)}static createSparseInitializersVector(n,o){n.startVector(4,o.length,4);for(let c=o.length-1;c>=0;c--)n.addOffset(o[c]);return n.endVector()}static startSparseInitializersVector(n,o){n.startVector(4,o,4)}static endGraph(n){return n.endObject()}static createGraph(n,o,c,p,r,l,s,h,d){return i.startGraph(n),i.addInitializers(n,o),i.addNodeArgs(n,c),i.addNodes(n,p),i.addMaxNodeIndex(n,r),i.addNodeEdges(n,l),i.addInputs(n,s),i.addOutputs(n,h),i.addSparseInitializers(n,d),i.endGraph(n)}}a.Graph=i})(t.fbs||(t.fbs={}))})(e.experimental||(e.experimental={}))})(V||(V={})),(e=>{(t=>{(a=>{class i{constructor(){this.bb=null,this.bb_pos=0}__init(n,o){return this.bb_pos=n,this.bb=o,this}static getRootAsModel(n,o){return(o||new i).__init(n.readInt32(n.position())+n.position(),n)}static getSizePrefixedRootAsModel(n,o){return n.setPosition(n.position()+_.SIZE_PREFIX_LENGTH),(o||new i).__init(n.readInt32(n.position())+n.position(),n)}irVersion(){let n=this.bb.__offset(this.bb_pos,4);return n?this.bb.readInt64(this.bb_pos+n):this.bb.createLong(0,0)}opsetImport(n,o){let c=this.bb.__offset(this.bb_pos,6);return c?(o||new e.experimental.fbs.OperatorSetId).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+c)+n*4),this.bb):null}opsetImportLength(){let n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__vector_len(this.bb_pos+n):0}producerName(n){let o=this.bb.__offset(this.bb_pos,8);return o?this.bb.__string(this.bb_pos+o,n):null}producerVersion(n){let o=this.bb.__offset(this.bb_pos,10);return o?this.bb.__string(this.bb_pos+o,n):null}domain(n){let o=this.bb.__offset(this.bb_pos,12);return o?this.bb.__string(this.bb_pos+o,n):null}modelVersion(){let n=this.bb.__offset(this.bb_pos,14);return n?this.bb.readInt64(this.bb_pos+n):this.bb.createLong(0,0)}docString(n){let o=this.bb.__offset(this.bb_pos,16);return o?this.bb.__string(this.bb_pos+o,n):null}graph(n){let o=this.bb.__offset(this.bb_pos,18);return o?(n||new e.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+o),this.bb):null}graphDocString(n){let o=this.bb.__offset(this.bb_pos,20);return o?this.bb.__string(this.bb_pos+o,n):null}static startModel(n){n.startObject(9)}static addIrVersion(n,o){n.addFieldInt64(0,o,n.createLong(0,0))}static addOpsetImport(n,o){n.addFieldOffset(1,o,0)}static createOpsetImportVector(n,o){n.startVector(4,o.length,4);for(let c=o.length-1;c>=0;c--)n.addOffset(o[c]);return n.endVector()}static startOpsetImportVector(n,o){n.startVector(4,o,4)}static addProducerName(n,o){n.addFieldOffset(2,o,0)}static addProducerVersion(n,o){n.addFieldOffset(3,o,0)}static addDomain(n,o){n.addFieldOffset(4,o,0)}static addModelVersion(n,o){n.addFieldInt64(5,o,n.createLong(0,0))}static addDocString(n,o){n.addFieldOffset(6,o,0)}static addGraph(n,o){n.addFieldOffset(7,o,0)}static addGraphDocString(n,o){n.addFieldOffset(8,o,0)}static endModel(n){return n.endObject()}static createModel(n,o,c,p,r,l,s,h,d,m){return i.startModel(n),i.addIrVersion(n,o),i.addOpsetImport(n,c),i.addProducerName(n,p),i.addProducerVersion(n,r),i.addDomain(n,l),i.addModelVersion(n,s),i.addDocString(n,h),i.addGraph(n,d),i.addGraphDocString(n,m),i.endModel(n)}}a.Model=i})(t.fbs||(t.fbs={}))})(e.experimental||(e.experimental={}))})(V||(V={})),(e=>{(t=>{(a=>{class i{constructor(){this.bb=null,this.bb_pos=0}__init(n,o){return this.bb_pos=n,this.bb=o,this}static getRootAsKernelCreateInfos(n,o){return(o||new i).__init(n.readInt32(n.position())+n.position(),n)}static getSizePrefixedRootAsKernelCreateInfos(n,o){return n.setPosition(n.position()+_.SIZE_PREFIX_LENGTH),(o||new i).__init(n.readInt32(n.position())+n.position(),n)}nodeIndices(n){let o=this.bb.__offset(this.bb_pos,4);return o?this.bb.readUint32(this.bb.__vector(this.bb_pos+o)+n*4):0}nodeIndicesLength(){let n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__vector_len(this.bb_pos+n):0}nodeIndicesArray(){let n=this.bb.__offset(this.bb_pos,4);return n?new Uint32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+n),this.bb.__vector_len(this.bb_pos+n)):null}kernelDefHashes(n){let o=this.bb.__offset(this.bb_pos,6);return o?this.bb.readUint64(this.bb.__vector(this.bb_pos+o)+n*8):this.bb.createLong(0,0)}kernelDefHashesLength(){let n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__vector_len(this.bb_pos+n):0}static startKernelCreateInfos(n){n.startObject(2)}static addNodeIndices(n,o){n.addFieldOffset(0,o,0)}static createNodeIndicesVector(n,o){n.startVector(4,o.length,4);for(let c=o.length-1;c>=0;c--)n.addInt32(o[c]);return n.endVector()}static startNodeIndicesVector(n,o){n.startVector(4,o,4)}static addKernelDefHashes(n,o){n.addFieldOffset(1,o,0)}static createKernelDefHashesVector(n,o){n.startVector(8,o.length,8);for(let c=o.length-1;c>=0;c--)n.addInt64(o[c]);return n.endVector()}static startKernelDefHashesVector(n,o){n.startVector(8,o,8)}static endKernelCreateInfos(n){return n.endObject()}static createKernelCreateInfos(n,o,c){return i.startKernelCreateInfos(n),i.addNodeIndices(n,o),i.addKernelDefHashes(n,c),i.endKernelCreateInfos(n)}}a.KernelCreateInfos=i})(t.fbs||(t.fbs={}))})(e.experimental||(e.experimental={}))})(V||(V={})),(e=>{(t=>{(a=>{class i{constructor(){this.bb=null,this.bb_pos=0}__init(n,o){return this.bb_pos=n,this.bb=o,this}static getRootAsSubGraphSessionState(n,o){return(o||new i).__init(n.readInt32(n.position())+n.position(),n)}static getSizePrefixedRootAsSubGraphSessionState(n,o){return n.setPosition(n.position()+_.SIZE_PREFIX_LENGTH),(o||new i).__init(n.readInt32(n.position())+n.position(),n)}graphId(n){let o=this.bb.__offset(this.bb_pos,4);return o?this.bb.__string(this.bb_pos+o,n):null}sessionState(n){let o=this.bb.__offset(this.bb_pos,6);return o?(n||new e.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+o),this.bb):null}static startSubGraphSessionState(n){n.startObject(2)}static addGraphId(n,o){n.addFieldOffset(0,o,0)}static addSessionState(n,o){n.addFieldOffset(1,o,0)}static endSubGraphSessionState(n){let o=n.endObject();return n.requiredField(o,4),o}static createSubGraphSessionState(n,o,c){return i.startSubGraphSessionState(n),i.addGraphId(n,o),i.addSessionState(n,c),i.endSubGraphSessionState(n)}}a.SubGraphSessionState=i})(t.fbs||(t.fbs={}))})(e.experimental||(e.experimental={}))})(V||(V={})),(e=>{(t=>{(a=>{class i{constructor(){this.bb=null,this.bb_pos=0}__init(n,o){return this.bb_pos=n,this.bb=o,this}static getRootAsSessionState(n,o){return(o||new i).__init(n.readInt32(n.position())+n.position(),n)}static getSizePrefixedRootAsSessionState(n,o){return n.setPosition(n.position()+_.SIZE_PREFIX_LENGTH),(o||new i).__init(n.readInt32(n.position())+n.position(),n)}kernels(n){let o=this.bb.__offset(this.bb_pos,4);return o?(n||new e.experimental.fbs.KernelCreateInfos).__init(this.bb.__indirect(this.bb_pos+o),this.bb):null}subGraphSessionStates(n,o){let c=this.bb.__offset(this.bb_pos,6);return c?(o||new e.experimental.fbs.SubGraphSessionState).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+c)+n*4),this.bb):null}subGraphSessionStatesLength(){let n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__vector_len(this.bb_pos+n):0}static startSessionState(n){n.startObject(2)}static addKernels(n,o){n.addFieldOffset(0,o,0)}static addSubGraphSessionStates(n,o){n.addFieldOffset(1,o,0)}static createSubGraphSessionStatesVector(n,o){n.startVector(4,o.length,4);for(let c=o.length-1;c>=0;c--)n.addOffset(o[c]);return n.endVector()}static startSubGraphSessionStatesVector(n,o){n.startVector(4,o,4)}static endSessionState(n){return n.endObject()}static createSessionState(n,o,c){return i.startSessionState(n),i.addKernels(n,o),i.addSubGraphSessionStates(n,c),i.endSessionState(n)}}a.SessionState=i})(t.fbs||(t.fbs={}))})(e.experimental||(e.experimental={}))})(V||(V={})),(e=>{(t=>{(a=>{class i{constructor(){this.bb=null,this.bb_pos=0}__init(n,o){return this.bb_pos=n,this.bb=o,this}static getRootAsInferenceSession(n,o){return(o||new i).__init(n.readInt32(n.position())+n.position(),n)}static getSizePrefixedRootAsInferenceSession(n,o){return n.setPosition(n.position()+_.SIZE_PREFIX_LENGTH),(o||new i).__init(n.readInt32(n.position())+n.position(),n)}static bufferHasIdentifier(n){return n.__has_identifier("ORTM")}ortVersion(n){let o=this.bb.__offset(this.bb_pos,4);return o?this.bb.__string(this.bb_pos+o,n):null}model(n){let o=this.bb.__offset(this.bb_pos,6);return o?(n||new e.experimental.fbs.Model).__init(this.bb.__indirect(this.bb_pos+o),this.bb):null}sessionState(n){let o=this.bb.__offset(this.bb_pos,8);return o?(n||new e.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+o),this.bb):null}static startInferenceSession(n){n.startObject(3)}static addOrtVersion(n,o){n.addFieldOffset(0,o,0)}static addModel(n,o){n.addFieldOffset(1,o,0)}static addSessionState(n,o){n.addFieldOffset(2,o,0)}static endInferenceSession(n){return n.endObject()}static finishInferenceSessionBuffer(n,o){n.finish(o,"ORTM")}static finishSizePrefixedInferenceSessionBuffer(n,o){n.finish(o,"ORTM",!0)}static createInferenceSession(n,o,c,p){return i.startInferenceSession(n),i.addOrtVersion(n,o),i.addModel(n,c),i.addSessionState(n,p),i.endInferenceSession(n)}}a.InferenceSession=i})(t.fbs||(t.fbs={}))})(e.experimental||(e.experimental={}))})(V||(V={}))}),Bs=me((e,t)=>{t.exports=a;function a(i,u){for(var n=new Array(arguments.length-1),o=0,c=2,p=!0;c<arguments.length;)n[o++]=arguments[c++];return new Promise(function(r,l){n[o]=function(s){if(p)if(p=!1,s)l(s);else{for(var h=new Array(arguments.length-1),d=0;d<h.length;)h[d++]=arguments[d];r.apply(null,h)}};try{i.apply(u||null,n)}catch(s){p&&(p=!1,l(s))}})}}),Gs=me(e=>{var t=e;t.length=function(o){var c=o.length;if(!c)return 0;for(var p=0;--c%4>1&&o.charAt(c)==="=";)++p;return Math.ceil(o.length*3)/4-p};var a=new Array(64),i=new Array(123);for(u=0;u<64;)i[a[u]=u<26?u+65:u<52?u+71:u<62?u-4:u-59|43]=u++;var u;t.encode=function(o,c,p){for(var r=null,l=[],s=0,h=0,d;c<p;){var m=o[c++];switch(h){case 0:l[s++]=a[m>>2],d=(m&3)<<4,h=1;break;case 1:l[s++]=a[d|m>>4],d=(m&15)<<2,h=2;break;case 2:l[s++]=a[d|m>>6],l[s++]=a[m&63],h=0;break}s>8191&&((r||(r=[])).push(String.fromCharCode.apply(String,l)),s=0)}return h&&(l[s++]=a[d],l[s++]=61,h===1&&(l[s++]=61)),r?(s&&r.push(String.fromCharCode.apply(String,l.slice(0,s))),r.join("")):String.fromCharCode.apply(String,l.slice(0,s))};var n="invalid encoding";t.decode=function(o,c,p){for(var r=p,l=0,s,h=0;h<o.length;){var d=o.charCodeAt(h++);if(d===61&&l>1)break;if((d=i[d])===void 0)throw Error(n);switch(l){case 0:s=d,l=1;break;case 1:c[p++]=s<<2|(d&48)>>4,s=d,l=2;break;case 2:c[p++]=(s&15)<<4|(d&60)>>2,s=d,l=3;break;case 3:c[p++]=(s&3)<<6|d,l=0;break}}if(l===1)throw Error(n);return p-r},t.test=function(o){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(o)}}),zs=me((e,t)=>{t.exports=a;function a(){this._listeners={}}a.prototype.on=function(i,u,n){return(this._listeners[i]||(this._listeners[i]=[])).push({fn:u,ctx:n||this}),this},a.prototype.off=function(i,u){if(i===void 0)this._listeners={};else if(u===void 0)this._listeners[i]=[];else for(var n=this._listeners[i],o=0;o<n.length;)n[o].fn===u?n.splice(o,1):++o;return this},a.prototype.emit=function(i){var u=this._listeners[i];if(u){for(var n=[],o=1;o<arguments.length;)n.push(arguments[o++]);for(o=0;o<u.length;)u[o].fn.apply(u[o++].ctx,n)}return this}}),Xs=me((e,t)=>{t.exports=a(a);function a(c){return typeof Float32Array<"u"?function(){var p=new Float32Array([-0]),r=new Uint8Array(p.buffer),l=r[3]===128;function s(b,v,O){p[0]=b,v[O]=r[0],v[O+1]=r[1],v[O+2]=r[2],v[O+3]=r[3]}function h(b,v,O){p[0]=b,v[O]=r[3],v[O+1]=r[2],v[O+2]=r[1],v[O+3]=r[0]}c.writeFloatLE=l?s:h,c.writeFloatBE=l?h:s;function d(b,v){return r[0]=b[v],r[1]=b[v+1],r[2]=b[v+2],r[3]=b[v+3],p[0]}function m(b,v){return r[3]=b[v],r[2]=b[v+1],r[1]=b[v+2],r[0]=b[v+3],p[0]}c.readFloatLE=l?d:m,c.readFloatBE=l?m:d}():function(){function p(l,s,h,d){var m=s<0?1:0;if(m&&(s=-s),s===0)l(1/s>0?0:2147483648,h,d);else if(isNaN(s))l(2143289344,h,d);else if(s>34028234663852886e22)l((m<<31|2139095040)>>>0,h,d);else if(s<11754943508222875e-54)l((m<<31|Math.round(s/1401298464324817e-60))>>>0,h,d);else{var b=Math.floor(Math.log(s)/Math.LN2),v=Math.round(s*Math.pow(2,-b)*8388608)&8388607;l((m<<31|b+127<<23|v)>>>0,h,d)}}c.writeFloatLE=p.bind(null,i),c.writeFloatBE=p.bind(null,u);function r(l,s,h){var d=l(s,h),m=(d>>31)*2+1,b=d>>>23&255,v=d&8388607;return b===255?v?NaN:m*(1/0):b===0?m*1401298464324817e-60*v:m*Math.pow(2,b-150)*(v+8388608)}c.readFloatLE=r.bind(null,n),c.readFloatBE=r.bind(null,o)}(),typeof Float64Array<"u"?function(){var p=new Float64Array([-0]),r=new Uint8Array(p.buffer),l=r[7]===128;function s(b,v,O){p[0]=b,v[O]=r[0],v[O+1]=r[1],v[O+2]=r[2],v[O+3]=r[3],v[O+4]=r[4],v[O+5]=r[5],v[O+6]=r[6],v[O+7]=r[7]}function h(b,v,O){p[0]=b,v[O]=r[7],v[O+1]=r[6],v[O+2]=r[5],v[O+3]=r[4],v[O+4]=r[3],v[O+5]=r[2],v[O+6]=r[1],v[O+7]=r[0]}c.writeDoubleLE=l?s:h,c.writeDoubleBE=l?h:s;function d(b,v){return r[0]=b[v],r[1]=b[v+1],r[2]=b[v+2],r[3]=b[v+3],r[4]=b[v+4],r[5]=b[v+5],r[6]=b[v+6],r[7]=b[v+7],p[0]}function m(b,v){return r[7]=b[v],r[6]=b[v+1],r[5]=b[v+2],r[4]=b[v+3],r[3]=b[v+4],r[2]=b[v+5],r[1]=b[v+6],r[0]=b[v+7],p[0]}c.readDoubleLE=l?d:m,c.readDoubleBE=l?m:d}():function(){function p(l,s,h,d,m,b){var v=d<0?1:0;if(v&&(d=-d),d===0)l(0,m,b+s),l(1/d>0?0:2147483648,m,b+h);else if(isNaN(d))l(0,m,b+s),l(2146959360,m,b+h);else if(d>17976931348623157e292)l(0,m,b+s),l((v<<31|2146435072)>>>0,m,b+h);else{var O;if(d<22250738585072014e-324)O=d/5e-324,l(O>>>0,m,b+s),l((v<<31|O/4294967296)>>>0,m,b+h);else{var T=Math.floor(Math.log(d)/Math.LN2);T===1024&&(T=1023),O=d*Math.pow(2,-T),l(O*4503599627370496>>>0,m,b+s),l((v<<31|T+1023<<20|O*1048576&1048575)>>>0,m,b+h)}}}c.writeDoubleLE=p.bind(null,i,0,4),c.writeDoubleBE=p.bind(null,u,4,0);function r(l,s,h,d,m){var b=l(d,m+s),v=l(d,m+h),O=(v>>31)*2+1,T=v>>>20&2047,E=4294967296*(v&1048575)+b;return T===2047?E?NaN:O*(1/0):T===0?O*5e-324*E:O*Math.pow(2,T-1075)*(E+4503599627370496)}c.readDoubleLE=r.bind(null,n,0,4),c.readDoubleBE=r.bind(null,o,4,0)}(),c}function i(c,p,r){p[r]=c&255,p[r+1]=c>>>8&255,p[r+2]=c>>>16&255,p[r+3]=c>>>24}function u(c,p,r){p[r]=c>>>24,p[r+1]=c>>>16&255,p[r+2]=c>>>8&255,p[r+3]=c&255}function n(c,p){return(c[p]|c[p+1]<<8|c[p+2]<<16|c[p+3]<<24)>>>0}function o(c,p){return(c[p]<<24|c[p+1]<<16|c[p+2]<<8|c[p+3])>>>0}}),Ks=me((exports,module)=>{module.exports=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}}),Zs=me(e=>{var t=e;t.length=function(a){for(var i=0,u=0,n=0;n<a.length;++n)u=a.charCodeAt(n),u<128?i+=1:u<2048?i+=2:(u&64512)===55296&&(a.charCodeAt(n+1)&64512)===56320?(++n,i+=4):i+=3;return i},t.read=function(a,i,u){var n=u-i;if(n<1)return"";for(var o=null,c=[],p=0,r;i<u;)r=a[i++],r<128?c[p++]=r:r>191&&r<224?c[p++]=(r&31)<<6|a[i++]&63:r>239&&r<365?(r=((r&7)<<18|(a[i++]&63)<<12|(a[i++]&63)<<6|a[i++]&63)-65536,c[p++]=55296+(r>>10),c[p++]=56320+(r&1023)):c[p++]=(r&15)<<12|(a[i++]&63)<<6|a[i++]&63,p>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,c)),p=0);return o?(p&&o.push(String.fromCharCode.apply(String,c.slice(0,p))),o.join("")):String.fromCharCode.apply(String,c.slice(0,p))},t.write=function(a,i,u){for(var n=u,o,c,p=0;p<a.length;++p)o=a.charCodeAt(p),o<128?i[u++]=o:o<2048?(i[u++]=o>>6|192,i[u++]=o&63|128):(o&64512)===55296&&((c=a.charCodeAt(p+1))&64512)===56320?(o=65536+((o&1023)<<10)+(c&1023),++p,i[u++]=o>>18|240,i[u++]=o>>12&63|128,i[u++]=o>>6&63|128,i[u++]=o&63|128):(i[u++]=o>>12|224,i[u++]=o>>6&63|128,i[u++]=o&63|128);return u-n}}),eu=me((e,t)=>{t.exports=a;function a(i,u,n){var o=n||8192,c=o>>>1,p=null,r=o;return function(l){if(l<1||l>c)return i(l);r+l>o&&(p=i(o),r=0);var s=u.call(p,r,r+=l);return r&7&&(r=(r|7)+1),s}}}),ru=me((e,t)=>{t.exports=i;var a=Jt();function i(c,p){this.lo=c>>>0,this.hi=p>>>0}var u=i.zero=new i(0,0);u.toNumber=function(){return 0},u.zzEncode=u.zzDecode=function(){return this},u.length=function(){return 1};var n=i.zeroHash="\0\0\0\0\0\0\0\0";i.fromNumber=function(c){if(c===0)return u;var p=c<0;p&&(c=-c);var r=c>>>0,l=(c-r)/4294967296>>>0;return p&&(l=~l>>>0,r=~r>>>0,++r>4294967295&&(r=0,++l>4294967295&&(l=0))),new i(r,l)},i.from=function(c){if(typeof c=="number")return i.fromNumber(c);if(a.isString(c))if(a.Long)c=a.Long.fromString(c);else return i.fromNumber(parseInt(c,10));return c.low||c.high?new i(c.low>>>0,c.high>>>0):u},i.prototype.toNumber=function(c){if(!c&&this.hi>>>31){var p=~this.lo+1>>>0,r=~this.hi>>>0;return p||(r=r+1>>>0),-(p+r*4294967296)}return this.lo+this.hi*4294967296},i.prototype.toLong=function(c){return a.Long?new a.Long(this.lo|0,this.hi|0,!!c):{low:this.lo|0,high:this.hi|0,unsigned:!!c}};var o=String.prototype.charCodeAt;i.fromHash=function(c){return c===n?u:new i((o.call(c,0)|o.call(c,1)<<8|o.call(c,2)<<16|o.call(c,3)<<24)>>>0,(o.call(c,4)|o.call(c,5)<<8|o.call(c,6)<<16|o.call(c,7)<<24)>>>0)},i.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},i.prototype.zzEncode=function(){var c=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^c)>>>0,this.lo=(this.lo<<1^c)>>>0,this},i.prototype.zzDecode=function(){var c=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^c)>>>0,this.hi=(this.hi>>>1^c)>>>0,this},i.prototype.length=function(){var c=this.lo,p=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return r===0?p===0?c<16384?c<128?1:2:c<2097152?3:4:p<16384?p<128?5:6:p<2097152?7:8:r<128?9:10}}),Jt=me(e=>{var t=e;t.asPromise=Bs(),t.base64=Gs(),t.EventEmitter=zs(),t.float=Xs(),t.inquire=Ks(),t.utf8=Zs(),t.pool=eu(),t.LongBits=ru(),t.isNode=!!(typeof global<"u"&&global&&global.process&&global.process.versions&&global.process.versions.node),t.global=t.isNode&&global||typeof window<"u"&&window||typeof self<"u"&&self||e,t.emptyArray=Object.freeze?Object.freeze([]):[],t.emptyObject=Object.freeze?Object.freeze({}):{},t.isInteger=Number.isInteger||function(u){return typeof u=="number"&&isFinite(u)&&Math.floor(u)===u},t.isString=function(u){return typeof u=="string"||u instanceof String},t.isObject=function(u){return u&&typeof u=="object"},t.isset=t.isSet=function(u,n){var o=u[n];return o!=null&&u.hasOwnProperty(n)?typeof o!="object"||(Array.isArray(o)?o.length:Object.keys(o).length)>0:!1},t.Buffer=function(){try{var u=t.inquire("buffer").Buffer;return u.prototype.utf8Write?u:null}catch{return null}}(),t._Buffer_from=null,t._Buffer_allocUnsafe=null,t.newBuffer=function(u){return typeof u=="number"?t.Buffer?t._Buffer_allocUnsafe(u):new t.Array(u):t.Buffer?t._Buffer_from(u):typeof Uint8Array>"u"?u:new Uint8Array(u)},t.Array=typeof Uint8Array<"u"?Uint8Array:Array,t.Long=t.global.dcodeIO&&t.global.dcodeIO.Long||t.global.Long||t.inquire("long"),t.key2Re=/^true|false|0|1$/,t.key32Re=/^-?(?:0|[1-9][0-9]*)$/,t.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,t.longToHash=function(u){return u?t.LongBits.from(u).toHash():t.LongBits.zeroHash},t.longFromHash=function(u,n){var o=t.LongBits.fromHash(u);return t.Long?t.Long.fromBits(o.lo,o.hi,n):o.toNumber(!!n)};function a(u,n,o){for(var c=Object.keys(n),p=0;p<c.length;++p)(u[c[p]]===void 0||!o)&&(u[c[p]]=n[c[p]]);return u}t.merge=a,t.lcFirst=function(u){return u.charAt(0).toLowerCase()+u.substring(1)};function i(u){function n(o,c){if(!(this instanceof n))return new n(o,c);Object.defineProperty(this,"message",{get:function(){return o}}),Error.captureStackTrace?Error.captureStackTrace(this,n):Object.defineProperty(this,"stack",{value:new Error().stack||""}),c&&a(this,c)}return n.prototype=Object.create(Error.prototype,{constructor:{value:n,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return u},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),n}t.newError=i,t.ProtocolError=i("ProtocolError"),t.oneOfGetter=function(u){for(var n={},o=0;o<u.length;++o)n[u[o]]=1;return function(){for(var c=Object.keys(this),p=c.length-1;p>-1;--p)if(n[c[p]]===1&&this[c[p]]!==void 0&&this[c[p]]!==null)return c[p]}},t.oneOfSetter=function(u){return function(n){for(var o=0;o<u.length;++o)u[o]!==n&&delete this[u[o]]}},t.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},t._configure=function(){var u=t.Buffer;if(!u){t._Buffer_from=t._Buffer_allocUnsafe=null;return}t._Buffer_from=u.from!==Uint8Array.from&&u.from||function(n,o){return new u(n,o)},t._Buffer_allocUnsafe=u.allocUnsafe||function(n){return new u(n)}}}),si=me((e,t)=>{t.exports=l;var a=Jt(),i,u=a.LongBits,n=a.base64,o=a.utf8;function c(T,E,$){this.fn=T,this.len=E,this.next=void 0,this.val=$}function p(){}function r(T){this.head=T.head,this.tail=T.tail,this.len=T.len,this.next=T.states}function l(){this.len=0,this.head=new c(p,0,0),this.tail=this.head,this.states=null}var s=function(){return a.Buffer?function(){return(l.create=function(){return new i})()}:function(){return new l}};l.create=s(),l.alloc=function(T){return new a.Array(T)},a.Array!==Array&&(l.alloc=a.pool(l.alloc,a.Array.prototype.subarray)),l.prototype._push=function(T,E,$){return this.tail=this.tail.next=new c(T,E,$),this.len+=E,this};function h(T,E,$){E[$]=T&255}function d(T,E,$){for(;T>127;)E[$++]=T&127|128,T>>>=7;E[$]=T}function m(T,E){this.len=T,this.next=void 0,this.val=E}m.prototype=Object.create(c.prototype),m.prototype.fn=d,l.prototype.uint32=function(T){return this.len+=(this.tail=this.tail.next=new m((T=T>>>0)<128?1:T<16384?2:T<2097152?3:T<268435456?4:5,T)).len,this},l.prototype.int32=function(T){return T<0?this._push(b,10,u.fromNumber(T)):this.uint32(T)},l.prototype.sint32=function(T){return this.uint32((T<<1^T>>31)>>>0)};function b(T,E,$){for(;T.hi;)E[$++]=T.lo&127|128,T.lo=(T.lo>>>7|T.hi<<25)>>>0,T.hi>>>=7;for(;T.lo>127;)E[$++]=T.lo&127|128,T.lo=T.lo>>>7;E[$++]=T.lo}l.prototype.uint64=function(T){var E=u.from(T);return this._push(b,E.length(),E)},l.prototype.int64=l.prototype.uint64,l.prototype.sint64=function(T){var E=u.from(T).zzEncode();return this._push(b,E.length(),E)},l.prototype.bool=function(T){return this._push(h,1,T?1:0)};function v(T,E,$){E[$]=T&255,E[$+1]=T>>>8&255,E[$+2]=T>>>16&255,E[$+3]=T>>>24}l.prototype.fixed32=function(T){return this._push(v,4,T>>>0)},l.prototype.sfixed32=l.prototype.fixed32,l.prototype.fixed64=function(T){var E=u.from(T);return this._push(v,4,E.lo)._push(v,4,E.hi)},l.prototype.sfixed64=l.prototype.fixed64,l.prototype.float=function(T){return this._push(a.float.writeFloatLE,4,T)},l.prototype.double=function(T){return this._push(a.float.writeDoubleLE,8,T)};var O=a.Array.prototype.set?function(T,E,$){E.set(T,$)}:function(T,E,$){for(var C=0;C<T.length;++C)E[$+C]=T[C]};l.prototype.bytes=function(T){var E=T.length>>>0;if(!E)return this._push(h,1,0);if(a.isString(T)){var $=l.alloc(E=n.length(T));n.decode(T,$,0),T=$}return this.uint32(E)._push(O,E,T)},l.prototype.string=function(T){var E=o.length(T);return E?this.uint32(E)._push(o.write,E,T):this._push(h,1,0)},l.prototype.fork=function(){return this.states=new r(this),this.head=this.tail=new c(p,0,0),this.len=0,this},l.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new c(p,0,0),this.len=0),this},l.prototype.ldelim=function(){var T=this.head,E=this.tail,$=this.len;return this.reset().uint32($),$&&(this.tail.next=T.next,this.tail=E,this.len+=$),this},l.prototype.finish=function(){for(var T=this.head.next,E=this.constructor.alloc(this.len),$=0;T;)T.fn(T.val,E,$),$+=T.len,T=T.next;return E},l._configure=function(T){i=T,l.create=s(),i._configure()}}),cu=me((e,t)=>{t.exports=u;var a=si();(u.prototype=Object.create(a.prototype)).constructor=u;var i=Jt();function u(){a.call(this)}u._configure=function(){u.alloc=i._Buffer_allocUnsafe,u.writeBytesBuffer=i.Buffer&&i.Buffer.prototype instanceof Uint8Array&&i.Buffer.prototype.set.name==="set"?function(o,c,p){c.set(o,p)}:function(o,c,p){if(o.copy)o.copy(c,p,0,o.length);else for(var r=0;r<o.length;)c[p++]=o[r++]}},u.prototype.bytes=function(o){i.isString(o)&&(o=i._Buffer_from(o,"base64"));var c=o.length>>>0;return this.uint32(c),c&&this._push(u.writeBytesBuffer,c,o),this};function n(o,c,p){o.length<40?i.utf8.write(o,c,p):c.utf8Write?c.utf8Write(o,p):c.write(o,p)}u.prototype.string=function(o){var c=i.Buffer.byteLength(o);return this.uint32(c),c&&this._push(n,c,o),this},u._configure()}),fi=me((e,t)=>{t.exports=c;var a=Jt(),i,u=a.LongBits,n=a.utf8;function o(d,m){return RangeError("index out of range: "+d.pos+" + "+(m||1)+" > "+d.len)}function c(d){this.buf=d,this.pos=0,this.len=d.length}var p=typeof Uint8Array<"u"?function(d){if(d instanceof Uint8Array||Array.isArray(d))return new c(d);throw Error("illegal buffer")}:function(d){if(Array.isArray(d))return new c(d);throw Error("illegal buffer")},r=function(){return a.Buffer?function(d){return(c.create=function(m){return a.Buffer.isBuffer(m)?new i(m):p(m)})(d)}:p};c.create=r(),c.prototype._slice=a.Array.prototype.subarray||a.Array.prototype.slice,c.prototype.uint32=function(){var d=4294967295;return function(){if(d=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(d=(d|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(d=(d|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(d=(d|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(d=(d|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return d;if((this.pos+=5)>this.len)throw this.pos=this.len,o(this,10);return d}}(),c.prototype.int32=function(){return this.uint32()|0},c.prototype.sint32=function(){var d=this.uint32();return d>>>1^-(d&1)|0};function l(){var d=new u(0,0),m=0;if(this.len-this.pos>4){for(;m<4;++m)if(d.lo=(d.lo|(this.buf[this.pos]&127)<<m*7)>>>0,this.buf[this.pos++]<128)return d;if(d.lo=(d.lo|(this.buf[this.pos]&127)<<28)>>>0,d.hi=(d.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return d;m=0}else{for(;m<3;++m){if(this.pos>=this.len)throw o(this);if(d.lo=(d.lo|(this.buf[this.pos]&127)<<m*7)>>>0,this.buf[this.pos++]<128)return d}return d.lo=(d.lo|(this.buf[this.pos++]&127)<<m*7)>>>0,d}if(this.len-this.pos>4){for(;m<5;++m)if(d.hi=(d.hi|(this.buf[this.pos]&127)<<m*7+3)>>>0,this.buf[this.pos++]<128)return d}else for(;m<5;++m){if(this.pos>=this.len)throw o(this);if(d.hi=(d.hi|(this.buf[this.pos]&127)<<m*7+3)>>>0,this.buf[this.pos++]<128)return d}throw Error("invalid varint encoding")}c.prototype.bool=function(){return this.uint32()!==0};function s(d,m){return(d[m-4]|d[m-3]<<8|d[m-2]<<16|d[m-1]<<24)>>>0}c.prototype.fixed32=function(){if(this.pos+4>this.len)throw o(this,4);return s(this.buf,this.pos+=4)},c.prototype.sfixed32=function(){if(this.pos+4>this.len)throw o(this,4);return s(this.buf,this.pos+=4)|0};function h(){if(this.pos+8>this.len)throw o(this,8);return new u(s(this.buf,this.pos+=4),s(this.buf,this.pos+=4))}c.prototype.float=function(){if(this.pos+4>this.len)throw o(this,4);var d=a.float.readFloatLE(this.buf,this.pos);return this.pos+=4,d},c.prototype.double=function(){if(this.pos+8>this.len)throw o(this,4);var d=a.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,d},c.prototype.bytes=function(){var d=this.uint32(),m=this.pos,b=this.pos+d;if(b>this.len)throw o(this,d);if(this.pos+=d,Array.isArray(this.buf))return this.buf.slice(m,b);if(m===b){var v=a.Buffer;return v?v.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,m,b)},c.prototype.string=function(){var d=this.bytes();return n.read(d,0,d.length)},c.prototype.skip=function(d){if(typeof d=="number"){if(this.pos+d>this.len)throw o(this,d);this.pos+=d}else do if(this.pos>=this.len)throw o(this);while(this.buf[this.pos++]&128);return this},c.prototype.skipType=function(d){switch(d){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(d=this.uint32()&7)!==4;)this.skipType(d);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+d+" at offset "+this.pos)}return this},c._configure=function(d){i=d,c.create=r(),i._configure();var m=a.Long?"toLong":"toNumber";a.merge(c.prototype,{int64:function(){return l.call(this)[m](!1)},uint64:function(){return l.call(this)[m](!0)},sint64:function(){return l.call(this).zzDecode()[m](!1)},fixed64:function(){return h.call(this)[m](!0)},sfixed64:function(){return h.call(this)[m](!1)}})}}),xu=me((e,t)=>{t.exports=u;var a=fi();(u.prototype=Object.create(a.prototype)).constructor=u;var i=Jt();function u(n){a.call(this,n)}u._configure=function(){i.Buffer&&(u.prototype._slice=i.Buffer.prototype.slice)},u.prototype.string=function(){var n=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+n,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+n,this.len))},u._configure()}),vu=me((e,t)=>{t.exports=i;var a=Jt();(i.prototype=Object.create(a.EventEmitter.prototype)).constructor=i;function i(u,n,o){if(typeof u!="function")throw TypeError("rpcImpl must be a function");a.EventEmitter.call(this),this.rpcImpl=u,this.requestDelimited=!!n,this.responseDelimited=!!o}i.prototype.rpcCall=function u(n,o,c,p,r){if(!p)throw TypeError("request must be specified");var l=this;if(!r)return a.asPromise(u,l,n,o,c,p);if(!l.rpcImpl){setTimeout(function(){r(Error("already ended"))},0);return}try{return l.rpcImpl(n,o[l.requestDelimited?"encodeDelimited":"encode"](p).finish(),function(s,h){if(s)return l.emit("error",s,n),r(s);if(h===null){l.end(!0);return}if(!(h instanceof c))try{h=c[l.responseDelimited?"decodeDelimited":"decode"](h)}catch(d){return l.emit("error",d,n),r(d)}return l.emit("data",h,n),r(null,h)})}catch(s){l.emit("error",s,n),setTimeout(function(){r(s)},0);return}},i.prototype.end=function(u){return this.rpcImpl&&(u||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}}),Ou=me(e=>{var t=e;t.Service=vu()}),Su=me((e,t)=>{t.exports={}}),Eu=me(e=>{var t=e;t.build="minimal",t.Writer=si(),t.BufferWriter=cu(),t.Reader=fi(),t.BufferReader=xu(),t.util=Jt(),t.rpc=Ou(),t.roots=Su(),t.configure=a;function a(){t.util._configure(),t.Writer._configure(t.BufferWriter),t.Reader._configure(t.BufferReader)}a()}),Lu=me((e,t)=>{t.exports=Eu()}),Cr=me((e,t)=>{var a=Lu(),i=a.Reader,u=a.Writer,n=a.util,o=a.roots.default||(a.roots.default={});o.onnx=function(){var c={};return c.Version=function(){var p={},r=Object.create(p);return r[p[0]="_START_VERSION"]=0,r[p[1]="IR_VERSION_2017_10_10"]=1,r[p[2]="IR_VERSION_2017_10_30"]=2,r[p[3]="IR_VERSION_2017_11_3"]=3,r[p[4]="IR_VERSION_2019_1_22"]=4,r[p[5]="IR_VERSION_2019_3_18"]=5,r[p[6]="IR_VERSION_2019_9_19"]=6,r[p[7]="IR_VERSION_2020_5_8"]=7,r[p[8]="IR_VERSION_2021_7_30"]=8,r[p[9]="IR_VERSION"]=9,r}(),c.AttributeProto=function(){function p(r){if(this.floats=[],this.ints=[],this.strings=[],this.tensors=[],this.graphs=[],this.sparseTensors=[],this.typeProtos=[],r)for(var l=Object.keys(r),s=0;s<l.length;++s)r[l[s]]!=null&&(this[l[s]]=r[l[s]])}return p.prototype.name="",p.prototype.refAttrName="",p.prototype.docString="",p.prototype.type=0,p.prototype.f=0,p.prototype.i=n.Long?n.Long.fromBits(0,0,!1):0,p.prototype.s=n.newBuffer([]),p.prototype.t=null,p.prototype.g=null,p.prototype.sparseTensor=null,p.prototype.tp=null,p.prototype.floats=n.emptyArray,p.prototype.ints=n.emptyArray,p.prototype.strings=n.emptyArray,p.prototype.tensors=n.emptyArray,p.prototype.graphs=n.emptyArray,p.prototype.sparseTensors=n.emptyArray,p.prototype.typeProtos=n.emptyArray,p.create=function(r){return new p(r)},p.encode=function(r,l){if(l||(l=u.create()),r.name!=null&&Object.hasOwnProperty.call(r,"name")&&l.uint32(10).string(r.name),r.f!=null&&Object.hasOwnProperty.call(r,"f")&&l.uint32(21).float(r.f),r.i!=null&&Object.hasOwnProperty.call(r,"i")&&l.uint32(24).int64(r.i),r.s!=null&&Object.hasOwnProperty.call(r,"s")&&l.uint32(34).bytes(r.s),r.t!=null&&Object.hasOwnProperty.call(r,"t")&&o.onnx.TensorProto.encode(r.t,l.uint32(42).fork()).ldelim(),r.g!=null&&Object.hasOwnProperty.call(r,"g")&&o.onnx.GraphProto.encode(r.g,l.uint32(50).fork()).ldelim(),r.floats!=null&&r.floats.length){l.uint32(58).fork();for(var s=0;s<r.floats.length;++s)l.float(r.floats[s]);l.ldelim()}if(r.ints!=null&&r.ints.length){l.uint32(66).fork();for(var s=0;s<r.ints.length;++s)l.int64(r.ints[s]);l.ldelim()}if(r.strings!=null&&r.strings.length)for(var s=0;s<r.strings.length;++s)l.uint32(74).bytes(r.strings[s]);if(r.tensors!=null&&r.tensors.length)for(var s=0;s<r.tensors.length;++s)o.onnx.TensorProto.encode(r.tensors[s],l.uint32(82).fork()).ldelim();if(r.graphs!=null&&r.graphs.length)for(var s=0;s<r.graphs.length;++s)o.onnx.GraphProto.encode(r.graphs[s],l.uint32(90).fork()).ldelim();if(r.docString!=null&&Object.hasOwnProperty.call(r,"docString")&&l.uint32(106).string(r.docString),r.tp!=null&&Object.hasOwnProperty.call(r,"tp")&&o.onnx.TypeProto.encode(r.tp,l.uint32(114).fork()).ldelim(),r.typeProtos!=null&&r.typeProtos.length)for(var s=0;s<r.typeProtos.length;++s)o.onnx.TypeProto.encode(r.typeProtos[s],l.uint32(122).fork()).ldelim();if(r.type!=null&&Object.hasOwnProperty.call(r,"type")&&l.uint32(160).int32(r.type),r.refAttrName!=null&&Object.hasOwnProperty.call(r,"refAttrName")&&l.uint32(170).string(r.refAttrName),r.sparseTensor!=null&&Object.hasOwnProperty.call(r,"sparseTensor")&&o.onnx.SparseTensorProto.encode(r.sparseTensor,l.uint32(178).fork()).ldelim(),r.sparseTensors!=null&&r.sparseTensors.length)for(var s=0;s<r.sparseTensors.length;++s)o.onnx.SparseTensorProto.encode(r.sparseTensors[s],l.uint32(186).fork()).ldelim();return l},p.encodeDelimited=function(r,l){return this.encode(r,l).ldelim()},p.decode=function(r,l){r instanceof i||(r=i.create(r));for(var s=l===void 0?r.len:r.pos+l,h=new o.onnx.AttributeProto;r.pos<s;){var d=r.uint32();switch(d>>>3){case 1:{h.name=r.string();break}case 21:{h.refAttrName=r.string();break}case 13:{h.docString=r.string();break}case 20:{h.type=r.int32();break}case 2:{h.f=r.float();break}case 3:{h.i=r.int64();break}case 4:{h.s=r.bytes();break}case 5:{h.t=o.onnx.TensorProto.decode(r,r.uint32());break}case 6:{h.g=o.onnx.GraphProto.decode(r,r.uint32());break}case 22:{h.sparseTensor=o.onnx.SparseTensorProto.decode(r,r.uint32());break}case 14:{h.tp=o.onnx.TypeProto.decode(r,r.uint32());break}case 7:{if(h.floats&&h.floats.length||(h.floats=[]),(d&7)===2)for(var m=r.uint32()+r.pos;r.pos<m;)h.floats.push(r.float());else h.floats.push(r.float());break}case 8:{if(h.ints&&h.ints.length||(h.ints=[]),(d&7)===2)for(var m=r.uint32()+r.pos;r.pos<m;)h.ints.push(r.int64());else h.ints.push(r.int64());break}case 9:{h.strings&&h.strings.length||(h.strings=[]),h.strings.push(r.bytes());break}case 10:{h.tensors&&h.tensors.length||(h.tensors=[]),h.tensors.push(o.onnx.TensorProto.decode(r,r.uint32()));break}case 11:{h.graphs&&h.graphs.length||(h.graphs=[]),h.graphs.push(o.onnx.GraphProto.decode(r,r.uint32()));break}case 23:{h.sparseTensors&&h.sparseTensors.length||(h.sparseTensors=[]),h.sparseTensors.push(o.onnx.SparseTensorProto.decode(r,r.uint32()));break}case 15:{h.typeProtos&&h.typeProtos.length||(h.typeProtos=[]),h.typeProtos.push(o.onnx.TypeProto.decode(r,r.uint32()));break}default:r.skipType(d&7);break}}return h},p.decodeDelimited=function(r){return r instanceof i||(r=new i(r)),this.decode(r,r.uint32())},p.verify=function(r){if(typeof r!="object"||r===null)return"object expected";if(r.name!=null&&r.hasOwnProperty("name")&&!n.isString(r.name))return"name: string expected";if(r.refAttrName!=null&&r.hasOwnProperty("refAttrName")&&!n.isString(r.refAttrName))return"refAttrName: string expected";if(r.docString!=null&&r.hasOwnProperty("docString")&&!n.isString(r.docString))return"docString: string expected";if(r.type!=null&&r.hasOwnProperty("type"))switch(r.type){default:return"type: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 11:case 13:case 6:case 7:case 8:case 9:case 10:case 12:case 14:break}if(r.f!=null&&r.hasOwnProperty("f")&&typeof r.f!="number")return"f: number expected";if(r.i!=null&&r.hasOwnProperty("i")&&!n.isInteger(r.i)&&!(r.i&&n.isInteger(r.i.low)&&n.isInteger(r.i.high)))return"i: integer|Long expected";if(r.s!=null&&r.hasOwnProperty("s")&&!(r.s&&typeof r.s.length=="number"||n.isString(r.s)))return"s: buffer expected";if(r.t!=null&&r.hasOwnProperty("t")){var l=o.onnx.TensorProto.verify(r.t);if(l)return"t."+l}if(r.g!=null&&r.hasOwnProperty("g")){var l=o.onnx.GraphProto.verify(r.g);if(l)return"g."+l}if(r.sparseTensor!=null&&r.hasOwnProperty("sparseTensor")){var l=o.onnx.SparseTensorProto.verify(r.sparseTensor);if(l)return"sparseTensor."+l}if(r.tp!=null&&r.hasOwnProperty("tp")){var l=o.onnx.TypeProto.verify(r.tp);if(l)return"tp."+l}if(r.floats!=null&&r.hasOwnProperty("floats")){if(!Array.isArray(r.floats))return"floats: array expected";for(var s=0;s<r.floats.length;++s)if(typeof r.floats[s]!="number")return"floats: number[] expected"}if(r.ints!=null&&r.hasOwnProperty("ints")){if(!Array.isArray(r.ints))return"ints: array expected";for(var s=0;s<r.ints.length;++s)if(!n.isInteger(r.ints[s])&&!(r.ints[s]&&n.isInteger(r.ints[s].low)&&n.isInteger(r.ints[s].high)))return"ints: integer|Long[] expected"}if(r.strings!=null&&r.hasOwnProperty("strings")){if(!Array.isArray(r.strings))return"strings: array expected";for(var s=0;s<r.strings.length;++s)if(!(r.strings[s]&&typeof r.strings[s].length=="number"||n.isString(r.strings[s])))return"strings: buffer[] expected"}if(r.tensors!=null&&r.hasOwnProperty("tensors")){if(!Array.isArray(r.tensors))return"tensors: array expected";for(var s=0;s<r.tensors.length;++s){var l=o.onnx.TensorProto.verify(r.tensors[s]);if(l)return"tensors."+l}}if(r.graphs!=null&&r.hasOwnProperty("graphs")){if(!Array.isArray(r.graphs))return"graphs: array expected";for(var s=0;s<r.graphs.length;++s){var l=o.onnx.GraphProto.verify(r.graphs[s]);if(l)return"graphs."+l}}if(r.sparseTensors!=null&&r.hasOwnProperty("sparseTensors")){if(!Array.isArray(r.sparseTensors))return"sparseTensors: array expected";for(var s=0;s<r.sparseTensors.length;++s){var l=o.onnx.SparseTensorProto.verify(r.sparseTensors[s]);if(l)return"sparseTensors."+l}}if(r.typeProtos!=null&&r.hasOwnProperty("typeProtos")){if(!Array.isArray(r.typeProtos))return"typeProtos: array expected";for(var s=0;s<r.typeProtos.length;++s){var l=o.onnx.TypeProto.verify(r.typeProtos[s]);if(l)return"typeProtos."+l}}return null},p.fromObject=function(r){if(r instanceof o.onnx.AttributeProto)return r;var l=new o.onnx.AttributeProto;switch(r.name!=null&&(l.name=String(r.name)),r.refAttrName!=null&&(l.refAttrName=String(r.refAttrName)),r.docString!=null&&(l.docString=String(r.docString)),r.type){default:if(typeof r.type=="number"){l.type=r.type;break}break;case"UNDEFINED":case 0:l.type=0;break;case"FLOAT":case 1:l.type=1;break;case"INT":case 2:l.type=2;break;case"STRING":case 3:l.type=3;break;case"TENSOR":case 4:l.type=4;break;case"GRAPH":case 5:l.type=5;break;case"SPARSE_TENSOR":case 11:l.type=11;break;case"TYPE_PROTO":case 13:l.type=13;break;case"FLOATS":case 6:l.type=6;break;case"INTS":case 7:l.type=7;break;case"STRINGS":case 8:l.type=8;break;case"TENSORS":case 9:l.type=9;break;case"GRAPHS":case 10:l.type=10;break;case"SPARSE_TENSORS":case 12:l.type=12;break;case"TYPE_PROTOS":case 14:l.type=14;break}if(r.f!=null&&(l.f=Number(r.f)),r.i!=null&&(n.Long?(l.i=n.Long.fromValue(r.i)).unsigned=!1:typeof r.i=="string"?l.i=parseInt(r.i,10):typeof r.i=="number"?l.i=r.i:typeof r.i=="object"&&(l.i=new n.LongBits(r.i.low>>>0,r.i.high>>>0).toNumber())),r.s!=null&&(typeof r.s=="string"?n.base64.decode(r.s,l.s=n.newBuffer(n.base64.length(r.s)),0):r.s.length>=0&&(l.s=r.s)),r.t!=null){if(typeof r.t!="object")throw TypeError(".onnx.AttributeProto.t: object expected");l.t=o.onnx.TensorProto.fromObject(r.t)}if(r.g!=null){if(typeof r.g!="object")throw TypeError(".onnx.AttributeProto.g: object expected");l.g=o.onnx.GraphProto.fromObject(r.g)}if(r.sparseTensor!=null){if(typeof r.sparseTensor!="object")throw TypeError(".onnx.AttributeProto.sparseTensor: object expected");l.sparseTensor=o.onnx.SparseTensorProto.fromObject(r.sparseTensor)}if(r.tp!=null){if(typeof r.tp!="object")throw TypeError(".onnx.AttributeProto.tp: object expected");l.tp=o.onnx.TypeProto.fromObject(r.tp)}if(r.floats){if(!Array.isArray(r.floats))throw TypeError(".onnx.AttributeProto.floats: array expected");l.floats=[];for(var s=0;s<r.floats.length;++s)l.floats[s]=Number(r.floats[s])}if(r.ints){if(!Array.isArray(r.ints))throw TypeError(".onnx.AttributeProto.ints: array expected");l.ints=[];for(var s=0;s<r.ints.length;++s)n.Long?(l.ints[s]=n.Long.fromValue(r.ints[s])).unsigned=!1:typeof r.ints[s]=="string"?l.ints[s]=parseInt(r.ints[s],10):typeof r.ints[s]=="number"?l.ints[s]=r.ints[s]:typeof r.ints[s]=="object"&&(l.ints[s]=new n.LongBits(r.ints[s].low>>>0,r.ints[s].high>>>0).toNumber())}if(r.strings){if(!Array.isArray(r.strings))throw TypeError(".onnx.AttributeProto.strings: array expected");l.strings=[];for(var s=0;s<r.strings.length;++s)typeof r.strings[s]=="string"?n.base64.decode(r.strings[s],l.strings[s]=n.newBuffer(n.base64.length(r.strings[s])),0):r.strings[s].length>=0&&(l.strings[s]=r.strings[s])}if(r.tensors){if(!Array.isArray(r.tensors))throw TypeError(".onnx.AttributeProto.tensors: array expected");l.tensors=[];for(var s=0;s<r.tensors.length;++s){if(typeof r.tensors[s]!="object")throw TypeError(".onnx.AttributeProto.tensors: object expected");l.tensors[s]=o.onnx.TensorProto.fromObject(r.tensors[s])}}if(r.graphs){if(!Array.isArray(r.graphs))throw TypeError(".onnx.AttributeProto.graphs: array expected");l.graphs=[];for(var s=0;s<r.graphs.length;++s){if(typeof r.graphs[s]!="object")throw TypeError(".onnx.AttributeProto.graphs: object expected");l.graphs[s]=o.onnx.GraphProto.fromObject(r.graphs[s])}}if(r.sparseTensors){if(!Array.isArray(r.sparseTensors))throw TypeError(".onnx.AttributeProto.sparseTensors: array expected");l.sparseTensors=[];for(var s=0;s<r.sparseTensors.length;++s){if(typeof r.sparseTensors[s]!="object")throw TypeError(".onnx.AttributeProto.sparseTensors: object expected");l.sparseTensors[s]=o.onnx.SparseTensorProto.fromObject(r.sparseTensors[s])}}if(r.typeProtos){if(!Array.isArray(r.typeProtos))throw TypeError(".onnx.AttributeProto.typeProtos: array expected");l.typeProtos=[];for(var s=0;s<r.typeProtos.length;++s){if(typeof r.typeProtos[s]!="object")throw TypeError(".onnx.AttributeProto.typeProtos: object expected");l.typeProtos[s]=o.onnx.TypeProto.fromObject(r.typeProtos[s])}}return l},p.toObject=function(r,l){l||(l={});var s={};if((l.arrays||l.defaults)&&(s.floats=[],s.ints=[],s.strings=[],s.tensors=[],s.graphs=[],s.typeProtos=[],s.sparseTensors=[]),l.defaults){if(s.name="",s.f=0,n.Long){var h=new n.Long(0,0,!1);s.i=l.longs===String?h.toString():l.longs===Number?h.toNumber():h}else s.i=l.longs===String?"0":0;l.bytes===String?s.s="":(s.s=[],l.bytes!==Array&&(s.s=n.newBuffer(s.s))),s.t=null,s.g=null,s.docString="",s.tp=null,s.type=l.enums===String?"UNDEFINED":0,s.refAttrName="",s.sparseTensor=null}if(r.name!=null&&r.hasOwnProperty("name")&&(s.name=r.name),r.f!=null&&r.hasOwnProperty("f")&&(s.f=l.json&&!isFinite(r.f)?String(r.f):r.f),r.i!=null&&r.hasOwnProperty("i")&&(typeof r.i=="number"?s.i=l.longs===String?String(r.i):r.i:s.i=l.longs===String?n.Long.prototype.toString.call(r.i):l.longs===Number?new n.LongBits(r.i.low>>>0,r.i.high>>>0).toNumber():r.i),r.s!=null&&r.hasOwnProperty("s")&&(s.s=l.bytes===String?n.base64.encode(r.s,0,r.s.length):l.bytes===Array?Array.prototype.slice.call(r.s):r.s),r.t!=null&&r.hasOwnProperty("t")&&(s.t=o.onnx.TensorProto.toObject(r.t,l)),r.g!=null&&r.hasOwnProperty("g")&&(s.g=o.onnx.GraphProto.toObject(r.g,l)),r.floats&&r.floats.length){s.floats=[];for(var d=0;d<r.floats.length;++d)s.floats[d]=l.json&&!isFinite(r.floats[d])?String(r.floats[d]):r.floats[d]}if(r.ints&&r.ints.length){s.ints=[];for(var d=0;d<r.ints.length;++d)typeof r.ints[d]=="number"?s.ints[d]=l.longs===String?String(r.ints[d]):r.ints[d]:s.ints[d]=l.longs===String?n.Long.prototype.toString.call(r.ints[d]):l.longs===Number?new n.LongBits(r.ints[d].low>>>0,r.ints[d].high>>>0).toNumber():r.ints[d]}if(r.strings&&r.strings.length){s.strings=[];for(var d=0;d<r.strings.length;++d)s.strings[d]=l.bytes===String?n.base64.encode(r.strings[d],0,r.strings[d].length):l.bytes===Array?Array.prototype.slice.call(r.strings[d]):r.strings[d]}if(r.tensors&&r.tensors.length){s.tensors=[];for(var d=0;d<r.tensors.length;++d)s.tensors[d]=o.onnx.TensorProto.toObject(r.tensors[d],l)}if(r.graphs&&r.graphs.length){s.graphs=[];for(var d=0;d<r.graphs.length;++d)s.graphs[d]=o.onnx.GraphProto.toObject(r.graphs[d],l)}if(r.docString!=null&&r.hasOwnProperty("docString")&&(s.docString=r.docString),r.tp!=null&&r.hasOwnProperty("tp")&&(s.tp=o.onnx.TypeProto.toObject(r.tp,l)),r.typeProtos&&r.typeProtos.length){s.typeProtos=[];for(var d=0;d<r.typeProtos.length;++d)s.typeProtos[d]=o.onnx.TypeProto.toObject(r.typeProtos[d],l)}if(r.type!=null&&r.hasOwnProperty("type")&&(s.type=l.enums===String?o.onnx.AttributeProto.AttributeType[r.type]===void 0?r.type:o.onnx.AttributeProto.AttributeType[r.type]:r.type),r.refAttrName!=null&&r.hasOwnProperty("refAttrName")&&(s.refAttrName=r.refAttrName),r.sparseTensor!=null&&r.hasOwnProperty("sparseTensor")&&(s.sparseTensor=o.onnx.SparseTensorProto.toObject(r.sparseTensor,l)),r.sparseTensors&&r.sparseTensors.length){s.sparseTensors=[];for(var d=0;d<r.sparseTensors.length;++d)s.sparseTensors[d]=o.onnx.SparseTensorProto.toObject(r.sparseTensors[d],l)}return s},p.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},p.getTypeUrl=function(r){return r===void 0&&(r="type.googleapis.com"),r+"/onnx.AttributeProto"},p.AttributeType=function(){var r={},l=Object.create(r);return l[r[0]="UNDEFINED"]=0,l[r[1]="FLOAT"]=1,l[r[2]="INT"]=2,l[r[3]="STRING"]=3,l[r[4]="TENSOR"]=4,l[r[5]="GRAPH"]=5,l[r[11]="SPARSE_TENSOR"]=11,l[r[13]="TYPE_PROTO"]=13,l[r[6]="FLOATS"]=6,l[r[7]="INTS"]=7,l[r[8]="STRINGS"]=8,l[r[9]="TENSORS"]=9,l[r[10]="GRAPHS"]=10,l[r[12]="SPARSE_TENSORS"]=12,l[r[14]="TYPE_PROTOS"]=14,l}(),p}(),c.ValueInfoProto=function(){function p(r){if(r)for(var l=Object.keys(r),s=0;s<l.length;++s)r[l[s]]!=null&&(this[l[s]]=r[l[s]])}return p.prototype.name="",p.prototype.type=null,p.prototype.docString="",p.create=function(r){return new p(r)},p.encode=function(r,l){return l||(l=u.create()),r.name!=null&&Object.hasOwnProperty.call(r,"name")&&l.uint32(10).string(r.name),r.type!=null&&Object.hasOwnProperty.call(r,"type")&&o.onnx.TypeProto.encode(r.type,l.uint32(18).fork()).ldelim(),r.docString!=null&&Object.hasOwnProperty.call(r,"docString")&&l.uint32(26).string(r.docString),l},p.encodeDelimited=function(r,l){return this.encode(r,l).ldelim()},p.decode=function(r,l){r instanceof i||(r=i.create(r));for(var s=l===void 0?r.len:r.pos+l,h=new o.onnx.ValueInfoProto;r.pos<s;){var d=r.uint32();switch(d>>>3){case 1:{h.name=r.string();break}case 2:{h.type=o.onnx.TypeProto.decode(r,r.uint32());break}case 3:{h.docString=r.string();break}default:r.skipType(d&7);break}}return h},p.decodeDelimited=function(r){return r instanceof i||(r=new i(r)),this.decode(r,r.uint32())},p.verify=function(r){if(typeof r!="object"||r===null)return"object expected";if(r.name!=null&&r.hasOwnProperty("name")&&!n.isString(r.name))return"name: string expected";if(r.type!=null&&r.hasOwnProperty("type")){var l=o.onnx.TypeProto.verify(r.type);if(l)return"type."+l}return r.docString!=null&&r.hasOwnProperty("docString")&&!n.isString(r.docString)?"docString: string expected":null},p.fromObject=function(r){if(r instanceof o.onnx.ValueInfoProto)return r;var l=new o.onnx.ValueInfoProto;if(r.name!=null&&(l.name=String(r.name)),r.type!=null){if(typeof r.type!="object")throw TypeError(".onnx.ValueInfoProto.type: object expected");l.type=o.onnx.TypeProto.fromObject(r.type)}return r.docString!=null&&(l.docString=String(r.docString)),l},p.toObject=function(r,l){l||(l={});var s={};return l.defaults&&(s.name="",s.type=null,s.docString=""),r.name!=null&&r.hasOwnProperty("name")&&(s.name=r.name),r.type!=null&&r.hasOwnProperty("type")&&(s.type=o.onnx.TypeProto.toObject(r.type,l)),r.docString!=null&&r.hasOwnProperty("docString")&&(s.docString=r.docString),s},p.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},p.getTypeUrl=function(r){return r===void 0&&(r="type.googleapis.com"),r+"/onnx.ValueInfoProto"},p}(),c.NodeProto=function(){function p(r){if(this.input=[],this.output=[],this.attribute=[],r)for(var l=Object.keys(r),s=0;s<l.length;++s)r[l[s]]!=null&&(this[l[s]]=r[l[s]])}return p.prototype.input=n.emptyArray,p.prototype.output=n.emptyArray,p.prototype.name="",p.prototype.opType="",p.prototype.domain="",p.prototype.attribute=n.emptyArray,p.prototype.docString="",p.create=function(r){return new p(r)},p.encode=function(r,l){if(l||(l=u.create()),r.input!=null&&r.input.length)for(var s=0;s<r.input.length;++s)l.uint32(10).string(r.input[s]);if(r.output!=null&&r.output.length)for(var s=0;s<r.output.length;++s)l.uint32(18).string(r.output[s]);if(r.name!=null&&Object.hasOwnProperty.call(r,"name")&&l.uint32(26).string(r.name),r.opType!=null&&Object.hasOwnProperty.call(r,"opType")&&l.uint32(34).string(r.opType),r.attribute!=null&&r.attribute.length)for(var s=0;s<r.attribute.length;++s)o.onnx.AttributeProto.encode(r.attribute[s],l.uint32(42).fork()).ldelim();return r.docString!=null&&Object.hasOwnProperty.call(r,"docString")&&l.uint32(50).string(r.docString),r.domain!=null&&Object.hasOwnProperty.call(r,"domain")&&l.uint32(58).string(r.domain),l},p.encodeDelimited=function(r,l){return this.encode(r,l).ldelim()},p.decode=function(r,l){r instanceof i||(r=i.create(r));for(var s=l===void 0?r.len:r.pos+l,h=new o.onnx.NodeProto;r.pos<s;){var d=r.uint32();switch(d>>>3){case 1:{h.input&&h.input.length||(h.input=[]),h.input.push(r.string());break}case 2:{h.output&&h.output.length||(h.output=[]),h.output.push(r.string());break}case 3:{h.name=r.string();break}case 4:{h.opType=r.string();break}case 7:{h.domain=r.string();break}case 5:{h.attribute&&h.attribute.length||(h.attribute=[]),h.attribute.push(o.onnx.AttributeProto.decode(r,r.uint32()));break}case 6:{h.docString=r.string();break}default:r.skipType(d&7);break}}return h},p.decodeDelimited=function(r){return r instanceof i||(r=new i(r)),this.decode(r,r.uint32())},p.verify=function(r){if(typeof r!="object"||r===null)return"object expected";if(r.input!=null&&r.hasOwnProperty("input")){if(!Array.isArray(r.input))return"input: array expected";for(var l=0;l<r.input.length;++l)if(!n.isString(r.input[l]))return"input: string[] expected"}if(r.output!=null&&r.hasOwnProperty("output")){if(!Array.isArray(r.output))return"output: array expected";for(var l=0;l<r.output.length;++l)if(!n.isString(r.output[l]))return"output: string[] expected"}if(r.name!=null&&r.hasOwnProperty("name")&&!n.isString(r.name))return"name: string expected";if(r.opType!=null&&r.hasOwnProperty("opType")&&!n.isString(r.opType))return"opType: string expected";if(r.domain!=null&&r.hasOwnProperty("domain")&&!n.isString(r.domain))return"domain: string expected";if(r.attribute!=null&&r.hasOwnProperty("attribute")){if(!Array.isArray(r.attribute))return"attribute: array expected";for(var l=0;l<r.attribute.length;++l){var s=o.onnx.AttributeProto.verify(r.attribute[l]);if(s)return"attribute."+s}}return r.docString!=null&&r.hasOwnProperty("docString")&&!n.isString(r.docString)?"docString: string expected":null},p.fromObject=function(r){if(r instanceof o.onnx.NodeProto)return r;var l=new o.onnx.NodeProto;if(r.input){if(!Array.isArray(r.input))throw TypeError(".onnx.NodeProto.input: array expected");l.input=[];for(var s=0;s<r.input.length;++s)l.input[s]=String(r.input[s])}if(r.output){if(!Array.isArray(r.output))throw TypeError(".onnx.NodeProto.output: array expected");l.output=[];for(var s=0;s<r.output.length;++s)l.output[s]=String(r.output[s])}if(r.name!=null&&(l.name=String(r.name)),r.opType!=null&&(l.opType=String(r.opType)),r.domain!=null&&(l.domain=String(r.domain)),r.attribute){if(!Array.isArray(r.attribute))throw TypeError(".onnx.NodeProto.attribute: array expected");l.attribute=[];for(var s=0;s<r.attribute.length;++s){if(typeof r.attribute[s]!="object")throw TypeError(".onnx.NodeProto.attribute: object expected");l.attribute[s]=o.onnx.AttributeProto.fromObject(r.attribute[s])}}return r.docString!=null&&(l.docString=String(r.docString)),l},p.toObject=function(r,l){l||(l={});var s={};if((l.arrays||l.defaults)&&(s.input=[],s.output=[],s.attribute=[]),l.defaults&&(s.name="",s.opType="",s.docString="",s.domain=""),r.input&&r.input.length){s.input=[];for(var h=0;h<r.input.length;++h)s.input[h]=r.input[h]}if(r.output&&r.output.length){s.output=[];for(var h=0;h<r.output.length;++h)s.output[h]=r.output[h]}if(r.name!=null&&r.hasOwnProperty("name")&&(s.name=r.name),r.opType!=null&&r.hasOwnProperty("opType")&&(s.opType=r.opType),r.attribute&&r.attribute.length){s.attribute=[];for(var h=0;h<r.attribute.length;++h)s.attribute[h]=o.onnx.AttributeProto.toObject(r.attribute[h],l)}return r.docString!=null&&r.hasOwnProperty("docString")&&(s.docString=r.docString),r.domain!=null&&r.hasOwnProperty("domain")&&(s.domain=r.domain),s},p.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},p.getTypeUrl=function(r){return r===void 0&&(r="type.googleapis.com"),r+"/onnx.NodeProto"},p}(),c.TrainingInfoProto=function(){function p(r){if(this.initializationBinding=[],this.updateBinding=[],r)for(var l=Object.keys(r),s=0;s<l.length;++s)r[l[s]]!=null&&(this[l[s]]=r[l[s]])}return p.prototype.initialization=null,p.prototype.algorithm=null,p.prototype.initializationBinding=n.emptyArray,p.prototype.updateBinding=n.emptyArray,p.create=function(r){return new p(r)},p.encode=function(r,l){if(l||(l=u.create()),r.initialization!=null&&Object.hasOwnProperty.call(r,"initialization")&&o.onnx.GraphProto.encode(r.initialization,l.uint32(10).fork()).ldelim(),r.algorithm!=null&&Object.hasOwnProperty.call(r,"algorithm")&&o.onnx.GraphProto.encode(r.algorithm,l.uint32(18).fork()).ldelim(),r.initializationBinding!=null&&r.initializationBinding.length)for(var s=0;s<r.initializationBinding.length;++s)o.onnx.StringStringEntryProto.encode(r.initializationBinding[s],l.uint32(26).fork()).ldelim();if(r.updateBinding!=null&&r.updateBinding.length)for(var s=0;s<r.updateBinding.length;++s)o.onnx.StringStringEntryProto.encode(r.updateBinding[s],l.uint32(34).fork()).ldelim();return l},p.encodeDelimited=function(r,l){return this.encode(r,l).ldelim()},p.decode=function(r,l){r instanceof i||(r=i.create(r));for(var s=l===void 0?r.len:r.pos+l,h=new o.onnx.TrainingInfoProto;r.pos<s;){var d=r.uint32();switch(d>>>3){case 1:{h.initialization=o.onnx.GraphProto.decode(r,r.uint32());break}case 2:{h.algorithm=o.onnx.GraphProto.decode(r,r.uint32());break}case 3:{h.initializationBinding&&h.initializationBinding.length||(h.initializationBinding=[]),h.initializationBinding.push(o.onnx.StringStringEntryProto.decode(r,r.uint32()));break}case 4:{h.updateBinding&&h.updateBinding.length||(h.updateBinding=[]),h.updateBinding.push(o.onnx.StringStringEntryProto.decode(r,r.uint32()));break}default:r.skipType(d&7);break}}return h},p.decodeDelimited=function(r){return r instanceof i||(r=new i(r)),this.decode(r,r.uint32())},p.verify=function(r){if(typeof r!="object"||r===null)return"object expected";if(r.initialization!=null&&r.hasOwnProperty("initialization")){var l=o.onnx.GraphProto.verify(r.initialization);if(l)return"initialization."+l}if(r.algorithm!=null&&r.hasOwnProperty("algorithm")){var l=o.onnx.GraphProto.verify(r.algorithm);if(l)return"algorithm."+l}if(r.initializationBinding!=null&&r.hasOwnProperty("initializationBinding")){if(!Array.isArray(r.initializationBinding))return"initializationBinding: array expected";for(var s=0;s<r.initializationBinding.length;++s){var l=o.onnx.StringStringEntryProto.verify(r.initializationBinding[s]);if(l)return"initializationBinding."+l}}if(r.updateBinding!=null&&r.hasOwnProperty("updateBinding")){if(!Array.isArray(r.updateBinding))return"updateBinding: array expected";for(var s=0;s<r.updateBinding.length;++s){var l=o.onnx.StringStringEntryProto.verify(r.updateBinding[s]);if(l)return"updateBinding."+l}}return null},p.fromObject=function(r){if(r instanceof o.onnx.TrainingInfoProto)return r;var l=new o.onnx.TrainingInfoProto;if(r.initialization!=null){if(typeof r.initialization!="object")throw TypeError(".onnx.TrainingInfoProto.initialization: object expected");l.initialization=o.onnx.GraphProto.fromObject(r.initialization)}if(r.algorithm!=null){if(typeof r.algorithm!="object")throw TypeError(".onnx.TrainingInfoProto.algorithm: object expected");l.algorithm=o.onnx.GraphProto.fromObject(r.algorithm)}if(r.initializationBinding){if(!Array.isArray(r.initializationBinding))throw TypeError(".onnx.TrainingInfoProto.initializationBinding: array expected");l.initializationBinding=[];for(var s=0;s<r.initializationBinding.length;++s){if(typeof r.initializationBinding[s]!="object")throw TypeError(".onnx.TrainingInfoProto.initializationBinding: object expected");l.initializationBinding[s]=o.onnx.StringStringEntryProto.fromObject(r.initializationBinding[s])}}if(r.updateBinding){if(!Array.isArray(r.updateBinding))throw TypeError(".onnx.TrainingInfoProto.updateBinding: array expected");l.updateBinding=[];for(var s=0;s<r.updateBinding.length;++s){if(typeof r.updateBinding[s]!="object")throw TypeError(".onnx.TrainingInfoProto.updateBinding: object expected");l.updateBinding[s]=o.onnx.StringStringEntryProto.fromObject(r.updateBinding[s])}}return l},p.toObject=function(r,l){l||(l={});var s={};if((l.arrays||l.defaults)&&(s.initializationBinding=[],s.updateBinding=[]),l.defaults&&(s.initialization=null,s.algorithm=null),r.initialization!=null&&r.hasOwnProperty("initialization")&&(s.initialization=o.onnx.GraphProto.toObject(r.initialization,l)),r.algorithm!=null&&r.hasOwnProperty("algorithm")&&(s.algorithm=o.onnx.GraphProto.toObject(r.algorithm,l)),r.initializationBinding&&r.initializationBinding.length){s.initializationBinding=[];for(var h=0;h<r.initializationBinding.length;++h)s.initializationBinding[h]=o.onnx.StringStringEntryProto.toObject(r.initializationBinding[h],l)}if(r.updateBinding&&r.updateBinding.length){s.updateBinding=[];for(var h=0;h<r.updateBinding.length;++h)s.updateBinding[h]=o.onnx.StringStringEntryProto.toObject(r.updateBinding[h],l)}return s},p.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},p.getTypeUrl=function(r){return r===void 0&&(r="type.googleapis.com"),r+"/onnx.TrainingInfoProto"},p}(),c.ModelProto=function(){function p(r){if(this.opsetImport=[],this.metadataProps=[],this.trainingInfo=[],this.functions=[],r)for(var l=Object.keys(r),s=0;s<l.length;++s)r[l[s]]!=null&&(this[l[s]]=r[l[s]])}return p.prototype.irVersion=n.Long?n.Long.fromBits(0,0,!1):0,p.prototype.opsetImport=n.emptyArray,p.prototype.producerName="",p.prototype.producerVersion="",p.prototype.domain="",p.prototype.modelVersion=n.Long?n.Long.fromBits(0,0,!1):0,p.prototype.docString="",p.prototype.graph=null,p.prototype.metadataProps=n.emptyArray,p.prototype.trainingInfo=n.emptyArray,p.prototype.functions=n.emptyArray,p.create=function(r){return new p(r)},p.encode=function(r,l){if(l||(l=u.create()),r.irVersion!=null&&Object.hasOwnProperty.call(r,"irVersion")&&l.uint32(8).int64(r.irVersion),r.producerName!=null&&Object.hasOwnProperty.call(r,"producerName")&&l.uint32(18).string(r.producerName),r.producerVersion!=null&&Object.hasOwnProperty.call(r,"producerVersion")&&l.uint32(26).string(r.producerVersion),r.domain!=null&&Object.hasOwnProperty.call(r,"domain")&&l.uint32(34).string(r.domain),r.modelVersion!=null&&Object.hasOwnProperty.call(r,"modelVersion")&&l.uint32(40).int64(r.modelVersion),r.docString!=null&&Object.hasOwnProperty.call(r,"docString")&&l.uint32(50).string(r.docString),r.graph!=null&&Object.hasOwnProperty.call(r,"graph")&&o.onnx.GraphProto.encode(r.graph,l.uint32(58).fork()).ldelim(),r.opsetImport!=null&&r.opsetImport.length)for(var s=0;s<r.opsetImport.length;++s)o.onnx.OperatorSetIdProto.encode(r.opsetImport[s],l.uint32(66).fork()).ldelim();if(r.metadataProps!=null&&r.metadataProps.length)for(var s=0;s<r.metadataProps.length;++s)o.onnx.StringStringEntryProto.encode(r.metadataProps[s],l.uint32(114).fork()).ldelim();if(r.trainingInfo!=null&&r.trainingInfo.length)for(var s=0;s<r.trainingInfo.length;++s)o.onnx.TrainingInfoProto.encode(r.trainingInfo[s],l.uint32(162).fork()).ldelim();if(r.functions!=null&&r.functions.length)for(var s=0;s<r.functions.length;++s)o.onnx.FunctionProto.encode(r.functions[s],l.uint32(202).fork()).ldelim();return l},p.encodeDelimited=function(r,l){return this.encode(r,l).ldelim()},p.decode=function(r,l){r instanceof i||(r=i.create(r));for(var s=l===void 0?r.len:r.pos+l,h=new o.onnx.ModelProto;r.pos<s;){var d=r.uint32();switch(d>>>3){case 1:{h.irVersion=r.int64();break}case 8:{h.opsetImport&&h.opsetImport.length||(h.opsetImport=[]),h.opsetImport.push(o.onnx.OperatorSetIdProto.decode(r,r.uint32()));break}case 2:{h.producerName=r.string();break}case 3:{h.producerVersion=r.string();break}case 4:{h.domain=r.string();break}case 5:{h.modelVersion=r.int64();break}case 6:{h.docString=r.string();break}case 7:{h.graph=o.onnx.GraphProto.decode(r,r.uint32());break}case 14:{h.metadataProps&&h.metadataProps.length||(h.metadataProps=[]),h.metadataProps.push(o.onnx.StringStringEntryProto.decode(r,r.uint32()));break}case 20:{h.trainingInfo&&h.trainingInfo.length||(h.trainingInfo=[]),h.trainingInfo.push(o.onnx.TrainingInfoProto.decode(r,r.uint32()));break}case 25:{h.functions&&h.functions.length||(h.functions=[]),h.functions.push(o.onnx.FunctionProto.decode(r,r.uint32()));break}default:r.skipType(d&7);break}}return h},p.decodeDelimited=function(r){return r instanceof i||(r=new i(r)),this.decode(r,r.uint32())},p.verify=function(r){if(typeof r!="object"||r===null)return"object expected";if(r.irVersion!=null&&r.hasOwnProperty("irVersion")&&!n.isInteger(r.irVersion)&&!(r.irVersion&&n.isInteger(r.irVersion.low)&&n.isInteger(r.irVersion.high)))return"irVersion: integer|Long expected";if(r.opsetImport!=null&&r.hasOwnProperty("opsetImport")){if(!Array.isArray(r.opsetImport))return"opsetImport: array expected";for(var l=0;l<r.opsetImport.length;++l){var s=o.onnx.OperatorSetIdProto.verify(r.opsetImport[l]);if(s)return"opsetImport."+s}}if(r.producerName!=null&&r.hasOwnProperty("producerName")&&!n.isString(r.producerName))return"producerName: string expected";if(r.producerVersion!=null&&r.hasOwnProperty("producerVersion")&&!n.isString(r.producerVersion))return"producerVersion: string expected";if(r.domain!=null&&r.hasOwnProperty("domain")&&!n.isString(r.domain))return"domain: string expected";if(r.modelVersion!=null&&r.hasOwnProperty("modelVersion")&&!n.isInteger(r.modelVersion)&&!(r.modelVersion&&n.isInteger(r.modelVersion.low)&&n.isInteger(r.modelVersion.high)))return"modelVersion: integer|Long expected";if(r.docString!=null&&r.hasOwnProperty("docString")&&!n.isString(r.docString))return"docString: string expected";if(r.graph!=null&&r.hasOwnProperty("graph")){var s=o.onnx.GraphProto.verify(r.graph);if(s)return"graph."+s}if(r.metadataProps!=null&&r.hasOwnProperty("metadataProps")){if(!Array.isArray(r.metadataProps))return"metadataProps: array expected";for(var l=0;l<r.metadataProps.length;++l){var s=o.onnx.StringStringEntryProto.verify(r.metadataProps[l]);if(s)return"metadataProps."+s}}if(r.trainingInfo!=null&&r.hasOwnProperty("trainingInfo")){if(!Array.isArray(r.trainingInfo))return"trainingInfo: array expected";for(var l=0;l<r.trainingInfo.length;++l){var s=o.onnx.TrainingInfoProto.verify(r.trainingInfo[l]);if(s)return"trainingInfo."+s}}if(r.functions!=null&&r.hasOwnProperty("functions")){if(!Array.isArray(r.functions))return"functions: array expected";for(var l=0;l<r.functions.length;++l){var s=o.onnx.FunctionProto.verify(r.functions[l]);if(s)return"functions."+s}}return null},p.fromObject=function(r){if(r instanceof o.onnx.ModelProto)return r;var l=new o.onnx.ModelProto;if(r.irVersion!=null&&(n.Long?(l.irVersion=n.Long.fromValue(r.irVersion)).unsigned=!1:typeof r.irVersion=="string"?l.irVersion=parseInt(r.irVersion,10):typeof r.irVersion=="number"?l.irVersion=r.irVersion:typeof r.irVersion=="object"&&(l.irVersion=new n.LongBits(r.irVersion.low>>>0,r.irVersion.high>>>0).toNumber())),r.opsetImport){if(!Array.isArray(r.opsetImport))throw TypeError(".onnx.ModelProto.opsetImport: array expected");l.opsetImport=[];for(var s=0;s<r.opsetImport.length;++s){if(typeof r.opsetImport[s]!="object")throw TypeError(".onnx.ModelProto.opsetImport: object expected");l.opsetImport[s]=o.onnx.OperatorSetIdProto.fromObject(r.opsetImport[s])}}if(r.producerName!=null&&(l.producerName=String(r.producerName)),r.producerVersion!=null&&(l.producerVersion=String(r.producerVersion)),r.domain!=null&&(l.domain=String(r.domain)),r.modelVersion!=null&&(n.Long?(l.modelVersion=n.Long.fromValue(r.modelVersion)).unsigned=!1:typeof r.modelVersion=="string"?l.modelVersion=parseInt(r.modelVersion,10):typeof r.modelVersion=="number"?l.modelVersion=r.modelVersion:typeof r.modelVersion=="object"&&(l.modelVersion=new n.LongBits(r.modelVersion.low>>>0,r.modelVersion.high>>>0).toNumber())),r.docString!=null&&(l.docString=String(r.docString)),r.graph!=null){if(typeof r.graph!="object")throw TypeError(".onnx.ModelProto.graph: object expected");l.graph=o.onnx.GraphProto.fromObject(r.graph)}if(r.metadataProps){if(!Array.isArray(r.metadataProps))throw TypeError(".onnx.ModelProto.metadataProps: array expected");l.metadataProps=[];for(var s=0;s<r.metadataProps.length;++s){if(typeof r.metadataProps[s]!="object")throw TypeError(".onnx.ModelProto.metadataProps: object expected");l.metadataProps[s]=o.onnx.StringStringEntryProto.fromObject(r.metadataProps[s])}}if(r.trainingInfo){if(!Array.isArray(r.trainingInfo))throw TypeError(".onnx.ModelProto.trainingInfo: array expected");l.trainingInfo=[];for(var s=0;s<r.trainingInfo.length;++s){if(typeof r.trainingInfo[s]!="object")throw TypeError(".onnx.ModelProto.trainingInfo: object expected");l.trainingInfo[s]=o.onnx.TrainingInfoProto.fromObject(r.trainingInfo[s])}}if(r.functions){if(!Array.isArray(r.functions))throw TypeError(".onnx.ModelProto.functions: array expected");l.functions=[];for(var s=0;s<r.functions.length;++s){if(typeof r.functions[s]!="object")throw TypeError(".onnx.ModelProto.functions: object expected");l.functions[s]=o.onnx.FunctionProto.fromObject(r.functions[s])}}return l},p.toObject=function(r,l){l||(l={});var s={};if((l.arrays||l.defaults)&&(s.opsetImport=[],s.metadataProps=[],s.trainingInfo=[],s.functions=[]),l.defaults){if(n.Long){var h=new n.Long(0,0,!1);s.irVersion=l.longs===String?h.toString():l.longs===Number?h.toNumber():h}else s.irVersion=l.longs===String?"0":0;if(s.producerName="",s.producerVersion="",s.domain="",n.Long){var h=new n.Long(0,0,!1);s.modelVersion=l.longs===String?h.toString():l.longs===Number?h.toNumber():h}else s.modelVersion=l.longs===String?"0":0;s.docString="",s.graph=null}if(r.irVersion!=null&&r.hasOwnProperty("irVersion")&&(typeof r.irVersion=="number"?s.irVersion=l.longs===String?String(r.irVersion):r.irVersion:s.irVersion=l.longs===String?n.Long.prototype.toString.call(r.irVersion):l.longs===Number?new n.LongBits(r.irVersion.low>>>0,r.irVersion.high>>>0).toNumber():r.irVersion),r.producerName!=null&&r.hasOwnProperty("producerName")&&(s.producerName=r.producerName),r.producerVersion!=null&&r.hasOwnProperty("producerVersion")&&(s.producerVersion=r.producerVersion),r.domain!=null&&r.hasOwnProperty("domain")&&(s.domain=r.domain),r.modelVersion!=null&&r.hasOwnProperty("modelVersion")&&(typeof r.modelVersion=="number"?s.modelVersion=l.longs===String?String(r.modelVersion):r.modelVersion:s.modelVersion=l.longs===String?n.Long.prototype.toString.call(r.modelVersion):l.longs===Number?new n.LongBits(r.modelVersion.low>>>0,r.modelVersion.high>>>0).toNumber():r.modelVersion),r.docString!=null&&r.hasOwnProperty("docString")&&(s.docString=r.docString),r.graph!=null&&r.hasOwnProperty("graph")&&(s.graph=o.onnx.GraphProto.toObject(r.graph,l)),r.opsetImport&&r.opsetImport.length){s.opsetImport=[];for(var d=0;d<r.opsetImport.length;++d)s.opsetImport[d]=o.onnx.OperatorSetIdProto.toObject(r.opsetImport[d],l)}if(r.metadataProps&&r.metadataProps.length){s.metadataProps=[];for(var d=0;d<r.metadataProps.length;++d)s.metadataProps[d]=o.onnx.StringStringEntryProto.toObject(r.metadataProps[d],l)}if(r.trainingInfo&&r.trainingInfo.length){s.trainingInfo=[];for(var d=0;d<r.trainingInfo.length;++d)s.trainingInfo[d]=o.onnx.TrainingInfoProto.toObject(r.trainingInfo[d],l)}if(r.functions&&r.functions.length){s.functions=[];for(var d=0;d<r.functions.length;++d)s.functions[d]=o.onnx.FunctionProto.toObject(r.functions[d],l)}return s},p.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},p.getTypeUrl=function(r){return r===void 0&&(r="type.googleapis.com"),r+"/onnx.ModelProto"},p}(),c.StringStringEntryProto=function(){function p(r){if(r)for(var l=Object.keys(r),s=0;s<l.length;++s)r[l[s]]!=null&&(this[l[s]]=r[l[s]])}return p.prototype.key="",p.prototype.value="",p.create=function(r){return new p(r)},p.encode=function(r,l){return l||(l=u.create()),r.key!=null&&Object.hasOwnProperty.call(r,"key")&&l.uint32(10).string(r.key),r.value!=null&&Object.hasOwnProperty.call(r,"value")&&l.uint32(18).string(r.value),l},p.encodeDelimited=function(r,l){return this.encode(r,l).ldelim()},p.decode=function(r,l){r instanceof i||(r=i.create(r));for(var s=l===void 0?r.len:r.pos+l,h=new o.onnx.StringStringEntryProto;r.pos<s;){var d=r.uint32();switch(d>>>3){case 1:{h.key=r.string();break}case 2:{h.value=r.string();break}default:r.skipType(d&7);break}}return h},p.decodeDelimited=function(r){return r instanceof i||(r=new i(r)),this.decode(r,r.uint32())},p.verify=function(r){return typeof r!="object"||r===null?"object expected":r.key!=null&&r.hasOwnProperty("key")&&!n.isString(r.key)?"key: string expected":r.value!=null&&r.hasOwnProperty("value")&&!n.isString(r.value)?"value: string expected":null},p.fromObject=function(r){if(r instanceof o.onnx.StringStringEntryProto)return r;var l=new o.onnx.StringStringEntryProto;return r.key!=null&&(l.key=String(r.key)),r.value!=null&&(l.value=String(r.value)),l},p.toObject=function(r,l){l||(l={});var s={};return l.defaults&&(s.key="",s.value=""),r.key!=null&&r.hasOwnProperty("key")&&(s.key=r.key),r.value!=null&&r.hasOwnProperty("value")&&(s.value=r.value),s},p.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},p.getTypeUrl=function(r){return r===void 0&&(r="type.googleapis.com"),r+"/onnx.StringStringEntryProto"},p}(),c.TensorAnnotation=function(){function p(r){if(this.quantParameterTensorNames=[],r)for(var l=Object.keys(r),s=0;s<l.length;++s)r[l[s]]!=null&&(this[l[s]]=r[l[s]])}return p.prototype.tensorName="",p.prototype.quantParameterTensorNames=n.emptyArray,p.create=function(r){return new p(r)},p.encode=function(r,l){if(l||(l=u.create()),r.tensorName!=null&&Object.hasOwnProperty.call(r,"tensorName")&&l.uint32(10).string(r.tensorName),r.quantParameterTensorNames!=null&&r.quantParameterTensorNames.length)for(var s=0;s<r.quantParameterTensorNames.length;++s)o.onnx.StringStringEntryProto.encode(r.quantParameterTensorNames[s],l.uint32(18).fork()).ldelim();return l},p.encodeDelimited=function(r,l){return this.encode(r,l).ldelim()},p.decode=function(r,l){r instanceof i||(r=i.create(r));for(var s=l===void 0?r.len:r.pos+l,h=new o.onnx.TensorAnnotation;r.pos<s;){var d=r.uint32();switch(d>>>3){case 1:{h.tensorName=r.string();break}case 2:{h.quantParameterTensorNames&&h.quantParameterTensorNames.length||(h.quantParameterTensorNames=[]),h.quantParameterTensorNames.push(o.onnx.StringStringEntryProto.decode(r,r.uint32()));break}default:r.skipType(d&7);break}}return h},p.decodeDelimited=function(r){return r instanceof i||(r=new i(r)),this.decode(r,r.uint32())},p.verify=function(r){if(typeof r!="object"||r===null)return"object expected";if(r.tensorName!=null&&r.hasOwnProperty("tensorName")&&!n.isString(r.tensorName))return"tensorName: string expected";if(r.quantParameterTensorNames!=null&&r.hasOwnProperty("quantParameterTensorNames")){if(!Array.isArray(r.quantParameterTensorNames))return"quantParameterTensorNames: array expected";for(var l=0;l<r.quantParameterTensorNames.length;++l){var s=o.onnx.StringStringEntryProto.verify(r.quantParameterTensorNames[l]);if(s)return"quantParameterTensorNames."+s}}return null},p.fromObject=function(r){if(r instanceof o.onnx.TensorAnnotation)return r;var l=new o.onnx.TensorAnnotation;if(r.tensorName!=null&&(l.tensorName=String(r.tensorName)),r.quantParameterTensorNames){if(!Array.isArray(r.quantParameterTensorNames))throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: array expected");l.quantParameterTensorNames=[];for(var s=0;s<r.quantParameterTensorNames.length;++s){if(typeof r.quantParameterTensorNames[s]!="object")throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: object expected");l.quantParameterTensorNames[s]=o.onnx.StringStringEntryProto.fromObject(r.quantParameterTensorNames[s])}}return l},p.toObject=function(r,l){l||(l={});var s={};if((l.arrays||l.defaults)&&(s.quantParameterTensorNames=[]),l.defaults&&(s.tensorName=""),r.tensorName!=null&&r.hasOwnProperty("tensorName")&&(s.tensorName=r.tensorName),r.quantParameterTensorNames&&r.quantParameterTensorNames.length){s.quantParameterTensorNames=[];for(var h=0;h<r.quantParameterTensorNames.length;++h)s.quantParameterTensorNames[h]=o.onnx.StringStringEntryProto.toObject(r.quantParameterTensorNames[h],l)}return s},p.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},p.getTypeUrl=function(r){return r===void 0&&(r="type.googleapis.com"),r+"/onnx.TensorAnnotation"},p}(),c.GraphProto=function(){function p(r){if(this.node=[],this.initializer=[],this.sparseInitializer=[],this.input=[],this.output=[],this.valueInfo=[],this.quantizationAnnotation=[],r)for(var l=Object.keys(r),s=0;s<l.length;++s)r[l[s]]!=null&&(this[l[s]]=r[l[s]])}return p.prototype.node=n.emptyArray,p.prototype.name="",p.prototype.initializer=n.emptyArray,p.prototype.sparseInitializer=n.emptyArray,p.prototype.docString="",p.prototype.input=n.emptyArray,p.prototype.output=n.emptyArray,p.prototype.valueInfo=n.emptyArray,p.prototype.quantizationAnnotation=n.emptyArray,p.create=function(r){return new p(r)},p.encode=function(r,l){if(l||(l=u.create()),r.node!=null&&r.node.length)for(var s=0;s<r.node.length;++s)o.onnx.NodeProto.encode(r.node[s],l.uint32(10).fork()).ldelim();if(r.name!=null&&Object.hasOwnProperty.call(r,"name")&&l.uint32(18).string(r.name),r.initializer!=null&&r.initializer.length)for(var s=0;s<r.initializer.length;++s)o.onnx.TensorProto.encode(r.initializer[s],l.uint32(42).fork()).ldelim();if(r.docString!=null&&Object.hasOwnProperty.call(r,"docString")&&l.uint32(82).string(r.docString),r.input!=null&&r.input.length)for(var s=0;s<r.input.length;++s)o.onnx.ValueInfoProto.encode(r.input[s],l.uint32(90).fork()).ldelim();if(r.output!=null&&r.output.length)for(var s=0;s<r.output.length;++s)o.onnx.ValueInfoProto.encode(r.output[s],l.uint32(98).fork()).ldelim();if(r.valueInfo!=null&&r.valueInfo.length)for(var s=0;s<r.valueInfo.length;++s)o.onnx.ValueInfoProto.encode(r.valueInfo[s],l.uint32(106).fork()).ldelim();if(r.quantizationAnnotation!=null&&r.quantizationAnnotation.length)for(var s=0;s<r.quantizationAnnotation.length;++s)o.onnx.TensorAnnotation.encode(r.quantizationAnnotation[s],l.uint32(114).fork()).ldelim();if(r.sparseInitializer!=null&&r.sparseInitializer.length)for(var s=0;s<r.sparseInitializer.length;++s)o.onnx.SparseTensorProto.encode(r.sparseInitializer[s],l.uint32(122).fork()).ldelim();return l},p.encodeDelimited=function(r,l){return this.encode(r,l).ldelim()},p.decode=function(r,l){r instanceof i||(r=i.create(r));for(var s=l===void 0?r.len:r.pos+l,h=new o.onnx.GraphProto;r.pos<s;){var d=r.uint32();switch(d>>>3){case 1:{h.node&&h.node.length||(h.node=[]),h.node.push(o.onnx.NodeProto.decode(r,r.uint32()));break}case 2:{h.name=r.string();break}case 5:{h.initializer&&h.initializer.length||(h.initializer=[]),h.initializer.push(o.onnx.TensorProto.decode(r,r.uint32()));break}case 15:{h.sparseInitializer&&h.sparseInitializer.length||(h.sparseInitializer=[]),h.sparseInitializer.push(o.onnx.SparseTensorProto.decode(r,r.uint32()));break}case 10:{h.docString=r.string();break}case 11:{h.input&&h.input.length||(h.input=[]),h.input.push(o.onnx.ValueInfoProto.decode(r,r.uint32()));break}case 12:{h.output&&h.output.length||(h.output=[]),h.output.push(o.onnx.ValueInfoProto.decode(r,r.uint32()));break}case 13:{h.valueInfo&&h.valueInfo.length||(h.valueInfo=[]),h.valueInfo.push(o.onnx.ValueInfoProto.decode(r,r.uint32()));break}case 14:{h.quantizationAnnotation&&h.quantizationAnnotation.length||(h.quantizationAnnotation=[]),h.quantizationAnnotation.push(o.onnx.TensorAnnotation.decode(r,r.uint32()));break}default:r.skipType(d&7);break}}return h},p.decodeDelimited=function(r){return r instanceof i||(r=new i(r)),this.decode(r,r.uint32())},p.verify=function(r){if(typeof r!="object"||r===null)return"object expected";if(r.node!=null&&r.hasOwnProperty("node")){if(!Array.isArray(r.node))return"node: array expected";for(var l=0;l<r.node.length;++l){var s=o.onnx.NodeProto.verify(r.node[l]);if(s)return"node."+s}}if(r.name!=null&&r.hasOwnProperty("name")&&!n.isString(r.name))return"name: string expected";if(r.initializer!=null&&r.hasOwnProperty("initializer")){if(!Array.isArray(r.initializer))return"initializer: array expected";for(var l=0;l<r.initializer.length;++l){var s=o.onnx.TensorProto.verify(r.initializer[l]);if(s)return"initializer."+s}}if(r.sparseInitializer!=null&&r.hasOwnProperty("sparseInitializer")){if(!Array.isArray(r.sparseInitializer))return"sparseInitializer: array expected";for(var l=0;l<r.sparseInitializer.length;++l){var s=o.onnx.SparseTensorProto.verify(r.sparseInitializer[l]);if(s)return"sparseInitializer."+s}}if(r.docString!=null&&r.hasOwnProperty("docString")&&!n.isString(r.docString))return"docString: string expected";if(r.input!=null&&r.hasOwnProperty("input")){if(!Array.isArray(r.input))return"input: array expected";for(var l=0;l<r.input.length;++l){var s=o.onnx.ValueInfoProto.verify(r.input[l]);if(s)return"input."+s}}if(r.output!=null&&r.hasOwnProperty("output")){if(!Array.isArray(r.output))return"output: array expected";for(var l=0;l<r.output.length;++l){var s=o.onnx.ValueInfoProto.verify(r.output[l]);if(s)return"output."+s}}if(r.valueInfo!=null&&r.hasOwnProperty("valueInfo")){if(!Array.isArray(r.valueInfo))return"valueInfo: array expected";for(var l=0;l<r.valueInfo.length;++l){var s=o.onnx.ValueInfoProto.verify(r.valueInfo[l]);if(s)return"valueInfo."+s}}if(r.quantizationAnnotation!=null&&r.hasOwnProperty("quantizationAnnotation")){if(!Array.isArray(r.quantizationAnnotation))return"quantizationAnnotation: array expected";for(var l=0;l<r.quantizationAnnotation.length;++l){var s=o.onnx.TensorAnnotation.verify(r.quantizationAnnotation[l]);if(s)return"quantizationAnnotation."+s}}return null},p.fromObject=function(r){if(r instanceof o.onnx.GraphProto)return r;var l=new o.onnx.GraphProto;if(r.node){if(!Array.isArray(r.node))throw TypeError(".onnx.GraphProto.node: array expected");l.node=[];for(var s=0;s<r.node.length;++s){if(typeof r.node[s]!="object")throw TypeError(".onnx.GraphProto.node: object expected");l.node[s]=o.onnx.NodeProto.fromObject(r.node[s])}}if(r.name!=null&&(l.name=String(r.name)),r.initializer){if(!Array.isArray(r.initializer))throw TypeError(".onnx.GraphProto.initializer: array expected");l.initializer=[];for(var s=0;s<r.initializer.length;++s){if(typeof r.initializer[s]!="object")throw TypeError(".onnx.GraphProto.initializer: object expected");l.initializer[s]=o.onnx.TensorProto.fromObject(r.initializer[s])}}if(r.sparseInitializer){if(!Array.isArray(r.sparseInitializer))throw TypeError(".onnx.GraphProto.sparseInitializer: array expected");l.sparseInitializer=[];for(var s=0;s<r.sparseInitializer.length;++s){if(typeof r.sparseInitializer[s]!="object")throw TypeError(".onnx.GraphProto.sparseInitializer: object expected");l.sparseInitializer[s]=o.onnx.SparseTensorProto.fromObject(r.sparseInitializer[s])}}if(r.docString!=null&&(l.docString=String(r.docString)),r.input){if(!Array.isArray(r.input))throw TypeError(".onnx.GraphProto.input: array expected");l.input=[];for(var s=0;s<r.input.length;++s){if(typeof r.input[s]!="object")throw TypeError(".onnx.GraphProto.input: object expected");l.input[s]=o.onnx.ValueInfoProto.fromObject(r.input[s])}}if(r.output){if(!Array.isArray(r.output))throw TypeError(".onnx.GraphProto.output: array expected");l.output=[];for(var s=0;s<r.output.length;++s){if(typeof r.output[s]!="object")throw TypeError(".onnx.GraphProto.output: object expected");l.output[s]=o.onnx.ValueInfoProto.fromObject(r.output[s])}}if(r.valueInfo){if(!Array.isArray(r.valueInfo))throw TypeError(".onnx.GraphProto.valueInfo: array expected");l.valueInfo=[];for(var s=0;s<r.valueInfo.length;++s){if(typeof r.valueInfo[s]!="object")throw TypeError(".onnx.GraphProto.valueInfo: object expected");l.valueInfo[s]=o.onnx.ValueInfoProto.fromObject(r.valueInfo[s])}}if(r.quantizationAnnotation){if(!Array.isArray(r.quantizationAnnotation))throw TypeError(".onnx.GraphProto.quantizationAnnotation: array expected");l.quantizationAnnotation=[];for(var s=0;s<r.quantizationAnnotation.length;++s){if(typeof r.quantizationAnnotation[s]!="object")throw TypeError(".onnx.GraphProto.quantizationAnnotation: object expected");l.quantizationAnnotation[s]=o.onnx.TensorAnnotation.fromObject(r.quantizationAnnotation[s])}}return l},p.toObject=function(r,l){l||(l={});var s={};if((l.arrays||l.defaults)&&(s.node=[],s.initializer=[],s.input=[],s.output=[],s.valueInfo=[],s.quantizationAnnotation=[],s.sparseInitializer=[]),l.defaults&&(s.name="",s.docString=""),r.node&&r.node.length){s.node=[];for(var h=0;h<r.node.length;++h)s.node[h]=o.onnx.NodeProto.toObject(r.node[h],l)}if(r.name!=null&&r.hasOwnProperty("name")&&(s.name=r.name),r.initializer&&r.initializer.length){s.initializer=[];for(var h=0;h<r.initializer.length;++h)s.initializer[h]=o.onnx.TensorProto.toObject(r.initializer[h],l)}if(r.docString!=null&&r.hasOwnProperty("docString")&&(s.docString=r.docString),r.input&&r.input.length){s.input=[];for(var h=0;h<r.input.length;++h)s.input[h]=o.onnx.ValueInfoProto.toObject(r.input[h],l)}if(r.output&&r.output.length){s.output=[];for(var h=0;h<r.output.length;++h)s.output[h]=o.onnx.ValueInfoProto.toObject(r.output[h],l)}if(r.valueInfo&&r.valueInfo.length){s.valueInfo=[];for(var h=0;h<r.valueInfo.length;++h)s.valueInfo[h]=o.onnx.ValueInfoProto.toObject(r.valueInfo[h],l)}if(r.quantizationAnnotation&&r.quantizationAnnotation.length){s.quantizationAnnotation=[];for(var h=0;h<r.quantizationAnnotation.length;++h)s.quantizationAnnotation[h]=o.onnx.TensorAnnotation.toObject(r.quantizationAnnotation[h],l)}if(r.sparseInitializer&&r.sparseInitializer.length){s.sparseInitializer=[];for(var h=0;h<r.sparseInitializer.length;++h)s.sparseInitializer[h]=o.onnx.SparseTensorProto.toObject(r.sparseInitializer[h],l)}return s},p.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},p.getTypeUrl=function(r){return r===void 0&&(r="type.googleapis.com"),r+"/onnx.GraphProto"},p}(),c.TensorProto=function(){function p(r){if(this.dims=[],this.floatData=[],this.int32Data=[],this.stringData=[],this.int64Data=[],this.externalData=[],this.doubleData=[],this.uint64Data=[],r)for(var l=Object.keys(r),s=0;s<l.length;++s)r[l[s]]!=null&&(this[l[s]]=r[l[s]])}return p.prototype.dims=n.emptyArray,p.prototype.dataType=0,p.prototype.segment=null,p.prototype.floatData=n.emptyArray,p.prototype.int32Data=n.emptyArray,p.prototype.stringData=n.emptyArray,p.prototype.int64Data=n.emptyArray,p.prototype.name="",p.prototype.docString="",p.prototype.rawData=n.newBuffer([]),p.prototype.externalData=n.emptyArray,p.prototype.dataLocation=0,p.prototype.doubleData=n.emptyArray,p.prototype.uint64Data=n.emptyArray,p.create=function(r){return new p(r)},p.encode=function(r,l){if(l||(l=u.create()),r.dims!=null&&r.dims.length){l.uint32(10).fork();for(var s=0;s<r.dims.length;++s)l.int64(r.dims[s]);l.ldelim()}if(r.dataType!=null&&Object.hasOwnProperty.call(r,"dataType")&&l.uint32(16).int32(r.dataType),r.segment!=null&&Object.hasOwnProperty.call(r,"segment")&&o.onnx.TensorProto.Segment.encode(r.segment,l.uint32(26).fork()).ldelim(),r.floatData!=null&&r.floatData.length){l.uint32(34).fork();for(var s=0;s<r.floatData.length;++s)l.float(r.floatData[s]);l.ldelim()}if(r.int32Data!=null&&r.int32Data.length){l.uint32(42).fork();for(var s=0;s<r.int32Data.length;++s)l.int32(r.int32Data[s]);l.ldelim()}if(r.stringData!=null&&r.stringData.length)for(var s=0;s<r.stringData.length;++s)l.uint32(50).bytes(r.stringData[s]);if(r.int64Data!=null&&r.int64Data.length){l.uint32(58).fork();for(var s=0;s<r.int64Data.length;++s)l.int64(r.int64Data[s]);l.ldelim()}if(r.name!=null&&Object.hasOwnProperty.call(r,"name")&&l.uint32(66).string(r.name),r.rawData!=null&&Object.hasOwnProperty.call(r,"rawData")&&l.uint32(74).bytes(r.rawData),r.doubleData!=null&&r.doubleData.length){l.uint32(82).fork();for(var s=0;s<r.doubleData.length;++s)l.double(r.doubleData[s]);l.ldelim()}if(r.uint64Data!=null&&r.uint64Data.length){l.uint32(90).fork();for(var s=0;s<r.uint64Data.length;++s)l.uint64(r.uint64Data[s]);l.ldelim()}if(r.docString!=null&&Object.hasOwnProperty.call(r,"docString")&&l.uint32(98).string(r.docString),r.externalData!=null&&r.externalData.length)for(var s=0;s<r.externalData.length;++s)o.onnx.StringStringEntryProto.encode(r.externalData[s],l.uint32(106).fork()).ldelim();return r.dataLocation!=null&&Object.hasOwnProperty.call(r,"dataLocation")&&l.uint32(112).int32(r.dataLocation),l},p.encodeDelimited=function(r,l){return this.encode(r,l).ldelim()},p.decode=function(r,l){r instanceof i||(r=i.create(r));for(var s=l===void 0?r.len:r.pos+l,h=new o.onnx.TensorProto;r.pos<s;){var d=r.uint32();switch(d>>>3){case 1:{if(h.dims&&h.dims.length||(h.dims=[]),(d&7)===2)for(var m=r.uint32()+r.pos;r.pos<m;)h.dims.push(r.int64());else h.dims.push(r.int64());break}case 2:{h.dataType=r.int32();break}case 3:{h.segment=o.onnx.TensorProto.Segment.decode(r,r.uint32());break}case 4:{if(h.floatData&&h.floatData.length||(h.floatData=[]),(d&7)===2)for(var m=r.uint32()+r.pos;r.pos<m;)h.floatData.push(r.float());else h.floatData.push(r.float());break}case 5:{if(h.int32Data&&h.int32Data.length||(h.int32Data=[]),(d&7)===2)for(var m=r.uint32()+r.pos;r.pos<m;)h.int32Data.push(r.int32());else h.int32Data.push(r.int32());break}case 6:{h.stringData&&h.stringData.length||(h.stringData=[]),h.stringData.push(r.bytes());break}case 7:{if(h.int64Data&&h.int64Data.length||(h.int64Data=[]),(d&7)===2)for(var m=r.uint32()+r.pos;r.pos<m;)h.int64Data.push(r.int64());else h.int64Data.push(r.int64());break}case 8:{h.name=r.string();break}case 12:{h.docString=r.string();break}case 9:{h.rawData=r.bytes();break}case 13:{h.externalData&&h.externalData.length||(h.externalData=[]),h.externalData.push(o.onnx.StringStringEntryProto.decode(r,r.uint32()));break}case 14:{h.dataLocation=r.int32();break}case 10:{if(h.doubleData&&h.doubleData.length||(h.doubleData=[]),(d&7)===2)for(var m=r.uint32()+r.pos;r.pos<m;)h.doubleData.push(r.double());else h.doubleData.push(r.double());break}case 11:{if(h.uint64Data&&h.uint64Data.length||(h.uint64Data=[]),(d&7)===2)for(var m=r.uint32()+r.pos;r.pos<m;)h.uint64Data.push(r.uint64());else h.uint64Data.push(r.uint64());break}default:r.skipType(d&7);break}}return h},p.decodeDelimited=function(r){return r instanceof i||(r=new i(r)),this.decode(r,r.uint32())},p.verify=function(r){if(typeof r!="object"||r===null)return"object expected";if(r.dims!=null&&r.hasOwnProperty("dims")){if(!Array.isArray(r.dims))return"dims: array expected";for(var l=0;l<r.dims.length;++l)if(!n.isInteger(r.dims[l])&&!(r.dims[l]&&n.isInteger(r.dims[l].low)&&n.isInteger(r.dims[l].high)))return"dims: integer|Long[] expected"}if(r.dataType!=null&&r.hasOwnProperty("dataType")&&!n.isInteger(r.dataType))return"dataType: integer expected";if(r.segment!=null&&r.hasOwnProperty("segment")){var s=o.onnx.TensorProto.Segment.verify(r.segment);if(s)return"segment."+s}if(r.floatData!=null&&r.hasOwnProperty("floatData")){if(!Array.isArray(r.floatData))return"floatData: array expected";for(var l=0;l<r.floatData.length;++l)if(typeof r.floatData[l]!="number")return"floatData: number[] expected"}if(r.int32Data!=null&&r.hasOwnProperty("int32Data")){if(!Array.isArray(r.int32Data))return"int32Data: array expected";for(var l=0;l<r.int32Data.length;++l)if(!n.isInteger(r.int32Data[l]))return"int32Data: integer[] expected"}if(r.stringData!=null&&r.hasOwnProperty("stringData")){if(!Array.isArray(r.stringData))return"stringData: array expected";for(var l=0;l<r.stringData.length;++l)if(!(r.stringData[l]&&typeof r.stringData[l].length=="number"||n.isString(r.stringData[l])))return"stringData: buffer[] expected"}if(r.int64Data!=null&&r.hasOwnProperty("int64Data")){if(!Array.isArray(r.int64Data))return"int64Data: array expected";for(var l=0;l<r.int64Data.length;++l)if(!n.isInteger(r.int64Data[l])&&!(r.int64Data[l]&&n.isInteger(r.int64Data[l].low)&&n.isInteger(r.int64Data[l].high)))return"int64Data: integer|Long[] expected"}if(r.name!=null&&r.hasOwnProperty("name")&&!n.isString(r.name))return"name: string expected";if(r.docString!=null&&r.hasOwnProperty("docString")&&!n.isString(r.docString))return"docString: string expected";if(r.rawData!=null&&r.hasOwnProperty("rawData")&&!(r.rawData&&typeof r.rawData.length=="number"||n.isString(r.rawData)))return"rawData: buffer expected";if(r.externalData!=null&&r.hasOwnProperty("externalData")){if(!Array.isArray(r.externalData))return"externalData: array expected";for(var l=0;l<r.externalData.length;++l){var s=o.onnx.StringStringEntryProto.verify(r.externalData[l]);if(s)return"externalData."+s}}if(r.dataLocation!=null&&r.hasOwnProperty("dataLocation"))switch(r.dataLocation){default:return"dataLocation: enum value expected";case 0:case 1:break}if(r.doubleData!=null&&r.hasOwnProperty("doubleData")){if(!Array.isArray(r.doubleData))return"doubleData: array expected";for(var l=0;l<r.doubleData.length;++l)if(typeof r.doubleData[l]!="number")return"doubleData: number[] expected"}if(r.uint64Data!=null&&r.hasOwnProperty("uint64Data")){if(!Array.isArray(r.uint64Data))return"uint64Data: array expected";for(var l=0;l<r.uint64Data.length;++l)if(!n.isInteger(r.uint64Data[l])&&!(r.uint64Data[l]&&n.isInteger(r.uint64Data[l].low)&&n.isInteger(r.uint64Data[l].high)))return"uint64Data: integer|Long[] expected"}return null},p.fromObject=function(r){if(r instanceof o.onnx.TensorProto)return r;var l=new o.onnx.TensorProto;if(r.dims){if(!Array.isArray(r.dims))throw TypeError(".onnx.TensorProto.dims: array expected");l.dims=[];for(var s=0;s<r.dims.length;++s)n.Long?(l.dims[s]=n.Long.fromValue(r.dims[s])).unsigned=!1:typeof r.dims[s]=="string"?l.dims[s]=parseInt(r.dims[s],10):typeof r.dims[s]=="number"?l.dims[s]=r.dims[s]:typeof r.dims[s]=="object"&&(l.dims[s]=new n.LongBits(r.dims[s].low>>>0,r.dims[s].high>>>0).toNumber())}if(r.dataType!=null&&(l.dataType=r.dataType|0),r.segment!=null){if(typeof r.segment!="object")throw TypeError(".onnx.TensorProto.segment: object expected");l.segment=o.onnx.TensorProto.Segment.fromObject(r.segment)}if(r.floatData){if(!Array.isArray(r.floatData))throw TypeError(".onnx.TensorProto.floatData: array expected");l.floatData=[];for(var s=0;s<r.floatData.length;++s)l.floatData[s]=Number(r.floatData[s])}if(r.int32Data){if(!Array.isArray(r.int32Data))throw TypeError(".onnx.TensorProto.int32Data: array expected");l.int32Data=[];for(var s=0;s<r.int32Data.length;++s)l.int32Data[s]=r.int32Data[s]|0}if(r.stringData){if(!Array.isArray(r.stringData))throw TypeError(".onnx.TensorProto.stringData: array expected");l.stringData=[];for(var s=0;s<r.stringData.length;++s)typeof r.stringData[s]=="string"?n.base64.decode(r.stringData[s],l.stringData[s]=n.newBuffer(n.base64.length(r.stringData[s])),0):r.stringData[s].length>=0&&(l.stringData[s]=r.stringData[s])}if(r.int64Data){if(!Array.isArray(r.int64Data))throw TypeError(".onnx.TensorProto.int64Data: array expected");l.int64Data=[];for(var s=0;s<r.int64Data.length;++s)n.Long?(l.int64Data[s]=n.Long.fromValue(r.int64Data[s])).unsigned=!1:typeof r.int64Data[s]=="string"?l.int64Data[s]=parseInt(r.int64Data[s],10):typeof r.int64Data[s]=="number"?l.int64Data[s]=r.int64Data[s]:typeof r.int64Data[s]=="object"&&(l.int64Data[s]=new n.LongBits(r.int64Data[s].low>>>0,r.int64Data[s].high>>>0).toNumber())}if(r.name!=null&&(l.name=String(r.name)),r.docString!=null&&(l.docString=String(r.docString)),r.rawData!=null&&(typeof r.rawData=="string"?n.base64.decode(r.rawData,l.rawData=n.newBuffer(n.base64.length(r.rawData)),0):r.rawData.length>=0&&(l.rawData=r.rawData)),r.externalData){if(!Array.isArray(r.externalData))throw TypeError(".onnx.TensorProto.externalData: array expected");l.externalData=[];for(var s=0;s<r.externalData.length;++s){if(typeof r.externalData[s]!="object")throw TypeError(".onnx.TensorProto.externalData: object expected");l.externalData[s]=o.onnx.StringStringEntryProto.fromObject(r.externalData[s])}}switch(r.dataLocation){default:if(typeof r.dataLocation=="number"){l.dataLocation=r.dataLocation;break}break;case"DEFAULT":case 0:l.dataLocation=0;break;case"EXTERNAL":case 1:l.dataLocation=1;break}if(r.doubleData){if(!Array.isArray(r.doubleData))throw TypeError(".onnx.TensorProto.doubleData: array expected");l.doubleData=[];for(var s=0;s<r.doubleData.length;++s)l.doubleData[s]=Number(r.doubleData[s])}if(r.uint64Data){if(!Array.isArray(r.uint64Data))throw TypeError(".onnx.TensorProto.uint64Data: array expected");l.uint64Data=[];for(var s=0;s<r.uint64Data.length;++s)n.Long?(l.uint64Data[s]=n.Long.fromValue(r.uint64Data[s])).unsigned=!0:typeof r.uint64Data[s]=="string"?l.uint64Data[s]=parseInt(r.uint64Data[s],10):typeof r.uint64Data[s]=="number"?l.uint64Data[s]=r.uint64Data[s]:typeof r.uint64Data[s]=="object"&&(l.uint64Data[s]=new n.LongBits(r.uint64Data[s].low>>>0,r.uint64Data[s].high>>>0).toNumber(!0))}return l},p.toObject=function(r,l){l||(l={});var s={};if((l.arrays||l.defaults)&&(s.dims=[],s.floatData=[],s.int32Data=[],s.stringData=[],s.int64Data=[],s.doubleData=[],s.uint64Data=[],s.externalData=[]),l.defaults&&(s.dataType=0,s.segment=null,s.name="",l.bytes===String?s.rawData="":(s.rawData=[],l.bytes!==Array&&(s.rawData=n.newBuffer(s.rawData))),s.docString="",s.dataLocation=l.enums===String?"DEFAULT":0),r.dims&&r.dims.length){s.dims=[];for(var h=0;h<r.dims.length;++h)typeof r.dims[h]=="number"?s.dims[h]=l.longs===String?String(r.dims[h]):r.dims[h]:s.dims[h]=l.longs===String?n.Long.prototype.toString.call(r.dims[h]):l.longs===Number?new n.LongBits(r.dims[h].low>>>0,r.dims[h].high>>>0).toNumber():r.dims[h]}if(r.dataType!=null&&r.hasOwnProperty("dataType")&&(s.dataType=r.dataType),r.segment!=null&&r.hasOwnProperty("segment")&&(s.segment=o.onnx.TensorProto.Segment.toObject(r.segment,l)),r.floatData&&r.floatData.length){s.floatData=[];for(var h=0;h<r.floatData.length;++h)s.floatData[h]=l.json&&!isFinite(r.floatData[h])?String(r.floatData[h]):r.floatData[h]}if(r.int32Data&&r.int32Data.length){s.int32Data=[];for(var h=0;h<r.int32Data.length;++h)s.int32Data[h]=r.int32Data[h]}if(r.stringData&&r.stringData.length){s.stringData=[];for(var h=0;h<r.stringData.length;++h)s.stringData[h]=l.bytes===String?n.base64.encode(r.stringData[h],0,r.stringData[h].length):l.bytes===Array?Array.prototype.slice.call(r.stringData[h]):r.stringData[h]}if(r.int64Data&&r.int64Data.length){s.int64Data=[];for(var h=0;h<r.int64Data.length;++h)typeof r.int64Data[h]=="number"?s.int64Data[h]=l.longs===String?String(r.int64Data[h]):r.int64Data[h]:s.int64Data[h]=l.longs===String?n.Long.prototype.toString.call(r.int64Data[h]):l.longs===Number?new n.LongBits(r.int64Data[h].low>>>0,r.int64Data[h].high>>>0).toNumber():r.int64Data[h]}if(r.name!=null&&r.hasOwnProperty("name")&&(s.name=r.name),r.rawData!=null&&r.hasOwnProperty("rawData")&&(s.rawData=l.bytes===String?n.base64.encode(r.rawData,0,r.rawData.length):l.bytes===Array?Array.prototype.slice.call(r.rawData):r.rawData),r.doubleData&&r.doubleData.length){s.doubleData=[];for(var h=0;h<r.doubleData.length;++h)s.doubleData[h]=l.json&&!isFinite(r.doubleData[h])?String(r.doubleData[h]):r.doubleData[h]}if(r.uint64Data&&r.uint64Data.length){s.uint64Data=[];for(var h=0;h<r.uint64Data.length;++h)typeof r.uint64Data[h]=="number"?s.uint64Data[h]=l.longs===String?String(r.uint64Data[h]):r.uint64Data[h]:s.uint64Data[h]=l.longs===String?n.Long.prototype.toString.call(r.uint64Data[h]):l.longs===Number?new n.LongBits(r.uint64Data[h].low>>>0,r.uint64Data[h].high>>>0).toNumber(!0):r.uint64Data[h]}if(r.docString!=null&&r.hasOwnProperty("docString")&&(s.docString=r.docString),r.externalData&&r.externalData.length){s.externalData=[];for(var h=0;h<r.externalData.length;++h)s.externalData[h]=o.onnx.StringStringEntryProto.toObject(r.externalData[h],l)}return r.dataLocation!=null&&r.hasOwnProperty("dataLocation")&&(s.dataLocation=l.enums===String?o.onnx.TensorProto.DataLocation[r.dataLocation]===void 0?r.dataLocation:o.onnx.TensorProto.DataLocation[r.dataLocation]:r.dataLocation),s},p.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},p.getTypeUrl=function(r){return r===void 0&&(r="type.googleapis.com"),r+"/onnx.TensorProto"},p.DataType=function(){var r={},l=Object.create(r);return l[r[0]="UNDEFINED"]=0,l[r[1]="FLOAT"]=1,l[r[2]="UINT8"]=2,l[r[3]="INT8"]=3,l[r[4]="UINT16"]=4,l[r[5]="INT16"]=5,l[r[6]="INT32"]=6,l[r[7]="INT64"]=7,l[r[8]="STRING"]=8,l[r[9]="BOOL"]=9,l[r[10]="FLOAT16"]=10,l[r[11]="DOUBLE"]=11,l[r[12]="UINT32"]=12,l[r[13]="UINT64"]=13,l[r[14]="COMPLEX64"]=14,l[r[15]="COMPLEX128"]=15,l[r[16]="BFLOAT16"]=16,l[r[17]="FLOAT8E4M3FN"]=17,l[r[18]="FLOAT8E4M3FNUZ"]=18,l[r[19]="FLOAT8E5M2"]=19,l[r[20]="FLOAT8E5M2FNUZ"]=20,l}(),p.Segment=function(){function r(l){if(l)for(var s=Object.keys(l),h=0;h<s.length;++h)l[s[h]]!=null&&(this[s[h]]=l[s[h]])}return r.prototype.begin=n.Long?n.Long.fromBits(0,0,!1):0,r.prototype.end=n.Long?n.Long.fromBits(0,0,!1):0,r.create=function(l){return new r(l)},r.encode=function(l,s){return s||(s=u.create()),l.begin!=null&&Object.hasOwnProperty.call(l,"begin")&&s.uint32(8).int64(l.begin),l.end!=null&&Object.hasOwnProperty.call(l,"end")&&s.uint32(16).int64(l.end),s},r.encodeDelimited=function(l,s){return this.encode(l,s).ldelim()},r.decode=function(l,s){l instanceof i||(l=i.create(l));for(var h=s===void 0?l.len:l.pos+s,d=new o.onnx.TensorProto.Segment;l.pos<h;){var m=l.uint32();switch(m>>>3){case 1:{d.begin=l.int64();break}case 2:{d.end=l.int64();break}default:l.skipType(m&7);break}}return d},r.decodeDelimited=function(l){return l instanceof i||(l=new i(l)),this.decode(l,l.uint32())},r.verify=function(l){return typeof l!="object"||l===null?"object expected":l.begin!=null&&l.hasOwnProperty("begin")&&!n.isInteger(l.begin)&&!(l.begin&&n.isInteger(l.begin.low)&&n.isInteger(l.begin.high))?"begin: integer|Long expected":l.end!=null&&l.hasOwnProperty("end")&&!n.isInteger(l.end)&&!(l.end&&n.isInteger(l.end.low)&&n.isInteger(l.end.high))?"end: integer|Long expected":null},r.fromObject=function(l){if(l instanceof o.onnx.TensorProto.Segment)return l;var s=new o.onnx.TensorProto.Segment;return l.begin!=null&&(n.Long?(s.begin=n.Long.fromValue(l.begin)).unsigned=!1:typeof l.begin=="string"?s.begin=parseInt(l.begin,10):typeof l.begin=="number"?s.begin=l.begin:typeof l.begin=="object"&&(s.begin=new n.LongBits(l.begin.low>>>0,l.begin.high>>>0).toNumber())),l.end!=null&&(n.Long?(s.end=n.Long.fromValue(l.end)).unsigned=!1:typeof l.end=="string"?s.end=parseInt(l.end,10):typeof l.end=="number"?s.end=l.end:typeof l.end=="object"&&(s.end=new n.LongBits(l.end.low>>>0,l.end.high>>>0).toNumber())),s},r.toObject=function(l,s){s||(s={});var h={};if(s.defaults){if(n.Long){var d=new n.Long(0,0,!1);h.begin=s.longs===String?d.toString():s.longs===Number?d.toNumber():d}else h.begin=s.longs===String?"0":0;if(n.Long){var d=new n.Long(0,0,!1);h.end=s.longs===String?d.toString():s.longs===Number?d.toNumber():d}else h.end=s.longs===String?"0":0}return l.begin!=null&&l.hasOwnProperty("begin")&&(typeof l.begin=="number"?h.begin=s.longs===String?String(l.begin):l.begin:h.begin=s.longs===String?n.Long.prototype.toString.call(l.begin):s.longs===Number?new n.LongBits(l.begin.low>>>0,l.begin.high>>>0).toNumber():l.begin),l.end!=null&&l.hasOwnProperty("end")&&(typeof l.end=="number"?h.end=s.longs===String?String(l.end):l.end:h.end=s.longs===String?n.Long.prototype.toString.call(l.end):s.longs===Number?new n.LongBits(l.end.low>>>0,l.end.high>>>0).toNumber():l.end),h},r.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},r.getTypeUrl=function(l){return l===void 0&&(l="type.googleapis.com"),l+"/onnx.TensorProto.Segment"},r}(),p.DataLocation=function(){var r={},l=Object.create(r);return l[r[0]="DEFAULT"]=0,l[r[1]="EXTERNAL"]=1,l}(),p}(),c.SparseTensorProto=function(){function p(r){if(this.dims=[],r)for(var l=Object.keys(r),s=0;s<l.length;++s)r[l[s]]!=null&&(this[l[s]]=r[l[s]])}return p.prototype.values=null,p.prototype.indices=null,p.prototype.dims=n.emptyArray,p.create=function(r){return new p(r)},p.encode=function(r,l){if(l||(l=u.create()),r.values!=null&&Object.hasOwnProperty.call(r,"values")&&o.onnx.TensorProto.encode(r.values,l.uint32(10).fork()).ldelim(),r.indices!=null&&Object.hasOwnProperty.call(r,"indices")&&o.onnx.TensorProto.encode(r.indices,l.uint32(18).fork()).ldelim(),r.dims!=null&&r.dims.length){l.uint32(26).fork();for(var s=0;s<r.dims.length;++s)l.int64(r.dims[s]);l.ldelim()}return l},p.encodeDelimited=function(r,l){return this.encode(r,l).ldelim()},p.decode=function(r,l){r instanceof i||(r=i.create(r));for(var s=l===void 0?r.len:r.pos+l,h=new o.onnx.SparseTensorProto;r.pos<s;){var d=r.uint32();switch(d>>>3){case 1:{h.values=o.onnx.TensorProto.decode(r,r.uint32());break}case 2:{h.indices=o.onnx.TensorProto.decode(r,r.uint32());break}case 3:{if(h.dims&&h.dims.length||(h.dims=[]),(d&7)===2)for(var m=r.uint32()+r.pos;r.pos<m;)h.dims.push(r.int64());else h.dims.push(r.int64());break}default:r.skipType(d&7);break}}return h},p.decodeDelimited=function(r){return r instanceof i||(r=new i(r)),this.decode(r,r.uint32())},p.verify=function(r){if(typeof r!="object"||r===null)return"object expected";if(r.values!=null&&r.hasOwnProperty("values")){var l=o.onnx.TensorProto.verify(r.values);if(l)return"values."+l}if(r.indices!=null&&r.hasOwnProperty("indices")){var l=o.onnx.TensorProto.verify(r.indices);if(l)return"indices."+l}if(r.dims!=null&&r.hasOwnProperty("dims")){if(!Array.isArray(r.dims))return"dims: array expected";for(var s=0;s<r.dims.length;++s)if(!n.isInteger(r.dims[s])&&!(r.dims[s]&&n.isInteger(r.dims[s].low)&&n.isInteger(r.dims[s].high)))return"dims: integer|Long[] expected"}return null},p.fromObject=function(r){if(r instanceof o.onnx.SparseTensorProto)return r;var l=new o.onnx.SparseTensorProto;if(r.values!=null){if(typeof r.values!="object")throw TypeError(".onnx.SparseTensorProto.values: object expected");l.values=o.onnx.TensorProto.fromObject(r.values)}if(r.indices!=null){if(typeof r.indices!="object")throw TypeError(".onnx.SparseTensorProto.indices: object expected");l.indices=o.onnx.TensorProto.fromObject(r.indices)}if(r.dims){if(!Array.isArray(r.dims))throw TypeError(".onnx.SparseTensorProto.dims: array expected");l.dims=[];for(var s=0;s<r.dims.length;++s)n.Long?(l.dims[s]=n.Long.fromValue(r.dims[s])).unsigned=!1:typeof r.dims[s]=="string"?l.dims[s]=parseInt(r.dims[s],10):typeof r.dims[s]=="number"?l.dims[s]=r.dims[s]:typeof r.dims[s]=="object"&&(l.dims[s]=new n.LongBits(r.dims[s].low>>>0,r.dims[s].high>>>0).toNumber())}return l},p.toObject=function(r,l){l||(l={});var s={};if((l.arrays||l.defaults)&&(s.dims=[]),l.defaults&&(s.values=null,s.indices=null),r.values!=null&&r.hasOwnProperty("values")&&(s.values=o.onnx.TensorProto.toObject(r.values,l)),r.indices!=null&&r.hasOwnProperty("indices")&&(s.indices=o.onnx.TensorProto.toObject(r.indices,l)),r.dims&&r.dims.length){s.dims=[];for(var h=0;h<r.dims.length;++h)typeof r.dims[h]=="number"?s.dims[h]=l.longs===String?String(r.dims[h]):r.dims[h]:s.dims[h]=l.longs===String?n.Long.prototype.toString.call(r.dims[h]):l.longs===Number?new n.LongBits(r.dims[h].low>>>0,r.dims[h].high>>>0).toNumber():r.dims[h]}return s},p.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},p.getTypeUrl=function(r){return r===void 0&&(r="type.googleapis.com"),r+"/onnx.SparseTensorProto"},p}(),c.TensorShapeProto=function(){function p(r){if(this.dim=[],r)for(var l=Object.keys(r),s=0;s<l.length;++s)r[l[s]]!=null&&(this[l[s]]=r[l[s]])}return p.prototype.dim=n.emptyArray,p.create=function(r){return new p(r)},p.encode=function(r,l){if(l||(l=u.create()),r.dim!=null&&r.dim.length)for(var s=0;s<r.dim.length;++s)o.onnx.TensorShapeProto.Dimension.encode(r.dim[s],l.uint32(10).fork()).ldelim();return l},p.encodeDelimited=function(r,l){return this.encode(r,l).ldelim()},p.decode=function(r,l){r instanceof i||(r=i.create(r));for(var s=l===void 0?r.len:r.pos+l,h=new o.onnx.TensorShapeProto;r.pos<s;){var d=r.uint32();switch(d>>>3){case 1:{h.dim&&h.dim.length||(h.dim=[]),h.dim.push(o.onnx.TensorShapeProto.Dimension.decode(r,r.uint32()));break}default:r.skipType(d&7);break}}return h},p.decodeDelimited=function(r){return r instanceof i||(r=new i(r)),this.decode(r,r.uint32())},p.verify=function(r){if(typeof r!="object"||r===null)return"object expected";if(r.dim!=null&&r.hasOwnProperty("dim")){if(!Array.isArray(r.dim))return"dim: array expected";for(var l=0;l<r.dim.length;++l){var s=o.onnx.TensorShapeProto.Dimension.verify(r.dim[l]);if(s)return"dim."+s}}return null},p.fromObject=function(r){if(r instanceof o.onnx.TensorShapeProto)return r;var l=new o.onnx.TensorShapeProto;if(r.dim){if(!Array.isArray(r.dim))throw TypeError(".onnx.TensorShapeProto.dim: array expected");l.dim=[];for(var s=0;s<r.dim.length;++s){if(typeof r.dim[s]!="object")throw TypeError(".onnx.TensorShapeProto.dim: object expected");l.dim[s]=o.onnx.TensorShapeProto.Dimension.fromObject(r.dim[s])}}return l},p.toObject=function(r,l){l||(l={});var s={};if((l.arrays||l.defaults)&&(s.dim=[]),r.dim&&r.dim.length){s.dim=[];for(var h=0;h<r.dim.length;++h)s.dim[h]=o.onnx.TensorShapeProto.Dimension.toObject(r.dim[h],l)}return s},p.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},p.getTypeUrl=function(r){return r===void 0&&(r="type.googleapis.com"),r+"/onnx.TensorShapeProto"},p.Dimension=function(){function r(s){if(s)for(var h=Object.keys(s),d=0;d<h.length;++d)s[h[d]]!=null&&(this[h[d]]=s[h[d]])}r.prototype.dimValue=null,r.prototype.dimParam=null,r.prototype.denotation="";var l;return Object.defineProperty(r.prototype,"value",{get:n.oneOfGetter(l=["dimValue","dimParam"]),set:n.oneOfSetter(l)}),r.create=function(s){return new r(s)},r.encode=function(s,h){return h||(h=u.create()),s.dimValue!=null&&Object.hasOwnProperty.call(s,"dimValue")&&h.uint32(8).int64(s.dimValue),s.dimParam!=null&&Object.hasOwnProperty.call(s,"dimParam")&&h.uint32(18).string(s.dimParam),s.denotation!=null&&Object.hasOwnProperty.call(s,"denotation")&&h.uint32(26).string(s.denotation),h},r.encodeDelimited=function(s,h){return this.encode(s,h).ldelim()},r.decode=function(s,h){s instanceof i||(s=i.create(s));for(var d=h===void 0?s.len:s.pos+h,m=new o.onnx.TensorShapeProto.Dimension;s.pos<d;){var b=s.uint32();switch(b>>>3){case 1:{m.dimValue=s.int64();break}case 2:{m.dimParam=s.string();break}case 3:{m.denotation=s.string();break}default:s.skipType(b&7);break}}return m},r.decodeDelimited=function(s){return s instanceof i||(s=new i(s)),this.decode(s,s.uint32())},r.verify=function(s){if(typeof s!="object"||s===null)return"object expected";var h={};if(s.dimValue!=null&&s.hasOwnProperty("dimValue")&&(h.value=1,!n.isInteger(s.dimValue)&&!(s.dimValue&&n.isInteger(s.dimValue.low)&&n.isInteger(s.dimValue.high))))return"dimValue: integer|Long expected";if(s.dimParam!=null&&s.hasOwnProperty("dimParam")){if(h.value===1)return"value: multiple values";if(h.value=1,!n.isString(s.dimParam))return"dimParam: string expected"}return s.denotation!=null&&s.hasOwnProperty("denotation")&&!n.isString(s.denotation)?"denotation: string expected":null},r.fromObject=function(s){if(s instanceof o.onnx.TensorShapeProto.Dimension)return s;var h=new o.onnx.TensorShapeProto.Dimension;return s.dimValue!=null&&(n.Long?(h.dimValue=n.Long.fromValue(s.dimValue)).unsigned=!1:typeof s.dimValue=="string"?h.dimValue=parseInt(s.dimValue,10):typeof s.dimValue=="number"?h.dimValue=s.dimValue:typeof s.dimValue=="object"&&(h.dimValue=new n.LongBits(s.dimValue.low>>>0,s.dimValue.high>>>0).toNumber())),s.dimParam!=null&&(h.dimParam=String(s.dimParam)),s.denotation!=null&&(h.denotation=String(s.denotation)),h},r.toObject=function(s,h){h||(h={});var d={};return h.defaults&&(d.denotation=""),s.dimValue!=null&&s.hasOwnProperty("dimValue")&&(typeof s.dimValue=="number"?d.dimValue=h.longs===String?String(s.dimValue):s.dimValue:d.dimValue=h.longs===String?n.Long.prototype.toString.call(s.dimValue):h.longs===Number?new n.LongBits(s.dimValue.low>>>0,s.dimValue.high>>>0).toNumber():s.dimValue,h.oneofs&&(d.value="dimValue")),s.dimParam!=null&&s.hasOwnProperty("dimParam")&&(d.dimParam=s.dimParam,h.oneofs&&(d.value="dimParam")),s.denotation!=null&&s.hasOwnProperty("denotation")&&(d.denotation=s.denotation),d},r.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},r.getTypeUrl=function(s){return s===void 0&&(s="type.googleapis.com"),s+"/onnx.TensorShapeProto.Dimension"},r}(),p}(),c.TypeProto=function(){function p(l){if(l)for(var s=Object.keys(l),h=0;h<s.length;++h)l[s[h]]!=null&&(this[s[h]]=l[s[h]])}p.prototype.tensorType=null,p.prototype.sequenceType=null,p.prototype.mapType=null,p.prototype.optionalType=null,p.prototype.sparseTensorType=null,p.prototype.denotation="";var r;return Object.defineProperty(p.prototype,"value",{get:n.oneOfGetter(r=["tensorType","sequenceType","mapType","optionalType","sparseTensorType"]),set:n.oneOfSetter(r)}),p.create=function(l){return new p(l)},p.encode=function(l,s){return s||(s=u.create()),l.tensorType!=null&&Object.hasOwnProperty.call(l,"tensorType")&&o.onnx.TypeProto.Tensor.encode(l.tensorType,s.uint32(10).fork()).ldelim(),l.sequenceType!=null&&Object.hasOwnProperty.call(l,"sequenceType")&&o.onnx.TypeProto.Sequence.encode(l.sequenceType,s.uint32(34).fork()).ldelim(),l.mapType!=null&&Object.hasOwnProperty.call(l,"mapType")&&o.onnx.TypeProto.Map.encode(l.mapType,s.uint32(42).fork()).ldelim(),l.denotation!=null&&Object.hasOwnProperty.call(l,"denotation")&&s.uint32(50).string(l.denotation),l.sparseTensorType!=null&&Object.hasOwnProperty.call(l,"sparseTensorType")&&o.onnx.TypeProto.SparseTensor.encode(l.sparseTensorType,s.uint32(66).fork()).ldelim(),l.optionalType!=null&&Object.hasOwnProperty.call(l,"optionalType")&&o.onnx.TypeProto.Optional.encode(l.optionalType,s.uint32(74).fork()).ldelim(),s},p.encodeDelimited=function(l,s){return this.encode(l,s).ldelim()},p.decode=function(l,s){l instanceof i||(l=i.create(l));for(var h=s===void 0?l.len:l.pos+s,d=new o.onnx.TypeProto;l.pos<h;){var m=l.uint32();switch(m>>>3){case 1:{d.tensorType=o.onnx.TypeProto.Tensor.decode(l,l.uint32());break}case 4:{d.sequenceType=o.onnx.TypeProto.Sequence.decode(l,l.uint32());break}case 5:{d.mapType=o.onnx.TypeProto.Map.decode(l,l.uint32());break}case 9:{d.optionalType=o.onnx.TypeProto.Optional.decode(l,l.uint32());break}case 8:{d.sparseTensorType=o.onnx.TypeProto.SparseTensor.decode(l,l.uint32());break}case 6:{d.denotation=l.string();break}default:l.skipType(m&7);break}}return d},p.decodeDelimited=function(l){return l instanceof i||(l=new i(l)),this.decode(l,l.uint32())},p.verify=function(l){if(typeof l!="object"||l===null)return"object expected";var s={};if(l.tensorType!=null&&l.hasOwnProperty("tensorType")){s.value=1;{var h=o.onnx.TypeProto.Tensor.verify(l.tensorType);if(h)return"tensorType."+h}}if(l.sequenceType!=null&&l.hasOwnProperty("sequenceType")){if(s.value===1)return"value: multiple values";s.value=1;{var h=o.onnx.TypeProto.Sequence.verify(l.sequenceType);if(h)return"sequenceType."+h}}if(l.mapType!=null&&l.hasOwnProperty("mapType")){if(s.value===1)return"value: multiple values";s.value=1;{var h=o.onnx.TypeProto.Map.verify(l.mapType);if(h)return"mapType."+h}}if(l.optionalType!=null&&l.hasOwnProperty("optionalType")){if(s.value===1)return"value: multiple values";s.value=1;{var h=o.onnx.TypeProto.Optional.verify(l.optionalType);if(h)return"optionalType."+h}}if(l.sparseTensorType!=null&&l.hasOwnProperty("sparseTensorType")){if(s.value===1)return"value: multiple values";s.value=1;{var h=o.onnx.TypeProto.SparseTensor.verify(l.sparseTensorType);if(h)return"sparseTensorType."+h}}return l.denotation!=null&&l.hasOwnProperty("denotation")&&!n.isString(l.denotation)?"denotation: string expected":null},p.fromObject=function(l){if(l instanceof o.onnx.TypeProto)return l;var s=new o.onnx.TypeProto;if(l.tensorType!=null){if(typeof l.tensorType!="object")throw TypeError(".onnx.TypeProto.tensorType: object expected");s.tensorType=o.onnx.TypeProto.Tensor.fromObject(l.tensorType)}if(l.sequenceType!=null){if(typeof l.sequenceType!="object")throw TypeError(".onnx.TypeProto.sequenceType: object expected");s.sequenceType=o.onnx.TypeProto.Sequence.fromObject(l.sequenceType)}if(l.mapType!=null){if(typeof l.mapType!="object")throw TypeError(".onnx.TypeProto.mapType: object expected");s.mapType=o.onnx.TypeProto.Map.fromObject(l.mapType)}if(l.optionalType!=null){if(typeof l.optionalType!="object")throw TypeError(".onnx.TypeProto.optionalType: object expected");s.optionalType=o.onnx.TypeProto.Optional.fromObject(l.optionalType)}if(l.sparseTensorType!=null){if(typeof l.sparseTensorType!="object")throw TypeError(".onnx.TypeProto.sparseTensorType: object expected");s.sparseTensorType=o.onnx.TypeProto.SparseTensor.fromObject(l.sparseTensorType)}return l.denotation!=null&&(s.denotation=String(l.denotation)),s},p.toObject=function(l,s){s||(s={});var h={};return s.defaults&&(h.denotation=""),l.tensorType!=null&&l.hasOwnProperty("tensorType")&&(h.tensorType=o.onnx.TypeProto.Tensor.toObject(l.tensorType,s),s.oneofs&&(h.value="tensorType")),l.sequenceType!=null&&l.hasOwnProperty("sequenceType")&&(h.sequenceType=o.onnx.TypeProto.Sequence.toObject(l.sequenceType,s),s.oneofs&&(h.value="sequenceType")),l.mapType!=null&&l.hasOwnProperty("mapType")&&(h.mapType=o.onnx.TypeProto.Map.toObject(l.mapType,s),s.oneofs&&(h.value="mapType")),l.denotation!=null&&l.hasOwnProperty("denotation")&&(h.denotation=l.denotation),l.sparseTensorType!=null&&l.hasOwnProperty("sparseTensorType")&&(h.sparseTensorType=o.onnx.TypeProto.SparseTensor.toObject(l.sparseTensorType,s),s.oneofs&&(h.value="sparseTensorType")),l.optionalType!=null&&l.hasOwnProperty("optionalType")&&(h.optionalType=o.onnx.TypeProto.Optional.toObject(l.optionalType,s),s.oneofs&&(h.value="optionalType")),h},p.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},p.getTypeUrl=function(l){return l===void 0&&(l="type.googleapis.com"),l+"/onnx.TypeProto"},p.Tensor=function(){function l(s){if(s)for(var h=Object.keys(s),d=0;d<h.length;++d)s[h[d]]!=null&&(this[h[d]]=s[h[d]])}return l.prototype.elemType=0,l.prototype.shape=null,l.create=function(s){return new l(s)},l.encode=function(s,h){return h||(h=u.create()),s.elemType!=null&&Object.hasOwnProperty.call(s,"elemType")&&h.uint32(8).int32(s.elemType),s.shape!=null&&Object.hasOwnProperty.call(s,"shape")&&o.onnx.TensorShapeProto.encode(s.shape,h.uint32(18).fork()).ldelim(),h},l.encodeDelimited=function(s,h){return this.encode(s,h).ldelim()},l.decode=function(s,h){s instanceof i||(s=i.create(s));for(var d=h===void 0?s.len:s.pos+h,m=new o.onnx.TypeProto.Tensor;s.pos<d;){var b=s.uint32();switch(b>>>3){case 1:{m.elemType=s.int32();break}case 2:{m.shape=o.onnx.TensorShapeProto.decode(s,s.uint32());break}default:s.skipType(b&7);break}}return m},l.decodeDelimited=function(s){return s instanceof i||(s=new i(s)),this.decode(s,s.uint32())},l.verify=function(s){if(typeof s!="object"||s===null)return"object expected";if(s.elemType!=null&&s.hasOwnProperty("elemType")&&!n.isInteger(s.elemType))return"elemType: integer expected";if(s.shape!=null&&s.hasOwnProperty("shape")){var h=o.onnx.TensorShapeProto.verify(s.shape);if(h)return"shape."+h}return null},l.fromObject=function(s){if(s instanceof o.onnx.TypeProto.Tensor)return s;var h=new o.onnx.TypeProto.Tensor;if(s.elemType!=null&&(h.elemType=s.elemType|0),s.shape!=null){if(typeof s.shape!="object")throw TypeError(".onnx.TypeProto.Tensor.shape: object expected");h.shape=o.onnx.TensorShapeProto.fromObject(s.shape)}return h},l.toObject=function(s,h){h||(h={});var d={};return h.defaults&&(d.elemType=0,d.shape=null),s.elemType!=null&&s.hasOwnProperty("elemType")&&(d.elemType=s.elemType),s.shape!=null&&s.hasOwnProperty("shape")&&(d.shape=o.onnx.TensorShapeProto.toObject(s.shape,h)),d},l.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},l.getTypeUrl=function(s){return s===void 0&&(s="type.googleapis.com"),s+"/onnx.TypeProto.Tensor"},l}(),p.Sequence=function(){function l(s){if(s)for(var h=Object.keys(s),d=0;d<h.length;++d)s[h[d]]!=null&&(this[h[d]]=s[h[d]])}return l.prototype.elemType=null,l.create=function(s){return new l(s)},l.encode=function(s,h){return h||(h=u.create()),s.elemType!=null&&Object.hasOwnProperty.call(s,"elemType")&&o.onnx.TypeProto.encode(s.elemType,h.uint32(10).fork()).ldelim(),h},l.encodeDelimited=function(s,h){return this.encode(s,h).ldelim()},l.decode=function(s,h){s instanceof i||(s=i.create(s));for(var d=h===void 0?s.len:s.pos+h,m=new o.onnx.TypeProto.Sequence;s.pos<d;){var b=s.uint32();switch(b>>>3){case 1:{m.elemType=o.onnx.TypeProto.decode(s,s.uint32());break}default:s.skipType(b&7);break}}return m},l.decodeDelimited=function(s){return s instanceof i||(s=new i(s)),this.decode(s,s.uint32())},l.verify=function(s){if(typeof s!="object"||s===null)return"object expected";if(s.elemType!=null&&s.hasOwnProperty("elemType")){var h=o.onnx.TypeProto.verify(s.elemType);if(h)return"elemType."+h}return null},l.fromObject=function(s){if(s instanceof o.onnx.TypeProto.Sequence)return s;var h=new o.onnx.TypeProto.Sequence;if(s.elemType!=null){if(typeof s.elemType!="object")throw TypeError(".onnx.TypeProto.Sequence.elemType: object expected");h.elemType=o.onnx.TypeProto.fromObject(s.elemType)}return h},l.toObject=function(s,h){h||(h={});var d={};return h.defaults&&(d.elemType=null),s.elemType!=null&&s.hasOwnProperty("elemType")&&(d.elemType=o.onnx.TypeProto.toObject(s.elemType,h)),d},l.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},l.getTypeUrl=function(s){return s===void 0&&(s="type.googleapis.com"),s+"/onnx.TypeProto.Sequence"},l}(),p.Map=function(){function l(s){if(s)for(var h=Object.keys(s),d=0;d<h.length;++d)s[h[d]]!=null&&(this[h[d]]=s[h[d]])}return l.prototype.keyType=0,l.prototype.valueType=null,l.create=function(s){return new l(s)},l.encode=function(s,h){return h||(h=u.create()),s.keyType!=null&&Object.hasOwnProperty.call(s,"keyType")&&h.uint32(8).int32(s.keyType),s.valueType!=null&&Object.hasOwnProperty.call(s,"valueType")&&o.onnx.TypeProto.encode(s.valueType,h.uint32(18).fork()).ldelim(),h},l.encodeDelimited=function(s,h){return this.encode(s,h).ldelim()},l.decode=function(s,h){s instanceof i||(s=i.create(s));for(var d=h===void 0?s.len:s.pos+h,m=new o.onnx.TypeProto.Map;s.pos<d;){var b=s.uint32();switch(b>>>3){case 1:{m.keyType=s.int32();break}case 2:{m.valueType=o.onnx.TypeProto.decode(s,s.uint32());break}default:s.skipType(b&7);break}}return m},l.decodeDelimited=function(s){return s instanceof i||(s=new i(s)),this.decode(s,s.uint32())},l.verify=function(s){if(typeof s!="object"||s===null)return"object expected";if(s.keyType!=null&&s.hasOwnProperty("keyType")&&!n.isInteger(s.keyType))return"keyType: integer expected";if(s.valueType!=null&&s.hasOwnProperty("valueType")){var h=o.onnx.TypeProto.verify(s.valueType);if(h)return"valueType."+h}return null},l.fromObject=function(s){if(s instanceof o.onnx.TypeProto.Map)return s;var h=new o.onnx.TypeProto.Map;if(s.keyType!=null&&(h.keyType=s.keyType|0),s.valueType!=null){if(typeof s.valueType!="object")throw TypeError(".onnx.TypeProto.Map.valueType: object expected");h.valueType=o.onnx.TypeProto.fromObject(s.valueType)}return h},l.toObject=function(s,h){h||(h={});var d={};return h.defaults&&(d.keyType=0,d.valueType=null),s.keyType!=null&&s.hasOwnProperty("keyType")&&(d.keyType=s.keyType),s.valueType!=null&&s.hasOwnProperty("valueType")&&(d.valueType=o.onnx.TypeProto.toObject(s.valueType,h)),d},l.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},l.getTypeUrl=function(s){return s===void 0&&(s="type.googleapis.com"),s+"/onnx.TypeProto.Map"},l}(),p.Optional=function(){function l(s){if(s)for(var h=Object.keys(s),d=0;d<h.length;++d)s[h[d]]!=null&&(this[h[d]]=s[h[d]])}return l.prototype.elemType=null,l.create=function(s){return new l(s)},l.encode=function(s,h){return h||(h=u.create()),s.elemType!=null&&Object.hasOwnProperty.call(s,"elemType")&&o.onnx.TypeProto.encode(s.elemType,h.uint32(10).fork()).ldelim(),h},l.encodeDelimited=function(s,h){return this.encode(s,h).ldelim()},l.decode=function(s,h){s instanceof i||(s=i.create(s));for(var d=h===void 0?s.len:s.pos+h,m=new o.onnx.TypeProto.Optional;s.pos<d;){var b=s.uint32();switch(b>>>3){case 1:{m.elemType=o.onnx.TypeProto.decode(s,s.uint32());break}default:s.skipType(b&7);break}}return m},l.decodeDelimited=function(s){return s instanceof i||(s=new i(s)),this.decode(s,s.uint32())},l.verify=function(s){if(typeof s!="object"||s===null)return"object expected";if(s.elemType!=null&&s.hasOwnProperty("elemType")){var h=o.onnx.TypeProto.verify(s.elemType);if(h)return"elemType."+h}return null},l.fromObject=function(s){if(s instanceof o.onnx.TypeProto.Optional)return s;var h=new o.onnx.TypeProto.Optional;if(s.elemType!=null){if(typeof s.elemType!="object")throw TypeError(".onnx.TypeProto.Optional.elemType: object expected");h.elemType=o.onnx.TypeProto.fromObject(s.elemType)}return h},l.toObject=function(s,h){h||(h={});var d={};return h.defaults&&(d.elemType=null),s.elemType!=null&&s.hasOwnProperty("elemType")&&(d.elemType=o.onnx.TypeProto.toObject(s.elemType,h)),d},l.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},l.getTypeUrl=function(s){return s===void 0&&(s="type.googleapis.com"),s+"/onnx.TypeProto.Optional"},l}(),p.SparseTensor=function(){function l(s){if(s)for(var h=Object.keys(s),d=0;d<h.length;++d)s[h[d]]!=null&&(this[h[d]]=s[h[d]])}return l.prototype.elemType=0,l.prototype.shape=null,l.create=function(s){return new l(s)},l.encode=function(s,h){return h||(h=u.create()),s.elemType!=null&&Object.hasOwnProperty.call(s,"elemType")&&h.uint32(8).int32(s.elemType),s.shape!=null&&Object.hasOwnProperty.call(s,"shape")&&o.onnx.TensorShapeProto.encode(s.shape,h.uint32(18).fork()).ldelim(),h},l.encodeDelimited=function(s,h){return this.encode(s,h).ldelim()},l.decode=function(s,h){s instanceof i||(s=i.create(s));for(var d=h===void 0?s.len:s.pos+h,m=new o.onnx.TypeProto.SparseTensor;s.pos<d;){var b=s.uint32();switch(b>>>3){case 1:{m.elemType=s.int32();break}case 2:{m.shape=o.onnx.TensorShapeProto.decode(s,s.uint32());break}default:s.skipType(b&7);break}}return m},l.decodeDelimited=function(s){return s instanceof i||(s=new i(s)),this.decode(s,s.uint32())},l.verify=function(s){if(typeof s!="object"||s===null)return"object expected";if(s.elemType!=null&&s.hasOwnProperty("elemType")&&!n.isInteger(s.elemType))return"elemType: integer expected";if(s.shape!=null&&s.hasOwnProperty("shape")){var h=o.onnx.TensorShapeProto.verify(s.shape);if(h)return"shape."+h}return null},l.fromObject=function(s){if(s instanceof o.onnx.TypeProto.SparseTensor)return s;var h=new o.onnx.TypeProto.SparseTensor;if(s.elemType!=null&&(h.elemType=s.elemType|0),s.shape!=null){if(typeof s.shape!="object")throw TypeError(".onnx.TypeProto.SparseTensor.shape: object expected");h.shape=o.onnx.TensorShapeProto.fromObject(s.shape)}return h},l.toObject=function(s,h){h||(h={});var d={};return h.defaults&&(d.elemType=0,d.shape=null),s.elemType!=null&&s.hasOwnProperty("elemType")&&(d.elemType=s.elemType),s.shape!=null&&s.hasOwnProperty("shape")&&(d.shape=o.onnx.TensorShapeProto.toObject(s.shape,h)),d},l.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},l.getTypeUrl=function(s){return s===void 0&&(s="type.googleapis.com"),s+"/onnx.TypeProto.SparseTensor"},l}(),p}(),c.OperatorSetIdProto=function(){function p(r){if(r)for(var l=Object.keys(r),s=0;s<l.length;++s)r[l[s]]!=null&&(this[l[s]]=r[l[s]])}return p.prototype.domain="",p.prototype.version=n.Long?n.Long.fromBits(0,0,!1):0,p.create=function(r){return new p(r)},p.encode=function(r,l){return l||(l=u.create()),r.domain!=null&&Object.hasOwnProperty.call(r,"domain")&&l.uint32(10).string(r.domain),r.version!=null&&Object.hasOwnProperty.call(r,"version")&&l.uint32(16).int64(r.version),l},p.encodeDelimited=function(r,l){return this.encode(r,l).ldelim()},p.decode=function(r,l){r instanceof i||(r=i.create(r));for(var s=l===void 0?r.len:r.pos+l,h=new o.onnx.OperatorSetIdProto;r.pos<s;){var d=r.uint32();switch(d>>>3){case 1:{h.domain=r.string();break}case 2:{h.version=r.int64();break}default:r.skipType(d&7);break}}return h},p.decodeDelimited=function(r){return r instanceof i||(r=new i(r)),this.decode(r,r.uint32())},p.verify=function(r){return typeof r!="object"||r===null?"object expected":r.domain!=null&&r.hasOwnProperty("domain")&&!n.isString(r.domain)?"domain: string expected":r.version!=null&&r.hasOwnProperty("version")&&!n.isInteger(r.version)&&!(r.version&&n.isInteger(r.version.low)&&n.isInteger(r.version.high))?"version: integer|Long expected":null},p.fromObject=function(r){if(r instanceof o.onnx.OperatorSetIdProto)return r;var l=new o.onnx.OperatorSetIdProto;return r.domain!=null&&(l.domain=String(r.domain)),r.version!=null&&(n.Long?(l.version=n.Long.fromValue(r.version)).unsigned=!1:typeof r.version=="string"?l.version=parseInt(r.version,10):typeof r.version=="number"?l.version=r.version:typeof r.version=="object"&&(l.version=new n.LongBits(r.version.low>>>0,r.version.high>>>0).toNumber())),l},p.toObject=function(r,l){l||(l={});var s={};if(l.defaults)if(s.domain="",n.Long){var h=new n.Long(0,0,!1);s.version=l.longs===String?h.toString():l.longs===Number?h.toNumber():h}else s.version=l.longs===String?"0":0;return r.domain!=null&&r.hasOwnProperty("domain")&&(s.domain=r.domain),r.version!=null&&r.hasOwnProperty("version")&&(typeof r.version=="number"?s.version=l.longs===String?String(r.version):r.version:s.version=l.longs===String?n.Long.prototype.toString.call(r.version):l.longs===Number?new n.LongBits(r.version.low>>>0,r.version.high>>>0).toNumber():r.version),s},p.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},p.getTypeUrl=function(r){return r===void 0&&(r="type.googleapis.com"),r+"/onnx.OperatorSetIdProto"},p}(),c.OperatorStatus=function(){var p={},r=Object.create(p);return r[p[0]="EXPERIMENTAL"]=0,r[p[1]="STABLE"]=1,r}(),c.FunctionProto=function(){function p(r){if(this.input=[],this.output=[],this.attribute=[],this.attributeProto=[],this.node=[],this.opsetImport=[],r)for(var l=Object.keys(r),s=0;s<l.length;++s)r[l[s]]!=null&&(this[l[s]]=r[l[s]])}return p.prototype.name="",p.prototype.input=n.emptyArray,p.prototype.output=n.emptyArray,p.prototype.attribute=n.emptyArray,p.prototype.attributeProto=n.emptyArray,p.prototype.node=n.emptyArray,p.prototype.docString="",p.prototype.opsetImport=n.emptyArray,p.prototype.domain="",p.create=function(r){return new p(r)},p.encode=function(r,l){if(l||(l=u.create()),r.name!=null&&Object.hasOwnProperty.call(r,"name")&&l.uint32(10).string(r.name),r.input!=null&&r.input.length)for(var s=0;s<r.input.length;++s)l.uint32(34).string(r.input[s]);if(r.output!=null&&r.output.length)for(var s=0;s<r.output.length;++s)l.uint32(42).string(r.output[s]);if(r.attribute!=null&&r.attribute.length)for(var s=0;s<r.attribute.length;++s)l.uint32(50).string(r.attribute[s]);if(r.node!=null&&r.node.length)for(var s=0;s<r.node.length;++s)o.onnx.NodeProto.encode(r.node[s],l.uint32(58).fork()).ldelim();if(r.docString!=null&&Object.hasOwnProperty.call(r,"docString")&&l.uint32(66).string(r.docString),r.opsetImport!=null&&r.opsetImport.length)for(var s=0;s<r.opsetImport.length;++s)o.onnx.OperatorSetIdProto.encode(r.opsetImport[s],l.uint32(74).fork()).ldelim();if(r.domain!=null&&Object.hasOwnProperty.call(r,"domain")&&l.uint32(82).string(r.domain),r.attributeProto!=null&&r.attributeProto.length)for(var s=0;s<r.attributeProto.length;++s)o.onnx.AttributeProto.encode(r.attributeProto[s],l.uint32(90).fork()).ldelim();return l},p.encodeDelimited=function(r,l){return this.encode(r,l).ldelim()},p.decode=function(r,l){r instanceof i||(r=i.create(r));for(var s=l===void 0?r.len:r.pos+l,h=new o.onnx.FunctionProto;r.pos<s;){var d=r.uint32();switch(d>>>3){case 1:{h.name=r.string();break}case 4:{h.input&&h.input.length||(h.input=[]),h.input.push(r.string());break}case 5:{h.output&&h.output.length||(h.output=[]),h.output.push(r.string());break}case 6:{h.attribute&&h.attribute.length||(h.attribute=[]),h.attribute.push(r.string());break}case 11:{h.attributeProto&&h.attributeProto.length||(h.attributeProto=[]),h.attributeProto.push(o.onnx.AttributeProto.decode(r,r.uint32()));break}case 7:{h.node&&h.node.length||(h.node=[]),h.node.push(o.onnx.NodeProto.decode(r,r.uint32()));break}case 8:{h.docString=r.string();break}case 9:{h.opsetImport&&h.opsetImport.length||(h.opsetImport=[]),h.opsetImport.push(o.onnx.OperatorSetIdProto.decode(r,r.uint32()));break}case 10:{h.domain=r.string();break}default:r.skipType(d&7);break}}return h},p.decodeDelimited=function(r){return r instanceof i||(r=new i(r)),this.decode(r,r.uint32())},p.verify=function(r){if(typeof r!="object"||r===null)return"object expected";if(r.name!=null&&r.hasOwnProperty("name")&&!n.isString(r.name))return"name: string expected";if(r.input!=null&&r.hasOwnProperty("input")){if(!Array.isArray(r.input))return"input: array expected";for(var l=0;l<r.input.length;++l)if(!n.isString(r.input[l]))return"input: string[] expected"}if(r.output!=null&&r.hasOwnProperty("output")){if(!Array.isArray(r.output))return"output: array expected";for(var l=0;l<r.output.length;++l)if(!n.isString(r.output[l]))return"output: string[] expected"}if(r.attribute!=null&&r.hasOwnProperty("attribute")){if(!Array.isArray(r.attribute))return"attribute: array expected";for(var l=0;l<r.attribute.length;++l)if(!n.isString(r.attribute[l]))return"attribute: string[] expected"}if(r.attributeProto!=null&&r.hasOwnProperty("attributeProto")){if(!Array.isArray(r.attributeProto))return"attributeProto: array expected";for(var l=0;l<r.attributeProto.length;++l){var s=o.onnx.AttributeProto.verify(r.attributeProto[l]);if(s)return"attributeProto."+s}}if(r.node!=null&&r.hasOwnProperty("node")){if(!Array.isArray(r.node))return"node: array expected";for(var l=0;l<r.node.length;++l){var s=o.onnx.NodeProto.verify(r.node[l]);if(s)return"node."+s}}if(r.docString!=null&&r.hasOwnProperty("docString")&&!n.isString(r.docString))return"docString: string expected";if(r.opsetImport!=null&&r.hasOwnProperty("opsetImport")){if(!Array.isArray(r.opsetImport))return"opsetImport: array expected";for(var l=0;l<r.opsetImport.length;++l){var s=o.onnx.OperatorSetIdProto.verify(r.opsetImport[l]);if(s)return"opsetImport."+s}}return r.domain!=null&&r.hasOwnProperty("domain")&&!n.isString(r.domain)?"domain: string expected":null},p.fromObject=function(r){if(r instanceof o.onnx.FunctionProto)return r;var l=new o.onnx.FunctionProto;if(r.name!=null&&(l.name=String(r.name)),r.input){if(!Array.isArray(r.input))throw TypeError(".onnx.FunctionProto.input: array expected");l.input=[];for(var s=0;s<r.input.length;++s)l.input[s]=String(r.input[s])}if(r.output){if(!Array.isArray(r.output))throw TypeError(".onnx.FunctionProto.output: array expected");l.output=[];for(var s=0;s<r.output.length;++s)l.output[s]=String(r.output[s])}if(r.attribute){if(!Array.isArray(r.attribute))throw TypeError(".onnx.FunctionProto.attribute: array expected");l.attribute=[];for(var s=0;s<r.attribute.length;++s)l.attribute[s]=String(r.attribute[s])}if(r.attributeProto){if(!Array.isArray(r.attributeProto))throw TypeError(".onnx.FunctionProto.attributeProto: array expected");l.attributeProto=[];for(var s=0;s<r.attributeProto.length;++s){if(typeof r.attributeProto[s]!="object")throw TypeError(".onnx.FunctionProto.attributeProto: object expected");l.attributeProto[s]=o.onnx.AttributeProto.fromObject(r.attributeProto[s])}}if(r.node){if(!Array.isArray(r.node))throw TypeError(".onnx.FunctionProto.node: array expected");l.node=[];for(var s=0;s<r.node.length;++s){if(typeof r.node[s]!="object")throw TypeError(".onnx.FunctionProto.node: object expected");l.node[s]=o.onnx.NodeProto.fromObject(r.node[s])}}if(r.docString!=null&&(l.docString=String(r.docString)),r.opsetImport){if(!Array.isArray(r.opsetImport))throw TypeError(".onnx.FunctionProto.opsetImport: array expected");l.opsetImport=[];for(var s=0;s<r.opsetImport.length;++s){if(typeof r.opsetImport[s]!="object")throw TypeError(".onnx.FunctionProto.opsetImport: object expected");l.opsetImport[s]=o.onnx.OperatorSetIdProto.fromObject(r.opsetImport[s])}}return r.domain!=null&&(l.domain=String(r.domain)),l},p.toObject=function(r,l){l||(l={});var s={};if((l.arrays||l.defaults)&&(s.input=[],s.output=[],s.attribute=[],s.node=[],s.opsetImport=[],s.attributeProto=[]),l.defaults&&(s.name="",s.docString="",s.domain=""),r.name!=null&&r.hasOwnProperty("name")&&(s.name=r.name),r.input&&r.input.length){s.input=[];for(var h=0;h<r.input.length;++h)s.input[h]=r.input[h]}if(r.output&&r.output.length){s.output=[];for(var h=0;h<r.output.length;++h)s.output[h]=r.output[h]}if(r.attribute&&r.attribute.length){s.attribute=[];for(var h=0;h<r.attribute.length;++h)s.attribute[h]=r.attribute[h]}if(r.node&&r.node.length){s.node=[];for(var h=0;h<r.node.length;++h)s.node[h]=o.onnx.NodeProto.toObject(r.node[h],l)}if(r.docString!=null&&r.hasOwnProperty("docString")&&(s.docString=r.docString),r.opsetImport&&r.opsetImport.length){s.opsetImport=[];for(var h=0;h<r.opsetImport.length;++h)s.opsetImport[h]=o.onnx.OperatorSetIdProto.toObject(r.opsetImport[h],l)}if(r.domain!=null&&r.hasOwnProperty("domain")&&(s.domain=r.domain),r.attributeProto&&r.attributeProto.length){s.attributeProto=[];for(var h=0;h<r.attributeProto.length;++h)s.attributeProto[h]=o.onnx.AttributeProto.toObject(r.attributeProto[h],l)}return s},p.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},p.getTypeUrl=function(r){return r===void 0&&(r="type.googleapis.com"),r+"/onnx.FunctionProto"},p}(),c}(),t.exports=o});function Fr(e,t){if(!e)throw new Error(typeof t=="string"?t:t())}function sn(e){return new TextDecoder().decode(e)}var ye,hr,pi,Ze,jn,We,it,U,an,mr,br,gr,fe=L(()=>{zn(),Zo(),ye=Ar(Cr()),yr(),hr=class{static arraysEqual(e,t){if(e.length!==t.length)return!1;for(let a=0;a<e.length;a++)if(e[a]!==t[a])return!1;return!0}},pi=class{static preprocessInputShapes(e,t){let a=e.length===1?[1,e[0]]:e,i=t.length===1?[t[0],1]:t;return[a,i]}static postprocessOutputShape(e,t,a){t===1&&e.splice(e.length-2,1),a===1&&e.pop()}static calcMatMulShape(e,t){return e[1]!==t[0]?void 0:[e[0],t[1]]}},Ze=class rr{static calcShape(t,a,i=!1){let u=t.length,n=a.length;if(u===0)return a;if(n===0)return t;let o=Math.max(t.length,a.length),c=new Array(o);if(i){if(u<2||n<2)return;let p=pi.calcMatMulShape([t[u-2],t[u-1]],[a[n-2],a[n-1]]);if(p===void 0)return;[c[o-2],c[o-1]]=p}for(let p=i?3:1;p<=o;p++){let r=u-p<0?1:t[u-p],l=n-p<0?1:a[n-p];if(r!==l&&r>1&&l>1)return;c[o-p]=Math.max(r,l)}return c}static index(t,a){let i=new Array(a.length);return rr.fillIndex(t,a,i),i}static fillIndex(t,a,i){let u=t.length-a.length;for(let n=0;n<a.length;n++)i[n]=t[u+n]%a[n]}static calc(t,a,i,u,n){let o=rr.calcShape(t.dims,a.dims);if(o){if(u&&!U.areEqual(o,t.dims))return;let c=U.size(o),p=u?t:new $e(o,n||t.type);if(o.length===0)p.set([],i(t.get([]),a.get([])));else{let r=new Array(o.length),l=new Array(t.dims.length),s=new Array(a.dims.length),h=0,d=0,m=!1,b=!1;t.dims.length===0&&(h=t.get([]),m=!0),a.dims.length===0&&(d=a.get([]),b=!0);let v;for(let O=0;O<c;O++){v=O;for(let T=o.length-1;T>=0;T--)r[T]=v%o[T],v=Math.floor(v/o[T]);m||(rr.fillIndex(r,t.dims,l),h=t.get(l)),b||(rr.fillIndex(r,a.dims,s),d=a.get(s)),p.set(r,i(h,d))}}return p}}static isValidBroadcast(t,a){let i=t.length,u=a.length;if(i>u)return!1;for(let n=1;n<=i;n++)if(t[i-n]!==1&&t[i-n]!==a[u-n])return!1;return!0}static getBroadcastDims(t,a){let i=t.length,u=[];for(let n=0;n<i;n++){let o=i-1-n,c=t[o]||1;(a[a.length-1-n]||1)>1&&c===1&&u.unshift(o)}return u}},jn=class{static getShapeOfGemmResult(e,t,a,i,u){if(e.length!==2||a.length!==2)throw new Error("shape need to be of size 2");let n,o,c;t?(n=e[1],o=e[0]):(n=e[0],o=e[1]);let p=-1;if(i?(c=a[0],p=1):(c=a[1],p=0),a[p]!==o)throw new Error("dimension mismatch");if(n<=0||c<=0||o<=0)throw new Error("invalid shape specified");if(u&&!Ze.isValidBroadcast(u,[n,c]))throw new Error("gemm: invalid bias shape for broadcast");return[n,c,o]}},We=class _n{static tensorDataTypeFromProto(t){switch(t){case ye.onnx.TensorProto.DataType.INT8:return"int8";case ye.onnx.TensorProto.DataType.UINT8:return"uint8";case ye.onnx.TensorProto.DataType.BOOL:return"bool";case ye.onnx.TensorProto.DataType.INT16:return"int16";case ye.onnx.TensorProto.DataType.UINT16:return"uint16";case ye.onnx.TensorProto.DataType.INT32:return"int32";case ye.onnx.TensorProto.DataType.UINT32:return"uint32";case ye.onnx.TensorProto.DataType.FLOAT:return"float32";case ye.onnx.TensorProto.DataType.DOUBLE:return"float64";case ye.onnx.TensorProto.DataType.STRING:return"string";case ye.onnx.TensorProto.DataType.INT64:return"int32";case ye.onnx.TensorProto.DataType.UINT64:return"uint32";default:throw new Error(`unsupported data type: ${ye.onnx.TensorProto.DataType[t]}`)}}static tensorDataTypeStringToEnum(t){switch(t){case"int8":return ye.onnx.TensorProto.DataType.INT8;case"uint8":return ye.onnx.TensorProto.DataType.UINT8;case"bool":return ye.onnx.TensorProto.DataType.BOOL;case"int16":return ye.onnx.TensorProto.DataType.INT16;case"uint16":return ye.onnx.TensorProto.DataType.UINT16;case"int32":return ye.onnx.TensorProto.DataType.INT32;case"uint32":return ye.onnx.TensorProto.DataType.UINT32;case"float32":return ye.onnx.TensorProto.DataType.FLOAT;case"float64":return ye.onnx.TensorProto.DataType.DOUBLE;case"string":return ye.onnx.TensorProto.DataType.STRING;case"int64":return ye.onnx.TensorProto.DataType.INT64;case"uint64":return ye.onnx.TensorProto.DataType.UINT64;default:throw new Error(`unsupported data type: ${t}`)}}static tensorDimsFromProto(t){return t.map(a=>Vt.isLong(a)?a.toNumber():a)}static tensorValueTypeFromProto(t){return{tensorType:_n.tensorDataTypeFromProto(t.elemType),shape:{dims:_n.tensorDimsFromProto(t.shape.dim.map(a=>a.dimValue))}}}static tensorDimsFromORTFormat(t){let a=[];for(let i=0;i<t.dimsLength();i++)a.push(it.longToNumber(t.dims(i)));return a}static tensorAttributesFromORTFormat(t){let a=[];for(let i=0;i<t.attributesLength();i++)a.push(t.attributes(i));return a}},it=class{static longToNumber(e,t){return Vt.isLong(e)?e.toNumber():e instanceof _.Long?Vt.fromValue({low:e.low,high:e.high,unsigned:t??!1}).toNumber():e}static isLong(e){return Vt.isLong(e)||e instanceof _.Long}},U=class $t{static size(t){return $t.getSizeFromDimensionRange(t,0,t.length)}static sizeFromDimension(t,a){if(a<0||a>t.length)throw new Error(`invalid dimension of ${a} for sizeFromDimension as Tensor has ${t.length} dimensions.`);return $t.getSizeFromDimensionRange(t,a,t.length)}static sizeToDimension(t,a){if(a<0||a>t.length)throw new Error(`invalid dimension of ${a} for sizeToDimension as Tensor has ${t.length} dimensions.`);return $t.getSizeFromDimensionRange(t,0,a)}static getSizeFromDimensionRange(t,a,i){let u=1;for(let n=a;n<i;n++){if(t[n]<=0)throw new Error("cannot get valid size from specified dimension range. Most likely the range contains 0 or negative values in them.");u*=t[n]}return u}static computeStrides(t){let a=t.length;if(a===0)return[];if(a===1)return[1];let i=new Array(a);i[a-1]=1,i[a-2]=t[a-1];for(let u=a-3;u>=0;--u)i[u]=i[u+1]*t[u+1];return i}static transpose(t){return t.slice().reverse()}static indicesToOffset(t,a,i){i===void 0&&(i=t.length);let u=0;for(let n=0;n<i;++n)u+=a[n]*t[n];return u}static offsetToIndices(t,a){let i=a.length;if(i===0)return[];if(i===1)return[t*a[0]];let u=new Array(a.length);for(let n=0;n<u.length-1;++n)u[n]=Math.floor(t/a[n]),t-=u[n]*a[n];return u[u.length-1]=t,u}static normalizeAxis(t,a){if(t<-a&&t>=a)throw new Error("unsupported axis for this operation.");return t<0?t+a:t}static normalizeAxes(t,a){return t.map(i=>this.normalizeAxis(i,a))}static incrementIndex(t,a,i){if(a.length===0||t.length===0)throw new Error("Index incrementing unsupported for scalar Tensor");if(i===void 0)i=a.length;else if(i<=0||i>a.length)throw new Error("Incorrect axis to increment on");for(let u=i-1;u>=0&&(t[u]++,!(t[u]<a[u]));--u)t[u]=0}static calculateReshapedDims(t,a){if(a.length===0){if(t.length===0||$t.size(t)===1)return[];throw new Error("cannot reshape to a scalar Tensor")}let i=a.length,u=new Array(i),n=-1,o=1;for(let p=0;p<i;p++){if(a[p]<-1)throw new Error("a dimension in shape hints cannot be less than -1");if(a[p]===-1){if(n!==-1)throw new Error("at most one dimension in shape hints can be -1");n=p}else{if(a[p]===0){if(p>=t.length)throw new Error("the dimension with value zero exceeds the dimension size of the input tensor");u[p]=t[p]}else u[p]=a[p];o*=u[p]}}let c=$t.size(t);if(n!==-1){if(c%o!==0)throw new Error(`the input tensor cannot be reshaped to the requested shape. Input shape: [${t}] Output shape: [${a}]`);u[n]=c/o}else if(o!==c)throw new Error("reshapedDims and originalDims don't have matching sizes");return u}static sortBasedOnPerm(t,a){return a?a.map(i=>t[i]):t.slice().reverse()}static padShape(t,a){let i=t.length;return t.map((u,n)=>u+a[n]+a[n+i])}static areEqual(t,a){return t.length!==a.length?!1:t.every((i,u)=>i===a[u])}static validateDimsAndCalcSize(t){if(t.length>6)throw new TypeError("Only rank 0 to 6 is supported for tensor shape.");let a=1;for(let i of t){if(!Number.isInteger(i))throw new TypeError(`Invalid shape: ${i} is not an integer`);if(i<0||i>2147483647)throw new TypeError(`Invalid shape: length ${i} is not allowed`);a*=i}return a}static flattenShape(t,a){a<0&&(a+=t.length);let i=t.reduce((n,o)=>n*o,1),u=t.slice(a).reduce((n,o)=>n*o,1);return[i/u,u]}static squeezeShape(t,a){let i=new Array;a=$t.normalizeAxes(a,t.length);for(let u=0;u<t.length;u++){let n=a.indexOf(u)>=0;if(n&&t[u]!==1)throw new Error("squeeze an axis of size different than 1");(a.length===0&&t[u]>1||a.length>0&&!n)&&i.push(t[u])}return i}static unsqueezeShape(t,a){let i=new Array(t.length+a.length);i.fill(0);for(let n=0;n<a.length;n++){let o=$t.normalizeAxis(a[n],i.length);if(o>=i.length)throw new Error("'axes' has an out of range axis");if(i[o]!==0)throw new Error("'axes' has a duplicate axis");i[o]=1}let u=0;for(let n=0;n<i.length;n++)i[n]===0&&(i[n]=t[u++]);if(u!==t.length)throw new Error("the unsqueezed dimension could not be established");return i}},an=class Sa{static splitShape(t,a,i,u){if(i.length===0){if(!u)throw new Error("need to know number of outputs when the 'split' attribute is not specified");Sa.determineSplit(t[a],u,i)}let n=[],o=[0];for(let c=0;c<i.length;++c){c!==0&&o.push(o[c-1]+i[c-1]);let p=t.slice();p[a]=i[c],n.push(p)}return[n,o]}static determineSplit(t,a,i){if(t%a!==0)throw new Error("cannot split tensor to equal sized parts");for(let u=0;u<a;++u)i.push(t/a)}},mr=class nr{static adjustPoolAttributes(t,a,i,u,n,o){if(!t&&i.length!==a.length-2)throw new Error("length of specified kernel shapes should be 2 less than length of input dimensions");if(t)for(let c=0;c<a.length-2;c++)c>=i.length?i.push(a[c+2]):i[c]=a[c+2];for(let c=0;c<i.length;c++)if(c<u.length){if(u[c]<0)throw new Error("strides should be greater than or equal to 1")}else u.push(1);for(let c=0;c<i.length;c++)if(c<n.length){if(n[c]<0)throw new Error("dilations should be greater than or equal to 1")}else n.push(1);for(let c=0;c<i.length*2;c++)if(c<o.length){if(o[c]<0)throw new Error("pad should be greater than or equal to 1")}else o.push(0);for(let c=0;c<i.length;c++){if(i[c]<=0)throw new Error("kernel shapes need to be greater than 0");if(o[c]>=i[c]||o[c+i.length]>=i[c])throw new Error("pads should be smaller than kernel")}}static adjustPadsBasedOnAutoPad(t,a,i,u,n,o){if(o){if(n.length!==2*(t.length-2))throw new Error("length of pads should be twice the length of data dimensions");if(a.length!==t.length-2)throw new Error("length of strides should be the length of data dimensions");if(u.length!==t.length-2)throw new Error("length of kernel shapes should be the length of data dimensions");for(let c=0;c<t.length-2;c++)nr.adjustPadAndReturnShape(t[c+2],a[c],i[c],u[c],n,c,c+t.length-2,o)}}static computePoolOutputShape(t,a,i,u,n,o,c){if(a.length<=0)throw new Error("input shape must be of size greater than 0");let p=[a[0],a[1]];return nr.computeShapeHelper(t,a,p,i,u,n,o,c),p}static computeConvOutputShape(t,a,i,u,n,o,c){if(t.length<=0||a.length<=0)throw new Error("invalid input tensor dims or invalid filter tensor dims");let p=[t[0],a[0]];return nr.computeShapeHelper(!1,t,p,i,u,n,o,c),p}static computeShapeHelper(t,a,i,u,n,o,c,p){if(t)for(let r=0;r<a.length-2;r++)i.push(1);else for(let r=0;r<a.length-2;r++)i.push(nr.adjustPadAndReturnShape(a[r+2],u[r],n[r],o[r],c,r,r+a.length-2,p))}static adjustPadAndReturnShape(t,a,i,u,n,o,c,p){let r=i*(u-1)+1;if(p&&p!=="NOTSET")switch(p){case"VALID":return n[o]=0,n[c]=0,Math.floor((t-r)/a+1);case"SAME_LOWER":case"SAME_UPPER":if(i!==1)throw new Error("Dilation not supported for SAME_UPPER or SAME_LOWER");{let l=((t+a-1)/a-1)*a+u-t;return n[o]=Math.floor(p==="SAME_LOWER"?(l+1)/2:l/2),n[c]=l-n[o],Math.floor((t+l-u)/a+1)}default:throw new Error("Unsupported AutoPad type")}else return Math.floor((t+n[o]+n[c]-r)/a+1)}},br=-34028234663852886e22,gr=34028234663852886e22});function Hd(e){switch(e){case"bool":case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;case"float64":return 8;default:throw new Error(`cannot calculate sizeof() on type ${e}`)}}function Fu(e){switch(e){case ne.onnx.TensorProto.DataType.UINT8:case ne.onnx.TensorProto.DataType.INT8:case ne.onnx.TensorProto.DataType.BOOL:return 1;case ne.onnx.TensorProto.DataType.UINT16:case ne.onnx.TensorProto.DataType.INT16:return 2;case ne.onnx.TensorProto.DataType.FLOAT:case ne.onnx.TensorProto.DataType.INT32:case ne.onnx.TensorProto.DataType.UINT32:return 4;case ne.onnx.TensorProto.DataType.INT64:case ne.onnx.TensorProto.DataType.DOUBLE:case ne.onnx.TensorProto.DataType.UINT64:return 8;default:throw new Error(`cannot calculate sizeof() on type ${ne.onnx.TensorProto.DataType[e]}`)}}function qd(e,t){return new(Bu(t))(e)}function Bu(e){switch(e){case"bool":case"uint8":return Uint8Array;case"int8":return Int8Array;case"int16":return Int16Array;case"uint16":return Uint16Array;case"int32":return Int32Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"float32":return Float32Array;case"float64":return Float64Array;default:throw new Error("unspecified error")}}function hi(e,t){if(t===ne.onnx.TensorProto.DataType.INT64||t===di.TensorDataType.INT64){if(e.greaterThanOrEqual(2147483648)||e.lessThan(-2147483648))throw new TypeError("int64 is not supported")}else if(t===ne.onnx.TensorProto.DataType.UINT32||t===di.TensorDataType.UINT32||t===ne.onnx.TensorProto.DataType.UINT64||t===di.TensorDataType.UINT64){if(e.greaterThanOrEqual(4294967296)||e.lessThan(0))throw new TypeError("uint64 is not supported")}else throw new TypeError(`not a LONG type: ${ne.onnx.TensorProto.DataType[t]}`);return e.toNumber()}function $u(e,t,a){switch(t){case ne.onnx.TensorProto.DataType.BOOL:case ne.onnx.TensorProto.DataType.UINT8:return e.getUint8(a);case ne.onnx.TensorProto.DataType.INT8:return e.getInt8(a);case ne.onnx.TensorProto.DataType.UINT16:return e.getUint16(a,!0);case ne.onnx.TensorProto.DataType.INT16:return e.getInt16(a,!0);case ne.onnx.TensorProto.DataType.FLOAT:return e.getFloat32(a,!0);case ne.onnx.TensorProto.DataType.INT32:return e.getInt32(a,!0);case ne.onnx.TensorProto.DataType.UINT32:return e.getUint32(a,!0);case ne.onnx.TensorProto.DataType.INT64:return hi(Vt.fromBits(e.getUint32(a,!0),e.getUint32(a+4,!0),!1),t);case ne.onnx.TensorProto.DataType.DOUBLE:return e.getFloat64(a,!0);case ne.onnx.TensorProto.DataType.UINT64:return hi(Vt.fromBits(e.getUint32(a,!0),e.getUint32(a+4,!0),!0),t);default:throw new Error(`cannot read from DataView for type ${ne.onnx.TensorProto.DataType[t]}`)}}var ku,ne,di,$e,yr=L(()=>{ku=Ar(Os()),Zo(),tn(),ne=Ar(Cr()),fe(),di=V.experimental.fbs,$e=class qr{constructor(t,a,i,u,n,o=ku.Guid.create()){this.dims=t,this.type=a,this.dataProvider=i,this.asyncDataProvider=u,this.cache=n,this.dataId=o,this.size=U.validateDimsAndCalcSize(t);let c=this.size,p=i===void 0&&u===void 0&&n===void 0;if(n!==void 0&&n.length!==c)throw new RangeError("Input dims doesn't match data length.");if(a==="string"){if(n!==void 0&&(!Array.isArray(n)||!n.every(r=>typeof r=="string")))throw new TypeError("cache should be a string array");p&&(this.cache=new Array(c))}else{if(n!==void 0){let r=Bu(a);if(!(n instanceof r))throw new TypeError(`cache should be type ${r.name}`)}if(p){let r=new ArrayBuffer(c*Hd(a));this.cache=qd(r,a)}}}get data(){if(this.cache===void 0){let t=this.dataProvider(this.dataId);if(t.length!==this.size)throw new Error("Length of data provided by the Data Provider is inconsistent with the dims of this Tensor.");this.cache=t}return this.cache}get stringData(){if(this.type!=="string")throw new TypeError("data type is not string");return this.data}get integerData(){switch(this.type){case"uint8":case"int8":case"uint16":case"int16":case"int32":case"uint32":case"bool":return this.data;default:throw new TypeError("data type is not integer (uint8, int8, uint16, int16, int32, uint32, bool)")}}get floatData(){switch(this.type){case"float32":case"float64":return this.data;default:throw new TypeError("data type is not float (float32, float64)")}}get numberData(){if(this.type!=="string")return this.data;throw new TypeError("type cannot be non-number (string)")}get(t){return this.data[U.indicesToOffset(t,this.strides)]}set(t,a){this.data[U.indicesToOffset(t,this.strides)]=a}async getData(){return this.cache===void 0&&(this.cache=await this.asyncDataProvider(this.dataId)),this.cache}get strides(){return this._strides||(this._strides=U.computeStrides(this.dims)),this._strides}static fromProto(t){if(!t)throw new Error("cannot construct Value from an empty tensor");let a=We.tensorDataTypeFromProto(t.dataType),i=We.tensorDimsFromProto(t.dims),u=new qr(i,a);if(a==="string")t.stringData.forEach((n,o)=>{u.data[o]=sn(n)});else if(t.rawData&&typeof t.rawData.byteLength=="number"&&t.rawData.byteLength>0){let n=u.data,o=new DataView(t.rawData.buffer,t.rawData.byteOffset,t.rawData.byteLength),c=Fu(t.dataType),p=t.rawData.byteLength/c;if(t.rawData.byteLength%c!==0)throw new Error("invalid buffer length");if(n.length!==p)throw new Error("buffer length mismatch");for(let r=0;r<p;r++){let l=$u(o,t.dataType,r*c);n[r]=l}}else{let n;switch(t.dataType){case ne.onnx.TensorProto.DataType.FLOAT:n=t.floatData;break;case ne.onnx.TensorProto.DataType.INT32:case ne.onnx.TensorProto.DataType.INT16:case ne.onnx.TensorProto.DataType.UINT16:case ne.onnx.TensorProto.DataType.INT8:case ne.onnx.TensorProto.DataType.UINT8:case ne.onnx.TensorProto.DataType.BOOL:n=t.int32Data;break;case ne.onnx.TensorProto.DataType.INT64:n=t.int64Data;break;case ne.onnx.TensorProto.DataType.DOUBLE:n=t.doubleData;break;case ne.onnx.TensorProto.DataType.UINT32:case ne.onnx.TensorProto.DataType.UINT64:n=t.uint64Data;break;default:throw new Error("unspecific error")}if(n==null)throw new Error("failed to populate data from a tensorproto value");let o=u.data;if(o.length!==n.length)throw new Error("array length mismatch");for(let c=0;c<n.length;c++){let p=n[c];Vt.isLong(p)?o[c]=hi(p,t.dataType):o[c]=p}}return u}static fromData(t,a,i){return new qr(a,i,void 0,void 0,t)}static fromOrtTensor(t){if(!t)throw new Error("cannot construct Value from an empty tensor");let a=We.tensorDimsFromORTFormat(t),i=We.tensorDataTypeFromProto(t.dataType()),u=new qr(a,i);if(i==="string")for(let n=0;n<t.stringDataLength();n++)u.data[n]=t.stringData(n);else if(t.rawDataArray()&&typeof t.rawDataLength()=="number"&&t.rawDataLength()>0){let n=u.data,o=new DataView(t.rawDataArray().buffer,t.rawDataArray().byteOffset,t.rawDataLength()),c=Fu(t.dataType()),p=t.rawDataLength()/c;if(t.rawDataLength()%c!==0)throw new Error("invalid buffer length");if(n.length!==p)throw new Error("buffer length mismatch");for(let r=0;r<p;r++){let l=$u(o,t.dataType(),r*c);n[r]=l}}return u}}});function H(e){return e===1?jd:Yd}function Nu(e){let t=H(e);return`${t.version}
      precision highp float;
      ${t.attribute} vec3 position;
      ${t.attribute} vec2 textureCoord;

      ${t.varyingVertex} vec2 TexCoords;

      void main()
      {
          gl_Position = vec4(position, 1.0);
          TexCoords = textureCoord;
      }`}function Ru(e){let t=H(e);return`${t.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${t.varyingFrag} vec2 TexCoords;
    ${t.outputDeclaration}
    const vec2 halfCR = vec2(0.5, 0.5);

    // Custom vector types to handle higher dimenalities.
    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    `}function Mu(e,t){let a=H(e);return`
  void main() {
    int indices[${t}];
    toVec(TexCoords, indices);
    vec4 result = vec4(process(indices));
    ${a.output} = result;
  }
  `}var jd,Yd,we=L(()=>{jd={version:"",attribute:"attribute",varyingVertex:"varying",varyingFrag:"varying",texture2D:"texture2D",output:"gl_FragColor",outputDeclaration:""},Yd={version:"#version 300 es",attribute:"in",varyingVertex:"out",varyingFrag:"in",texture2D:"texture",output:"outputColor",outputDeclaration:"out vec4 outputColor;"}}),ae=L(()=>{});async function mi(e,t=i=>0,a){return new Promise((i,u)=>{let n=0,o=()=>{if(e()){i();return}n++;let c=t(n);setTimeout(o,c)};o()})}function Yn(e){return Fr(typeof e<"u"&&e.length!==0,()=>"empty string found for sampler name"),"get"+e.charAt(0).toUpperCase()+e.slice(1)}function Gu(e){return Fr(typeof e<"u"&&e.length!==0,()=>"empty string found for sampler name"),"get"+e.charAt(0).toUpperCase()+e.slice(1)+"AtOutCoords"}function $r(e,t){let a=JSON.parse(JSON.stringify(e));return a=t,a}function kr(e,t){return t.map(a=>e[a]).join(", ")}function Qe(e){if(e<=1)return"int";if(e===2)return"ivec2";if(e===3)return"ivec3";if(e===4)return"ivec4";if(e===5)return"ivec5";if(e===6)return"ivec6";throw Error(`GPU for rank ${e} is not yet supported`)}function Dt(e=6){return["x","y","z","w","u","v"].slice(0,e)}var Bt=L(()=>{fe()});function Xd(e,t){return Dt(t).map(a=>`${e}.${a}`)}function Br(e,t){return t===1?[e]:Xd(e,t)}function Nt(){return`
    float getChannel(vec4 frag, int dim) {
      int modCoord = imod(dim, 2);
      return modCoord == 0 ? frag.r : frag.g;
    }

    float getChannel(vec4 frag, vec2 innerDims) {
      vec2 modCoord = mod(innerDims, 2.);
      return modCoord.x == 0. ?
        (modCoord.y == 0. ? frag.r : frag.g) :
        (modCoord.y == 0. ? frag.b : frag.a);
    }
  `}var Tr=L(()=>{Bt()});function Jd(e,t,a){if(e===0)return"false";if(e===1)return`rc > ${t[0]}`;let i="";for(let u=e-2;u<e;u++)i+=`${a[u]} >= ${t[u-e+2]}`,u<e-1&&(i+="||");return i}function Zd(e,t){let a=e.length;if(a===0)return"getA(), 0, 0, 0";if(a===1)return`getA(rc),
            rc + 1 >= ${e[0]} ? 0. : getA(rc + 1),
            0, 0`;let i="r, c",u="r, cp1",n="rp1, c",o="rp1, cp1",c="";if(a>2)for(let p=0;p<a-2;++p)c=c+`${t[p]},`;return`getA(${c}${i}),
          rEdge ? 0. : getA(${c}${n}),
          cEdge ? 0. : getA(${c}${u}),
          rEdge || cEdge ? 0. : getA(${c}${o})`}function Qd(e,t,a,i){return e===0||e===1?"":`
    int r = ${t[e-2]};
    int c = ${t[e-1]};
    int rp1 = ${t[e-2]} + 1;
    int cp1 = ${t[e-1]} + 1;
    bool rEdge = rp1 >= ${i};
    bool cEdge = cp1 >= ${a};
    `}var Uu,Kd,zu,Vu=L(()=>{we(),ae(),Bt(),Tr(),Uu={name:"pack",inputNames:["A"],inputTypes:[1]},Kd=(e,t)=>{let a=H(e.session.backend.glContext.version),i=t.dims,u=i.length,n=t.dims.length,o=Qe(n),c=Br("rc",n),p=Qd(n,c,i[i.length-2],i[i.length-1]),r;u===0?r=[1,1]:u===1?r=[i[0],1]:r=[i[n-1],i[n-2]];let l=Jd(n,r,c),s=Zd(i,c),h=`
        void main() {
          ${o} rc = getOutputCoords();

          if(${l}) {
            ${a.output} = vec4(0);
          } else {
            ${p}

            ${a.output} = vec4(${s});
          }
        }
      `;return{...Uu,hasMain:!0,output:{dims:t.dims,type:t.type,textureType:2},shaderSource:h}},zu=(e,t)=>({...Uu,get:()=>Kd(e,t)})});function bi(e){if(e.length===0)return[1,1,1];let t=1;for(let a=0;a<e.length-2;++a)t*=e[a];return[t,e.length>1?e[e.length-2]:1,e[e.length-1]]}function Hu(e,t){let a=!1;return e.length===0||t.length===0?a=!0:e.length<2||t.length<2?a=e[e.length-1]===t[t.length-1]:a=e[e.length-1]===t[t.length-1]&&e[e.length-2]===t[t.length-2],a}function rh(e){let t=U.computeStrides(e),a=["b","r","c"],i="index";return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${t.map((u,n)=>{let o=`int ${a[n]} = ${i} / ${u}`,c=n===t.length-1?`int ${a[n+1]} = ${i} - ${a[n]} * ${u}`:`index -= ${a[n]} * ${u}`;return`${o}; ${c};`}).join("")}
      return ivec3(b, r, c);
    }
  `}function nh(e){let t=U.computeStrides(e);return`
  int getFlattenedIndex(ivec3 coords) {
    // reverse y, z order
    return coords.x * ${t[0]} + coords.z * ${t[1]} + coords.y;
  }
`}var eh,th,Wu,qu=L(()=>{fe(),we(),ae(),Tr(),eh=e=>({name:"Reshape (packed)",inputTypes:[2],inputNames:["A"],cacheHint:`${e}`}),th=(e,t,a,i)=>{let u=t.dims,n=i,o="";for(let r=0;r<4;r++){let l="";switch(r){case 0:l="outputCoords = rc;";break;case 1:l="outputCoords = ivec3(rc.x, rc.y+1, rc.z);";break;case 2:l="outputCoords = ivec3(rc.x, rc.y, rc.z+1);";break;case 3:l="outputCoords = ivec3(rc.x, rc.y+1, rc.z+1);";break;default:throw new Error}o+=`
        ${l}
        ${r>0?"if(outputCoords.y < rows && outputCoords.z < cols){":""}
          int flattenedIndex = getFlattenedIndex(outputCoords);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flattenedIndex);
          vec2 innerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${r}] = getChannel(getA(inputRC.x, inputRC.y, inputRC.z), innerDims);

        ${r>0?"}":""}
      `}let c=H(e.session.backend.glContext.version),p=`
      ${rh(u)}
      ${nh(n)}
      ${Nt()}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.0);

        ivec3 outputCoords;
        int rows = ${n[2]};
        int cols = ${n[1]};

        ${o}
        ${c.output} = result;
      }
    `;return{...a,output:{dims:n,type:t.type,textureType:2},shaderSource:p,hasMain:!0}},Wu=(e,t,a)=>{let i=eh(a);return{...i,get:()=>th(e,t,i,a)}}}),gi,ju=L(()=>{we(),ae(),gi=(e,t)=>{let a=t.shape,i=H(e.session.backend.glContext.version),u=`
    const float FLOAT_MAX = 1.70141184e38;
    const float FLOAT_MIN = 1.17549435e-38;

    bool isNaN(float val) {
      return (val < 1.0 || 0.0 < val || val == 0.0) ? false : true;
    }

    highp vec4 encodeAsUint8(highp float v) {
      if (isNaN(v)) {
        return vec4(255, 255, 255, 255);
      }

      highp float av = abs(v);

      if(av < FLOAT_MIN) {
        return vec4(0.0, 0.0, 0.0, 0.0);
      } else if(v > FLOAT_MAX) {
        return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
      } else if(v < -FLOAT_MAX) {
        return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
      }

      highp vec4 c = vec4(0,0,0,0);

      highp float e = floor(log2(av));
      highp float m = exp2(fract(log2(av))) - 1.0;

      c[2] = floor(128.0 * m);
      m -= c[2] / 128.0;
      c[1] = floor(32768.0 * m);
      m -= c[1] / 32768.0;
      c[0] = floor(8388608.0 * m);

      highp float ebias = e + 127.0;
      c[3] = floor(ebias / 2.0);
      ebias -= c[3] * 2.0;
      c[2] += floor(ebias) * 128.0;

      c[3] += 128.0 * step(0.0, -v);

      return c / 255.0;
    }

    void main() {
      float value = ${i.texture2D}(X,TexCoords).r;
      ${i.output} = encodeAsUint8(value);
    }`,n={name:"Uint8Encode",inputTypes:[0],inputNames:["X"],output:{dims:a,type:t.tensor.type,textureType:3},shaderSource:u,hasMain:!0};return e.executeProgram(n,[t.tensor])}});function ih(e,t){if(e===1)return"rc";let a="";for(let i=0;i<e;i++)a+=t[i],i<e-1&&(a+=",");return a}var Yu,oh,Xu,Ku=L(()=>{we(),ae(),Bt(),Tr(),Yu={name:"unpack",inputNames:["A"],inputTypes:[2]},oh=(e,t)=>{let a=t.dims.length,i=Br("rc",a),u=i.slice(-2),n=Qe(a),o=Nt(),c=t.dims.length===0?"":ih(a,i),p=a<=1?"rc":`vec2(${u.join(",")})`,r=H(e.session.backend.glContext.version),l=`
    ${o}
    void main() {
      ${n} rc = getOutputCoords();

       // Sample the texture with the coords to get the rgba channel value.
       vec4 packedInput = getA(${c});

       ${r.output} = vec4(getChannel(packedInput, ${p}), 0, 0, 0);
     }
   `;return{...Yu,hasMain:!0,output:{dims:t.dims,type:t.type,textureType:0},shaderSource:l}},Xu=(e,t)=>({...Yu,get:()=>oh(e,t)})}),Xn,un,Kn,ln=L(()=>{lt(),Xn=class{constructor(e,t=1){if(t===1)this.internalFormat=e.R32F,this.format=e.RED,this.textureType=e.FLOAT,this.channelSize=t;else if(t===4)this.internalFormat=e.RGBA32F,this.format=e.RGBA,this.textureType=e.FLOAT,this.channelSize=t;else throw new Error(`Invalid number of channels: ${t}`)}encode(e,t){let a,i;return e.constructor!==Float32Array&&(ce.warning("Encoder","data was not of type Float32; creating new Float32Array"),i=new Float32Array(e)),t*this.channelSize>e.length?(ce.warning("Encoder","Source data too small. Allocating larger array"),i=e,a=this.allocate(t*this.channelSize),i.forEach((u,n)=>a[n]=u)):(i=e,a=i),a}allocate(e){return new Float32Array(e*4)}decode(e,t){return this.channelSize===1?e.filter((a,i)=>i%4===0).subarray(0,t):e.subarray(0,t)}},un=class{constructor(e,t=1,a){if(t!==1&&t!==4)throw new Error(`Invalid number of channels: ${t}`);this.internalFormat=e.RGBA,this.format=e.RGBA,this.channelSize=t,this.textureType=a||e.FLOAT}encode(e,t){let a=e;return this.channelSize===1&&(ce.verbose("Encoder","Exploding into a larger array"),a=this.allocate(t),e.forEach((i,u)=>a[u*4]=i)),a}allocate(e){return new Float32Array(e*4)}decode(e,t){return this.channelSize===1?e.filter((a,i)=>i%4===0).subarray(0,t):e.subarray(0,t)}},Kn=class{constructor(e,t=1){if(this.channelSize=4,t===1)this.internalFormat=e.ALPHA,this.format=e.ALPHA,this.textureType=e.UNSIGNED_BYTE,this.channelSize=t;else if(t===4)this.internalFormat=e.RGBA,this.format=e.RGBA,this.textureType=e.UNSIGNED_BYTE,this.channelSize=t;else throw new Error(`Invalid number of channels: ${t}`)}encode(e,t){return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}allocate(e){return new Uint8Array(e*this.channelSize)}decode(e,t){if(e instanceof Uint8Array)return e.subarray(0,t);throw new Error(`Invalid array type: ${e.constructor}`)}}}),fn,Ju,yi,Zu=L(()=>{fe(),ae(),fn=(e,t,a)=>{let i=a===0||a===1?1:4,u=a===2,n=a===1||a===2,o=a===4?t.length-1:void 0,c=a===4?t.map((p,r)=>r===t.length-1?p*4:p):void 0;return yi(e,t,i,c,{isPacked:u,reverseWH:n,breakAxis:o})},Ju=(e,t,a)=>{let i=fn(e,t,a);return[i.width,i.height]},yi=(e,t,a=1,i,u)=>{let n=!!(u&&u.isPacked),[o,c]=e.computeTextureWH(n&&i||t,u),p=t.length,r=t.slice(0);if(p===0&&(r=[1]),a===1)i=t;else if(n){if(a!==4)throw new Error("a packed texture must be 4-channel");i=t,p>0&&(r[p-1]=Math.ceil(r[p-1]/2)),p>1&&(r[p-2]=Math.ceil(r[p-2]/2))}else if(!i)throw new Error("Unpacked shape is needed when using channels > 1");return{width:o,height:c,channels:a,isPacked:n,shape:r,strides:U.computeStrides(r),unpackedShape:i,reversedWH:u&&u.reverseWH}}}),sh,Jn,el=L(()=>{lt(),yr(),fe(),Vu(),qu(),ju(),Ku(),ln(),Zu(),ae(),sh=(e,t)=>{let a=t.map(u=>`${u.unpackedShape.join(",")};${u.width}x${u.height}`).join("_"),i=e.name;return e.cacheHint&&(i+="["+e.cacheHint+"]"),i+=":"+a,i},Jn=class{constructor(e){this.session=e,this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map}calculateTextureWidthAndHeight(e,t){return Ju(this.session.layoutStrategy,e,t)}executeProgram(e,t){if(t.length<e.inputNames.length)throw new Error(`Input size mustn't be less than ${e.inputNames.length}.`);if(e.inputNames.length!==e.inputTypes.length)throw new Error("input names size does not match input types");let a=[];for(let p=0;p<e.inputNames.length;++p)a[p]=this.getOrCreateTextureData(t[p],e.inputTypes[p]);let i=sh(e,a),u=this.session.programManager.getArtifact(i),n=u?u.programInfo:typeof e.get=="function"?e.get():e,o=fn(this.session.layoutStrategy,n.output.dims,n.output.textureType),c=this.createTextureData(o,n.output.type);return u||(u=this.session.programManager.build(n,a,c),this.session.programManager.setArtifact(i,u)),this.runProgram(u,a,c),c}run(e,t){return this.executeProgram(e,t).tensor}runProgram(e,t,a){for(let i=0;i<t.length;++i)if(!!t[i].isPacked!=(e.programInfo.inputTypes[i]===2))throw new Error(`input[${i}] property packed inconsistent`);if(!!a.isPacked!=(e.programInfo.output.textureType===2))throw new Error("output property packed inconsistent");this.session.programManager.run(e,t,a)}getOrCreateTextureData(e,t){let a=this.getTextureData(e.dataId,t===2);if(!a&&(a=this.getTextureData(e.dataId,t!==2),a))return t===2?this.pack(a):this.unpack(a);if(!a){let i=fn(this.session.layoutStrategy,e.dims,t);if(t===4){let u=e.dims;if(u.length===4){let n=[u[0],Math.ceil(u[1]*u[2]*u[3]/4)],o=fn(this.session.layoutStrategy,n,t),c=e.numberData;if(u[1]*u[2]*u[3]%4!==0){let p=u[0],r=u[1]*u[2]*u[3],l=Math.ceil(r*1/4)*4,s=p*l;c=new Float32Array(s);for(let h=0;h<p;++h){let d=h*r,m=h*l+h%1*r;c.set(e.numberData.subarray(d,d+r),m)}}return this.createTextureData(o,e.type,c,e,1)}}if(t===2){let u=yi(this.session.layoutStrategy,e.dims,1,[],{reverseWH:!0}),n=this.createTextureData(u,e.type,e.numberData,e,1);a=this.pack(n)}else a=this.createTextureData(i,e.type,e.numberData,e,1)}return a}createTextureDataFromLayoutBindTensor(e,t,a,i){return this.createTextureData(e,t,a,i,1)}createTextureData(e,t,a,i,u){ce.verbose("InferenceHandler",`Creating TextureData: layout:[${JSON.stringify(e)}]`);let n=this.session.textureManager.createTextureFromLayout(t,e,a,u);return this.createTextureDataFromTexture(e,t,n,i)}reshapeUnpacked(e,t){let a=this.getOrCreateTextureData(e,0),i={channels:a.channels,height:a.height,width:a.width,shape:t.length!==0?t:[1],strides:U.computeStrides(t),unpackedShape:t};return this.createTextureDataFromTexture(i,e.type,a.texture).tensor}reshapePacked(e,t){let a=this.getOrCreateTextureData(e,2);if(Hu(e.dims,t)){let c={channels:a.channels,height:a.height,width:a.width,shape:t.length!==0?t:[1],strides:U.computeStrides(t),unpackedShape:t,isPacked:!0};return this.createTextureDataFromTexture(c,e.type,a.texture).tensor}let i=bi(e.dims),u=bi(t),n=this.reshapePacked(e,i),o=this.run(Wu(this,n,u),[n]);return this.reshapePacked(o,t)}cast(e,t){let a=this.getOrCreateTextureData(e,0);return this.createTextureDataFromTexture(a,t,a.texture).tensor}createTextureDataFromTexture(e,t,a,i,u){let n={...e,tensor:i||new $e(e.unpackedShape,t,o=>this.readTexture(n),async o=>this.readTextureAsync(n),void 0,u),texture:a};return this.setTextureData(n.tensor.dataId,n,e.isPacked),n}getTextureData(e,t=!1){return this.session.isInitializer(e)?this.session.getTextureData(e,t):t?this.packedTextureDataCache.get(e):this.unpackedTextureDataCache.get(e)}setTextureData(e,t,a=!1){this.session.isInitializer(e)?this.session.setTextureData(e,t,a):(a?this.packedTextureDataCache:this.unpackedTextureDataCache).set(e,t)}isTextureLayoutCached(e,t=!1){return!!this.getTextureData(e.dataId,t)}dispose(){this.session.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach(e=>this.session.textureManager.releaseTexture(e)),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach(e=>this.session.textureManager.releaseTexture(e)),this.unpackedTextureDataCache=new Map}readTexture(e){return e.isPacked?this.readTexture(this.unpack(e)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTexture(e,e.tensor.type,e.channels):this.session.textureManager.readUint8TextureAsFloat(gi(this,e))}async readTextureAsync(e){return e.isPacked?this.readTextureAsync(this.unpack(e)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTextureAsync(e,e.tensor.type,e.channels):this.session.textureManager.readUint8TextureAsFloat(gi(this,e))}pack(e){return this.executeProgram(zu(this,e.tensor),[e.tensor])}unpack(e){return this.executeProgram(Xu(this,e.tensor),[e.tensor])}}}),Ti,Q,Ue=L(()=>{Ti=class{constructor(e){Object.assign(this,e)}get cacheKey(){return this.key||(this.key=Object.getOwnPropertyNames(this).sort().map(e=>`${this[e]}`).join(";")),this.key}},Q=e=>new Ti(e)}),tl,rl,nl,uh,lh,ol=L(()=>{Ue(),we(),ae(),tl={name:"BatchNormalization",inputNames:["A","Scale","B","Mean","Variance"],inputTypes:[0,0,0,0,0]},rl=(e,t,a)=>(lh(t),[e.run({...tl,cacheHint:a.cacheKey,get:()=>uh(e,t,a)},t)]),nl=e=>{let t=e.attributes.getFloat("epsilon",1e-5),a=e.attributes.getFloat("momentum",.9),i=e.attributes.getInt("spatial",1);return Q({epsilon:t,momentum:a,spatial:i})},uh=(e,t,a)=>{let i=H(e.session.backend.glContext.version),u=t[0].dims.length,[n,o]=e.calculateTextureWidthAndHeight(t[1].dims,0),c=`
  float process(int[${u}] indices) {
    vec2 position = offsetToCoords(indices[1], ${n}, ${o});
    float scale = getColorAsFloat(${i.texture2D}(Scale, position));
    float mean = getColorAsFloat(${i.texture2D}(Mean, position));
    float variance = getColorAsFloat(${i.texture2D}(Variance, position));
    float b = getColorAsFloat(${i.texture2D}(B, position));

    return scale * ( (_A(indices) - mean) / sqrt(variance + float(${a.epsilon})) ) + b;
  }`;return{...tl,output:{dims:t[0].dims,type:t[0].type,textureType:0},shaderSource:c}},lh=e=>{if(!e||e.length!==5)throw new Error("BatchNormalization requires 5 inputs.");let t=e[0],a=e[1],i=e[2],u=e[3],n=e[4];if(t.dims.length<3||a.dims.length!==1||i.dims.length!==1||u.dims.length!==1||n.dims.length!==1)throw new Error("invalid input shape.");if(a.dims[0]!==t.dims[1]||i.dims[0]!==t.dims[1]||u.dims[0]!==t.dims[1]||n.dims[0]!==t.dims[1])throw new Error("invalid input shape.");if(t.type!=="float32"&&t.type!=="float64"||a.type!=="float32"&&a.type!=="float64"||i.type!=="float32"&&i.type!=="float64"||u.type!=="float32"&&u.type!=="float64"||n.type!=="float32"&&n.type!=="float64")throw new Error("invalid input tensor types.")}}),Zn,dt,R,cn,Qn,Wt=L(()=>{Zn=class{constructor(e,t,a,i){this.glContext=e,this.programInfo=t,this.inputTextureLayouts=a,this.outputTextureLayout=i}},dt=class{constructor(e){this.context=e}},R=class{constructor(e,t){this.routineBody=e,this.dependencies=t}},cn=class{constructor(e,t,a){this.name=e,a?this.dependencies=a:this.dependencies=[],t&&(this.routineBody=t)}addDependency(e){e&&this.dependencies.push(e)}},Qn=class{static returnOrderedNodes(e){if(!e||e.length===0)return[];if(e.length===1)return e;let t=new Set,a=new Set,i=new Array;return this.createOrderedNodes(e,t,a,i),i}static createOrderedNodes(e,t,a,i){for(let u=0;u<e.length;++u)this.dfsTraverse(e[u],t,a,i)}static dfsTraverse(e,t,a,i){if(!e||a.has(e.name))return;if(t.has(e.name))throw new Error("Cyclic dependency detected. Can't topologically sort routines needed for shader.");t.add(e.name);let u=e.dependencies;if(u&&u.length>0)for(let n=0;n<u.length;++n)this.dfsTraverse(u[n],t,a,i);i.push(e),a.add(e.name),t.delete(e.name)}}});function ch(){let e="add_";return{body:`
  float ${e}(float a, float b) {
    return a + b;
  }
  vec4 ${e}(vec4 v1, vec4 v2) {
    return v1 + v2;
  }
  `,name:e,type:0}}function ph(){let e="div_";return{body:`
  float ${e}(float a, float b) {
    return a / b;
  }
  vec4 ${e}(vec4 v1, vec4 v2) {
    return v1 / v2;
  }
  `,name:e,type:0}}function dh(){let e="mul_";return{body:`
  float ${e}(float a, float b) {
    return a * b;
  }
  vec4 ${e}(vec4 v1, vec4 v2) {
    return v1 * v2;
  }
  `,name:e,type:0}}function hh(){let e="sub_";return{body:`
  float ${e}(float a, float b) {
    return a - b;
  }
  vec4 ${e}(vec4 v1, vec4 v2) {
    return v1 - v2;
  }
  `,name:e,type:0}}function mh(){let e="equal_";return{body:`
  float ${e}(float a, float b) {
    return float(a == b);
  }
  vec4 ${e}(vec4 v1, vec4 v2) {
    return vec4(equal(v1, v2));
  }
  `,name:e,type:0}}function bh(){let e="greater_";return{body:`
  float ${e}(float a, float b) {
    return float(a > b);
  }
  vec4 ${e}(vec4 v1, vec4 v2) {
    return vec4( v1.r > v2.r ,
      v1.g > v2.g,
      v1.b > v2.b,
      v1.a > v2.a );
  }
  `,name:e,type:0}}function gh(){let e="less_";return{body:`
  float ${e}(float a, float b) {
    return float(a < b);
  }
  vec4 ${e}(vec4 v1, vec4 v2) {
    return vec4( v1.r < v2.r ,
                v1.g < v2.g,
                v1.b < v2.b,
                v1.a < v2.a );
  }
  `,name:e,type:0}}function yh(){let e="and_";return{body:`
  float ${e}(float a, float b) {
    return float( bool(a) && bool(b) );
  }
  vec4 ${e}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r && b2.r ,
                b1.g && b2.g,
                b1.b && b2.b,
                b1.a && b2.a );
  }
  `,name:e,type:0}}function Th(){let e="or_";return{body:`
  float ${e}(float a, float b) {
    return float( bool(a) || bool(b) );
  }
  vec4 ${e}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r || b2.r ,
                b1.g || b2.g,
                b1.b || b2.b,
                b1.a || b2.a );
  }
  `,name:e,type:0}}function xh(){let e="xor_";return{body:`
  float ${e}(float a, float b) {
    return float( bool(a) ^^ bool(b) );
  }
  vec4 ${e}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r ^^ b2.r ,
                b1.g ^^ b2.g,
                b1.b ^^ b2.b,
                b1.a ^^ b2.a );
  }
  `,name:e,type:0}}function wh(){return _h("pow")}function vh(){let e="prelu_";return{body:`
  float ${e}(float a, float b) {
    return a < 0.0 ? a * b: a;
  }
  vec4 ${e}(vec4 v1, vec4 v2) {
    return vec4(
      v1.r < 0.0 ? v1.r * v2.r: v1.r,
      v1.g < 0.0 ? v1.g * v2.g: v1.g,
      v1.b < 0.0 ? v1.b * v2.b: v1.b,
      v1.a < 0.0 ? v1.a * v2.a: v1.a
      );
  }
  `,name:e,type:0}}function _h(e){let t=`${e}_`;return{body:`
  float ${t}(float a, float b) {
    return ${e}(a, b);
  }
  vec4 ${t}(vec4 v1, vec4 v2) {
    return ${e}(v1, v2);
  }
  `,name:t,type:0}}var ht,Oh,il,al,sl,ul,ll,fl,cl,pl,dl,hl,ml,bl,gl=L(()=>{fe(),Wt(),we(),ae(),ht=(e,t,a,i=t[0].type,u)=>{let n=e.session.pack?2:0;return{name:a.name,inputNames:["A","B"],inputTypes:[n,n],cacheHint:u,get:()=>Oh(e,t,a,i)}},Oh=(e,t,a,i=t[0].type)=>{let u=e.session.pack?2:0,n=!U.areEqual(t[0].dims,t[1].dims),o=t[0].dims,c=e.session.pack;if(n){let l=Ze.calcShape(t[0].dims,t[1].dims,!1);if(!l)throw new Error("Can't perform binary op on the given tensors");o=l;let s=o.length,h=t[0].dims.length!==0?t[0].dims.length:1,d=t[1].dims.length!==0?t[1].dims.length:1,m=t[0].dims.length!==0?"bcastIndices_A(indices, aindices);":"aindices[0] = 0;",b=t[1].dims.length!==0?"bcastIndices_B(indices, bindices);":"bindices[0] = 0;",v=H(e.session.backend.glContext.version),O=c?`
      ${a.body}
      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();
        vec4 result = ${a.name}(a, b);
        ${v.output} = result;
      }`:`
      ${a.body}
      float process(int indices[${s}]) {
        int aindices[${h}];
        int bindices[${d}];
        ${m}
        ${b}
        return ${a.name}(_A(aindices), _B(bindices));
      }`;return{name:a.name,inputNames:["A","B"],inputTypes:[u,u],output:{dims:o,type:i,textureType:u},shaderSource:O,hasMain:c}}let p=H(e.session.backend.glContext.version),r=`
    ${a.body}
    void main() {
      vec4 v1 = ${p.texture2D}(A, TexCoords);
      vec4 v2 = ${p.texture2D}(B, TexCoords);
      vec4 result = ${a.name}(v1, v2);
      ${p.output} = result;
    }
    `;return{name:a.name,inputNames:["A","B"],inputTypes:[u,u],output:{dims:t[0].dims,type:i,textureType:u},shaderSource:r,hasMain:!0}},il=(e,t)=>[e.run(ht(e,t,ch()),t)],al=(e,t)=>[e.run(ht(e,t,yh(),"bool"),t)],sl=(e,t)=>[e.run(ht(e,t,ph()),t)],ul=(e,t)=>[e.run(ht(e,t,mh(),"bool"),t)],ll=(e,t)=>[e.run(ht(e,t,bh(),"bool"),t)],fl=(e,t)=>[e.run(ht(e,t,gh(),"bool"),t)],cl=(e,t)=>[e.run(ht(e,t,dh()),t)],pl=(e,t)=>[e.run(ht(e,t,Th(),"bool"),t)],dl=(e,t)=>[e.run(ht(e,t,wh()),t)],hl=(e,t)=>[e.run(ht(e,t,vh()),t)],ml=(e,t)=>[e.run(ht(e,t,hh()),t)],bl=(e,t)=>[e.run(ht(e,t,xh(),"bool"),t)]}),yl,Tl,Sh,xl=L(()=>{fe(),yl=(e,t,a)=>(Sh(t),[e.cast(t[0],a)]),Tl=e=>We.tensorDataTypeFromProto(e.attributes.getInt("to")),Sh=e=>{if(!e||e.length!==1)throw new Error("Cast requires 1 input.");if(e[0].type==="string")throw new Error("Invalid input type.")}}),Ah,Ph,wl,eo,vl=L(()=>{we(),ae(),Bt(),Tr(),Ah=(e,t)=>({name:"Concat (packed)",inputNames:Array.from({length:e},(a,i)=>`X${i}`),inputTypes:Array(e).fill(2),cacheHint:t}),Ph=(e,t,a,i)=>{let u=a[0].dims.slice();if(i>=u.length||i<-1*u.length)throw new Error("axis specified for concat doesn't match input dimensionality");i<0&&(i=u.length+i);let n=u.slice(0);for(let C=1;C<a.length;C++){let P=a[C].dims.slice();for(let G=0;G<u.length;G++)if(G===i)n[i]+=P[G];else if(u[G]!==P[G])throw new Error("non concat dimensions must match")}let o=n.length,c=Br("coords",o),p=Qe(o),r=Nt(),l=a.map(C=>C.dims),s=Dt(o),h=new Array(l.length-1);h[0]=l[0][i];for(let C=1;C<h.length;C++)h[C]=h[C-1]+l[C][i];let d=s[i],m=s.slice(-2),b=s.join(),v=`if (${d} < ${h[0]}) {
        return getChannel(
            getX0(${b}), vec2(${m.join()}));
        }`;for(let C=1;C<h.length;C++){let P=h[C-1];v+=`
            if (${d} < ${h[C]}  && ${d} >= ${h[C-1]}) {
              return getChannel(
                getX${C}(${eo(s,d,P)}),
                vec2(${eo(m,d,P)}));
            }`}let O=h.length,T=h[h.length-1];v+=`
            return getChannel(
              getX${O}(${eo(s,d,T)}),
              vec2(${eo(m,d,T)}));`;let E=H(e.session.backend.glContext.version),$=`
          ${r}
          float getValue(${s.map(C=>"int "+C)}) {
            ${v}
          }

          void main() {
            ${p} coords = getOutputCoords();
            int lastDim = coords.${s[o-1]};
            coords.${s[o-1]} = coords.${s[o-2]};
            coords.${s[o-2]} = lastDim;

            vec4 result = vec4(getValue(${c}), 0., 0., 0.);

            ${c[o-1]} = ${c[o-1]} + 1;
            if (${c[o-1]} < ${n[o-1]}) {
              result.g = getValue(${c});
            }

            ${c[o-2]} = ${c[o-2]} + 1;
            if (${c[o-2]} < ${n[o-2]}) {
              result.a = getValue(${c});
            }

            ${c[o-1]} = ${c[o-1]} - 1;
            if (${c[o-2]} < ${n[o-2]} &&
                ${c[o-1]} < ${n[o-1]}) {
              result.b = getValue(${c});
            }
            ${E.output} = result;
          }
        `;return{...t,output:{dims:n,type:a[0].type,textureType:2},shaderSource:$,hasMain:!0}},wl=(e,t,a)=>{let i=Ah(t.length,a.cacheKey);return{...i,get:()=>Ph(e,i,t,a.axis)}},eo=(e,t,a)=>{let i=e.indexOf(t);return e.map((u,n)=>n===i?`${u} - ${a}`:u).join()}}),_l,Eh,Dh,Lh,Ol,Ch,Fh,$h,Il,kh,Sl=L(()=>{Ue(),ae(),vl(),_l=(e,t,a)=>(kh(t),e.session.pack&&t[0].dims.length>1?[e.run(wl(e,t,a),t)]:[e.run(Lh(e,t,a),t)]),Eh=(e,t)=>({name:"Concat",inputNames:Array.from({length:e},(a,i)=>`X${i}`),inputTypes:Array(e).fill(0),cacheHint:t}),Dh=(e,t,a,i)=>{let u=a[0].dims.slice();if(i>=u.length||i<-1*u.length)throw new Error("axis specified for concat doesn't match input dimensionality");i<0&&(i=u.length+i);let n=u.slice(0);for(let d=1;d<a.length;d++){let m=a[d].dims.slice();for(let b=0;b<u.length;b++)if(b===i)n[i]+=m[b];else if(u[b]!==m[b])throw new Error("non concat dimensions must match")}let o=n.length,c=new Array(a.length),p=0;for(let d=0;d<c.length;++d)p+=a[d].dims[i],c[d]=p;let r="";a.length<5?r=Ol(c):r=Ch(c);let l=Fh(a.length,o),s=$h(c),h=`
        ${l}
        ${s}
        ${r}
        float process(int indices[${o}]) {
          int textureIndex = getTextureWhereDataResides (indices[${i}]);

          if(textureIndex != 0) {
            indices[${i}] = indices[${i}] - int(getSizeInConcatAxisValueFromIndex(textureIndex-int(1)));
          }

          return fetchDataFromCorrectTexture(textureIndex, indices);
        }`;return{...t,output:{dims:n,type:a[0].type,textureType:0},shaderSource:h}},Lh=(e,t,a)=>{let i=Eh(t.length,a.cacheKey);return{...i,get:()=>Dh(e,i,t,a.axis)}},Ol=e=>`int getTextureWhereDataResides(int index) {
      ${e.map((t,a)=>`if(index<${t}) {return ${a};}
`).join("")}
    }`,Ch=e=>Ol(e),Fh=(e,t)=>{let a=[`float fetchDataFromCorrectTexture(int textureIndex, int indices[${t}]) {`];for(let i=0;i<e;++i)i===0?a.push(`	if (textureIndex == ${i}) { return _X${i}(indices); }`):i===e-1?a.push(`	else { return _X${i}(indices); }`):a.push(`	else if (textureIndex == ${i}) { return _X${i}(indices); }`);return a.push("	}"),a.join(`
`)},$h=e=>{let t=["int getSizeInConcatAxisValueFromIndex(int index) {"];for(let a=0;a<e.length;++a)a===0?t.push(`	if (index == ${a}) { return ${e[a]}; }`):a===e.length-1?t.push(`	else { return ${e[a]}; }`):t.push(`	else if (index == ${a}) { return ${e[a]}; }`);return t.push("	}"),t.join(`
`)},Il=e=>Q({axis:e.attributes.getInt("axis")}),kh=e=>{if(!e||e.length<1)throw new Error("too few inputs");let t=e[0].type,a=e[0].dims.length;if(t==="string")throw new Error("string tensor is not supported yet");for(let i of e){if(i.type!==t)throw new Error("input tensors should be one type");if(i.dims.length!==a)throw new Error("input tensors should have the same shape")}}});function Bh(){return mt("abs")}function Nh(){return mt("acos")}function Rh(){return mt("asin")}function Mh(){return mt("atan")}function Gh(){return mt("ceil")}function Uh(){return mt("cos")}function zh(e){let t="elu";return{body:`
  const float alpha = float(${e});

  float ${t}_(float a) {
    return a >= 0.0 ? a: (exp(a) - 1.0) * alpha;
  }
  vec4 ${t}_(vec4 v) {
    return vec4(${t}_(v.x), ${t}_(v.y), ${t}_(v.z), ${t}_(v.w));
  }
  `,name:t,type:0}}function Vh(){return mt("exp")}function Wh(){return mt("floor")}function xi(e,t){let a="clip";return{body:`
  const float min = float(${e});
  const float max = float(${t});

  float ${a}_(float a) {
    return clamp(a, min, max);
  }
  vec4 ${a}_(vec4 v) {
    return clamp(v, min, max);
  }
  `,name:a,type:0}}function Hh(){let e="indentity";return{body:`
  float ${e}_(float a) {
    return a;
  }
  vec4 ${e}_(vec4 v) {
    return v;
  }
  `,name:e,type:0}}function qh(e){let t="leakyRelu";return{body:`
  const float alpha = float(${e});

  float ${t}_(float a) {
    return a < 0.0 ? a * alpha : a;
  }
  vec4 ${t}_(vec4 v) {
    return vec4(${t}_(v.x), ${t}_(v.y), ${t}_(v.z), ${t}_(v.w));
  }
  `,name:t,type:0}}function jh(){return mt("log")}function Yh(){let e="neg";return{body:`
  float ${e}_(float a) {
    return -a;
  }
  vec4 ${e}_(vec4 v) {
    return -v;
  }
  `,name:e,type:0}}function Xh(){let e="not";return{body:`
  float ${e}_(float a) {
    return float( ! bool(a) );
  }
  bool ${e}_(bool a) {
    return !a;
  }
  vec4 ${e}_(vec4 v) {
    return vec4(!bool(v.x), !bool(v.y), !bool(v.z), !bool(v.w));
  }
  bvec4 ${e}_(bvec4 v) {
    return bvec4(!v.x, !v.y, !v.z, !v.w);
  }
  `,name:e,type:0}}function Kh(){return mt("sin")}function wi(){let e="relu";return{body:`
  float ${e}_(float a) {
    return max( a, 0.0 );
  }
  vec4 ${e}_(vec4 v) {
    return max( v, 0.0 );
  }
  `,name:e,type:0}}function vi(){let e="sigmoid";return{body:`
  float ${e}_(float a) {
    return 1.0 / (1.0 + exp(-a));
  }
  vec4 ${e}_(vec4 v) {
    return 1.0 / (1.0 + exp(-v));
  }
  `,name:e,type:0}}function Jh(){return mt("sqrt")}function Zh(){return mt("tan")}function Qh(){let e="tanh";return{body:`
  float ${e}_(float a) {
    a = clamp(a, -10., 10.);
    a = exp(2.*a);
    return (a - 1.) / (a + 1.);
  }
  vec4 ${e}_(vec4 v) {
    v = clamp(v, -10., 10.);
    v = exp(2.*v);
    return (v - 1.) / (v + 1.);
  }
  `,name:e,type:0}}function mt(e){return{body:`
  float ${e}_(float a) {
    return ${e}(a);
  }
  vec4 ${e}_(vec4 v) {
    return ${e}(v);
  }
  `,name:e,type:0}}var em,Ee,Al,Pl,El,Dl,_i,Ll,Cl,tm,Fl,$l,kl,Bl,Nl,Rl,Oi,Ml,Gl,Ul,zl,Vl,Wl,Hl,ql,jl,Yl,Xl,Ii=L(()=>{Ue(),fe(),Wt(),we(),ae(),em=(e,t,a,i)=>{let u=e.session.pack?2:0,n=H(e.session.backend.glContext.version);return{...t,output:{dims:a.dims,type:a.type,textureType:u},shaderSource:`
     ${i.body}
     void main() {
       vec4 v = ${n.texture2D}(A, TexCoords);
       v = ${i.name}_(v);
       ${n.output} = v;
     }
     `,hasMain:!0}},Ee=(e,t,a,i)=>{let u=e.session.pack?2:0,n={name:a.name,inputTypes:[u],inputNames:["A"],cacheHint:i};return{...n,get:()=>em(e,n,t,a)}},Al=(e,t)=>[e.run(Ee(e,t[0],Bh()),t)],Pl=(e,t)=>[e.run(Ee(e,t[0],Nh()),t)],El=(e,t)=>[e.run(Ee(e,t[0],Rh()),t)],Dl=(e,t)=>[e.run(Ee(e,t[0],Mh()),t)],_i=(e,t,a)=>[e.run(Ee(e,t[0],xi(a.min,a.max),a.cacheKey),t)],Ll=e=>Q({min:e.attributes.getFloat("min",br),max:e.attributes.getFloat("max",gr)}),Cl=(e,t)=>{let a=tm(e,t);return _i(e,[t[0]],a)},tm=(e,t)=>{if(t.length>=3&&(!e.session.isInitializer(t[1].dataId)||!e.session.isInitializer(t[2].dataId)))throw new Error("dynamic clip attributes are not allowed");let a=t.length>=3?t[1].numberData[0]:br,i=t.length>=3?t[2].numberData[0]:gr;return Q({min:a,max:i})},Fl=(e,t)=>[e.run(Ee(e,t[0],Gh()),t)],$l=(e,t)=>[e.run(Ee(e,t[0],Uh()),t)],kl=(e,t,a)=>[e.run(Ee(e,t[0],zh(a.alpha),a.cacheKey),t)],Bl=e=>Q({alpha:e.attributes.getFloat("alpha",1)}),Nl=(e,t)=>[e.run(Ee(e,t[0],Vh()),t)],Rl=(e,t)=>[e.run(Ee(e,t[0],Wh()),t)],Oi=(e,t)=>[e.run(Ee(e,t[0],Hh()),t)],Ml=(e,t,a)=>[e.run(Ee(e,t[0],qh(a.alpha),a.cacheKey),t)],Gl=e=>Q({alpha:e.attributes.getFloat("alpha",.01)}),Ul=(e,t)=>[e.run(Ee(e,t[0],jh()),t)],zl=(e,t)=>[e.run(Ee(e,t[0],Yh()),t)],Vl=(e,t)=>[e.run(Ee(e,t[0],Xh()),t)],Wl=(e,t)=>[e.run(Ee(e,t[0],wi()),t)],Hl=(e,t)=>[e.run(Ee(e,t[0],vi()),t)],ql=(e,t)=>[e.run(Ee(e,t[0],Kh()),t)],jl=(e,t)=>[e.run(Ee(e,t[0],Jh()),t)],Yl=(e,t)=>[e.run(Ee(e,t[0],Zh()),t)],Xl=(e,t)=>[e.run(Ee(e,t[0],Qh()),t)]});function Rt(e){let t;switch(e.activation){case"Relu":t=wi();break;case"Sigmoid":t=vi();break;case"Clip":t=xi(e.clipMin,e.clipMax);break;default:return{activationFunction:"",applyActivation:""}}let a=t.name,i=t.body,u=`value = ${a}_(value);`;return{activationFunction:i,applyActivation:u}}var Nr,xr=L(()=>{fe(),Ii(),Nr=e=>{let t=e.getString("activation","");if(t==="Clip"){let[a,i]=e.getFloats("activation_params",[br,gr]);return{activation:t,clipMax:i,clipMin:a,activationCacheKey:`${t}:${a},${i}`}}return{activation:t,activationCacheKey:t}}}),nm,om,Kl,Jl=L(()=>{lt(),we(),ae(),to(),xr(),nm=(e,t)=>({name:"GroupedConv",inputNames:e?["X","W","Bias"]:["X","W"],inputTypes:e?[0,0,0]:[0,0],cacheHint:t}),om=(e,t,a,i)=>{let u=t.length>2?"value += getBias(output_channel);":"",n=t[0].dims.slice(),o=t[1].dims.slice(),c=o[0]/i.group;ce.verbose("GroupedConv",`autpPad:${i.autoPad}, dilations:${i.dilations}, group:${i.group}, kernelShape:${i.kernelShape}, pads:${i.pads}, strides:${i.strides}`);let p=Rr(n,o,i.dilations,i.pads,i.strides),r=H(e.session.backend.glContext.version),{activationFunction:l,applyActivation:s}=Rt(i),h=`
  const ivec2 strides = ivec2(${i.strides[0]}, ${i.strides[1]});
  const ivec2 pads = ivec2(${i.pads[0]}, ${i.pads[1]});
  ${l}
  void main() {
    ivec4 coords = getOutputCoords();
    int batch = coords.x;
    int output_channel = coords.y;
    ivec2 xRCCorner = coords.zw * strides - pads;
    int group_id = output_channel / ${c};

    float value = 0.0;
    for (int wInChannel = 0; wInChannel < ${o[1]}; wInChannel++) {
      int input_channel = group_id * ${o[1]} + wInChannel;
      for (int wHeight = 0; wHeight < ${o[2]}; wHeight++) {
        int xHeight = xRCCorner.x + wHeight * ${i.dilations[0]};

        if (xHeight < 0 || xHeight >= ${n[2]}) {
          continue;
        }

        for (int wWidth = 0; wWidth < ${o[3]}; wWidth++) {
          int xWidth = xRCCorner.y + wWidth * ${i.dilations[1]};
          if (xWidth < 0 || xWidth >= ${n[3]}) {
            continue;
          }

          float xVal = getX(batch, input_channel, xWidth, xHeight);
          float wVal = getW(output_channel, wInChannel, wWidth, wHeight);
          value += xVal*wVal;
        }
      }
    }
    ${u}
    ${s}
    ${r.output} = vec4(value, .0, .0, .0);
  }
`;return{...a,output:{dims:p,type:t[0].type,textureType:0},shaderSource:h,hasMain:!0}},Kl=(e,t,a)=>{let i=nm(t.length>2,a.cacheKey);return{...i,get:()=>om(e,t,i,a)}}}),im,am,Zl,Ql=L(()=>{we(),ae(),Tr(),im=e=>({name:"Im2Col (packed)",inputNames:["A"],inputTypes:[2],cacheHint:e}),am=(e,t,a,i,u,n)=>{let o=a.dims,c=i.dims,p=2,r=3,l=u.length,s=[c[1]*c[2]*c[3],u[2]*u[3]],h=c[2]*c[3],d=Nt(),m=H(e.session.backend.glContext.version),b="";for(let O=0;O<=1;O++)for(let T=0;T<=1;T++)b+=`
            blockIndex = rc.x + ${T};
            pos = rc.y + ${O};

            if(blockIndex < ${s[1]} && pos < ${s[0]}) {
              offsetY = int(blockIndex / (${u[l-1]})) * ${n.strides[0]} -
                ${n.pads[0]};
              d0 = offsetY + ${n.dilations[0]} * (imod(pos, ${h}) / ${c[2]});

              if(d0 < ${o[p]} && d0 >= 0) {
                offsetX = imod(blockIndex, ${u[l-1]}) * ${n.strides[1]} -
                  ${n.pads[1]};
                d1 = offsetX + ${n.dilations[1]} * imod(imod(pos, ${h}), ${c[2]});

                if(d1 < ${o[r]} && d1 >= 0) {

                  ch = int(float(pos)/ ${h}.);
                    innerDims = vec2(d0, d1);
                    result[${O*2+T}] = getChannel(
                      getA(0, ch, int(innerDims.x),
                      int(innerDims.y)), innerDims);
                }
              }
            }

          `;let v=`
      ${d}

      void main() {
        ivec2 rc = getOutputCoords();
          vec4 result = vec4(0.0);
          int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
          vec2 innerDims;
          ${b}
          ${m.output} = result;
      }
            `;return{...t,output:{dims:s,type:a.type,textureType:2},shaderSource:v,hasMain:!0}},Zl=(e,t,a,i,u)=>{let n=im(u.cacheKey);return{...n,get:()=>am(e,n,t,a,i,u)}}});function um(e,t,a){let i=t[0].dims,u=t[1].dims,n=Ze.calcShape(i,u,!0);if(!n)throw new Error("Can't use matmul on the given tensors");let o=Qe(n.length),c=Dt(),{activationFunction:p,applyActivation:r}=Rt(a),l=t.length>2,s=l?"value += getBiasForMatmul();":"",h=l?`${Ai(o,c,t[2].dims,n,!1)}`:"",d=n.length,m=i.length,b=u.length,v=i[i.length-1],O=`
    ${p}
    ${h}
    float process(int indices[${d}]) {
        int a[${m}];
        int b[${b}];
        bcastMatmulIndices_A(indices, a);
        bcastMatmulIndices_B(indices, b);

        float value;
        for (int k=0; k<${v}; ++k) {
            a[${m-1}] = k;
            b[${b-2}] = k;
            value += _A(a) * _B(b);
        }
        ${s}
        ${r}
        return value;
    }`;return{...e,output:{dims:n,type:t[0].type,textureType:0},shaderSource:O}}function Si(e,t){let a=sm(e.length>2,t.activationCacheKey);return{...a,get:()=>um(a,e,t)}}function Ai(e,t,a,i,u){let n="",o=a.length,c=i.length,p=c-o;c<2&&o>0?n="coords":n=a.map((h,d)=>`coords.${t[d+p]}`).join(", ");let r=Ze.getBroadcastDims(a,i).map(h=>`coords.${t[h+p]} = 0;`).join(`
`),l=U.size(a)===1,s="vec4(outputValue.xx, outputValue.yy)";return l&&(s="vec4(outputValue.x)"),u?`
vec4 getBiasForMatmul() {
  ${e} coords = getOutputCoords();
  ${r}
  vec4 outputValue = getBias(${n});
  return ${s};
}`:`
float getBiasForMatmul() {
  ${e} coords = getOutputCoords();
  ${r}
  return getBias(coords.x);
}`}var ef,tf,sm,lm,ro=L(()=>{fe(),ae(),Bt(),xr(),Pi(),ef=(e,t,a)=>(lm(t),e.session.pack?[e.run(no(e,t,a),t)]:[e.run(Si(t,a),t)]),tf=e=>Nr(e.attributes),sm=(e,t)=>({name:"MatMul",inputNames:e?["A","B","Bias"]:["A","B"],inputTypes:e?[0,0,0]:[0,0],cacheHint:t}),lm=e=>{if(!e||e.length!==2)throw new Error("MatMul requires 2 inputs.");if(e[0].dims[e[0].dims.length-1]!==e[1].dims[e[1].dims.length-2])throw new Error("shared dimension does not match.");if(e[0].type!=="float32"&&e[0].type!=="float64"||e[1].type!=="float32"&&e[1].type!=="float64")throw new Error("inputs should be float type");if(e[0].type!==e[1].type)throw new Error("inputs types should match")}});function pm(e,t,a,i){let u=[],n=[],o=a[0].dims,c=a[1].dims,p=o.length,r=c.length,l=i.length,s=l-p,h=l-r;u=o.map((T,E)=>`coords.${t[E+s]}`),u[p-1]="i*2",u.join(", "),n=c.map((T,E)=>`coords.${t[E+h]}`),n[r-2]="i*2",n.join(", ");let d=Ze.getBroadcastDims(o,i),m=Ze.getBroadcastDims(c,i),b=d.map(T=>`coords.${t[T+s]} = 0;`).join(`
`),v=m.map(T=>`coords.${t[T+h]} = 0;`).join(`
`),O=`int lastDim = coords.${t[l-1]};
  coords.${t[l-1]} = coords.${t[l-2]};
  coords.${t[l-2]} = lastDim;`;return`
vec4 getAAtOutCoordsMatmul(int i) {
  ${e} coords = getOutputCoords();
  ${O}
  ${b}
  vec4 outputValue = getA(${u});
  return outputValue;
}

vec4 getBAtOutCoordsMatmul(int i) {
  ${e} coords = getOutputCoords();
  ${O}
  ${v}
  vec4 outputValue = getB(${n});
  return outputValue;
}`}function dm(e,t){let a="";for(let i=0;i<t-2;i++)a+=`rc.${e[i]}, `;return a+=`rc.${e[t-2]}, i*2`,a}function hm(e,t){let a="";for(let i=0;i<t-2;i++)a+=`rc.${e[i]}, `;return a+=`i*2, rc.${e[t-1]}`,a}var fm,cm,no,Pi=L(()=>{fe(),we(),ae(),Bt(),xr(),ro(),fm=(e,t)=>({name:"MatMul (packed)",inputNames:e?["A","B","Bias"]:["A","B"],inputTypes:e?[2,2,2]:[2,2],cacheHint:t}),cm=(e,t,a,i)=>{let u=a.length>2,n=u?"value += getBiasForMatmul();":"",o=a[0].dims,c=a[1].dims,p=Ze.calcShape(o,c,!0),r=!U.areEqual(a[0].dims,a[1].dims);if(!p)throw new Error("Can't use matmul on the given tensors");let l=o[o.length-1],s=Math.ceil(l/2),h=o.length,d=c.length,m=H(e.session.backend.glContext.version),b=Qe(p.length),v=p.length,O=Dt(),{activationFunction:T,applyActivation:E}=Rt(i),$=u?`${Ai(b,O,a[2].dims,p,!0)}`:"",C=r?`${pm(b,O,a,p)}`:"",P=r?"getAAtOutCoordsMatmul(i)":`getA(${dm(O,h)})`,G=r?"getBAtOutCoordsMatmul(i)":`getB(${hm(O,d)})`,te=r?"":`${b} rc =
          getOutputCoords(); int lastDim = rc.${O[v-1]}; rc.${O[v-1]} =
          rc.${O[v-2]}; rc.${O[v-2]} = lastDim;
      `,xe=`
            ${C}
            ${$}
            ${T}
            void main() {
              ${te}

              vec4 value = vec4(0);
              for (int i = 0; i < ${s}; i++) {
                vec4 a = ${P};
                vec4 b = ${G};

                value += (a.rrbb * b.rgrg);
                value += (a.ggaa * b.baba);
              }
              ${n}
              ${E}
              ${m.output} = value;
            }`;return{...t,output:{dims:p,type:a[0].type,textureType:2},shaderSource:xe,hasMain:!0}},no=(e,t,a)=>{let i=fm(t.length>2,a.activationCacheKey);return{...i,get:()=>cm(e,i,t,a)}}}),rf,nf=L(()=>{to(),Ql(),Pi(),rf=(e,t,a)=>{let i=t[0].dims,u=t[1].dims,n=Rr(i,u,a.dilations,a.pads,a.strides),o=e.run(Zl(e,t[0],t[1],n,a),[t[0]]),c=e.reshapePacked(t[1],[u[0],u[1]*u[2]*u[3]]),p=t.length===3?[c,o,t[2]]:[c,o],r=e.run(no(e,p,a),p);return e.reshapePacked(r,n)}}),mm,bm,of,Ei,Di=L(()=>{ae(),mm=e=>({name:"Im2Col",inputNames:["X"],inputTypes:[0],cacheHint:e}),bm=(e,t,a,i,u,n)=>{let o=a.dims,c=i.dims,p=u.length,r=Ei(o,c,u,4),l=`
        const int XC = ${o[1]};
        const int XH = ${o[2]};
        const int XW = ${o[3]};
        const int KH = ${n.kernelShape[0]};
        const int KW = ${n.kernelShape[1]};
        const int dilationH = ${n.dilations[0]};
        const int dilationW = ${n.dilations[1]};
        const int strideH = ${n.strides[0]};
        const int strideW = ${n.strides[1]};
        const int padH = ${n.pads[0]};
        const int padW = ${n.pads[1]};
        const int KHKW = KH*KW;
        const int XCKHKW = XC * KHKW;
        const int outputChannels = 4;
        vec4 process(int indices[${p}]) {
          int b  = indices[0]; // batch size
          int oh = indices[1] * strideH - padH; //output height
          int ow = indices[2] * strideW - padW; //output width
          int p = indices[3] * outputChannels; //patch
          vec4 value = vec4(0.0);
          for(int i=0; i < outputChannels; ++i) {
            if(p < XCKHKW) {
              int patchC = p / KHKW;
              int patchH = (p - patchC*KHKW) / KW;
              int patchW = (p - patchC*KHKW) - patchH * KW;
              int xh2 = oh + patchH * dilationH;
              int xw2 = ow + patchW * dilationW;
              int x[${o.length}];
              x[0] = b;
              x[1] = patchC;
              x[2] = xh2;
              x[3] = xw2;
              if(xh2 >= 0 &&
                  xh2 < XH &&
                  xw2 >= 0 &&
                  xw2 < XW) {
                value[i] = _X(x);
              }
            }
            ++p;
          }
          return value;
        }
        `;return{...t,output:{dims:r,type:a.type,textureType:4},shaderSource:l}},of=(e,t,a,i,u)=>{let n=mm(u.cacheKey);return{...n,get:()=>bm(e,n,t,a,i,u)}},Ei=(e,t,a,i=4)=>[a[0],a[2],a[3],Math.ceil(e[1]*t[2]*t[3]/i)]}),gm,ym,af,sf=L(()=>{fe(),we(),ae(),xr(),Di(),gm=(e,t)=>({name:"ConvDotProduct",inputNames:e?["Im2Col","K","B"]:["Im2Col","K"],inputTypes:e?[0,4,0]:[0,4],cacheKey:t.activationCacheKey}),ym=(e,t,a,i,u)=>{let n=a[0].dims,o=a[1].dims,c=[o[0],Math.ceil(n[1]*o[2]*o[3]/4)],p=Ei(n,o,i),[r,l]=e.calculateTextureWidthAndHeight(c,4),s=U.computeStrides(p),[h,d]=e.calculateTextureWidthAndHeight(p,4),m=i.length,b=a.length<3?"0.0":"_B(b)",v=Math.ceil(n[1]*o[2]*o[3]/4),{activationFunction:O,applyActivation:T}=Rt(u),E=H(e.session.backend.glContext.version),$=`
${O}
float process(int indices[${m}]) {
  int b[1];
  b[0] = indices[1];
  int im2col[4];
  im2col[0] = indices[0];
  im2col[1] = indices[2];
  im2col[2] = indices[3];
  int im2colOffset = im2col[0] * ${s[0]} + im2col[1] * ${s[1]} + im2col[2] * ${s[2]};
  int kernelOffset = indices[1] * ${c[1]};
  float value = ${b};
  for (int i = 0; i < ${v}; ++i) {
    vec2 im2colCoords = offsetToCoords(im2colOffset, ${h}, ${d});
    vec2 kernelCoords = offsetToCoords(kernelOffset, ${r}, ${l});
    value += dot(${E.texture2D}(Im2Col, im2colCoords), ${E.texture2D}(K, kernelCoords));
    ++im2colOffset;
    ++kernelOffset;
  }
  ${T}
  return value;
}`;return{...t,output:{dims:i,type:a[0].type,textureType:0},shaderSource:$}},af=(e,t,a,i)=>{let u=gm(t.length>2,i);return{...u,get:()=>ym(e,u,t,a,i)}}}),Rr,Li,Tm,xm,wm,vm,Ci,_m,to=L(()=>{Ue(),fe(),Jl(),nf(),sf(),xr(),Di(),ro(),Rr=(e,t,a,i,u)=>{let n=e[0],o=e.slice(2),c=o.length,p=t[0],r=t.slice(2).map((s,h)=>s+(s-1)*(a[h]-1)),l=o.map((s,h)=>s+i[h]+i[h+c]).map((s,h)=>Math.floor((s-r[h]+u[h])/u[h]));return[n,p].concat(...l)},Li=(e,t,a)=>(_m(t,a),Tm(e,t,a)),Tm=(e,t,a)=>{let i=vm(a,t),u=e.session.pack,n=i.kernelShape[0]===1&&i.kernelShape[1]===1;return i.group>1?[e.run(Kl(e,t,i),t)]:n&&u?[xm(e,t,i)]:u&&t[0].dims.length===4&&t[0].dims[0]===1&&!n?[rf(e,t,i)]:[wm(e,t,i)]},xm=(e,t,a)=>{let i=t[0].dims,u=t[1].dims,n=Rr(i,u,a.dilations,a.pads,a.strides),o=e.reshapeUnpacked(t[0],[i[1],i[2]*i[3]]),c=e.reshapeUnpacked(t[1],[u[0],u[1]]),p=t.length>2?[c,o,t[2]]:[c,o],r=e.run(Si(p,a),p);return e.reshapeUnpacked(r,n)},wm=(e,t,a)=>{let i=t[0].dims,u=t[1].dims,n=Rr(i,u,a.dilations,a.pads,a.strides),o=e.run(of(e,t[0],t[1],n,a),[t[0]]),c=t.length===3?[o,t[1],t[2]]:[o,t[1]];return e.run(af(e,t,n,a),c)},vm=(e,t)=>{let a=e.kernelShape.slice();if(e.kernelShape.length===0)for(let n=2;n<t[1].dims.length;++n)a.push(t[1].dims[n]);let i=e.pads.slice();mr.adjustPadsBasedOnAutoPad(t[0].dims,e.strides,e.dilations,a,i,e.autoPad);let u=Object.assign({},e);return Object.assign(u,{kernelShape:a,pads:i,cacheKey:e.cacheKey}),u},Ci=e=>{let t=e.attributes,a=Nr(t),i=t.getString("auto_pad","NOTSET"),u=t.getInts("dilations",[1,1]),n=t.getInt("group",1),o=t.getInts("kernel_shape",[]),c=t.getInts("pads",[0,0,0,0]),p=t.getInts("strides",[1,1]);return Q({autoPad:i,dilations:u,group:n,kernelShape:o,pads:c,strides:p,...a})},_m=(e,t)=>{if(!e||e.length!==2&&e.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(e[0].dims.length!==4||e[1].dims.length!==4)throw new Error("currently only support 2-dimensional conv");let a=e[0].dims[1],i=e[1].dims[1]*t.group;if(a!==i)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");if(e.length===3&&(e[2].dims.length!==1||e[1].dims[0]!==e[2].dims[0]))throw new Error("invalid bias");let u=e[0].dims.length-2;if(t.dilations.length!==u)throw new Error(`dilations should be ${u}D`);if(t.strides.length!==u)throw new Error(`strides should be ${u}D`);if(t.pads.length!==u*2)throw new Error(`pads should be ${u*2}D`);if(t.kernelShape.length!==0&&t.kernelShape.length!==e[1].dims.length-2)throw new Error("invalid kernel shape");if(e[0].type!=="float32"||e[1].type!=="float32")throw new Error("Conv input(X,W) should be float tensor");if(e.length===3&&e[2].type!=="float32")throw new Error("Conv input(bias) should be float tensor")}}),Om,Im,Sm,uf,Am,Pm,Em,Dm,Lm,Cm,lf,Fm,ff=L(()=>{Ue(),we(),ae(),xr(),Om=(e,t,a,i,u,n)=>(e-1)*t+a+(i-1)*u+1-n,Im=(e,t,a,i,u)=>{let n=Math.floor(e/2);t==="SAME_UPPER"?(a[i]=n,a[u]=e-n):t==="SAME_LOWER"&&(a[i]=e-n,a[u]=n)},Sm=(e,t,a,i,u,n,o,c)=>{let p=e.length-2,r=c.length===0;for(let l=0;l<p;++l){let s=r?e[l+2]*n[l]:c[l],h=Om(e[l+2],n[l],u[l],t[l],a[l],s);Im(h,i,u,l,l+p),r&&c.push(n[l]*(e[l+2]-1)+o[l]+(t[l]-1)*a[l]+1-u[l]-u[l+p])}},uf=(e,t,a)=>(Fm(t,a),Am(e,t,a)),Am=(e,t,a)=>{let i=Cm(a,t);return[Lm(e,t,i)]},Pm=(e,t)=>({name:"ConvTranspose",inputNames:e?["X","W","B"]:["X","W"],inputTypes:e?[0,0,0]:[0,0],cacheHint:t}),Em=(e,t,a,i)=>{let u=t.length>2?"getB(output_channel)":"0.0",n=t[0].dims,o=t[1].dims,c=o[1],p=o[0]/i.group,r=[t[0].dims[0],t[1].dims[1]*i.group,...i.outputShape],l=H(e.session.backend.glContext.version),{activationFunction:s,applyActivation:h}=Rt(i),d=`
  const ivec2 strides = ivec2(${i.strides[0]}, ${i.strides[1]});
  const ivec2 pads = ivec2(${i.pads[0]}, ${i.pads[1]});
  ${s}
  void main() {
    ivec4 coords = getOutputCoords();
    int batch = coords.x;
    int output_channel = coords.y;

    ivec2 loc = coords.zw + pads;

    int group_id = output_channel / ${c};
    int wOutChannel = output_channel - group_id * ${c};

    float value = ${u};
    for (int inChannelOffset = 0; inChannelOffset < ${p}; inChannelOffset++) {
      int input_channel = group_id * ${p} + inChannelOffset;
      for (int wWOff = 0; wWOff < ${o[2]}; wWOff++) {
        for (int wHOff = 0; wHOff < ${o[3]}; wHOff++) {
          ivec2 wOff = ivec2(wWOff * ${i.dilations[0]}, wHOff * ${i.dilations[1]});
          ivec2 wLoc = loc - wOff;
          ivec2 wLocIn = wLoc / strides;
          if (
            wLocIn * strides == wLoc &&
            wLocIn.x >= 0 && wLocIn.x < ${n[2]} &&
            wLocIn.y >= 0 && wLocIn.y < ${n[3]}
          ) {
            float xVal = getX(batch, input_channel, wLocIn.y, wLocIn.x);
            float wVal = getW(input_channel, wOutChannel, wHOff, wWOff);
            value += xVal * wVal;
          }
        }
      }
    }
    ${h}
    ${l.output} = vec4(value, .0, .0, .0);
  }
`;return{...a,output:{dims:r,type:t[0].type,textureType:0},shaderSource:d,hasMain:!0}},Dm=(e,t,a)=>{let i=Pm(t.length>2,a.cacheKey);return{...i,get:()=>Em(e,t,i,a)}},Lm=(e,t,a)=>e.run(Dm(e,t,a),t),Cm=(e,t)=>{let a=e.kernelShape.slice();if(e.kernelShape.length===0)for(let c=2;c<t[1].dims.length;++c)a.push(t[1].dims[c]);let i=e.pads.slice(),u=e.outputShape.slice(),n=t[0].dims;Sm(n,a,e.dilations,e.autoPad,i,e.strides,e.outputPadding,u);let o=Object.assign({},e);return Object.assign(o,{kernelShape:a,pads:i,outputShape:u,cacheKey:e.cacheKey}),o},lf=e=>{let t=e.attributes,a=Nr(t),i=t.getString("auto_pad","NOTSET"),u=t.getInts("dilations",[1,1]),n=t.getInt("group",1),o=t.getInts("kernel_shape",[]),c=t.getInts("output_padding",[0,0]),p=t.getInts("output_shape",[]),r=t.getInts("pads",[0,0,0,0]),l=t.getInts("strides",[1,1]);return Q({autoPad:i,dilations:u,group:n,kernelShape:o,outputPadding:c,outputShape:p,pads:r,strides:l,...a})},Fm=(e,t)=>{if(!e||e.length!==2&&e.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(e[0].dims.length!==4||e[1].dims.length!==4)throw new Error("currently only support 2-dimensional conv");let a=e[0].dims[1],i=e[1].dims[0];if(a!==i)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");let u=e[1].dims[1]*t.group;if(e.length===3&&(e[2].dims.length!==1||e[2].dims[0]!==u))throw new Error("invalid bias");let n=e[0].dims.length-2;if(t.dilations.length!==n)throw new Error(`dilations should be ${n}D`);if(t.strides.length!==n)throw new Error(`strides should be ${n}D`);if(t.pads.length!==n*2)throw new Error(`pads should be ${n*2}D`);if(t.outputPadding.length!==n)throw new Error(`output_padding should be ${n}D`);if(t.kernelShape.length!==0&&t.kernelShape.length!==e[1].dims.length-2)throw new Error("invalid kernel shape");if(t.outputShape.length!==0&&t.outputShape.length!==e[0].dims.length-2)throw new Error("invalid output shape");if(e[0].type!=="float32"||e[1].type!=="float32")throw new Error("ConvTranspose input(X,W) should be float tensor");if(e.length===3&&e[2].type!=="float32")throw new Error("ConvTranspose input(bias) should be float tensor")}}),cf,wr,pf,$m,df,km,Bm,Nm,oo=L(()=>{Ue(),fe(),ae(),cf={name:"Transpose",inputNames:["A"],inputTypes:[0]},wr=(e,t,a)=>(Nm(t),[e.run({...cf,cacheHint:a.cacheKey,get:()=>$m(e,t[0],a.perm)},t)]),pf=e=>Q({perm:e.attributes.getInts("perm",[])}),$m=(e,t,a)=>{let i=t.dims;a=df(i,a);let u=km(i,a),n=i.length,o=`
      ${Bm("perm",a,n)}
      float process(int indices[${n}]) {
        int a[${n}];
        perm(a, indices);
        return _A(a);
      }`;return{...cf,output:{dims:u,type:t.type,textureType:0},shaderSource:o}},df=(e,t)=>(t&&t.length!==e.length&&(t=[...e.keys()].reverse()),t),km=(e,t)=>(t=df(e,t),U.sortBasedOnPerm(e,t)),Bm=(e,t,a)=>{let i=[];i.push(`void ${e}(out int a[${a}], int src[${a}]) {`);for(let u=0;u<a;++u)i.push(`	a[${t[u]}]=src[${u}];`);return i.push("	}"),i.join(`
`)},Nm=e=>{if(!e||e.length!==1)throw new Error("Transpose requires 1 input.");if(e[0].type!=="float32"&&e[0].type!=="float64")throw new Error("input should be float tensor")}}),hf,mf,Rm,bf=L(()=>{oo(),hf=(e,t,a)=>{Rm(t);let i=a.blocksize,u=i*i,n=a.mode==="DCR"?[0,3,4,1,5,2]:[0,1,4,2,5,3],o=a.mode==="DCR"?[t[0].dims[0],i,i,t[0].dims[1]/u,t[0].dims[2],t[0].dims[3]]:[t[0].dims[0],t[0].dims[1]/u,i,i,t[0].dims[2],t[0].dims[3]],c=e.reshapeUnpacked(t[0],o),p={perm:n,cacheKey:`${n}`},[r]=wr(e,[c],p),l=[t[0].dims[0],t[0].dims[1]/u,t[0].dims[2]*i,t[0].dims[3]*i];return[e.reshapeUnpacked(r,l)]},mf=e=>{let t=e.attributes.getInt("blocksize");if(t<1)throw new Error(`blocksize must be >= 1, but got : ${t} for DepthToSpace`);let a=e.attributes.getString("mode","DCR");if(a!=="DCR"&&a!=="CRD")throw new Error(`unrecognized mode: ${a} for DepthToSpace`);return{mode:a,blocksize:t}},Rm=e=>{if(e.length!==1)throw new Error(`DepthToSpace expect 1 inputs, but got ${e.length}`);if(e[0].type==="string"||e[0].dims.length!==4)throw new TypeError("DepthToSpace input should be a 4-D numeric tensor")}}),gf,yf,Mm,Tf=L(()=>{fe(),gf=(e,t,a)=>{Mm(t,a);let i=U.flattenShape(t[0].dims,a);return[e.reshapeUnpacked(t[0],i)]},yf=e=>e.attributes.getInt("axis",1),Mm=(e,t)=>{if(!e||e.length!==1)throw new Error("Flatten requires 1 input.");let a=e[0].dims.length;if(a===0)throw new Error("scalar tensor is not supported.");if(t<-a||t>a)throw new Error("Invalid axis");if(e[0].type==="string")throw new Error("string tensor is not supported.")}}),Qt,pn=L(()=>{Qt=["float32","float64","int32","int16","int8","uint16","uint32","uint8"]}),xf,wf,Gm,Um,zm,Vm,vf=L(()=>{Ue(),pn(),fe(),ae(),xf=(e,t,a)=>(Vm(t,a.axis),[e.run(zm(e,t,a),t)]),wf=e=>Q({axis:e.attributes.getInt("axis",0)}),Gm={name:"Gather",inputNames:["A","B"],inputTypes:[0,0]},Um=(e,t,a,i)=>{let u=a[0].dims.slice(),n=a[1].dims.slice(),o=new Array(u.length+n.length-1);i=U.normalizeAxis(i,u.length);let c=[];for(let h=0;h<o.length;h++)h<i?(o[h]=u[h],c.push(`inputIdx[${h}] = outputIdx[${h}];`)):h<i+n.length?(o[h]=n[h-i],c.push(`indexDataIdx[${h-i}] = outputIdx[${h}];`)):(o[h]=u[h-n.length+1],c.push(`inputIdx[${h-n.length+1}] = outputIdx[${h}];`));let p=o.length||1,r=u.length,l=n.length||1,s=`
      float process(int outputIdx[${p}]) {
        int inputIdx[${r}];
        int indexDataIdx[${l}];
        indexDataIdx[0] = 0;
        ${c.join(`
        `)}
        int idx = int(_B(indexDataIdx));
        inputIdx[${i}] = idx < 0 ? idx + ${u[i]} : idx;
        return _A(inputIdx);
      }`;return{...t,output:{dims:o,type:a[0].type,textureType:0},shaderSource:s}},zm=(e,t,a)=>{let i={...Gm,cacheHint:a.cacheKey};return{...i,get:()=>Um(e,i,t,a.axis)}},Vm=(e,t)=>{if(!e||e.length!==2)throw new Error("Gather requires 2 inputs.");let a=e[0].dims.length;if(a<1)throw new Error("Invalid input shape.");if(t<-a||t>a-1)throw new Error("Invalid axis.");if(Qt.indexOf(e[0].type)===-1)throw new Error("Invaid input type.");if(e[1].type!=="int32"&&e[1].type!=="int16")throw new Error("Invaid input type.")}}),Fi,_f,Of,If,Wm,Hm,qm,Sf=L(()=>{Ue(),fe(),ae(),Fi=(e,t,a)=>(qm(t,a),[e.run(Wm(t,a),t)]),_f=(e,t)=>{let a=e.attributes.getInt("transA",0)!==0,i=e.attributes.getInt("transB",0)!==0,u=e.attributes.getFloat("alpha",1),n=e.attributes.getFloat("beta",1);return Q({transA:a,transB:i,alpha:u,beta:n,isOptionalC:t})},Of=e=>_f(e,!1),If=e=>_f(e,!0),Wm=(e,t)=>{let a={name:"Gemm",inputNames:e.length===3?["A","B","C"]:["A","B"],inputTypes:e.length===3?[0,0,0]:[0,0],key:t.cacheKey};return{...a,get:()=>Hm(a,e,t)}},Hm=(e,t,a)=>{let i=t[0].dims.slice(),u=t[1].dims.slice(),[n,o]=jn.getShapeOfGemmResult(i,a.transA,u,a.transB,t.length===3?t[2].dims:void 0),c=[n,o];if(!c)throw new Error("Can't use gemm on the given tensors");let p=i[i.length-1],r="";a.transA&&(p=i[0]),a.transA&&a.transB?r="value += _A_T(a) * _B_T(b);":a.transA&&!a.transB?r="value += _A_T(a) * _B(b);":!a.transA&&a.transB?r="value += _A(a) * _B_T(b);":!a.transA&&!a.transB&&(r="value += _A(a) * _B(b);");let l=c.length,s=t.length===3?`int c[${t[2].dims.length}];`:"",h=t.length===3?"bcastIndices_C(indices, c);":"",d=t.length===3?"value += beta * _C(c);":"",m=`
      float process(int indices[${l}]) {
          int a[${l}];
          int b[${l}];
          ${s}

          copyVec(indices, a);
          copyVec(indices, b);
          ${h}

          float value = 0.0;
          for (int k=0; k<${p}; ++k) {
              a[${l-1}] = k;
              b[${l-2}] = k;
              ${r}
          }

          value = value * alpha;
          ${d}
          return value;
      }`;return{...e,output:{dims:c,type:t[0].type,textureType:0},variables:[{name:"alpha",type:"float",data:a.alpha},{name:"beta",type:"float",data:a.beta}],shaderSource:m}},qm=(e,t)=>{if(!e)throw new Error("Input is missing");if(t.isOptionalC&&(e.length<2||e.length>3))throw new Error("Invaid input shape.");if(!t.isOptionalC&&e.length!==3)throw new Error("Gemm requires 3 inputs");if(e.length===3&&e[2].dims.length!==1&&e[2].dims.length!==2)throw new Error("Invalid input shape of C");if(e[0].type!=="float32"&&e[0].type!=="float64"||e[1].type!=="float32"&&e[1].type!=="float64"||e.length===3&&e[2].type!=="float32"&&e[2].type!=="float64")throw new Error("Invalid input type.");if(e[0].type!==e[1].type||e.length===3&&e[0].type!==e[2].type)throw new Error("Input types are mismatched")}}),Af,Pf,jm,Ym,Xm,Km,Jm,Ef=L(()=>{Ue(),ae(),Af=(e,t,a)=>(Jm(t),[e.run(Xm(e,t,a),t)]),Pf=e=>{let t=e.attributes.getFloat("scale"),a=e.attributes.getFloats("bias");return Q({scale:t,bias:a})},jm={name:"ImageScaler",inputNames:["X"],inputTypes:[0]},Ym=(e,t,a,i)=>{let u=a[0].dims.slice(),n=u.length,o=`
      ${Km(i.bias.length)}
      float process(int indices[${n}]) {
        return _X(indices) * scale + getBias(bias, indices[1]);
      }`;return{...t,output:{dims:u,type:a[0].type,textureType:0},variables:[{name:"bias",type:"float",arrayLength:i.bias.length,data:i.bias},{name:"scale",type:"float",data:i.scale}],shaderSource:o}},Xm=(e,t,a)=>{let i={...jm,cacheHint:a.cacheKey};return{...i,get:()=>Ym(e,i,t,a)}},Km=e=>{let t=[`float getBias(float bias[${e}], int channel) {`];for(let a=0;a<e;++a)a===0?t.push(`	if (channel == ${a}) { return bias[${a}]; }`):a===e-1?t.push(`	else { return bias[${a}]; }`):t.push(`	else if (channel == ${a}) { return bias[${a}]; }`);return t.push("	}"),t.join(`
`)},Jm=e=>{if(!e||e.length!==1)throw new Error("ImageScaler requires 1 input.");if(e[0].dims.length!==4)throw new Error("Invalid input shape.");if(e[0].type!=="float32"&&e[0].type!=="float64")throw new Error("Invalid input type.")}}),Lf,Cf,Df,Zm,Qm,eb,tb,rb,nb,Ff=L(()=>{we(),ae(),Lf=(e,t,a)=>{nb(t);let i=e.run(Qm(t[0]),t);return[e.run(rb(e,t[0],a,i.dims),[t[0],i,t[1],t[2]])]},Cf=e=>e.attributes.getFloat("epsilon",1e-5),Df={name:"InstanceNormalization_MeanAndVariance",inputNames:["X"],inputTypes:[0]},Zm=(e,t)=>{let a=t.dims.slice(),i=a[1],u=a[2]*a[3],n=[a[0],i],o=`
      vec4 process(int[2] indices) {
        vec4 v = vec4(0.0);
        int a[4];
        a[0] = indices[0];
        a[1] = indices[1];
        float temp = 0.0;
        for(int a2=0; a2<${a[2]}; a2++) {
          a[2] = a2;
          for(int a3=0; a3<${a[3]}; a3++) {
            a[3] = a3;
            float x = _X(a);
            temp += x;
          }
        }
        float mean = temp / float(${u});
        temp = 0.0;
        for(int a2=0; a2<${a[2]}; a2++) {
          a[2] = a2;
          for(int a3=0; a3<${a[3]}; a3++) {
            a[3] = a3;
            float x = _X(a);
            temp += (x - mean) * (x - mean);
          }
        }
        v.r = mean;
        v.g = temp / float(${u});

        return v;
      }`;return{...e,output:{dims:n,type:t.type,textureType:4},shaderSource:o}},Qm=e=>({...Df,get:()=>Zm(Df,e)}),eb={name:"InstanceNormalization_ComputeOutput",inputNames:["X","MeanAndVariance","Scale","B"],inputTypes:[0,4,0,0]},tb=(e,t,a,i,u)=>{let n=H(e.session.backend.glContext.version),[o,c]=e.calculateTextureWidthAndHeight(u,4),[p,r]=[o/4,c],l=`
      vec4 get_MeanAndVariance(int[2] mv) {
        int offset = indicesToOffset_MeanAndVariance(mv);
        vec2 coords = offsetToCoords(offset, ${p}, ${r});
        return ${n.texture2D}(MeanAndVariance, coords);
      }

      float process(int[4] indices) {
        int mv[2];
        mv[0] = indices[0];
        mv[1] = indices[1];
        vec4 mean_and_variance = get_MeanAndVariance(mv);
        float mean = mean_and_variance.r;
        float variance = mean_and_variance.g;

        int sb[1];
        sb[0] = indices[1];
        float scale = _Scale(sb);
        float b = _B(sb);

        return scale * (_X(indices) - mean) / sqrt(variance + epsilon) + b;
      }`;return{...t,output:{dims:a.dims,type:a.type,textureType:0},variables:[{name:"epsilon",type:"float",data:i}],shaderSource:l}},rb=(e,t,a,i)=>{let u={...eb,cacheHint:`${a}`};return{...u,get:()=>tb(e,u,t,a,i)}},nb=e=>{if(!e||e.length!==3)throw new Error("InstanceNormalization requires 3 inputs.");let t=e[0],a=e[1],i=e[2];if(t.dims.length<3||a.dims.length!==1||i.dims.length!==1)throw new Error("Invalid input shape.");if(a.dims[0]!==t.dims[1]||i.dims[0]!==t.dims[1])throw new Error("Input shapes are mismatched.");if(t.type!=="float32"&&t.type!=="float64"||a.type!=="float32"&&a.type!=="float64"||i.type!=="float32"&&i.type!=="float64")throw new Error("Invalid input type.");if(e[0].dims.length!==4)throw new Error("Only support 4-D input shape.")}});function ob(e,t){let a=e[0].dims[1],i=e[0].dims.length,u=-Math.floor((t.size-1)/2),n=Math.ceil((t.size-1)/2),o=`float(${t.alpha}) / float(${t.size})`,c=`float(${t.bias})`,p=`float(${t.beta})`,r=`
    float process(int indices[${i}]) {
        int c = indices[1];
        float x = _X(indices);
        float square_sum = 0.0;

        for (int i = ${u}; i <= ${n}; i++) {
          int idx = c + i;
          if (c >= 0 && c < ${a}) {
            indices[1] = idx;
            float j = _X(indices);
            square_sum += j * j;
          }
        }
        return x / pow(${c} + ${o} * square_sum, ${p});
    }`;return{...Bf,cacheHint:t.cacheKey,output:{dims:e[0].dims,type:e[0].type,textureType:0},shaderSource:r}}function ib(e,t){return{...Bf,cacheHint:t.cacheKey,get:()=>ob(e,t)}}var $f,kf,Bf,ab,Nf=L(()=>{Ue(),ae(),$f=(e,t,a)=>(ab(t),[e.run(ib(t,a),t)]),kf=e=>{let t=e.attributes.getFloat("alpha",1e-4),a=e.attributes.getFloat("beta",.75),i=e.attributes.getFloat("bias",1),u=e.attributes.getInt("size");return Q({alpha:t,beta:a,bias:i,size:u})},Bf={name:"LRN",inputNames:["X"],inputTypes:[0]},ab=e=>{if(!e||e.length!==1)throw new Error("LRN requires 1 input.");if(e[0].dims.length!==4)throw new Error('currently only support LRN for input with "NCHW" format');if(e[0].type!=="float32")throw new Error("input should be float type")}}),sb,$i,Rf,Mf,Gf,ub,lb,fb,cb,pb,db,hb,mb,Uf=L(()=>{Ue(),fe(),we(),ae(),sb={name:"Pad",inputNames:["A"],inputTypes:[0]},$i=(e,t,a)=>(fb(t),[e.run({...sb,cacheHint:a.cacheKey,get:()=>lb(e,t[0],a)},t)]),Rf=e=>{let t=e.attributes.getString("mode","constant"),a=e.attributes.getFloat("value",0),i=e.attributes.getInts("pads");return Q({mode:t,value:a,pads:i})},Mf=(e,t,a)=>{cb(t);let i=ub(e,t,a);return $i(e,[t[0]],i)},Gf=e=>e.attributes.getString("mode","constant"),ub=(e,t,a)=>{if(!e.session.isInitializer(t[1].dataId)||t.length>=3&&!e.session.isInitializer(t[2].dataId))throw new Error("dynamic pad attributes are not allowed");let i=Array.from(t[1].integerData),u=t.length>=3?t[2].floatData[0]:0;return Q({mode:a,pads:i,value:u})},lb=(e,t,a)=>{let i=U.padShape(t.dims.slice(),a.pads),u=i.length,n=`
      ${pb(e,t,a)}
      float process(int[${u}] indices) {
          return padA(indices);
      }`;return{name:"Pad",inputNames:["A"],inputTypes:[0],output:{dims:i,type:t.type,textureType:0},shaderSource:n}},fb=e=>{if(!e||e.length!==1)throw new Error("Pad requires 1 input");if(e[0].type!=="float32"&&e[0].type!=="float64")throw new Error("Invalid input type.")},cb=e=>{if(!e||e.length!==2&&e.length!==3)throw new Error("Pad requires 2 or 3 inputs");if(e[1].type!=="int32")throw new Error("Invalid input type.");if(e.length>=3&&e[2].type==="string")throw new Error("Invalid input type.")},pb=(e,t,a)=>{let i=H(e.session.backend.glContext.version),[u,n]=e.calculateTextureWidthAndHeight(t.dims,0),o=U.computeStrides(t.dims);switch(a.mode){case"constant":return db(i,t.dims,o,u,n,a.pads,a.value);case"reflect":return hb(i,t.dims,o,u,n,a.pads);case"edge":return mb(i,t.dims,o,u,n,a.pads);default:throw new Error("Invalid mode")}},db=(e,t,a,i,u,n,o)=>{let c=t.length,p="";for(let r=c-1;r>=0;--r)p+=`
        k = m[${r}] - ${n[r]};
        if (k < 0)  return constant;
        if (k >= ${t[r]}) return constant;
        offset += k * ${a[r]};
        `;return`
      float padA(int m[${c}]) {
        const float constant = float(${o});
        int offset = 0;
        int k = 0;
        ${p}
        vec2 coords = offsetToCoords(offset, ${i}, ${u});
        float value = getColorAsFloat(${e.texture2D}(A, coords));
        return value;
      }
      `},hb=(e,t,a,i,u,n)=>{let o=t.length,c="";for(let p=o-1;p>=0;--p)c+=`
        k = m[${p}] - ${n[p]};
        if (k < 0) { k = -k; }
        {
          const int _2n_1 = ${2*(t[p]-1)};
          k = int( mod( float(k), float(_2n_1) ) ) ;
          if(k >= ${t[p]}) { k = _2n_1 - k; }
        }
        offset += k * ${a[p]};
        `;return`
      float padA(int m[${o}]) {
        int offset = 0;
        int k = 0;
        ${c}
        vec2 coords = offsetToCoords(offset, ${i}, ${u});
        float value = getColorAsFloat(${e.texture2D}(A, coords));
        return value;
      }
      `},mb=(e,t,a,i,u,n)=>{let o=t.length,c="";for(let p=o-1;p>=0;--p)c+=`
        k = m[${p}] - ${n[p]};
        if (k < 0)  k = 0;
        if (k >= ${t[p]}) k = ${t[p]-1};
        offset += k * ${a[p]};
      `;return`
      float padA(int m[${o}]) {
        int offset = 0;
        int k = 0;
        ${c}
        vec2 coords = offsetToCoords(offset, ${i}, ${u});
        float value = getColorAsFloat(${e.texture2D}(A, coords));
        return value;
      }
      `}}),Vf,Wf,Hf,qf,jf,Yf,Xf,Kf,Jf,bb,zf,Zf,ao,Qf,io,gb,ec=L(()=>{Ue(),fe(),ae(),Vf=(e,t,a)=>{ao(t);let i={name:"AveragePool",inputNames:["X"],inputTypes:[0],cacheHint:a.cacheKey};return[e.run({...i,get:()=>Hf(t,i,!1,a)},t)]},Wf=e=>{let t=e.attributes.getString("auto_pad","NOTSET"),a=e.attributes.getInt("ceil_mode",0),i=e.attributes.getInt("count_include_pad",0)!==0,u=e.attributes.getInts("kernel_shape"),n=e.attributes.getInts("strides",[]),o=e.attributes.getInts("pads",[]);if(a!==0)throw new Error("using ceil() in shape computation is not yet supported for AveragePool");return Q({autoPad:t,ceilMode:a,countIncludePad:i,kernelShape:u,strides:n,pads:o})},Hf=(e,t,a,i)=>{let[u,n]=Jf(e,i,a),o=U.size(u.kernelShape),c="value += _X(x);",p="";u.countIncludePad?p+=`value /= float(${o});`:p+=`value /= float(${o} - pad);`;let r=`
        ${Qf(e[0].dims,u,c,p,"0.0")}
      `;return{...t,output:{dims:n,type:e[0].type,textureType:0},shaderSource:r}},qf=(e,t,a)=>{ao(t);let i={name:"GlobalAveragePool",inputNames:["X"],inputTypes:[0],cacheHint:`${a.countIncludePad}`};return[e.run({...i,get:()=>Hf(t,i,!0,a)},t)]},jf=e=>{let t=e.attributes.getInt("count_include_pad",0)!==0;return Q({autoPad:"",ceilMode:0,countIncludePad:t,kernelShape:[],strides:[],pads:[]})},Yf=(e,t,a)=>{ao(t);let i={name:"MaxPool",inputNames:["X"],inputTypes:[0],cacheHint:a.cacheKey};return[e.run({...i,get:()=>Kf(t,i,!1,a)},t)]},Xf=e=>{let t=e.attributes.getString("auto_pad","NOTSET"),a=e.attributes.getInt("ceil_mode",0),i=e.attributes.getInts("kernel_shape"),u=e.attributes.getInts("strides",[]),n=e.attributes.getInts("pads",[]),o=e.attributes.getInt("storage_order",0),c=e.attributes.getInts("dilations",[]);if(o!==0)throw new Error("column major storage order is not yet supported for MaxPool");if(a!==0)throw new Error("using ceil() in shape computation is not yet supported for MaxPool");return Q({autoPad:t,ceilMode:a,countIncludePad:!1,kernelShape:i,strides:u,pads:n,storageOrder:o,dilations:c})},Kf=(e,t,a,i)=>{let[u,n]=Jf(e,i,a),o=`
      value = max(_X(x), value);
    `,c="",p=`
      ${Qf(e[0].dims,u,o,c,"-1e5")}
    `;return{...t,output:{dims:n,type:e[0].type,textureType:0},shaderSource:p}},Jf=(e,t,a)=>{let i=e[0].dims.slice(),u=Object.hasOwnProperty.call(t,"dilations"),n=t.kernelShape.slice(),o=t.strides.slice(),c=u?t.dilations.slice():[],p=t.pads.slice();mr.adjustPoolAttributes(a,i,n,o,c,p);let r=mr.computePoolOutputShape(a,i,o,c,n,p,t.autoPad),l=Object.assign({},t);return u?Object.assign(l,{kernelShape:n,strides:o,pads:p,dilations:c,cacheKey:t.cacheKey}):Object.assign(l,{kernelShape:n,strides:o,pads:p,cacheKey:t.cacheKey}),[l,r]},bb={autoPad:"",ceilMode:0,countIncludePad:!1,kernelShape:[],strides:[],pads:[],storageOrder:0,dilations:[],cacheKey:""},zf={name:"GlobalMaxPool",inputNames:["X"],inputTypes:[0]},Zf=(e,t)=>(ao(t),[e.run({...zf,get:()=>Kf(t,zf,!0,bb)},t)]),ao=e=>{if(!e||e.length!==1)throw new Error("Pool ops requires 1 input.");if(e[0].type!=="float32"&&e[0].type!=="float64")throw new Error("Invalid input type.")},Qf=(e,t,a,i,u)=>{let n=e.length;if(t.kernelShape.length<=2){let o=t.kernelShape[t.kernelShape.length-1],c=t.strides[t.strides.length-1],p=t.pads[t.pads.length/2-1],r=t.pads[t.pads.length-1],l=e[n-1],s="",h="",d="";if(p+r!==0?s=`
          for (int i = 0; i < ${o}; i++) {
            x[${n} - 1] = indices[${n} - 1] * ${c} - ${p} + i;
            if (x[${n} - 1] < 0 || x[${n} - 1] >= ${l}) {
              pad++;
              continue;
            }
            ${a}
          }`:s=`
          for (int i = 0; i < ${o}; i++) {
            x[${n} - 1] = indices[${n} - 1] * ${c} - ${p} + i;
            ${a}
          }`,t.kernelShape.length===2){let m=t.kernelShape[t.kernelShape.length-2],b=t.strides[t.strides.length-2],v=t.pads[t.pads.length/2-2],O=t.pads[t.pads.length-2],T=e[n-2];v+O!==0?h=`
            for (int j = 0; j < ${m}; j++) {
              x[${n} - 2] = indices[${n} - 2] * ${b} - ${v} + j;
              if (x[${n} - 2] < 0 || x[${n} - 2] >= ${T}) {
                pad+= ${o};
                continue;
              }
          `:h=`
            for (int j = 0; j < ${m}; j++) {
              x[${n} - 2] = indices[${n} - 2] * ${b} - ${v} + j;
            `,d=`
          }
        `}return`
        float process(int indices[${n}]) {
          int x[${n}];
          copyVec(indices, x);

          float value = ${u};
          int pad = 0;
          ${h}
          ${s}
          ${d}
          ${i}
          return value;
        }
      `}else{let o=U.size(t.kernelShape),c=U.computeStrides(t.kernelShape),p=c.length,r=t.pads.length,l=gb(p),s=io(e,"inputDims"),h=io(t.pads,"pads"),d=io(c,"kernelStrides"),m=io(t.strides,"strides"),b=t.pads.reduce((O,T)=>O+T),v="";return b?v=`
            if (x[j] >= inputDims[j] || x[j] < 0) {
              pad++;
              isPad = true;
              break;
            }
          }
          if (!isPad) {
            ${a}
          }`:v=`
          }
          ${a}
        `,`
        ${l}
        float process(int indices[${n}]) {
          int x[${n}];
          copyVec(indices, x);
          int offset[${p}];
          int pads[${r}];
          int inputDims[${n}];
          int kernelStrides[${p}];
          int strides[${p}];
          ${h}
          ${s}
          ${m}
          ${d}

          float value = ${u};
          int pad = 0;
          bool isPad = false;
          for (int i = 0; i < ${o}; i++) {
            offsetToIndices(i, kernelStrides, offset);
            isPad = false;
            for (int j = ${n} - ${p}; j < ${n}; j++) {
              x[j] = indices[j] * strides[j - ${n} + ${p}]
                + offset[j - ${n} + ${p}] - pads[j - 2];
              ${v}
          }
          ${i}

          return value;
        }
      `}},io=(e,t)=>{let a="";for(let i=0;i<e.length;i++)a+=`
      ${t}[${i}] = ${e[i]};
    `;return a},gb=e=>`
  void offsetToIndices(int offset, int[${e}] strides, out int[${e}] indices) {
    if (${e} == 0) {
      return;
    }
    for (int i = 0; i < ${e} - 1; ++i) {
      indices[i] = offset / strides[i];
      offset -= indices[i] * strides[i];
    }
    indices[${e} - 1] = offset;
  }`}),vr,er,yb,Tb,tc,rc,nc,oc,ic,ac,sc,uc=L(()=>{Ue(),pn(),fe(),ae(),vr=(e,t,a,i,u)=>{Tb(t);let n={name:i,inputNames:["A"],inputTypes:[0]};return[e.run({...n,cacheHint:a.cacheKey,get:()=>yb(e,t,a,i,u,n)},t)]},er=e=>{let t=e.attributes.getInts("axes",[]),a=e.attributes.getInt("keepdims",1)===1;return Q({axes:t,keepDims:a})},yb=(e,t,a,i,u,n)=>{let o=[],c=t[0].dims.length||1,p=[],r=U.normalizeAxes(a.axes,t[0].dims.length),l=u(t,r),s=l[1];for(let d=0;d<t[0].dims.length;d++)r.indexOf(d)>=0||r.length===0?(a.keepDims&&o.push(1),s=`
          for(int j${d} = 0; j${d} < ${t[0].dims[d]}; j${d}++) {
            inputIdx[${d}] = j${d};
            ${s}
          }`):(p.push(`inputIdx[${d}] = outputIdx[${o.length}];`),o.push(t[0].dims[d]));let h=`
      float process(int outputIdx[${o.length||1}]) {
        float value;                 // final result
        int inputIdx[${c}];      // addressing input data
        ${p.join(`
`)}
        ${l[0]}       // init ops for reduce max/min
        ${s}
        ${l[2]}       // final computation for reduce mean
        return value;
      }`;return{...n,output:{dims:o,type:t[0].type,textureType:0},shaderSource:h}},Tb=e=>{if(!e||e.length!==1)throw new Error("Reduce op requires 1 input.");if(Qt.indexOf(e[0].type)===-1)throw new Error("Invalid input type.")},tc=(e,t,a)=>vr(e,t,a,"ReduceSum",()=>["value = 0.0;","value += _A(inputIdx);",""]),rc=(e,t,a)=>vr(e,t,a,"ReduceMean",(i,u)=>{let n=1;for(let o=0;o<i[0].dims.length;o++)(u.indexOf(o)>=0||u.length===0)&&(n*=i[0].dims[o]);return["value = 0.0;","value += _A(inputIdx);",`value /= ${n}.;`]}),nc=(e,t,a)=>vr(e,t,a,"ReduceMax",(i,u)=>{let n=[];for(let o=0;o<i[0].dims.length;o++)(u.indexOf(o)>=0||u.length===0)&&n.push(`inputIdx[${o}] = 0;`);return[`${n.join(`
`)}
value = _A(inputIdx);`,"value = max(value, _A(inputIdx));",""]}),oc=(e,t,a)=>vr(e,t,a,"ReduceMin",(i,u)=>{let n=[];for(let o=0;o<i[0].dims.length;o++)(u.indexOf(o)>=0||u.length===0)&&n.push(`inputIdx[${o}] = 0;`);return[`${n.join(`
`)}
value = _A(inputIdx);`,"value = min(value, _A(inputIdx));",""]}),ic=(e,t,a)=>vr(e,t,a,"ReduceProd",()=>["value = 1.0;","value *= _A(inputIdx);",""]),ac=(e,t,a)=>vr(e,t,a,"ReduceLogSum",()=>["value = 0.0;","value += _A(inputIdx);","value = log(value);"]),sc=(e,t,a)=>vr(e,t,a,"ReduceLogSumSquare",()=>["float t; value = 0.0;","t = _A(inputIdx); value += t * t;",""])}),lc,fc=L(()=>{fe(),lc=(e,t)=>{let a=U.calculateReshapedDims(t[0].dims,t[1].integerData);return e.session.pack?[e.reshapePacked(t[0],a)]:[e.reshapeUnpacked(t[0],a)]}}),cc,ki,pc,dc,dn,xb,Bi,so,Ni=L(()=>{Ue(),we(),ae(),cc={name:"Upsample",inputNames:["X"],inputTypes:[0]},ki=(e,t,a)=>(Bi(t,a),[e.run({...cc,cacheHint:a.cacheKey,get:()=>xb(e,t,a)},t)]),pc=e=>dn(e,7),dc=e=>dn(e,9),dn=(e,t)=>{let a=t>=10,i=e.attributes.getString("mode","nearest");if(i!=="nearest"&&i!=="linear"&&(t<11||i!=="cubic"))throw new Error(`unrecognized mode: ${i}`);let u=[];t<9&&(u=e.attributes.getFloats("scales"),so(u,i,a));let n=e.attributes.getFloat("extrapolation_value",0),o=t>10?e.attributes.getString("coordinate_transformation_mode","half_pixel"):"asymmetric";if(["asymmetric","pytorch_half_pixel","tf_half_pixel_for_nn","align_corners","tf_crop_and_resize","half_pixel"].indexOf(o)===-1)throw new Error(`coordinate_transform_mode '${o}' is not supported`);let c=o==="tf_crop_and_resize",p=c,r=i==="nearest"&&t>=11?e.attributes.getString("nearest_mode","round_prefer_floor"):"";if(["round_prefer_floor","round_prefer_ceil","floor","ceil",""].indexOf(r)===-1)throw new Error(`nearest_mode '${r}' is not supported`);let l=e.attributes.getFloat("cubic_coeff_a",-.75),s=e.attributes.getInt("exclude_outside",0)!==0;if(s&&i!=="cubic")throw new Error("exclude_outside can be set to 1 only when mode is CUBIC.");let h=t<11?!0:i==="nearest"&&o==="asymmetric"&&r==="floor",d=0,m=0,b=0;return t>10?e.inputs.length>2?(d=1,m=2,b=3):(m=1,b=2):t===9&&(m=1),Q({opset:t,isResize:a,mode:i,scales:u,extrapolationValue:n,coordinateTransformMode:o,useExtrapolation:p,needRoiInput:c,nearestMode:r,cubicCoefficientA:l,excludeOutside:s,useNearest2xOptimization:h,roiInputIdx:d,scalesInputIdx:m,sizesInputIdx:b})},xb=(e,t,a)=>{let i=H(e.session.backend.glContext.version),[u,n]=e.calculateTextureWidthAndHeight(t[0].dims,0),o=t[0].dims.map((b,v)=>Math.floor(b*a.scales[v])),[c,p]=e.calculateTextureWidthAndHeight(o,0),r=o.length,l=new Array(r),s=new Array(r),h=`
      int output_pitches[${r}];
      int input_pitches[${r}];
      `;for(let b=r-1;b>=0;b--)l[b]=b===r-1?1:l[b+1]*o[b+1],s[b]=b===r-1?1:s[b+1]*t[0].dims[b+1],h+=`
        output_pitches[${b}] = ${l[b]};
        input_pitches[${b}] = ${s[b]};
        `;let d=`
      float getInputFloat(int index) {
        vec2 coords = offsetToCoords(index, ${u}, ${n});
        float value = getColorAsFloat(${i.texture2D}(X, coords));
        return value;
      }
      `,m=a.mode==="nearest"?`
    ${d}
    float process(int indices[${r}]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${c}, ${p});

      ${h}

      int d, m;
      for (int dim = 0; dim < ${r}; ++dim) {
        d = output_index / output_pitches[dim];
        m = output_index - d * output_pitches[dim];
        output_index = m;

        if (scales[dim] != 1 && d > 0) {
          int d2 = d / scales[dim];
          m = d - d2 * scales[dim];
          d = d2;
        }
        input_index += input_pitches[dim] * d;
      }

      return getInputFloat(input_index);
    }`:r===4?`
    ${d}
    float process(int indices[4]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${c}, ${p});

      ${h}

      int m;
      int index_of_dim0, index_of_dim1, index_of_dim2, index_of_dim3;
      index_of_dim0 = output_index / output_pitches[0];
      m = output_index - index_of_dim0 * output_pitches[0];
      index_of_dim1 = m / output_pitches[1];
      m = m - index_of_dim1 * output_pitches[1];
      index_of_dim2 = m / output_pitches[2];
      m = m - index_of_dim2 * output_pitches[2];
      index_of_dim3 = m;

      int index_of_input_dim2, index_of_input_dim3, x_offset, y_offset;
      index_of_input_dim2 = index_of_dim2 / scales[2];
      y_offset = index_of_dim2 - index_of_input_dim2 * scales[2];
      index_of_input_dim3 = index_of_dim3 / scales[3];
      x_offset = index_of_dim3 - index_of_input_dim3 * scales[3];

      input_index = index_of_dim0 * input_pitches[0] +
            index_of_dim1 * input_pitches[1] +
            index_of_input_dim2 * input_pitches[2] +
            index_of_input_dim3;

      float x00 = getInputFloat(input_index);
      float x10, x01, x11;

      bool end_of_dim2 = false;
      if (index_of_input_dim2 == (${t[0].dims[2]} - 1)) {
        // It's the end in dimension 2
        x01 = x00;
        end_of_dim2 = true;
      } else {
        x01 = getInputFloat(input_index + input_pitches[2]);
      }

      if (index_of_input_dim3 == (input_pitches[2] - 1)) {
        // It's the end in dimension 3
        x10 = x00;
        x11 = x01;
      }
      else {
        x10 = getInputFloat(input_index + 1);
        x11 = end_of_dim2 ? x10 : getInputFloat(input_index + input_pitches[2] + 1);
      }

      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[2]);
      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[2]);
      return y0 + float(x_offset) * (y1 - y0) / float(scales[3]);
    }`:`
    ${d}
    float process(int indices[2]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${c}, ${p});

      ${h}

      int m;
      int index_of_dim0, index_of_dim1;
      index_of_dim0 = output_index / output_pitches[0];
      m = output_index - index_of_dim0 * output_pitches[0];
      index_of_dim1 = m;

      int index_of_input_dim0, index_of_input_dim1, x_offset, y_offset;
      index_of_input_dim0 = index_of_dim0 / scales[0];
      y_offset = index_of_dim0 - index_of_input_dim0 * scales[0];
      index_of_input_dim1 = index_of_dim1 / scales[1];
      x_offset = index_of_dim1 - index_of_input_dim1 * scales[1];

      input_index = index_of_input_dim0 * input_pitches[0] + index_of_input_dim1;

      float x00 = getInputFloat(input_index);
      float x10, x01, x11;

      bool end_of_dim0 = false;
      if (index_of_input_dim0 == (${t[0].dims[0]} - 1)) {
        // It's the end in dimension 0
        x01 = x00;
        end_of_dim0 = true;
      } else {
        x01 = getInputFloat(input_index + input_pitches[0]);
      }

      if (index_of_input_dim1 == (input_pitches[0] - 1)) {
        // It's the end in dimension 1
        x10 = x00;
        x11 = x01;
      }
      else {
        x10 = getInputFloat(input_index + 1);
        x11 = end_of_dim0 ? x10 : getInputFloat(input_index + input_pitches[0] + 1);
      }

      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[0]);
      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[0]);
      return y0 + float(x_offset) * (y1 - y0) / float(scales[1]);
    }`;return{...cc,output:{dims:o,type:t[0].type,textureType:0},shaderSource:m,variables:[{name:"scales",type:"int",arrayLength:a.scales.length,data:a.scales.map(b=>Math.ceil(b))}]}},Bi=(e,t)=>{if(!e||t.opset<9&&e.length!==1||t.opset>=9&&t.opset<11&&e.length!==2||t.opset>=11&&e.length<2)throw new Error("invalid inputs.");if(t.scales.length>0&&e[0].dims.length!==t.scales.length)throw new Error("Invalid input shape.");if(e[0].type==="string")throw new Error("Invalid input tensor types.")},so=(e,t,a)=>{if(a){for(let i of e)if(i<=0)throw new Error("Scale value should be greater than 0.")}else for(let i of e)if(i<1)throw new Error("Scale value should be greater than or equal to 1.");if((t==="linear"||t==="cubic")&&e.length!==2&&(e.length!==4||e[0]!==1||e[1]!==1))throw new Error(`'Linear' mode and 'Cubic' mode only support 2-D inputs ('Bilinear', 'Bicubic')         or 4-D inputs with the corresponding outermost 2 scale values being 1         in the ${a?"Resize":"Upsample"} opeartor.`)}}),Ri,Mi,hc,mc,wb,vb,_b,Ob,bc=L(()=>{we(),ae(),Bt(),Tr(),Ni(),Ri={name:"Resize",inputNames:["A"],inputTypes:[2]},Mi=(e,t,a)=>(Bi(t,a),[e.run({...Ri,cacheHint:a.cacheKey,get:()=>wb(e,t,a)},t)]),hc=e=>dn(e,10),mc=e=>dn(e,11),wb=(e,t,a)=>{let i=H(e.session.backend.glContext.version),[u,n]=vb(t,a);if(u.every(T=>T===1)&&a.coordinateTransformMode!=="tf_crop_and_resize")return{...Ri,output:{dims:n,type:t[0].type,textureType:2},hasMain:!0,shaderSource:`void main() {
                    vec4 v = ${i.texture2D}(X, TexCoords);
                    ${i.output} = v;
                }`};let o=n.length;if(o<2)throw new Error(`output dimension should be at least 2, but got ${o}`);let c=n[o-2],p=n[o-1],r=t[0].dims;if(o!==r.length)throw new Error(`output dimension should match input ${r.length}, but got ${o}`);let l=r[o-2],s=r[o-1],h=u[o-2],d=u[o-1],m="";if(a.mode!=="linear")throw new Error(`resize (packed) does not support mode: '${a.mode}'`);switch(a.coordinateTransformMode){case"asymmetric":m=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        return vec4(coords) / scaleWHWH;
                    }
                `;break;case"half_pixel":m=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        return (vec4(coords) + 0.5) / scaleWHWH - 0.5;
                    }
                `;break;case"pytorch_half_pixel":m=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        vec4 fcoords = vec4(coords);
                        return vec4(
                            ${p}.0 > 1.0 ? (fcoords.x + 0.5) / scaleWHWH.x - 0.5 : 0.0,
                            ${c}.0 > 1.0 ? (fcoords.y + 0.5) / scaleWHWH.y - 0.5 : 0.0,
                            ${p}.0 > 1.0 ? (fcoords.z + 0.5) / scaleWHWH.z - 0.5 : 0.0,
                            ${c}.0 > 1.0 ? (fcoords.w + 0.5) / scaleWHWH.w - 0.5 : 0.0
                          );
                    }
                `;break;case"align_corners":m=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        vec4 resized = vec4(${p}.0 - 1.0, ${c}.0 - 1.0, ${p}.0 - 1.0,
                            ${c}.0 - 1.0);
                        vec4 original = vec4(${s}.0 - 1.0, ${l}.0 - 1.0, ${s}.0 - 1.0,
                            ${l}.0 - 1.0);
                        vec4 new_scale = original / resized;
                        return vec4(coords) * new_scale;
                    }
                `;break;default:throw new Error(`resize (packed) does not support coordinateTransformMode:                                 '${a.coordinateTransformMode}'`)}let b=Qe(o),v=Nt(),O=`
            const vec2 inputWH = vec2(${l}.0, ${s}.0);
            const vec4 scaleWHWH = vec4(float(${h}), float(${d}), float(${h}), float(${d}));
            ${v}
            ${m}
            float getAValue(int x10, int r, int c, int d) {
                return getChannel(getA(x10, r, c, d), vec2(c, d));
            }
            void main() {
                ${b} rc = getOutputCoords();

                int batch = rc[0];
                int depth = rc[1];

                // retrieve the 4 coordinates that is used in the 4 packed output values.
                ivec4 coords = ivec4(rc.wz, rc.w + 1, rc.z + 1);

                // calculate the source index in fraction
                vec4 sourceFrac = getSourceFracIndex(coords);

                // get the lower and upper bound of the 4 values that will be packed into one texel.
                ivec4 x00 = ivec4(max(sourceFrac.xy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xy)));
                ivec4 x01 = ivec4(max(sourceFrac.xw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xw)));
                ivec4 x10 = ivec4(max(sourceFrac.zy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zy)));
                ivec4 x11 = ivec4(max(sourceFrac.zw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zw)));

                bool hasNextRow = rc.w < ${c-1};
                bool hasNextCol = rc.z < ${p-1};

                // pack x00, x01, x10, x11's top-left corner into one vec4 structure
                vec4 topLeft = vec4(
                    getAValue(batch, depth, x00.x, x00.y),
                    hasNextCol ? getAValue(batch, depth, x01.x, x01.y) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.x, x10.y) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.y) : 0.0);

                // pack x00, x01, x10, x11's top-right corner into one vec4 structure
                vec4 topRight = vec4(
                    getAValue(batch, depth, x00.x, x00.w),
                    hasNextCol ? getAValue(batch, depth, x01.x, x01.w) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.x, x10.w) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.w) : 0.0);

                // pack x00, x01, x10, x11's bottom-left corner into one vec4 structure
                vec4 bottomLeft = vec4(
                    getAValue(batch, depth, x00.z, x00.y),
                    hasNextCol ? getAValue(batch, depth, x01.z, x01.y) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.z, x10.y) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.y) : 0.0);

                // pack x00, x01, x10, x11's bottom-right corner into one vec4 structure
                vec4 bottomRight = vec4(
                    getAValue(batch, depth, x00.z, x00.w),
                    hasNextCol ? getAValue(batch, depth, x01.z, x01.w) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.z, x10.w) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.w) : 0.0);

                // calculate the interpolation fraction on u and v direction
                vec4 frac = vec4(sourceFrac) - floor(sourceFrac);
                vec4 clampFrac = clamp(frac, vec4(0.0), vec4(1.0));

                vec4 top = mix(topLeft, topRight, clampFrac.ywyw);
                vec4 bottom = mix(bottomLeft, bottomRight, clampFrac.ywyw);
                vec4 newValue = mix(top, bottom, clampFrac.xxzz);

                ${i.output} = vec4(newValue);
            }
        `;return{...Ri,output:{dims:n,type:t[0].type,textureType:2},hasMain:!0,shaderSource:O}},vb=(e,t)=>{let a=e[0].dims,i=t.scales,u;if(i.length===0){let o=e[t.scalesInputIdx];if(o&&o.size!==0){if(e[t.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");i=_b(o,t.mode,t.isResize)}else{let c=e[t.sizesInputIdx];if(!c||c.size===0)throw new Error("Either scales or sizes MUST be provided as input.");u=Array.from(c.integerData),i=Ob(u,a,t.mode,t.isResize)}}else if(e[t.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");let n=u||a.map((o,c)=>Math.floor(o*i[c]));return[i,n]},_b=(e,t,a)=>{let i=Array.from(e.floatData);return so(i,t,a),i},Ob=(e,t,a,i)=>{let u=t.length,n=new Array(u);for(let o=0,c=u;o<c;o++)if(t[o]===0){if(e[o]!==0)throw new Error("Input dim is zero but required output dim is non-zero.");n[o]=1}else n[o]=e[o]/t[o];return so(n,a,i),n}}),gc,Ib,yc=L(()=>{yr(),gc=(e,t)=>(Ib(t),[new $e([t[0].dims.length],"int32",void 0,void 0,new Int32Array(t[0].dims))]),Ib=e=>{if(!e||e.length!==1)throw new Error("Shape requires 1 input.")}}),Gi,Tc,xc,wc,Sb,vc,Ab,Pb,_c=L(()=>{Ue(),pn(),fe(),ae(),Gi={name:"Slice",inputNames:["A"],inputTypes:[0]},Tc=(e,t,a)=>(Sb(t),[e.run({...Gi,cacheHint:a.cacheKey,get:()=>wc(e,t[0],a)},t)]),xc=e=>{let t=e.attributes.getInts("starts"),a=e.attributes.getInts("ends"),i=e.attributes.getInts("axes",[]);return Q({starts:t,ends:a,axes:i})},wc=(e,t,a)=>{let i=a.axes.length===0?t.dims.slice(0).map((l,s)=>s):a.axes,u=U.normalizeAxes(i,t.dims.length),n=a.starts.map((l,s)=>l>t.dims[u[s]]-1?t.dims[u[s]]:U.normalizeAxis(l,t.dims[u[s]])),o=a.ends.map((l,s)=>l>t.dims[u[s]]-1?t.dims[u[s]]:U.normalizeAxis(l,t.dims[u[s]])),c=t.dims.slice(),p=[];for(let l=0;l<u.length;l++)c[u[l]]=o[l]-n[l],n[l]>0&&p.push(`outputIdx[${u[l]}] += ${n[l]};`);let r=`
      float process(int outputIdx[${c.length}]) {
        ${p.join(`
      `)}
        return _A(outputIdx);
      }`;return{...Gi,output:{dims:c,type:t.type,textureType:0},shaderSource:r}},Sb=e=>{if(!e||e.length!==1)throw new Error("Slice requires 1 input.");if(Qt.indexOf(e[0].type)===-1)throw new Error("Invalid input type.")},vc=(e,t)=>{Pb(t);let a=Ab(e,t);return[e.run({...Gi,cacheHint:a.cacheKey,get:()=>wc(e,t[0],a)},[t[0]])]},Ab=(e,t)=>{if(!e.session.isInitializer(t[1].dataId)||!e.session.isInitializer(t[2].dataId)||t.length>=4&&!e.session.isInitializer(t[3].dataId)||t.length>=5&&!e.session.isInitializer(t[4].dataId))throw new Error("dynamic slice attributes are not allowed");if(t.length>=5&&t[4].integerData.some(o=>o!==1))throw new Error("currently non-1 steps is not supported for Slice");let a=Array.from(t[1].integerData),i=Array.from(t[2].integerData),u=t.length>=4?Array.from(t[3].integerData):[],n=`${u};${a};${i}`;return{starts:a,ends:i,axes:u,cacheKey:n}},Pb=e=>{if(!e||e.length<3||e.length>5)throw new Error("Invalid input number.");if(e[1].type!=="int32"||e[1].dims.length!==1)throw new Error("Invalid input type.");if(e[2].type!=="int32"||e[2].dims.length!==1)throw new Error("Invalid input type.");if(e.length>=4&&(e[3].type!=="int32"||e[3].dims.length!==1))throw new Error("Invalid input type.");if(e.length>=5&&(e[4].type!=="int32"||e[4].dims.length!==1))throw new Error("Invalid input type.")}}),Oc,Ic,Sc,Ac,Pc,Ec,Dc,Lc,Eb,Db,Lb,Cc,Fc=L(()=>{Ue(),fe(),we(),ae(),oo(),Oc={name:"SoftmaxComputeMax",inputNames:["A"],inputTypes:[0]},Ic={name:"SoftmaxComputeScale",inputNames:["A","Max"],inputTypes:[0,0]},Sc={name:"SoftMax",inputNames:["A","Max","Norm"],inputTypes:[0,0,0]},Ac=(e,t,a)=>{Cc(t);let i=t[0].dims.slice(),u=U.normalizeAxis(a.axis,i.length),n=U.sizeToDimension(i,u),o=U.sizeFromDimension(i,u);return Lc(e,t,a,n,o)},Pc=e=>Q({axis:e.attributes.getInt("axis",1)}),Ec=e=>Q({axis:e.attributes.getInt("axis",-1)}),Dc=(e,t,a)=>{Cc(t);let i=t[0].dims.slice(),u=U.normalizeAxis(a.axis,i.length),n=i.length,o=u!==n-1,c=[],p=[],r=[],l;o&&(p=Array.from({length:n}).map((m,b)=>b),p[u]=n-1,p[n-1]=u,p.map(m=>c.push(i[m])),l=Q({perm:p}),r=wr(e,t,l));let s=o?U.sizeToDimension(c,n-1):U.sizeToDimension(i,n-1),h=o?U.sizeFromDimension(c,n-1):U.sizeFromDimension(i,n-1),d=Lc(e,o?r:t,a,s,h);return o?wr(e,d,l):d},Lc=(e,t,a,i,u)=>{let n=Eb(e,t[0],i,u,[i]),o=e.run({...Oc,cacheHint:a.cacheKey,get:()=>n},t),c=Db(e,t[0],i,u,n.output.dims,[i]),p=e.run({...Ic,cacheHint:a.cacheKey,get:()=>c},[t[0],o]),r=Lb(e,t[0],i,u,n.output.dims,c.output.dims);return[e.run({...Sc,cacheHint:a.cacheKey,get:()=>r},[t[0],o,p])]},Eb=(e,t,a,i,u)=>{let[n,o]=e.calculateTextureWidthAndHeight(t.dims,0),c=u.length;if(a<1||i<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(u.length!==1)throw new Error("Dimensionality of the output should be 1");if(u[0]!==a)throw new Error("Shape of the output should be equal to logical row count");let p=H(e.session.backend.glContext.version),r=`
      float process(int[${c}] indices) {
        int logical_row_start_offset = indices[0] * ${i};

        float max = getColorAsFloat(${p.texture2D}(A, offsetToCoords(logical_row_start_offset, ${n},
        ${o} )));
        for(int i=1; i<${i}; ++i)
        {
          float current = getColorAsFloat(${p.texture2D}(A, offsetToCoords(logical_row_start_offset + i,
            ${n}, ${o})));
          if(current > max)
          max = current;
        }

        return max;
      }`;return{...Oc,output:{dims:u,type:t.type,textureType:0},shaderSource:r}},Db=(e,t,a,i,u,n)=>{let[o,c]=e.calculateTextureWidthAndHeight(t.dims,0),p=n.length;if(a<1||i<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(n.length!==1)throw new Error("Dimensionality of the output should be 1");if(n[0]!==a)throw new Error("Shape of the output should be equal to logical row count");if(u.length!==1)throw new Error("Dimensionality of the intermediate results should be 1");if(u[0]!==a)throw new Error("Shape of the intermediate results should be equal to logical row count");let r=H(e.session.backend.glContext.version),l=`
      float process(int[${p}] indices) {
        int logical_row_start_offset = indices[0] * ${i};

        float norm_factor = 0.0;
        float max = _Max(indices);
        for(int i=0; i<${i}; ++i)
        {
          norm_factor += exp(getColorAsFloat(${r.texture2D}(A, offsetToCoords(logical_row_start_offset + i,
            ${o}, ${c}))) - max);
        }

        return norm_factor;
      }`;return{...Ic,output:{dims:n,type:t.type,textureType:0},shaderSource:l}},Lb=(e,t,a,i,u,n)=>{let[o,c]=e.calculateTextureWidthAndHeight(t.dims,0),p=t.dims.length;if(a<1||i<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(u.length!==1||n.length!==1)throw new Error("Dimensionality of the intermediate results should be 1");if(u[0]!==a||n[0]!==a)throw new Error("Shape of the intermediate results should be equal to logical row count");let r=`
      float process(int[${p}] indices) {

      // get offset of current logical tensor index from the 2-D texture coordinates (TexCoords)
      int offset = coordsToOffset(TexCoords, ${o}, ${c});

      //determine the logical row for this index
      int logical_row_index[1];
      logical_row_index[0] = offset / ${i};

      float norm_factor = _Norm(logical_row_index);

      // avoid possible division by 0
      // if norm_facor is 0, all elements are zero
      // if so, return 0
      if(norm_factor == 0.0)
        return 0.0;

      return exp(_A(indices) - _Max(logical_row_index)) / norm_factor;
    }`;return{...Sc,output:{dims:t.dims,type:t.type,textureType:0},shaderSource:r}},Cc=e=>{if(!e||e.length!==1)throw new Error("Softmax requires 1 input.");if(e[0].type!=="float32"&&e[0].type!=="float64")throw new Error("Invalid input type")}}),$c,kc,Bc,Cb,Fb,$b,Nc=L(()=>{Ue(),fe(),ae(),$c={name:"Split",inputNames:["A"],inputTypes:[0]},kc=(e,t,a)=>{$b(t);let i=U.normalizeAxis(a.axis,t[0].dims.length),u=Cb(e,t,i,a),n=[];for(let o=0;o<u;++o)n.push(e.run({...$c,cacheHint:`${a.cacheKey};${o}`,get:()=>Fb(e,t[0],a,i,o)},t));return n},Bc=e=>{let t=e.attributes.getInt("axis",0),a=e.attributes.getInts("split",[]),i=e.outputs.length;return Q({axis:t,split:a,numOutputs:i})},Cb=(e,t,a,i)=>{let[,u]=an.splitShape(t[0].dims,a,i.split,i.numOutputs);return u.length},Fb=(e,t,a,i,u)=>{let[n,o]=an.splitShape(t.dims,i,a.split,a.numOutputs),c=o[u],p=n[u],r=`
      float process(int indices[${p.length}]) {
        indices[${i}] += ${c};
        return _A(indices);
      }
    `;return{...$c,cacheHint:`${a.cacheKey}:${u}`,output:{dims:p,type:t.type,textureType:0},shaderSource:r}},$b=e=>{if(!e||e.length!==1)throw new Error("Split requires one input.");if(e[0].type!=="int8"&&e[0].type!=="uint8"&&e[0].type!=="int16"&&e[0].type!=="uint16"&&e[0].type!=="int32"&&e[0].type!=="uint32"&&e[0].type!=="float32"&&e[0].type!=="float64"&&e[0].type!=="bool")throw new Error("Invalid input type.")}}),Ui,Rc,Mc,kb,Bb,Gc=L(()=>{fe(),Ui=(e,t,a)=>{kb(t);let i=U.squeezeShape(t[0].dims,a);return[e.reshapeUnpacked(t[0],i)]},Rc=(e,t)=>(Bb(t),Ui(e,[t[0]],Array.from(t[1].integerData))),Mc=e=>e.attributes.getInts("axes"),kb=e=>{if(!e||e.length!==1)throw new Error("Squeeze requires 1 input.");if(e[0].type==="string")throw new Error("invalid input tensor types.")},Bb=e=>{if(!e||e.length!==2)throw new Error("Squeeze requires 2 inputs.");if(e[1].type!=="int32")throw new Error("Invalid input type.")}}),Uc,Nb,Rb,zc=L(()=>{we(),ae(),Uc=(e,t)=>{Rb(t);let a={name:"Sum",inputNames:t.map((i,u)=>`X${u}`),inputTypes:new Array(t.length).fill(0)};return[e.run({...a,get:()=>Nb(e,t,a)},t)]},Nb=(e,t,a)=>{let i=H(e.session.backend.glContext.version),u=t[0].dims.slice(),n=`
      void main() {
        vec4 result = ${t.map((o,c)=>`${i.texture2D}(X${c},TexCoords)`).join(" + ")};
        ${i.output} = result;
      }
    `;return{...a,output:{dims:u,type:t[0].type,textureType:0},hasMain:!0,shaderSource:n}},Rb=e=>{if(!e||e.length===0)throw new Error("Sum requires inputs.");let t=e[0].dims.length;for(let a=1;a<e.length;a++){if(t!==e[a].dims.length)throw new Error("Input shapes are mismatched.");for(let i=0;i<t;i++)if(e[0].dims[i]!==e[a].dims[i])throw new Error("Input shapes are not matched.")}if(e[0].type!=="float32"&&e[0].type!=="float64")throw new Error("Invalid input type.");for(let a=1;a<e.length;a++)if(e[0].type!==e[a].type)throw new Error("Input types are not matched.")}}),Vc,Mb,Gb,Wc=L(()=>{pn(),ae(),Vc=(e,t)=>{Gb(t);let a={name:"Tile",inputNames:["A"],inputTypes:[0]};return[e.run({...a,get:()=>Mb(e,t,a)},t)]},Mb=(e,t,a)=>{let i=t[0].dims.slice(),u=new Array(i.length),n=[];for(let p=0;p<i.length;p++)u[p]=i[p]*t[1].numberData[p],n.push(`inputIdx[${p}] = int(mod(float(outputIdx[${p}]), ${i[p]}.));`);let o=u.length,c=`
      float process(int outputIdx[${o}]) {
        int inputIdx[${o}];
        ${n.join(`
`)}
        return _A(inputIdx);
      }
    `;return{...a,output:{dims:u,type:t[0].type,textureType:0},shaderSource:c}},Gb=e=>{if(!e||e.length!==2)throw new Error("Tile requires 2 input.");if(e[1].dims.length!==1)throw new Error("The second input shape must 1 dimension.");if(e[1].dims[0]!==e[0].dims.length)throw new Error("Invalid input shape.");if(Qt.indexOf(e[0].type)===-1)throw new Error("Invalid input type.");if(e[1].type!=="int32"&&e[1].type!=="int16")throw new Error("Invalid repeat type.")}}),zi,Hc,qc,Ub,zb,jc=L(()=>{fe(),zi=(e,t,a)=>{Ub(t);let i=U.unsqueezeShape(t[0].dims,a);return[e.reshapeUnpacked(t[0],i)]},Hc=(e,t)=>(zb(t),zi(e,[t[0]],Array.from(t[1].integerData))),qc=e=>e.attributes.getInts("axes"),Ub=e=>{if(!e||e.length!==1)throw new Error("Unsqueeze requires 1 input.");if(e[0].type==="string")throw new Error("invalid input tensor types.")},zb=e=>{if(!e||e.length!==2)throw new Error("Unsqueeze requires 2 inputs.");if(e[1].type!=="int32")throw new Error("Invalid input type.")}}),Yc,Xc=L(()=>{ol(),gl(),xl(),Sl(),to(),ff(),bf(),Tf(),vf(),Sf(),Ef(),Ff(),Nf(),ro(),Uf(),ec(),uc(),fc(),bc(),yc(),_c(),Fc(),Nc(),Gc(),zc(),Wc(),oo(),Ii(),jc(),Ni(),Yc=[["Abs","","6+",Al],["Acos","","7+",Pl],["Add","","7+",il],["And","","7+",al],["Asin","","7+",El],["Atan","","7+",Dl],["AveragePool","","7+",Vf,Wf],["BatchNormalization","","7+",rl,nl],["Cast","","6+",yl,Tl],["Ceil","","6+",Fl],["Clip","","6-10",_i,Ll],["Clip","","11+",Cl],["Concat","","4+",_l,Il],["Conv","","1+",Li,Ci],["ConvTranspose","","1+",uf,lf],["Cos","","7+",$l],["Div","","7+",sl],["Dropout","","7+",Oi],["DepthToSpace","","1+",hf,mf],["Equal","","7+",ul],["Elu","","6+",kl,Bl],["Exp","","6+",Nl],["Flatten","","1+",gf,yf],["Floor","","6+",Rl],["FusedConv","com.microsoft","1+",Li,Ci],["Gather","","1+",xf,wf],["Gemm","","7-10",Fi,Of],["Gemm","","11+",Fi,If],["GlobalAveragePool","","1+",qf,jf],["GlobalMaxPool","","1+",Zf],["Greater","","7+",ll],["Identity","","1+",Oi],["ImageScaler","","1+",Af,Pf],["InstanceNormalization","","6+",Lf,Cf],["LeakyRelu","","6+",Ml,Gl],["Less","","7+",fl],["LRN","","1+",$f,kf],["Log","","6+",Ul],["MatMul","","1+",ef,tf],["MaxPool","","1+",Yf,Xf],["Mul","","7+",cl],["Neg","","6+",zl],["Not","","1+",Vl],["Or","","7+",pl],["Pad","","2-10",$i,Rf],["Pad","","11+",Mf,Gf],["Pow","","7+",dl],["PRelu","","7+",hl],["ReduceLogSum","","1+",ac,er],["ReduceMax","","1+",nc,er],["ReduceMean","","1+",rc,er],["ReduceMin","","1+",oc,er],["ReduceProd","","1+",ic,er],["ReduceSum","","1-12",tc,er],["ReduceSumSquare","","1+",sc,er],["Relu","","6+",Wl],["Reshape","","5+",lc],["Resize","","10",Mi,hc],["Resize","","11+",Mi,mc],["Shape","","1+",gc],["Sigmoid","","6+",Hl],["Sin","","7+",ql],["Slice","","10+",vc],["Slice","","1-9",Tc,xc],["Softmax","","1-12",Ac,Pc],["Softmax","","13+",Dc,Ec],["Split","","2-12",kc,Bc],["Sqrt","","6+",jl],["Squeeze","","1-12",Ui,Mc],["Squeeze","","13+",Rc],["Sub","","7+",ml],["Sum","","6+",Uc],["Tan","","7+",Yl],["Tanh","","6+",Xl],["Tile","","6+",Vc],["Transpose","","1+",wr,pf],["Upsample","","7-8",ki,pc],["Upsample","","9",ki,dc],["Unsqueeze","","1-12",zi,qc],["Unsqueeze","","13+",Hc],["Xor","","7+",bl]]});function Jc(e){let t={},a;for(;(a=Kc.exec(e))!==null;){let i=a[3].split(",").map(u=>{let n=u.trim().split(" ");return n&&n.length===2?{type:n[0],name:n[1]}:null}).filter(u=>u!==null);t[a[2]]={params:i,body:a[4]}}for(let i in t){let u=Vb.replace("__FUNC__",i),n=new RegExp(u,"gm");for(;(a=n.exec(e))!==null;){let o=a[1],c=a[2],p=a[3].split(","),r=o?`${o} ${c};`:"",l=t[i].body,s="";t[i].params.forEach((d,m)=>{d&&(s+=`${d.type} ${d.name} = ${p[m]};
`)}),l=`${s}
 ${l}`,l=l.replace("return",`${c} = `);let h=`
      ${r}
      {
        ${l}
      }
      `;e=e.replace(a[0],h)}}return e=e.replace(Kc,""),e}var Kc,Vb,Zc=L(()=>{Kc=/@inline[\s\n\r]+(\w+)[\s\n\r]+([0-9a-zA-Z_]+)\s*\(([^)]*)\)\s*{(([^}]|[\n\r])*)}/gm,Vb="(\\w+)?\\s+([_0-9a-zA-Z]+)\\s+=\\s+__FUNC__\\((.*)\\)\\s*;"});function Mr(e,t){let a=[],i=[];for(let u=0;u<e.length;++u)e[u]!==1&&(a.push(e[u]),i.push(u));return{newShape:a,keptDims:i}}function qb(e){if(e.length===0)return 1;let t=e[0];for(let a=1;a<e.length;a++)t*=e[a];return t}function Qc(e){let t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}var uo,Vi=L(()=>{lt(),fe(),uo=class{constructor(e){this.maxTextureSize=e}computeTextureWH(e,t){let a=this.computeTexture(e,t);return t&&t.isPacked&&(a[0]/=2,a[1]/=2),t&&t.reverseWH?[a[1],a[0]]:a}computeTexture(e,t){let a=t&&t.isPacked;if(e.length===0)return a?[2,2]:[1,1];let i=this.maxTextureSize;if(t&&t.breakAxis!==void 0){let o=t.breakAxis>=e.length?1:e.slice(t.breakAxis).reduce((p,r)=>p*r),c=t.breakAxis<=0?1:e.slice(0,t.breakAxis).reduce((p,r)=>p*r);if(o>i||c>i)ce.verbose("TextureLayout",`Given width/height preferences were unattainable: shape:${e}, breakAxis:${t.breakAxis}`);else return[o,c]}let u=e.slice(0);a&&(i=i*2,u=u.map((o,c)=>c>=u.length-2?u[c]%2===0?u[c]:u[c]+1:u[c]),u.length===1&&(u=[2,u[0]])),u.length!==2&&(u=Mr(u).newShape);let n=qb(u);return u.length<=1&&n<=i?[1,n]:u.length===2&&u[0]<=i&&u[1]<=i?u:u.length===3&&u[0]*u[1]<=i&&u[2]<=i?[u[0]*u[1],u[2]]:u.length===3&&u[0]<=i&&u[1]*u[2]<=i?[u[0],u[1]*u[2]]:u.length===4&&u[0]*u[1]*u[2]<=i&&u[3]<=i?[u[0]*u[1]*u[2],u[3]]:u.length===4&&u[0]<=i&&u[1]*u[2]*u[3]<=i?[u[0],u[1]*u[2]*u[3]]:a?Qc(n/4).map(o=>o*2):Qc(n)}}}),lo,ep=L(()=>{fe(),Wt(),we(),Vi(),Bt(),lo=class extends dt{constructor(e){super(e)}getFunctions(){return{...this.offsetToCoords(),...this.coordsToOffset(),...this.toVec(),...this.valueFrom(),...this.getCommonUtilFuncs(),...this.getInputsSamplingSnippets(),...this.getOutputSamplingSnippet()}}getCustomTypes(){return{}}offsetToCoords(){let e="offsetToCoords";return{offsetToCoords:new R(`
      vec2 ${e}(int offset, int width, int height) {
        int t = offset / width;
        int s = offset - t*width;
        vec2 coords = (vec2(s,t) + vec2(0.5,0.5)) / vec2(width, height);
        return coords;
      }
      `)}}coordsToOffset(){let e="coordsToOffset";return{coordsToOffset:new R(`
      int ${e}(vec2 coords, int width, int height) {
        float s = coords.s * float(width);
        float t = coords.t * float(height);
        int offset = int(t) * width + int(s);
        return offset;
      }
      `)}}getOutputSamplingSnippet(){let e=this.context.outputTextureLayout;return e.isPacked?this.getPackedOutputSamplingSnippet(e):this.getUnpackedOutputSamplingSnippet(e)}getPackedOutputSamplingSnippet(e){let t=e.unpackedShape,a=[e.width,e.height],i={},u="getOutputCoords";switch(t.length){case 0:i[u]=this.getOutputScalarCoords();break;case 1:i[u]=this.getOutputPacked1DCoords(t,a);break;case 2:i[u]=this.getOutputPacked2DCoords(t,a);break;case 3:i[u]=this.getOutputPacked3DCoords(t,a);break;default:i[u]=this.getOutputPackedNDCoords(t,a)}let n=`
      void setOutput(vec4 val) {
        ${H(this.context.glContext.version).output} = val;
      }
    `,o="floatTextureSetRGBA";return i[o]=new R(n),i}getUnpackedOutputSamplingSnippet(e){let t=e.unpackedShape,a=[e.width,e.height],i={},u="getOutputCoords";switch(t.length){case 0:i[u]=this.getOutputScalarCoords();break;case 1:i[u]=this.getOutputUnpacked1DCoords(t,a);break;case 2:i[u]=this.getOutputUnpacked2DCoords(t,a);break;case 3:i[u]=this.getOutputUnpacked3DCoords(t,a);break;case 4:i[u]=this.getOutputUnpacked4DCoords(t,a);break;case 5:i[u]=this.getOutputUnpacked5DCoords(t,a);break;case 6:i[u]=this.getOutputUnpacked6DCoords(t,a);break;default:throw new Error(`Unsupported output dimensionality: ${t.length}`)}let n=`
        void setOutput(float val) {
          ${H(this.context.glContext.version).output} = vec4(val, 0, 0, 0);
        }
    `,o="floatTextureSetR";return i[o]=new R(n),i}getOutputScalarCoords(){return new R(`
      int getOutputCoords() {
        return 0;
      }
    `)}getOutputPacked1DCoords(e,t){let a=t,i="";return a[0]===1?(i=`
          int getOutputCoords() {
            return 2 * int(TexCoords.y * ${a[1]}.0);
          }
        `,new R(i)):a[1]===1?(i=`
          int getOutputCoords() {
            return 2 * int(TexCoords.x * ${a[0]}.0);
          }
        `,new R(i)):(i=`
        int getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                 vec2(${a[0]}, ${a[1]}));
          return 2 * (resTexRC.y * ${a[0]} + resTexRC.x);
        }
      `,new R(i))}getOutputPacked2DCoords(e,t){let a="";if(hr.arraysEqual(e,t))return a=`
        ivec2 getOutputCoords() {
          return 2 * ivec2(TexCoords.xy * vec2(${t[0]}, ${t[1]}));
        }
      `,new R(a);let i=t,u=Math.ceil(e[1]/2);return a=`
        ivec2 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${i[0]}, ${i[1]}));

          int index = resTexRC.y * ${i[0]} + resTexRC.x;

          // reverse r and c order for packed texture
          int r = imod(index, ${u}) * 2;
          int c = 2 * (index / ${u});

          return ivec2(r, c);
        }
      `,new R(a)}getOutputPacked3DCoords(e,t){let a=[t[0],t[1]],i=Math.ceil(e[2]/2),u=i*Math.ceil(e[1]/2),n=`
        ivec3 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${a[0]}, ${a[1]}));
          int index = resTexRC.y * ${a[0]} + resTexRC.x;

          int b = index / ${u};
          index -= b * ${u};

          // reverse r and c order for packed texture
          int r = imod(index, ${i}) * 2;
          int c = 2 * (index / ${i});

          return ivec3(b, r, c);
        }
      `;return new R(n)}getOutputPackedNDCoords(e,t){let a=[t[0],t[1]],i=Math.ceil(e[e.length-1]/2),u=i*Math.ceil(e[e.length-2]/2),n=u,o="",c="b, r, c";for(let r=2;r<e.length-1;r++)n*=e[e.length-r-1],o=`
      int b${r} = index / ${n};
      index -= b${r} * ${n};
    `+o,c=`b${r}, `+c;let p=`
      ivec${e.length} getOutputCoords() {
        ivec2 resTexRC = ivec2(TexCoords.xy *
                              vec2(${a[0]}, ${a[1]}));
        int index = resTexRC.y * ${a[0]} + resTexRC.x;

        ${o}

        int b = index / ${u};
        index -= b * ${u};

        // reverse r and c order for packed texture
        int r = imod(index, ${i}) * 2;
        int c = 2 * (index / ${i});

        return ivec${e.length}(${c});
      }
    `;return new R(p)}getOutputUnpacked1DCoords(e,t){let a=`
        int getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${t[0]}, ${t[1]}));
          return resTexRC.y * ${t[0]} + resTexRC.x;
        }
      `;return new R(a)}getOutputUnpacked2DCoords(e,t){let a=`
        ivec2 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${t[0]}, ${t[1]}));
          int index = resTexRC.y * ${t[0]} + resTexRC.x;
          int r = index / ${e[1]};
          int c = index - r * ${e[1]};
          return ivec2(r, c);
        }
      `;return new R(a)}getOutputUnpacked3DCoords(e,t){let a="",i=e.length,u=null;i<2&&(u=[]),u=new Array(i-1),u[i-2]=e[i-1];for(let c=i-3;c>=0;--c)u[c]=u[c+1]*e[c+1];let n=["r","c","d"],o=u.map((c,p)=>{let r=`int ${n[p]} = index / ${c}`,l=p===u.length-1?`int ${n[p+1]} = index - ${n[p]} * ${c}`:`index -= ${n[p]} * ${c}`;return`${r}; ${l};`}).join("");return a=`
        ivec3 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${t[0]}, ${t[1]}));
          int index = resTexRC.y * ${t[0]} + resTexRC.x;
          ${o}
          return ivec3(r, c, d);
        }
      `,new R(a)}getOutputUnpacked4DCoords(e,t){let a="",i=e.length,u=null;i<2&&(u=[]),u=new Array(i-1),u[i-2]=e[i-1];for(let c=i-3;c>=0;--c)u[c]=u[c+1]*e[c+1];let n=["r","c","d","d2"],o=u.map((c,p)=>{let r=`int ${n[p]} = index / ${c}`,l=p===u.length-1?`int ${n[p+1]} = index - ${n[p]} * ${c}`:`index -= ${n[p]} * ${c}`;return`${r}; ${l};`}).join("");return a=`
      ivec4 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${t[0]}, ${t[1]}));
          int index = resTexRC.y * ${t[0]} + resTexRC.x;
          ${o}
          return ivec4(r, c, d, d2);
        }
      `,new R(a)}getOutputUnpacked5DCoords(e,t){let a="",i=e.length,u=null;i<2&&(u=[]),u=new Array(i-1),u[i-2]=e[i-1];for(let c=i-3;c>=0;--c)u[c]=u[c+1]*e[c+1];let n=["r","c","d","d2","d3"],o=u.map((c,p)=>{let r=`int ${n[p]} = index / ${c}`,l=p===u.length-1?`int ${n[p+1]} = index - ${n[p]} * ${c}`:`index -= ${n[p]} * ${c}`;return`${r}; ${l};`}).join("");return a=`
      ivec5 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${t[0]}, ${t[1]}));
          int index = resTexRC.y * ${t[0]} + resTexRC.x;
          ${o}
          return ivec5(r, c, d, d2, d3);
        }
      `,new R(a)}getOutputUnpacked6DCoords(e,t){let a="",i=e.length,u=null;i<2&&(u=[]),u=new Array(i-1),u[i-2]=e[i-1];for(let c=i-3;c>=0;--c)u[c]=u[c+1]*e[c+1];let n=["r","c","d","d2","d3","d4"],o=u.map((c,p)=>{let r=`int ${n[p]} = index / ${c}`,l=p===u.length-1?`int ${n[p+1]} = index - ${n[p]} * ${c}`:`index -= ${n[p]} * ${c}`;return`${r}; ${l};`}).join("");return a=`
     ivec6 getOutputCoords() {
         ivec2 resTexRC = ivec2(TexCoords.xy *
                               vec2(${t[0]}, ${t[1]}));
         int index = resTexRC.y * ${t[0]} + resTexRC.x;
         ${o}
         return ivec6(r, c, d, d2, d3, d4);
       }
     `,new R(a)}getCommonUtilFuncs(){let e={},t="uvFromFlat";e[t]=new R(`
    vec2 uvFromFlat(int texNumR, int texNumC, int index) {
      int texC = index / texNumR;
      int texR = index - texC * texNumR;
      // TODO: swap texR, texC order in following function so row is corresponding to u and column is corresponding to
      //       v.
      return (vec2(texR, texC) + halfCR) / vec2(texNumR, texNumC);
    }
    `),t="packedUVfrom1D",e[t]=new R(`
      vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
        int texelIndex = index / 2;
        int texR = texelIndex / texNumC;
        int texC = texelIndex - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),t="packedUVfrom2D",e[t]=new R(`
      vec2 packedUVfrom2D(int texNumR, int texNumC, int texelsInLogicalRow, int row, int col) {
        int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
        int texR = texelIndex / texNumC;
        int texC = texelIndex - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),t="packedUVfrom3D",e[t]=new R(`
      vec2 packedUVfrom3D(int texNumR, int texNumC,
          int texelsInBatch, int texelsInLogicalRow, int b,
          int row, int col) {
        int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
        int texR = index / texNumC;
        int texC = index - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),t="sampleTexture";let a=H(this.context.glContext.version);return e[t]=new R(`
        float sampleTexture(sampler2D textureSampler, vec2 uv) {
            return ${a.texture2D}(textureSampler, uv).r;
        }`),e}getInputsSamplingSnippets(){let e={},t=this.context.outputTextureLayout;return this.context.programInfo.inputNames.forEach((a,i)=>{let u=this.context.inputTextureLayouts[i],n=Yn(a);u.isPacked?e[n]=this.getPackedSamplerFromInput(n,a,u):e[n]=this.getUnpackedSamplerFromInput(n,a,u);let o=Gu(a);u.unpackedShape.length<=t.unpackedShape.length&&(u.isPacked?e[o]=this.getPackedSamplerAtOutputCoords(o,u,t,a):e[o]=this.getUnpackedSamplerAtOutputCoords(o,u,t,a))}),e}getPackedSamplerAtOutputCoords(e,t,a,i){let u=t.unpackedShape,n=a.unpackedShape,o=Yn(i),c=u.length,p=n.length,r=Ze.getBroadcastDims(u,n),l=Qe(p),s=p-c,h,d=Dt();c===0?h="":p<2&&r.length>=1?h="coords = 0;":h=r.map($=>`coords.${d[$+s]} = 0;`).join(`
`);let m="";p<2&&c>0?m="coords":m=u.map(($,C)=>`coords.${d[C+s]}`).join(", ");let b="return outputValue;",v=U.size(u)===1,O=U.size(n)===1;if(c===1&&!v&&!O)b=`
        return vec4(outputValue.xy, outputValue.xy);
      `;else if(v&&!O)p===1?b=`
          return vec4(outputValue.x, outputValue.x, 0., 0.);
        `:b=`
          return vec4(outputValue.x);
        `;else if(r.length){let $=c-2,C=c-1;r.indexOf($)>-1&&r.indexOf(C)>-1?b="return vec4(outputValue.x);":r.indexOf($)>-1?b="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":r.indexOf(C)>-1&&(b="return vec4(outputValue.xx, outputValue.zz);")}let T=`
        int lastDim = coords.${d[p-1]};
        coords.${d[p-1]} = coords.${d[p-2]};
        coords.${d[p-2]} = lastDim;
      `,E=`
      vec4 ${e}() {
        ${l} coords = getOutputCoords();
        ${T}
        ${h}
        vec4 outputValue = ${o}(${m});
        ${b}
      }
    `;return new R(E,["coordinates.getOutputCoords"])}getUnpackedSamplerAtOutputCoords(e,t,a,i){let u=[a.width,a.height],n=[t.width,t.height],o=t.unpackedShape.length,c=a.unpackedShape.length,p=t.unpackedShape,r=a.unpackedShape,l=Yn(i);if(o===c&&hr.arraysEqual(n,u)){let T=`
          float ${e}() {
            return sampleTexture(${i}, TexCoords);
          }
        `;return new R(T,["coordinates.sampleTexture"])}let s=Qe(c),h=Ze.getBroadcastDims(p,r),d=c-o,m,b=Dt();o===0?m="":c<2&&h.length>=1?m="coords = 0;":m=h.map(T=>`coords.${b[T+d]} = 0;`).join(`
`);let v="";c<2&&o>0?v="coords":v=t.unpackedShape.map((T,E)=>`coords.${b[E+d]}`).join(", ");let O=`
        float ${e}() {
          ${s} coords = getOutputCoords();
          ${m}
          return ${l}(${v});
        }
      `;return new R(O,["coordinates.getOutputCoords"])}getPackedSamplerFromInput(e,t,a){switch(a.unpackedShape.length){case 0:return this.getPackedSamplerScalar(e,t);case 1:return this.getPackedSampler1D(e,t,a);case 2:return this.getPackedSampler2D(e,t,a);case 3:return this.getPackedSampler3D(e,t,a);default:return this.getPackedSamplerND(e,t,a)}}getUnpackedSamplerFromInput(e,t,a){let i=a.unpackedShape;switch(i.length){case 0:return this.getUnpackedSamplerScalar(e,t,a);case 1:return this.getUnpackedSampler1D(e,t,a);case 2:return this.getUnpackedSampler2D(e,t,a);case 3:return this.getUnpackedSampler3D(e,t,a);case 4:return this.getUnpackedSampler4D(e,t,a);case 5:return this.getUnpackedSampler5D(e,t,a);case 6:return this.getUnpackedSampler6D(e,t,a);default:throw new Error(`Unsupported dimension ${i.length}-D`)}}getPackedSamplerScalar(e,t){let a=H(this.context.glContext.version),i=`
          vec4 ${e}() {
            return ${a.texture2D}(${t}, halfCR);
          }
        `;return new R(i)}getPackedSampler1D(e,t,a){let i=[a.width,a.height],u=[i[1],i[0]],n=H(this.context.glContext.version),o=`vec4 ${e}(int index) {
      vec2 uv = packedUVfrom1D(
      ${u[0]}, ${u[1]}, index);
      return ${n.texture2D}(${t}, uv);
    }`;return new R(o,["coordinates.packedUVfrom1D"])}getPackedSampler2D(e,t,a){let i=a.unpackedShape,u=[a.width,a.height],n=H(this.context.glContext.version),o=u[0],c=u[1];if(u!=null&&hr.arraysEqual(i,u)){let s=`vec4 ${e}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${c}.0, ${o}.0);
        return ${n.texture2D}(${t}, uv);
      }`;return new R(s)}let p=u,r=Math.ceil(i[1]/2),l=`vec4 ${e}(int row, int col) {
      vec2 uv = packedUVfrom2D(${p[1]}, ${p[0]}, ${r}, row, col);
      return ${n.texture2D}(${t}, uv);
    }`;return new R(l,["coordinates.packedUVfrom2D"])}getPackedSampler3D(e,t,a){let i=a.unpackedShape,u=[a.width,a.height],n=[u[0],u[1]],o=H(this.context.glContext.version);if(i[0]===1){let h=i.slice(1),d=[1,2],m=$r(i,h),b=["b","row","col"],v=JSON.parse(JSON.stringify(a));v.unpackedShape=m;let O=this.getPackedSamplerFromInput(e,t,v),T=`${O.routineBody}
      vec4 ${e}(int b, int row, int col) {
        return ${e}(${kr(b,d)});
      } `;return new R(T,O.dependencies)}let c=n[0],p=n[1],r=Math.ceil(i[2]/2),l=r*Math.ceil(i[1]/2),s=`vec4 ${e}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${p}, ${c}, ${l}, ${r}, b, row, col);
      return ${o.texture2D}(${t}, uv);}`;return new R(s,["coordinates.packedUVfrom3D"])}getPackedSamplerND(e,t,a){let i=a.unpackedShape,u=i.length,n=[a.width,a.height],o=H(this.context.glContext.version),c=[n[0],n[1]],p=c[1],r=c[0],l=Math.ceil(i[u-1]/2),s=l*Math.ceil(i[u-2]/2),h="int b, int row, int col",d=`b * ${s} + (row / 2) * ${l} + (col / 2)`;for(let b=2;b<u-1;b++)h=`int b${b}, `+h,s*=i[u-b-1],d=`b${b} * ${s} + `+d;let m=`vec4 ${e}(${h}) {
      int index = ${d};
      int texR = index / ${r};
      int texC = index - texR * ${r};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}, ${p});
      return ${o.texture2D}(${t}, uv);
    }`;return new R(m)}getUnpackedSamplerScalar(e,t,a){let[i,u]=[a.width,a.height];if(i===1&&u===1){let o=`
          float ${e}() {
            return sampleTexture(${t}, halfCR);
          }
        `;return new R(o,["coordinates.sampleTexture"])}let n=`
        float ${e}() {
          int offset_${t} = coordsToOffset(TexCoords, ${i}, ${u});
          vec2 uv = uvFromFlat(${i}, ${u}, offset_${t});
          return sampleTexture(${t}, uv);
        }
      `;return new R(n,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler1D(e,t,a){let i=a.width,u=a.height;if(u===1&&i===1){let o=`
        float ${e}(int index) {
          return sampleTexture(${t}, halfCR);
        }
      `;return new R(o,["coordinates.sampleTexture"])}if(u===1){let o=`
          float ${e}(int index) {
            vec2 uv = vec2((float(index) + 0.5) / ${i}.0, 0.5);
            return sampleTexture(${t}, uv);
          }
        `;return new R(o,["coordinates.sampleTexture"])}if(i===1){let o=`
          float ${e}(int index) {
            vec2 uv = vec2(0.5, (float(index) + 0.5) / ${u}.0);
            return sampleTexture(${t}, uv);
          }
        `;return new R(o,["coordinates.sampleTexture"])}let n=`
        float ${e}(int index) {
          vec2 uv = uvFromFlat(${i}, ${u}, index);
          return sampleTexture(${t}, uv);
        }
      `;return new R(n,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler2D(e,t,a){let i=a.unpackedShape,u=[a.height,a.width];if(u!=null&&hr.arraysEqual(i,u)){let s=u[1],h=u[0],d=`
          float ${e}(int row, int col) {
            vec2 uv = (vec2(row, col) + halfCR) / vec2(${s}.0, ${h}.0);
            return sampleTexture(${t}, uv);
          }
        `;return new R(d,["coordinates.sampleTexture"])}let{newShape:n,keptDims:o}=Mr(i),c=n;if(c.length<i.length){let s=$r(i,c),h=JSON.parse(JSON.stringify(a));h.unpackedShape=s;let d=["col","row"],m=`
          ${this.getUnpackedSamplerFromInput(e,t,h).routineBody}
          float ${e}(int row, int col) {
            return ${e}(${kr(d,o)});
          }
        `;return new R(m,["coordinates.sampleTexture"])}let p=u[1],r=u[0];if(r===1){let s=`
          float ${e}(int row, int col) {
            int offset_${t} = coordsToOffset(TexCoords, ${p}, ${r});
            float index = dot(vec3(row, col, offset_${t}), vec3(${i[1]}, 1, 1));
            vec2 uv = vec2(0.5, (index + 0.5) / ${p}.0);
            return sampleTexture(${t}, uv);
          }
        `;return new R(s,["coordinates.sampleTexture","coordinates.coordsToOffset"])}if(p===1){let s=`
          float ${e}(int row, int col) {
            int offset_${t} = coordsToOffset(TexCoords, ${p}, ${r});
            float index = dot(vec3(row, col, offset_${t}), vec3(${i[1]}, 1, 1));
            vec2 uv = vec2((index + 0.5) / ${r}.0, 0.5);
            return sampleTexture(${t}, uv);
          }
        `;return new R(s,["coordinates.sampleTexture","coordinates.coordsToOffset"])}let l=`
        float ${e}(int row, int col) {
          int index = col * ${i[1]} + row;
          vec2 uv = uvFromFlat(${p}, ${r}, index);
          return sampleTexture(${t}, uv);
        }
      `;return new R(l,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler3D(e,t,a){let i=a.unpackedShape,u=i[1]*i[2],n=i[2],{newShape:o,keptDims:c}=Mr(i),p=o;if(p.length<i.length){let h=$r(i,p),d=["batch","col","row"],m=JSON.parse(JSON.stringify(a));m.unpackedShape=h;let b=this.getUnpackedSamplerFromInput(e,t,m),v=c.reverse(),O=`
          ${b.routineBody}
          float ${e}(int batch, int row, int col) {
            return ${e}(${kr(d,v)});
          }
        `;return new R(O,b.dependencies)}let r=a.width,l=a.height,s=`
          float ${e}(int depth, int row, int col) {
            // Explicitly use integer operations as dot() only works on floats.
            int index = depth * ${u} + col * ${n} + row;
            vec2 uv = uvFromFlat(${r}, ${l}, index);
            return sampleTexture(${t}, uv);
          }
      `;return new R(s,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler4D(e,t,a){let i=a.unpackedShape,u=i[3],n=i[2]*u,o=i[1]*n,c=a.width,p=a.height,r=`
        float ${e}(int row, int col, int depth, int depth2) {
          int index = row * ${o} + col * ${n} +
              depth2 * ${u} + depth;
          vec2 uv = uvFromFlat(${c}, ${p}, index);
          return sampleTexture(${t}, uv);
        }
      `;return new R(r,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler5D(e,t,a){let i=a.unpackedShape,u=i[4],n=i[3]*u,o=i[2]*n,c=i[1]*o,{newShape:p,keptDims:r}=Mr(i);if(p.length<i.length){let d=$r(i,p),m=["row","col","depth","depth2","depth3"],b=JSON.parse(JSON.stringify(a));b.unpackedShape=d;let v=`
          ${this.getUnpackedSamplerFromInput(e,t,b).routineBody}
          float ${e}(int row, int col, int depth, int depth2, int depth3) {
            return ${e}(${kr(m,r)});
          }
        `;return new R(v,["coordinates.sampleTexture","coordinates.uvFromFlat"])}let l=a.width,s=a.height,h=`
        float ${e}(int row, int col, int depth, int depth2, int depth3) {
          int index = row * ${c} + col * ${o} + depth * ${n} +
          depth3 * ${u} + depth2;
          vec2 uv = uvFromFlat(${l}, ${s}, index);
          return sampleTexture(${t}, uv);
        }
      `;return new R(h,["coordinates.sampleTexture","coordinates.uvFromFlat"])}getUnpackedSampler6D(e,t,a){let i=a.unpackedShape,u=i[5],n=i[4]*u,o=i[3]*n,c=i[2]*o,p=i[1]*c,{newShape:r,keptDims:l}=Mr(i);if(r.length<i.length){let m=$r(i,r),b=["row","col","depth","depth2","depth3","depth4"],v=JSON.parse(JSON.stringify(a));v.unpackedShape=m;let O=`
            ${this.getUnpackedSamplerFromInput(e,t,v).routineBody}
            float ${e}(int row, int col, int depth,
              int depth2, int depth3, int depth4) {
              return ${e}(${kr(b,l)});
            }
          `;return new R(O,["coordinates.sampleTexture","coordinates.uvFromFlat"])}let s=a.width,h=a.height,d=`
          float ${e}(int row, int col, int depth,
            int depth2, int depth3, int depth4) {
            int index = row * ${p} + col * ${c} + depth * ${o} +
            depth2 * ${n} + depth3 * ${u} + depth4;
            vec2 uv = uvFromFlat(${s}, ${h}, index);
            return sampleTexture(${t}, uv);
          }
        `;return new R(d,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}toVec(){let e=this.context.outputTextureLayout,t=e.shape.length,a=e.strides,i=e.width,u=e.height,n=[];for(let c=0;c<t-1;++c)n.push(`
        c[${c}] = offset / ${a[c]};`),n.push(`
        offset -= c[${c}] * ${a[c]};`);n.push(`
        c[${t-1}] = offset;`);let o=`
      void toVec(vec2 texCoords, out int c[${t}]) {
        int offset = coordsToOffset(texCoords, ${i}, ${u});
        ${n.join("")}
      }
      void toVec(int offset, out int c[${t}]) {
        ${n.join("")}
      }
    `;return{toVec:new R(o,["coordinates.coordsToOffset"])}}valueFrom(){let e={};return this.context.programInfo.inputNames.forEach((t,a)=>{let i=this.context.inputTextureLayouts[a],u=(i.unpackedShape.length>0?i.unpackedShape:i.shape).length,n=`_${t}`;e[n]=new R(this.getValueFromSingle(t,u,i.width,i.height,!1),[`shapeUtils.indicesToOffset${n}`,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"]),n=n+"_T",e[n]=new R(this.getValueFromSingle(t,u,i.width,i.height,!0),[`shapeUtils.indicesToOffset${n}`,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"])}),e}getValueFromSingle(e,t,a,i,u){let n=`_${e}`;u&&(n=n+"_T");let o=H(this.context.glContext.version);return`
        float ${n}(int m[${t}]) {
          int offset = indicesToOffset${n}(m);
          vec2 coords = offsetToCoords(offset, ${a}, ${i});
          float value = getColorAsFloat(${o.texture2D}(${e}, coords));
          return value;
        }
        `}getPackedValueFrom(e,t,a,i,u){let n=`_${e}_Pack`;u&&(n=n+"_T");let o=H(this.context.glContext.version);return`
        vec4 ${n}(int m[${t}]) {
          int offset = indicesToOffset_${e}(m);
          vec2 coords = offsetToCoords(offset, ${a}, ${i});
          return ${o.texture2D}(${e}, coords);
        }
        `}}}),fo,tp=L(()=>{Wt(),fo=class Tn extends dt{constructor(t){super(t)}getFunctions(){return{...this.encodeFloat32(),...this.decodeFloat32()}}getCustomTypes(){return{}}encodeFloat32(){return{encode:new R(`highp vec4 encode(highp float f) {
        return vec4(f, 0.0, 0.0, 0.0);
      }
        `)}}decodeFloat32(){return{decode:new R(`highp float decode(highp vec4 rgba) {
        return rgba.r;
      }
        `)}}encodeUint8(){let t=Tn.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{encode:new R(`
      highp vec4 encode(highp float f) {
        highp float F = abs(f);
        highp float Sign = step(0.0,-f);
        highp float Exponent = floor(log2(F));
        highp float Mantissa = (exp2(- Exponent) * F);
        Exponent = floor(log2(F) + 127.0) + floor(log2(Mantissa));
        highp vec4 rgba;
        rgba[0] = 128.0 * Sign  + floor(Exponent*exp2(-1.0));
        rgba[1] = 128.0 * mod(Exponent,2.0) + mod(floor(Mantissa*128.0),128.0);
        rgba[2] = floor(mod(floor(Mantissa*exp2(23.0 -8.0)),exp2(8.0)));
        rgba[3] = floor(exp2(23.0)*mod(Mantissa,exp2(-15.0)));
        ${t}
        rgba = rgba / 255.0; // values need to be normalized to [0,1]
        return rgba;
    }
        `)}}decodeUint8(){let t=Tn.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{decode:new R(`
        highp float decode(highp vec4 rgba) {
          rgba = rgba * 255.0; // values need to be de-normalized from [0,1] to [0,255]
          ${t}
          highp float Sign = 1.0 - step(128.0,rgba[0])*2.0;
          highp float Exponent = 2.0 * mod(rgba[0],128.0) + step(128.0,rgba[1]) - 127.0;
          highp float Mantissa = mod(rgba[1],128.0)*65536.0 + rgba[2]*256.0 +rgba[3] + float(0x800000);
          highp float Result =  Sign * exp2(Exponent) * (Mantissa * exp2(-23.0 ));
          return Result;
      }
        `)}}static isLittleEndian(){let t=new ArrayBuffer(4),a=new Uint32Array(t),i=new Uint8Array(t);if(a[0]=3735928559,i[0]===239)return!0;if(i[0]===222)return!1;throw new Error("unknown endianness")}}}),co,rp=L(()=>{Wt(),we(),co=class extends dt{constructor(e){super(e)}getFunctions(){return{...this.setFragColor(),...this.getColorAsFloat()}}getCustomTypes(){return{}}setFragColor(){let e=H(this.context.glContext.version);return{setFragColor:new R(`
        void setFragColor(float value) {
            ${e.output} = encode(value);
        }
        `,["encoding.encode"])}}getColorAsFloat(){return{getColorAsFloat:new R(`
        float getColorAsFloat(vec4 color) {
            return decode(color);
        }
        `,["encoding.decode"])}}}}),po,np=L(()=>{Wt(),po=class ir extends dt{constructor(t){super(t)}getFunctions(){return{...this.bcastIndex(),...this.bcastMatmulIndex(),...this.offsetToIndices(),...this.indicesToOffset(),...this.incrementIndices()}}getCustomTypes(){return{}}bcastIndex(){let t=this.context.outputTextureLayout.shape.length,a={};return this.context.programInfo.inputNames.forEach((i,u)=>{let n=this.context.inputTextureLayouts[u].unpackedShape;if(n.length<=t){let o=n.length,c=t-o,p=`bcastIndices_${i}`,r="";for(let s=0;s<o;++s)r+=`
          realIndices[${s}] = int( mod(float(bcastedIndices[${c+s}]), ${n[s]}.0) );
          `;let l=`
        void ${p} (int bcastedIndices[${t}], out int realIndices[${o}]) {
          ${r}
        }
        `;a[p]=new R(l)}}),a}bcastMatmulIndex(){let t=this.context.outputTextureLayout.shape.length,a={};return this.context.programInfo.inputNames.forEach((i,u)=>{let n=this.context.inputTextureLayouts[u].shape;if(!(n.length<2||n.length>t)){let o=n.length,c=t-o,p=`bcastMatmulIndices_${i}`,r="";for(let s=0;s<o-2;++s)r+=`
          realIndices[${s}] = int( mod(float(bcastedIndices[${c+s}]), ${n[s]}.0) );
          `;let l=`
        void ${p}(int bcastedIndices[${t}], out int realIndices[${o}]) {
          ${r}
          realIndices[${o-1}] = bcastedIndices[${t-1}];
          realIndices[${o-2}] = bcastedIndices[${t-2}];
        }
        `;a[p]=new R(l)}}),a}indicesToOffset(){let t={};return this.context.programInfo.inputNames.forEach((a,i)=>{let u=this.context.inputTextureLayouts[i].shape,n=this.context.inputTextureLayouts[i].strides,o=u.length,c=`indicesToOffset_${a}`;t[c]=new R(ir.indexToOffsetSingle(c,o,n)),c=`indicesToOffset_${a}_T`,t[c]=new R(ir.indexToOffsetSingle(c,o,n.slice().reverse()))}),t}static indexToOffsetSingle(t,a,i){let u="";for(let n=a-1;n>=0;--n)u+=`
        offset += indices[${n}] * ${i[n]};
        `;return`
      int ${t}(int indices[${a}]) {
        int offset = 0;
        ${u}
        return offset;
      }
      `}offsetToIndices(){let t={};return this.context.programInfo.inputNames.forEach((a,i)=>{let u=this.context.inputTextureLayouts[i].shape,n=this.context.inputTextureLayouts[i].strides,o=u.length,c=`offsetToIndices_${a}`;t[c]=new R(ir.offsetToIndicesSingle(c,o,n)),c=`offsetToIndices_${a}_T`,t[c]=new R(ir.offsetToIndicesSingle(c,o,n.slice().reverse()))}),t}static offsetToIndicesSingle(t,a,i){let u=[];for(let n=0;n<a-1;++n)u.push(`
      indices[${n}] = offset / ${i[n]};`),u.push(`
        offset -= indices[${n}] * ${i[n]};`);return u.push(`
      indices[${a-1}] = offset;`),`
      void ${t}(int offset, out int indices[${a}]) {
        ${u.join("")}
      }
      `}incrementIndices(){let t={};return this.context.programInfo.inputNames.forEach((a,i)=>{let u=this.context.inputTextureLayouts[i].shape,n=u.length,o=`incrementIndices_${a}`,c="";for(let r=0;r<n;++r)c+=`
        shape[${r}] = ${u[r]};`;let p=`
        void ${o}(int axis, out int indices[${n}]) {
          int shape[${n}];
          ${c};
          for(int i = ${n} -1 ; i >= 0; --i) {
            if(i > axis) continue;
            indices[i] += 1;
            if(indices[i] < shape[i]) {
              break;
            }
            indices[i] = 0;
          }
        }
        `;t[o]=new R(p)}),t}}}),ho,op=L(()=>{Wt(),ho=class extends dt{constructor(e){super(e)}getCustomTypes(){return{}}getFunctions(){return{...this.binaryVecFunctions(),...this.copyVec(),...this.setVecItem(),...this.getVecItem()}}binaryVecFunctions(){let e=this.context.outputTextureLayout.shape.length,t={add:"+=",sub:"-=",mul:"*=",div:"/="},a={};for(let i in t){let u=`${i}Vec`,n="";for(let c=0;c<e;++c)n+=`
          dest[${c}] ${t[i]} src[${c}];
          `;let o=`
        void ${u}(int src[${e}], out int dest[${e}]) {
          ${n}
        }
        `;a[u]=new R(o)}return a}copyVec(){let e=this.context.outputTextureLayout.shape.length,t="";for(let i=0;i<e;++i)t+=`
        dest[${i}] = src[${i}];
        `;let a=`
      void copyVec(int src[${e}], out int dest[${e}]) {
        ${t}
      }
      `;return{copyVec:new R(a)}}setVecItem(){let e=this.context.outputTextureLayout.shape.length,t=`
        if(index < 0)
            index =${e} + index;
        if (index == 0)
            m[0] = value;
        `;for(let i=1;i<e-1;++i)t+=`
        else if (index == ${i})
            m[${i}] = value;
            `;t+=`
        else
            m[${e-1}] = value;
        `;let a=`
      void setVecItem(out int m[${e}], int index, int value) {
        ${t}
      }
        `;return{setVecItem:new R(a)}}getVecItem(){let e=this.context.outputTextureLayout.shape.length,t=`
        if(index < 0)
            index = ${e} + index;
        if (index == 0)
            return m[0];
      `;for(let i=1;i<e-1;++i)t+=`
        else if (index == ${i})
            return m[${i}];
      `;t+=`
        else
            return m[${e-1}];
        `;let a=`
      int getVecItem(int m[${e}], int index) {
        ${t}
      }
    `;return{getVecItem:new R(a)}}}}),Wi,ip=L(()=>{ep(),tp(),rp(),np(),op(),Wi={encoding:fo,fragcolor:co,vec:ho,shapeUtils:po,coordinates:lo}}),mo,ap=L(()=>{Wt(),Zc(),ip(),we(),mo=class{constructor(e,t,a,i){this.libs={},this.glslLibRoutineDependencyGraph={},this.context=new Zn(e,t,a,i),Object.keys(Wi).forEach(n=>{let o=new Wi[n](this.context);this.libs[n]=o});let u=this.glslLibRoutineDependencyGraph;for(let n in this.libs){let o=this.libs[n].getFunctions();for(let c in o){let p=n+"."+c,r;u[p]?(r=u[p],r.routineBody=o[c].routineBody):(r=new cn(p,o[c].routineBody),u[p]=r);let l=o[c].dependencies;if(l)for(let s=0;s<l.length;++s)if(u[l[s]])r.addDependency(u[l[s]]);else{let h=new cn(l[s]);u[l[s]]=h,r.addDependency(h)}}}}preprocess(){let e=this.context.programInfo,t=e.shaderSource;return this.context.programInfo.hasMain||(t=`${t}
      ${Mu(this.context.glContext.version,this.context.outputTextureLayout.shape.length)}`),t=Jc(t),`${Ru(this.context.glContext.version)}
    ${this.getUniforms(e.inputNames,e.variables)}
    ${this.getImports(t)}
    ${t}`}getImports(e){let t=this.selectGlslLibRoutinesToBeIncluded(e);if(t.length===0)return"";let a="";for(let i=0;i<t.length;++i)if(t[i].routineBody)a+=t[i].routineBody+`
`;else throw new Error(`Missing body for the Glsl Library routine: ${t[i].name}`);return a}selectGlslLibRoutinesToBeIncluded(e){let t=[];return Object.keys(this.glslLibRoutineDependencyGraph).forEach(a=>{let i=a.split(".")[1];e.indexOf(i)!==-1&&t.push(this.glslLibRoutineDependencyGraph[a])}),Qn.returnOrderedNodes(t)}getUniforms(e,t){let a=[];if(e)for(let i of e)a.push(`uniform sampler2D ${i};`);if(t)for(let i of t)a.push(`uniform ${i.type} ${i.name}${i.arrayLength?`[${i.arrayLength}]`:""};`);return a.join(`
`)}}}),bo,sp=L(()=>{Ot(),lt(),ap(),we(),bo=class{constructor(e,t,a){this.profiler=e,this.glContext=t,this.textureLayoutStrategy=a,this.repo=new Map,this.attributesBound=!1}getArtifact(e){return this.repo.get(e)}setArtifact(e,t){this.repo.set(e,t)}run(e,t,a){this.profiler.event("op",`ProgramManager.run ${e.programInfo.name??"unknown kernel"}`,()=>{let i=this.glContext.gl,u=e.program;i.useProgram(u);try{this.bindOutput(a),this.attributesBound||this.bindAttributes(e.attribLocations),this.bindUniforms(e.uniformLocations,e.programInfo.variables??[],t)}catch(n){throw ce.error("ProgramManager",e.programInfo.shaderSource),n}this.profiler.event("backend","GlContext.draw()",()=>{this.glContext.draw()})},this.glContext)}dispose(){this.vertexShader&&this.glContext.deleteShader(this.vertexShader),this.repo.forEach(e=>this.glContext.deleteProgram(e.program))}build(e,t,a){return this.profiler.event("backend","ProgramManager.build",()=>{let i=new mo(this.glContext,e,t,a),u=i.preprocess(),n=this.compile(u);return{programInfo:e,program:n,uniformLocations:this.getUniformLocations(n,i.context.programInfo.inputNames,i.context.programInfo.variables),attribLocations:this.getAttribLocations(n)}})}compile(e){if(!this.vertexShader){ce.verbose("ProrgramManager","Compiling and caching Vertex shader for the first time");let i=Nu(this.glContext.version);this.vertexShader=this.glContext.compileShader(i,this.glContext.gl.VERTEX_SHADER)}Z.debug&&ce.verbose("ProrgramManager",`FragShader:
${e}
`);let t=this.glContext.compileShader(e,this.glContext.gl.FRAGMENT_SHADER),a=this.glContext.createProgram(this.vertexShader,t);return this.glContext.deleteShader(t),a}bindOutput(e){let t=e.width,a=e.height;ce.verbose("ProrgramManager",`Binding output texture to Framebuffer: w/h=${t}/${a}, shape=${e.shape}, type=${e.tensor.type}`),this.glContext.attachFramebuffer(e.texture,t,a)}bindAttributes(e){let t=e.position,a=e.textureCoord;this.glContext.setVertexAttributes(t,a),this.attributesBound=!0}bindUniforms(e,t,a){var n;let i=this.glContext.gl,u=0;for(let{name:o,type:c,location:p,arrayLength:r}of e){let l=(n=t.find(s=>s.name===o))==null?void 0:n.data;if(c!=="sampler2D"&&!l)throw new Error(`variable '${o}' does not have data defined in program info`);switch(c){case"sampler2D":this.bindTexture(a[u],p,u),u++;break;case"float":r?i.uniform1fv(p,l):i.uniform1f(p,l);break;case"int":r?i.uniform1iv(p,l):i.uniform1i(p,l);break;default:throw new Error(`Uniform not implemented: ${c}`)}}}bindTexture(e,t,a){this.glContext.bindTextureToUniform(e.texture,a,t)}getAttribLocations(e){return{position:this.getAttribLocation(e,"position"),textureCoord:this.getAttribLocation(e,"textureCoord")}}getUniformLocations(e,t,a){let i=[];if(t)for(let u of t)i.push({name:u,type:"sampler2D",location:this.getUniformLocation(e,u)});if(a)for(let u of a)i.push({...u,location:this.getUniformLocation(e,u.name)});return i}getUniformLocation(e,t){let a=this.glContext.gl.getUniformLocation(e,t);if(a===null)throw new Error(`Uniform ${t} not found.`);return a}getAttribLocation(e,t){return this.glContext.gl.getAttribLocation(e,t)}}}),go,up=L(()=>{lt(),ln(),go=class{constructor(e,t,a,i){this.glContext=e,this.layoutStrategy=t,this.profiler=a,this.config=i,this.pendingRead=new Map,i.reuseTextures&&(this.inUseTextures=new Map,this.idleTextures=new Map,this.textureLookup=new Map)}createTextureFromLayout(e,t,a,i){let u=this.toEncoderType(e),n=this.glContext.getEncoder(u,t.channels||1,i);if(t.isPacked&&i===1)throw new Error("not implemented");let o=t.width,c=t.height,p,r;if(this.config.reuseTextures){p=`${o}x${c}_${n.format}_${n.internalFormat}_${n.textureType}`,r=this.inUseTextures.get(p),r||(r=[],this.inUseTextures.set(p,r));let s=this.idleTextures.get(p);if(s&&s.length>0){let h=s.pop();return r.push(h),i===1&&this.glContext.updateTexture(h,o,c,n,this.toTextureData(e,a)),h}}ce.verbose("TextureManager",`Creating new texture of size ${t.width}x${t.height}`);let l=this.glContext.allocateTexture(o,c,n,this.toTextureData(e,a));return this.config.reuseTextures&&(r.push(l),this.textureLookup.set(l,p)),l}readTexture(e,t,a){return a||(a=1),this.profiler.event("backend","TextureManager.readTexture",()=>{let i=e.shape.reduce((n,o)=>n*o)*a,u=this.glContext.readTexture(e.texture,e.width,e.height,i,this.toEncoderType(t),a);return this.toTensorData(t,u)})}async readTextureAsync(e,t,a){let i=e.tensor.dataId;if(a||(a=1),this.pendingRead.has(i)){let u=this.pendingRead.get(i);return new Promise(n=>u==null?void 0:u.push(n))}return this.profiler.event("backend","TextureManager.readTextureAsync",async()=>{this.pendingRead.set(i,[]);let u=e.shape.reduce((p,r)=>p*r)*a;await this.glContext.createAndWaitForFence();let n=this.glContext.readTexture(e.texture,e.width,e.height,u,this.toEncoderType(t),a),o=this.toTensorData(t,n),c=this.pendingRead.get(i);return this.pendingRead.delete(i),c==null||c.forEach(p=>p(o)),o})}readUint8TextureAsFloat(e){return this.profiler.event("backend","TextureManager.readUint8TextureAsFloat",()=>{let t=e.shape.reduce((i,u)=>i*u),a=this.glContext.readTexture(e.texture,e.width,e.height,t*4,"byte",4);return new Float32Array(a.buffer,a.byteOffset,t)})}releaseTexture(e,t){let a;if(this.config.reuseTextures&&(a=this.textureLookup.get(e.texture),a)){t&&this.textureLookup.delete(a);let i=this.inUseTextures.get(a);if(i){let u=i.indexOf(e.texture);if(u!==-1){i.splice(u,1);let n=this.idleTextures.get(a);n||(n=[],this.idleTextures.set(a,n)),n.push(e.texture)}}}(!a||t)&&(ce.verbose("TextureManager",`Deleting texture of size ${e.width}x${e.height}`),this.glContext.deleteTexture(e.texture))}toTensorData(e,t){switch(e){case"int16":return t instanceof Int16Array?t:Int16Array.from(t);case"int32":return t instanceof Int32Array?t:Int32Array.from(t);case"int8":return t instanceof Int8Array?t:Int8Array.from(t);case"uint16":return t instanceof Uint16Array?t:Uint16Array.from(t);case"uint32":return t instanceof Uint32Array?t:Uint32Array.from(t);case"uint8":case"bool":return t instanceof Uint8Array?t:Uint8Array.from(t);case"float32":return t instanceof Float32Array?t:Float32Array.from(t);case"float64":return t instanceof Float64Array?t:Float64Array.from(t);default:throw new Error(`TensorData type ${e} is not supported`)}}toTextureData(e,t){if(t)return t instanceof Float32Array?t:new Float32Array(t)}toEncoderType(e){return"float"}clearActiveTextures(){this.glContext.clearActiveTextures()}}}),yo,lp=L(()=>{lt(),_s(),el(),Xc(),sp(),Vi(),up(),yo=class{constructor(e,t){this.backend=e,this.context=t,this.layoutStrategy=new uo(e.glContext.maxTextureSize),this.programManager=new bo(this.context.profiler,e.glContext,this.layoutStrategy),this.textureManager=new go(e.glContext,this.layoutStrategy,this.context.profiler,{reuseTextures:e.textureCacheMode==="full"}),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map,this.pack=e.pack,this.pack2unpackMap=new Map,this.unpack2packMap=new Map}createInferenceHandler(){return new Jn(this)}onGraphInitialized(e){let t=e.getValues().filter(a=>a.from===-1&&a.tensor).map(a=>a.tensor.dataId);this.initializers=new Set(t)}isInitializer(e){return this.initializers?this.initializers.has(e):!1}addInitializer(e){this.initializers.add(e)}getTextureData(e,t){return t?this.packedTextureDataCache.get(e):this.unpackedTextureDataCache.get(e)}setTextureData(e,t,a=!1){ce.verbose("WebGLSessionHandler","Storing Texture data in cache"),a?this.packedTextureDataCache.set(e,t):this.unpackedTextureDataCache.set(e,t)}dispose(){this.programManager.dispose(),this.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach(e=>this.textureManager.releaseTexture(e,!0)),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach(e=>this.textureManager.releaseTexture(e,!0)),this.unpackedTextureDataCache=new Map}resolve(e,t,a){let i=vs(e,t,Yc);return{impl:i.opImpl,context:i.opInit?i.opInit(e,a):e}}}});function jb(e){let t=0;for(;t<e.length&&e[t]();++t);return t-1}var hn,fp=L(()=>{Ot(),ln(),ln(),Bt(),hn=class{constructor(e,t){this.frameBufferBound=!1,this.itemsToPoll=[],this.gl=e,this.version=t,this.getExtensions(),this.vertexbuffer=this.createVertexbuffer(),this.framebuffer=this.createFramebuffer(),this.queryVitalParameters()}allocateTexture(e,t,a,i){let u=this.gl,n=u.createTexture();u.bindTexture(u.TEXTURE_2D,n),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,u.NEAREST),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,u.NEAREST),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.CLAMP_TO_EDGE),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.CLAMP_TO_EDGE);let o=i?a.encode(i,e*t):null;return u.texImage2D(u.TEXTURE_2D,0,a.internalFormat,e,t,0,a.format,a.textureType,o),this.checkError(),n}updateTexture(e,t,a,i,u){let n=this.gl;n.bindTexture(n.TEXTURE_2D,e);let o=i.encode(u,t*a);n.texSubImage2D(n.TEXTURE_2D,0,0,0,t,a,i.format,i.textureType,o),this.checkError()}attachFramebuffer(e,t,a){let i=this.gl;i.bindTexture(i.TEXTURE_2D,e),i.bindFramebuffer(i.FRAMEBUFFER,this.framebuffer),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,e,0),this.checkError(),i.viewport(0,0,t,a),i.scissor(0,0,t,a)}readTexture(e,t,a,i,u,n){let o=this.gl;n||(n=1),this.frameBufferBound||this.attachFramebuffer(e,t,a);let c=this.getEncoder(u,n),p=c.allocate(t*a);return o.bindTexture(o.TEXTURE_2D,e),o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,e,0),o.readPixels(0,0,t,a,o.RGBA,c.textureType,p),this.checkError(),c.decode(p,i)}isFramebufferReady(){return!0}getActiveTexture(){let e=this.gl;return`TEXTURE${e.getParameter(this.gl.ACTIVE_TEXTURE)-e.TEXTURE0}`}getTextureBinding(){return this.gl.getParameter(this.gl.TEXTURE_BINDING_2D)}getFramebufferBinding(){return this.gl.getParameter(this.gl.FRAMEBUFFER_BINDING)}setVertexAttributes(e,t){let a=this.gl;a.vertexAttribPointer(e,3,a.FLOAT,!1,20,0),a.enableVertexAttribArray(e),t!==-1&&(a.vertexAttribPointer(t,2,a.FLOAT,!1,20,12),a.enableVertexAttribArray(t)),this.checkError()}createProgram(e,t){let a=this.gl,i=a.createProgram();return a.attachShader(i,e),a.attachShader(i,t),a.linkProgram(i),i}compileShader(e,t){let a=this.gl,i=a.createShader(t);if(!i)throw new Error(`createShader() returned null with type ${t}`);if(a.shaderSource(i,e),a.compileShader(i),a.getShaderParameter(i,a.COMPILE_STATUS)===!1)throw new Error(`Failed to compile shader: ${a.getShaderInfoLog(i)}
Shader source:
${e}`);return i}deleteShader(e){this.gl.deleteShader(e)}bindTextureToUniform(e,t,a){let i=this.gl;i.activeTexture(i.TEXTURE0+t),this.checkError(),i.bindTexture(i.TEXTURE_2D,e),this.checkError(),i.uniform1i(a,t),this.checkError()}draw(){this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.checkError()}checkError(){if(Z.debug){let e=this.gl,t=e.getError(),a="";switch(t){case e.NO_ERROR:return;case e.INVALID_ENUM:a="INVALID_ENUM";break;case e.INVALID_VALUE:a="INVALID_VALUE";break;case e.INVALID_OPERATION:a="INVALID_OPERATION";break;case e.INVALID_FRAMEBUFFER_OPERATION:a="INVALID_FRAMEBUFFER_OPERATION";break;case e.OUT_OF_MEMORY:a="OUT_OF_MEMORY";break;case e.CONTEXT_LOST_WEBGL:a="CONTEXT_LOST_WEBGL";break;default:a=`Unknown WebGL Error: ${t.toString(16)}`}throw new Error(a)}}deleteTexture(e){this.gl.deleteTexture(e)}deleteProgram(e){this.gl.deleteProgram(e)}getEncoder(e,t,a=0){if(this.version===2)return new Xn(this.gl,t);switch(e){case"float":return a===1||this.isRenderFloat32Supported?new un(this.gl,t):new un(this.gl,t,this.textureHalfFloatExtension.HALF_FLOAT_OES);case"int":throw new Error("not implemented");case"byte":return new Kn(this.gl,t);default:throw new Error(`Invalid dataType: ${e}`)}}clearActiveTextures(){let e=this.gl;for(let t=0;t<this.maxTextureImageUnits;++t)e.activeTexture(e.TEXTURE0+t),e.bindTexture(e.TEXTURE_2D,null)}dispose(){if(this.disposed)return;let e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteFramebuffer(this.framebuffer),e.bindBuffer(e.ARRAY_BUFFER,null),e.deleteBuffer(this.vertexbuffer),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null),e.finish(),this.disposed=!0}createDefaultGeometry(){return new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0])}createVertexbuffer(){let e=this.gl,t=e.createBuffer();if(!t)throw new Error("createBuffer() returned null");let a=this.createDefaultGeometry();return e.bindBuffer(e.ARRAY_BUFFER,t),e.bufferData(e.ARRAY_BUFFER,a,e.STATIC_DRAW),this.checkError(),t}createFramebuffer(){let e=this.gl.createFramebuffer();if(!e)throw new Error("createFramebuffer returned null");return e}queryVitalParameters(){let e=this.gl;if(this.isFloatTextureAttachableToFrameBuffer=this.checkFloatTextureAttachableToFrameBuffer(),this.isRenderFloat32Supported=this.checkRenderFloat32(),this.isFloat32DownloadSupported=this.checkFloat32Download(),this.version===1&&!this.textureHalfFloatExtension&&!this.isRenderFloat32Supported)throw new Error("both float32 and float16 TextureType are not supported");this.isBlendSupported=!this.isRenderFloat32Supported||this.checkFloat32Blend(),this.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE),this.maxTextureImageUnits=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),this.version}getExtensions(){this.version===2?(this.colorBufferFloatExtension=this.gl.getExtension("EXT_color_buffer_float"),this.disjointTimerQueryWebgl2Extension=this.gl.getExtension("EXT_disjoint_timer_query_webgl2")):(this.textureFloatExtension=this.gl.getExtension("OES_texture_float"),this.textureHalfFloatExtension=this.gl.getExtension("OES_texture_half_float"))}checkFloatTextureAttachableToFrameBuffer(){let e=this.gl,t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t);let a=this.version===2?e.RGBA32F:e.RGBA;e.texImage2D(e.TEXTURE_2D,0,a,1,1,0,e.RGBA,e.FLOAT,null);let i=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,i),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0);let u=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(t),e.deleteFramebuffer(i),u}checkRenderFloat32(){if(this.version===2){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension)return!1;return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Download(){if(this.version===2){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension||!this.gl.getExtension("WEBGL_color_buffer_float"))return!1;return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Blend(){let e=this.gl,t,a,i,u,n;try{t=e.createTexture(),a=e.createFramebuffer(),e.bindTexture(e.TEXTURE_2D,t);let o=this.version===2?e.RGBA32F:e.RGBA;return e.texImage2D(e.TEXTURE_2D,0,o,1,1,0,e.RGBA,e.FLOAT,null),e.bindFramebuffer(e.FRAMEBUFFER,a),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0),e.enable(e.BLEND),i=e.createShader(e.VERTEX_SHADER),!i||(e.shaderSource(i,"void main(){}"),e.compileShader(i),u=e.createShader(e.FRAGMENT_SHADER),!u)||(e.shaderSource(u,"precision highp float;void main(){gl_FragColor=vec4(0.5);}"),e.compileShader(u),n=e.createProgram(),!n)?!1:(e.attachShader(n,i),e.attachShader(n,u),e.linkProgram(n),e.useProgram(n),e.drawArrays(e.POINTS,0,1),e.getError()===e.NO_ERROR)}finally{e.disable(e.BLEND),n&&e.deleteProgram(n),i&&e.deleteShader(i),u&&e.deleteShader(u),a&&(e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteFramebuffer(a)),t&&(e.bindTexture(e.TEXTURE_2D,null),e.deleteTexture(t))}}beginTimer(){if(this.version===2&&this.disjointTimerQueryWebgl2Extension){let e=this.gl,t=this.disjointTimerQueryWebgl2Extension,a=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,a),a}else throw new Error("WebGL1 profiling currently not supported.")}endTimer(){if(this.version===2&&this.disjointTimerQueryWebgl2Extension){let e=this.gl,t=this.disjointTimerQueryWebgl2Extension;e.endQuery(t.TIME_ELAPSED_EXT);return}else throw new Error("WebGL1 profiling currently not supported")}isTimerResultAvailable(e){let t=!1,a=!1;if(this.version===2&&this.disjointTimerQueryWebgl2Extension){let i=this.gl,u=this.disjointTimerQueryWebgl2Extension;t=i.getQueryParameter(e,i.QUERY_RESULT_AVAILABLE),a=i.getParameter(u.GPU_DISJOINT_EXT)}else throw new Error("WebGL1 profiling currently not supported");return t&&!a}getTimerResult(e){let t=0;if(this.version===2){let a=this.gl;t=a.getQueryParameter(e,a.QUERY_RESULT),a.deleteQuery(e)}else throw new Error("WebGL1 profiling currently not supported");return t/1e6}async waitForQueryAndGetTime(e){return await mi(()=>this.isTimerResultAvailable(e)),this.getTimerResult(e)}async createAndWaitForFence(){let e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let t,a=e,i=a.fenceSync(a.SYNC_GPU_COMMANDS_COMPLETE,0);return e.flush(),i===null?t=()=>!0:t=()=>{let u=a.clientWaitSync(i,0,0);return u===a.ALREADY_SIGNALED||u===a.CONDITION_SATISFIED},{query:i,isFencePassed:t}}async pollFence(e){return new Promise(t=>{this.addItemToPoll(()=>e.isFencePassed(),()=>t())})}pollItems(){let e=jb(this.itemsToPoll.map(t=>t.isDoneFn));for(let t=0;t<=e;++t){let{resolveFn:a}=this.itemsToPoll[t];a()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}async addItemToPoll(e,t){this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),!(this.itemsToPoll.length>1)&&await mi(()=>(this.pollItems(),this.itemsToPoll.length===0))}}});function Hi(e){let t;if((!e||e==="webgl2")&&"webgl2"in Gr?t=Gr.webgl2:(!e||e==="webgl")&&"webgl"in Gr&&(t=Gr.webgl),!t)try{let i=Xb();t=cp(i,e)}catch{let i=Yb();t=cp(i,e)}e=e||t.version===1?"webgl":"webgl2";let a=t.gl;return Gr[e]=t,a.isContextLost()?(delete Gr[e],Hi(e)):(a.disable(a.DEPTH_TEST),a.disable(a.STENCIL_TEST),a.disable(a.BLEND),a.disable(a.DITHER),a.disable(a.POLYGON_OFFSET_FILL),a.disable(a.SAMPLE_COVERAGE),a.enable(a.SCISSOR_TEST),a.enable(a.CULL_FACE),a.cullFace(a.BACK),t)}function cp(e,t){let a={alpha:!1,depth:!1,antialias:!1,stencil:!1,preserveDrawingBuffer:!1,premultipliedAlpha:!1,failIfMajorPerformanceCaveat:!1},i,u=a;if((!t||t==="webgl2")&&(i=e.getContext("webgl2",u),i))try{return new hn(i,2)}catch(n){ce.warning("GlContextFactory",`failed to create WebGLContext using contextId 'webgl2'. Error: ${n}`)}if((!t||t==="webgl")&&(i=e.getContext("webgl",u)||e.getContext("experimental-webgl",u),i))try{return new hn(i,1)}catch(n){ce.warning("GlContextFactory",`failed to create WebGLContext using contextId 'webgl' or 'experimental-webgl'. Error: ${n}`)}throw new Error("WebGL is not supported")}function Yb(){if(typeof document>"u")throw new TypeError("failed to create canvas: document is not supported");let e=document.createElement("canvas");return e.width=1,e.height=1,e}function Xb(){if(typeof OffscreenCanvas>"u")throw new TypeError("failed to create offscreen canvas: OffscreenCanvas is not supported");return new OffscreenCanvas(1,1)}var Gr,pp=L(()=>{lt(),fp(),Gr={}}),To,dp=L(()=>{Ot(),lt(),lp(),pp(),To=class{get contextId(){return Z.webgl.contextId}set contextId(e){Z.webgl.contextId=e}get matmulMaxBatchSize(){return Z.webgl.matmulMaxBatchSize}set matmulMaxBatchSize(e){Z.webgl.matmulMaxBatchSize=e}get textureCacheMode(){return Z.webgl.textureCacheMode}set textureCacheMode(e){Z.webgl.textureCacheMode=e}get pack(){return Z.webgl.pack}set pack(e){Z.webgl.pack=e}get async(){return Z.webgl.async}set async(e){Z.webgl.async=e}initialize(){try{return this.glContext=Hi(this.contextId),typeof this.matmulMaxBatchSize!="number"&&(this.matmulMaxBatchSize=16),typeof this.textureCacheMode!="string"&&(this.textureCacheMode="full"),typeof this.pack!="boolean"&&(this.pack=!1),typeof this.async!="boolean"&&(this.async=!1),ce.setWithEnv(Z),Z.webgl.context||Object.defineProperty(Z.webgl,"context",{value:this.glContext.gl}),ce.verbose("WebGLBackend",`Created WebGLContext: ${typeof this.glContext} with matmulMaxBatchSize: ${this.matmulMaxBatchSize}; textureCacheMode: ${this.textureCacheMode}; pack: ${this.pack}; async: ${this.async}.`),!0}catch(e){return ce.warning("WebGLBackend",`Unable to initialize WebGLBackend. ${e}`),!1}}createSessionHandler(e){return new yo(this,e)}dispose(){this.glContext.dispose()}}});async function qi(e){if(e){let t=typeof e=="string"?[e]:e;for(let a of t){let i=hp.get(a);if(i)return i;let u=await Jb(a);if(u)return u}}else return qi(["webgl"]);throw new Error("no available backend to use")}async function Jb(e){let t=Kb;if(typeof t[e]<"u"&&Zb(t[e])){let a=t[e],i=a.initialize();if(typeof i=="object"&&"then"in i&&(i=await i),i)return hp.set(e,a),a}}function Zb(e){let t=e;return"initialize"in t&&typeof t.initialize=="function"&&"createSessionHandler"in t&&typeof t.createSessionHandler=="function"&&"dispose"in t&&typeof t.dispose=="function"}var hp,Kb,mp=L(()=>{dp(),hp=new Map,Kb={webgl:new To}}),ji,xo,bp=L(()=>{lt(),ji=class{constructor(e,t){this.op=e,this.node=t}},xo=class{constructor(e,t,a){this.graph=e,this.profiler=a,this.initialize(t)}initialize(e){this.profiler.event("session","ExecutionPlan.initialize",()=>{let t=this.graph.getNodes();if(t.length!==e.length)throw new Error("The size of nodes and OPs do not match.");this._ops=e.map((a,i)=>new ji(a,t[i])),this.reset(),this._starter=[],this._ops.forEach((a,i)=>{let u=!0;for(let n of a.node.inputs)if(!this._values[n]&&this.graph.getInputIndices().indexOf(n)===-1){u=!1;break}u&&this._starter.push(i)})})}reset(){this._values=this.graph.getValues().map(e=>e.tensor)}async execute(e,t){return this.profiler.event("session","ExecutionPlan.execute",async()=>{this.reset();let a=e.createInferenceHandler(),i=this.graph.getInputIndices();if(t.length!==i.length)throw new Error(`number of input tensors don't match the number of inputs to the model: actual: ${t.length} expected: ${i.length}`);t.forEach((r,l)=>{let s=i[l];this._values[s]=r});let u=this._starter.slice(0),n=this.graph.getValues(),o=this.graph.getNodes(),c=0;for(;c<u.length;){let r=u[c++],l=this._ops[r],s=l.node.inputs.map(b=>this._values[b]);if(s.indexOf(void 0)!==-1)throw new Error(`unresolved input detected: op: ${l.node}`);let h=s;ce.verbose("ExecPlan",`Runing op:${l.node.name} (${h.map((b,v)=>`'${l.node.inputs[v]}': ${b.type}[${b.dims.join(",")}]`).join(", ")})`);let d=await this.profiler.event("node",l.node.name,async()=>l.op.impl(a,h,l.op.context));if(d.length!==l.node.outputs.length)throw new Error("the size of output does not match model definition.");d.forEach((b,v)=>{let O=l.node.outputs[v];if(this._values[O])throw new Error(`output [${O}] already has value: op:${l.node.name}`);this._values[O]=b});let m=new Set;d.forEach((b,v)=>{let O=l.node.outputs[v];for(let T of n[O].to){let E=o[T],$=!0;for(let C of E.inputs)if(!this._values[C]){$=!1;break}$&&m.add(T)}}),u.push(...m)}let p=[];for(let r=0;r<this.graph.getOutputIndices().length;r++){let l=this.graph.getOutputIndices()[r],s=this._values[l];if(s===void 0)throw new Error(`required output [${l}] does not have value`);l===0?await s.getData():s.data,p.push(s)}return ce.verbose("ExecPlan","disposing of inferenceHandler"),a.dispose(),p})}}}),oe,bt,mn,gp=L(()=>{tn(),oe=Ar(Cr()),yr(),fe(),bt=V.experimental.fbs,mn=class or{constructor(t){if(this._attributes=new Map,t!=null){for(let a of t)a instanceof oe.onnx.AttributeProto?this._attributes.set(a.name,[or.getValue(a),or.getType(a)]):a instanceof bt.Attribute&&this._attributes.set(a.name(),[or.getValue(a),or.getType(a)]);if(this._attributes.size<t.length)throw new Error("duplicated attribute names")}}set(t,a,i){this._attributes.set(t,[i,a])}delete(t){this._attributes.delete(t)}getFloat(t,a){return this.get(t,"float",a)}getInt(t,a){return this.get(t,"int",a)}getString(t,a){return this.get(t,"string",a)}getTensor(t,a){return this.get(t,"tensor",a)}getFloats(t,a){return this.get(t,"floats",a)}getInts(t,a){return this.get(t,"ints",a)}getStrings(t,a){return this.get(t,"strings",a)}getTensors(t,a){return this.get(t,"tensors",a)}get(t,a,i){let u=this._attributes.get(t);if(u===void 0){if(i!==void 0)return i;throw new Error(`required attribute not found: ${t}`)}if(u[1]!==a)throw new Error(`type mismatch: expected ${a} but got ${u[1]}`);return u[0]}static getType(t){let a=t instanceof oe.onnx.AttributeProto?t.type:t.type();switch(a){case oe.onnx.AttributeProto.AttributeType.FLOAT:return"float";case oe.onnx.AttributeProto.AttributeType.INT:return"int";case oe.onnx.AttributeProto.AttributeType.STRING:return"string";case oe.onnx.AttributeProto.AttributeType.TENSOR:return"tensor";case oe.onnx.AttributeProto.AttributeType.FLOATS:return"floats";case oe.onnx.AttributeProto.AttributeType.INTS:return"ints";case oe.onnx.AttributeProto.AttributeType.STRINGS:return"strings";case oe.onnx.AttributeProto.AttributeType.TENSORS:return"tensors";default:throw new Error(`attribute type is not supported yet: ${oe.onnx.AttributeProto.AttributeType[a]}`)}}static getValue(t){let a=t instanceof oe.onnx.AttributeProto?t.type:t.type();if(a===oe.onnx.AttributeProto.AttributeType.GRAPH||a===oe.onnx.AttributeProto.AttributeType.GRAPHS)throw new Error("graph attribute is not supported yet");let i=this.getValueNoCheck(t);if(a===oe.onnx.AttributeProto.AttributeType.INT&&it.isLong(i))return it.longToNumber(i);if(a===oe.onnx.AttributeProto.AttributeType.INTS){let u=i,n=new Array(u.length);for(let o=0;o<u.length;o++){let c=u[o];n[o]=it.longToNumber(c)}return n}if(a===oe.onnx.AttributeProto.AttributeType.TENSOR)return t instanceof oe.onnx.AttributeProto?$e.fromProto(i):$e.fromOrtTensor(i);if(a===oe.onnx.AttributeProto.AttributeType.TENSORS){if(t instanceof oe.onnx.AttributeProto)return i.map(u=>$e.fromProto(u));if(t instanceof bt.Attribute)return i.map(u=>$e.fromOrtTensor(u))}return a===oe.onnx.AttributeProto.AttributeType.STRING&&t instanceof oe.onnx.AttributeProto?sn(i):a===oe.onnx.AttributeProto.AttributeType.STRINGS&&t instanceof oe.onnx.AttributeProto?i.map(sn):i}static getValueNoCheck(t){return t instanceof oe.onnx.AttributeProto?this.getValueNoCheckFromOnnxFormat(t):this.getValueNoCheckFromOrtFormat(t)}static getValueNoCheckFromOnnxFormat(t){switch(t.type){case oe.onnx.AttributeProto.AttributeType.FLOAT:return t.f;case oe.onnx.AttributeProto.AttributeType.INT:return t.i;case oe.onnx.AttributeProto.AttributeType.STRING:return t.s;case oe.onnx.AttributeProto.AttributeType.TENSOR:return t.t;case oe.onnx.AttributeProto.AttributeType.GRAPH:return t.g;case oe.onnx.AttributeProto.AttributeType.FLOATS:return t.floats;case oe.onnx.AttributeProto.AttributeType.INTS:return t.ints;case oe.onnx.AttributeProto.AttributeType.STRINGS:return t.strings;case oe.onnx.AttributeProto.AttributeType.TENSORS:return t.tensors;case oe.onnx.AttributeProto.AttributeType.GRAPHS:return t.graphs;default:throw new Error(`unsupported attribute type: ${oe.onnx.AttributeProto.AttributeType[t.type]}`)}}static getValueNoCheckFromOrtFormat(t){switch(t.type()){case bt.AttributeType.FLOAT:return t.f();case bt.AttributeType.INT:return t.i();case bt.AttributeType.STRING:return t.s();case bt.AttributeType.TENSOR:return t.t();case bt.AttributeType.GRAPH:return t.g();case bt.AttributeType.FLOATS:return t.floatsArray();case bt.AttributeType.INTS:{let a=[];for(let i=0;i<t.intsLength();i++)a.push(t.ints(i));return a}case bt.AttributeType.STRINGS:{let a=[];for(let i=0;i<t.stringsLength();i++)a.push(t.strings(i));return a}case bt.AttributeType.TENSORS:{let a=[];for(let i=0;i<t.tensorsLength();i++)a.push(t.tensors(i));return a}default:throw new Error(`unsupported attribute type: ${bt.AttributeType[t.type()]}`)}}}}),Xi,wo,Ki,Mt,vo,Yi,yp=L(()=>{gp(),tn(),Xi=Ar(Cr()),yr(),fe(),wo=V.experimental.fbs,Ki={from:(e,t)=>new Yi(e,t)},Mt=class{constructor(e){this._from=void 0,this._to=[],this.tensor=void 0,this.type=void 0,e&&(this.type=We.tensorValueTypeFromProto(e.type.tensorType))}get from(){return this._from}get to(){return this._to}},vo=class{constructor(e,t){e instanceof Xi.onnx.NodeProto?(this.name=e.name,this.opType=e.opType,this.attributes=new mn(e.attribute)):e instanceof wo.Node&&(this.name=t??e.name(),this.opType=e.opType(),this.attributes=new mn(We.tensorAttributesFromORTFormat(e))),this.inputs=[],this.outputs=[],this.executeNode=!0}},Yi=class{constructor(e,t){if(!e)throw new TypeError("graph is empty");this.buildGraph(e),this.transformGraph(t),this.checkIsAcyclic()}getInputIndices(){return this._allInputIndices}getInputNames(){return this._allInputNames}getOutputIndices(){return this._allOutputIndices}getOutputNames(){return this._allOutputNames}getValues(){return this._allData}getNodes(){return this._nodes}buildGraph(e){if(e instanceof Xi.onnx.GraphProto)this.buildGraphFromOnnxFormat(e);else if(e instanceof wo.Graph)this.buildGraphFromOrtFormat(e);else throw new TypeError("Graph type is not supported.")}buildGraphFromOnnxFormat(e){let t=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];let a=new Map;if(!e.input)throw new Error("missing information in graph: input");let i=[];for(let u of e.input){if(t.has(u.name))throw new Error(`duplicated input name: ${u.name}`);let n=this._allData.push(new Mt(u))-1;t.set(u.name,n),i.push(u.name)}if(!e.initializer)throw new Error("missing information in graph: initializer");for(let u of e.initializer){let n=t.get(u.name);if(n===void 0){let o=new Mt;o.type={shape:{dims:We.tensorDimsFromProto(u.dims)},tensorType:We.tensorDataTypeFromProto(u.dataType)},n=this._allData.push(o)-1,t.set(u.name,n)}this._allData[n]._from=-1,this._allData[n].tensor=$e.fromProto(u)}for(let u=0;u<this._allData.length;u++)this._allData[u].tensor||(this._allInputIndices.push(u),this._allInputNames.push(i[u]));if(!e.output)throw new Error("missing information in graph: output");for(let u of e.output){if(t.has(u.name))throw new Error(`duplicated output name: ${u.name}`);let n=this._allData.push(new Mt(u))-1;t.set(u.name,n),this._allOutputIndices.push(n),this._allOutputNames.push(u.name)}if(!e.node)throw new Error("missing information in graph: node");for(let u of e.node){if(!u.name)for(let o=0;;o++){let c=`unnamed_${u.opType}_${o}`;if(!a.has(c)){u.name=c;break}}if(a.has(u.name))throw new Error(`duplicated node name: ${u.name}`);let n=this._nodes.push(new vo(u))-1;a.set(u.name,n)}for(let u=0;u<this._nodes.length;u++){let n=this._nodes[u],o=e.node[u];if(!o.output)throw new Error(`missing output for node: ${o.name}`);for(let c of o.output){let p=t.get(c);if(typeof p>"u"&&(p=this._allData.push(new Mt)-1,t.set(c,p)),n.outputs.push(p),this._allData[p]._from!==void 0)throw new Error(`multiple nodes output to one data value: ${p}`);if(this._allData[p]._from=u,o.opType==="Constant"){if(!o.attribute||o.attribute.length!==1||!o.attribute[0].t)throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(!o.output||o.output.length!==1)throw new Error("missing output or incorrect number of outputs for this Constant operator");n.outputs.pop(),n.executeNode=!1,this._allData[p]._from=-1,this._allData[p].tensor=$e.fromProto(o.attribute[0].t)}}}for(let u=0;u<this._nodes.length;u++){let n=this._nodes[u],o=e.node[u];if(!o.input)throw new Error(`missing input for node: ${o.name}`);for(let c of o.input){let p=t.get(c);if(typeof p>"u"){if(c===""&&(o.input.length===3||o.input.length===4)&&o.opType==="Resize")continue;throw new Error(`unrecognized input '${c}' for node: ${o.name}`)}n.inputs.push(p),this._allData[p]._to.push(u)}}return!0}buildGraphFromOrtFormat(e){var u,n,o;let t=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];let a=new Map,i=[];for(let c=0;c<e.inputsLength();c++){let p=e.inputs(c);if(t.has(p))throw new Error(`duplicated input name: ${p}`);for(let r=0;r<e.nodeArgsLength();r++)if(((u=e.nodeArgs(r))==null?void 0:u.name())===p){let l=new Mt;if(((o=(n=e.nodeArgs(r))==null?void 0:n.type())==null?void 0:o.valueType())!==wo.TypeInfoValue.tensor_type)throw new Error("Unexpected value type for the nodeArg.");let s=e.nodeArgs(r).type().value(new wo.TensorTypeAndShape),h=We.tensorDataTypeFromProto(s.elemType()),d=s.shape(),m=[];for(let v=0;v<d.dimLength();v++)m.push(it.longToNumber(d.dim(v).value().dimValue()));l.type={shape:{dims:m},tensorType:h};let b=this._allData.push(l)-1;t.set(p,b),i.push(p)}}for(let c=0;c<e.initializersLength();c++){let p=e.initializers(c),r=t.get(p.name());if(r===void 0){let l=new Mt,s=We.tensorDimsFromORTFormat(p),h=We.tensorDataTypeFromProto(p.dataType());l.type={shape:{dims:s},tensorType:h},r=this._allData.push(l)-1,t.set(p.name(),r)}this._allData[r]._from=-1,this._allData[r].tensor=$e.fromOrtTensor(p)}for(let c=0;c<this._allData.length;c++)this._allData[c].tensor||(this._allInputIndices.push(c),this._allInputNames.push(i[c]));for(let c=0;c<e.outputsLength();c++){let p=e.outputs(c);if(t.has(p))throw new Error(`duplicated output name: ${p}`);let r=this._allData.push(new Mt)-1;t.set(p,r),this._allOutputIndices.push(r),this._allOutputNames.push(p)}if(!e.nodes)throw new Error("missing information in graph: node");for(let c=0;c<e.nodesLength();c++){let p=e.nodes(c),r=p.name();if(!r)for(let s=0;r=`unnamed_${p.opType()}_${s}`,!!a.has(r);s++);if(a.has(r))throw new Error(`duplicated node name: ${r}`);let l=this._nodes.push(new vo(p,r))-1;a.set(r,l)}for(let c=0;c<this._nodes.length;c++){let p=this._nodes[c],r=e.nodes(c);if(r==null)throw new Error(`No node exists at index ${c}`);if((r==null?void 0:r.outputsLength())===0)throw new Error(`missing output for node: ${r.name}`);for(let l=0;l<(r==null?void 0:r.outputsLength());l++){let s=r==null?void 0:r.outputs(l),h=t.get(s);if(typeof h>"u"&&(h=this._allData.push(new Mt)-1,t.set(s,h)),p.outputs.push(h),this._allData[h]._from!==void 0)throw new Error(`multiple nodes output to one data value: ${h}`);if(this._allData[h]._from=c,r.opType()==="Constant"){if(r.attributesLength()!==1||!r.attributes(0).t())throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(r.outputsLength()!==1)throw new Error("missing output or incorrect number of outputs for this Constant operator");p.outputs.pop(),p.executeNode=!1,this._allData[h]._from=-1,this._allData[h].tensor=$e.fromOrtTensor(r.attributes(0).t())}}}for(let c=0;c<this._nodes.length;c++){let p=this._nodes[c],r=e.nodes(c);if(r.inputsLength()===0)throw new Error(`missing input for node: ${r.name}`);for(let l=0;l<r.inputsLength();l++){let s=r.inputs(l),h=t.get(s);if(typeof h>"u")throw new Error(`unrecognized input '${s}' for node: ${r.name()}`);p.inputs.push(h),this._allData[h]._to.push(c)}}}checkIsAcyclic(){let e=new Set;this._allInputIndices.forEach(i=>{this._allData[i]._to.forEach(u=>{e.add(u)})});let t=Array.from(e),a=new Array(this._nodes.length).fill("white");for(;t.length>0;){let i=t.pop();a[i]==="gray"?a[i]="black":(t.push(i),a[i]="gray",this._nodes[i].outputs.forEach(u=>{let n=this._allData[u];if(typeof n.tensor<"u")throw new Error("node outputs should not be initialized");if(n._from!==i)throw new Error("from property of the Value object doesn't match index of Node being processed");n._to.forEach(o=>{if(a[o]==="gray")throw new Error("model graph is cyclic");a[o]==="white"&&t.push(o)})}))}}transformGraph(e){this.removeAllIdentityNodes(),this.removeAllDropoutNodes(),this.fuseConvActivationNodes(),e&&e.transformGraph(this),this.finalizeGraph()}finalizeGraph(){let e=0,t=new Array(this._nodes.length,0),a=0;for(let i=0;i<this._nodes.length;i++)t[i]=a,this._nodes[i].executeNode?(a!==i&&(this._nodes[a]=this._nodes[i]),a++):this._nodes[i].outputs.forEach(u=>{this._allData[u]._from=-2});this._nodes.splice(a,this._nodes.length-a);for(let i=0;i<this._allData.length;i++){let u=this._allData[i];u._from!==void 0&&u._from!==-1&&u._from!==-2&&(u._from=t[u._from]);for(let n=0;n<u._to.length;n++)if(u._to[n]>=0)u._to[n]=t[u._to[n]];else throw new Error("Trying to update a removed node")}e=0;for(let i=0;i<this._allData.length;i++){if(this._allData[i].from===-2&&this._allOutputIndices.indexOf(i+e)===-1){e++,this._allData.splice(i,1),i--;continue}if(e>0){let u=-1;this._allData[i].from!==void 0&&this._allData[i].from!==-1?(u=this._nodes[this._allData[i].from].outputs.indexOf(i+e),u!==-1&&(this._nodes[this._allData[i].from].outputs[u]=i)):(u=this._allInputIndices.indexOf(i+e),u!==-1&&(this._allInputIndices[u]=i)),this._allData[i].to.forEach(n=>{u=this._nodes[n].inputs.indexOf(i+e),u!==-1&&(this._nodes[n].inputs[u]=i)}),this._allData[i].to.length===0&&(u=this._allOutputIndices.indexOf(i+e),u!==-1&&(this._allOutputIndices[u]=i))}}}deleteNode(e){let t=this._nodes[e];if(t.outputs.length>1){for(let o=1;o<t.outputs.length;o++)if(this._allData[t.outputs[o]].to.length>0)throw new Error("Node deletion with more than one output connected to other nodes is not supported. ")}t.executeNode=!1;let a=t.inputs[0],i=t.outputs[0],u=this._allData[i].to;for(let o=0;o<t.inputs.length;o++){let c=this._allData[t.inputs[o]].to.indexOf(e);if(c===-1)throw new Error("The Value object doesn't have the current Node in it's 'to' property ");this._allData[t.inputs[o]].to.splice(c,1)}this._allData[i]._to=[];let n=this._allOutputIndices.indexOf(i);if(n!==-1&&(this._allOutputIndices[n]=a),u&&u.length>0)for(let o of u){let c=this._nodes[o].inputs.indexOf(i);if(c===-1)throw new Error("The Node object doesn't have the output Value in it's 'inputs' property ");this._nodes[o].inputs[c]=a,this._allData[a].to.push(o)}}removeAllDropoutNodes(){let e=0;for(let t of this._nodes){if(t.opType==="Dropout"){if(t.inputs.length!==1)throw new Error("Dropout nodes should only contain one input. ");if(t.outputs.length!==1&&t.outputs.length!==2)throw new Error("Dropout nodes should contain either 1 or 2 output(s)");if(t.outputs.length===2&&this._allData[t.outputs[1]]._to.length!==0)throw new Error("Dropout nodes's second output should not be referenced by other nodes");this.deleteNode(e)}e++}}removeAllIdentityNodes(){let e=0;for(let t of this._nodes)t.opType==="Identity"&&this.deleteNode(e),e++}isActivation(e){switch(e.opType){case"Relu":case"Sigmoid":case"Clip":return!0;default:return!1}}fuseConvActivationNodes(){for(let e of this._nodes)if(e.opType==="Conv"){let t=this._allData[e.outputs[0]]._to;if(t.length===1&&this.isActivation(this._nodes[t[0]])){let a=this._nodes[t[0]];if(a.opType==="Clip")if(a.inputs.length===1)try{e.attributes.set("activation_params","floats",[a.attributes.getFloat("min"),a.attributes.getFloat("max")])}catch{e.attributes.set("activation_params","floats",[br,gr])}else if(a.inputs.length>=3&&this._allData[a.inputs[1]].tensor!==void 0&&this._allData[a.inputs[2]].tensor!==void 0)e.attributes.set("activation_params","floats",[this._allData[a.inputs[1]].tensor.floatData[0],this._allData[a.inputs[2]].tensor.floatData[0]]);else continue;e.attributes.set("activation","string",a.opType),this.deleteNode(t[0])}}}}}),Tp,Qb,_o,xp=L(()=>{zn(),yp(),tn(),Tp=Ar(Cr()),fe(),Qb=V.experimental.fbs,_o=class{constructor(){}load(e,t,a){let i;if(!a)try{this.loadFromOnnxFormat(e,t);return}catch(u){if(a!==void 0)throw u;i=u}try{this.loadFromOrtFormat(e,t)}catch(u){throw a!==void 0?u:new Error(`Failed to load model as ONNX format: ${i}
as ORT format: ${u}`)}}loadFromOnnxFormat(e,t){let a=Tp.onnx.ModelProto.decode(e);if(it.longToNumber(a.irVersion)<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=a.opsetImport.map(i=>({domain:i.domain,version:it.longToNumber(i.version)})),this._graph=Ki.from(a.graph,t)}loadFromOrtFormat(e,t){let a=new _.ByteBuffer(e),i=Qb.InferenceSession.getRootAsInferenceSession(a).model();if(it.longToNumber(i.irVersion())<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=[];for(let u=0;u<i.opsetImportLength();u++){let n=i.opsetImport(u);this._opsets.push({domain:n==null?void 0:n.domain(),version:it.longToNumber(n.version())})}this._graph=Ki.from(i.graph(),t)}get graph(){return this._graph}get opsets(){return this._opsets}}}),Oo,wp=L(()=>{mp(),bp(),lt(),xp(),Oo=class{constructor(e={}){this._initialized=!1,this.backendHint=e.backendHint,this.profiler=Gn.create(e.profiler),this.context={profiler:this.profiler,graphInputTypes:[],graphInputDims:[]}}get inputNames(){return this._model.graph.getInputNames()}get outputNames(){return this._model.graph.getOutputNames()}startProfiling(){this.profiler.start()}endProfiling(){this.profiler.stop()}async loadModel(e,t,a){await this.profiler.event("session","Session.loadModel",async()=>{let i=await qi(this.backendHint);if(this.sessionHandler=i.createSessionHandler(this.context),this._model=new _o,typeof e=="string"){let u=e.endsWith(".ort");if(typeof process<"u"&&process.versions&&process.versions.node){let n=await(void 0)(e);this.initialize(n,u)}else{let n=await(await fetch(e)).arrayBuffer();this.initialize(new Uint8Array(n),u)}}else if(ArrayBuffer.isView(e))this.initialize(e);else{let u=new Uint8Array(e,t||0,a||e.byteLength);this.initialize(u)}})}initialize(e,t){if(this._initialized)throw new Error("already initialized");this.profiler.event("session","Session.initialize",()=>{let a=this.sessionHandler.transformGraph?this.sessionHandler:void 0;this._model.load(e,a,t),this.sessionHandler.onGraphInitialized&&this.sessionHandler.onGraphInitialized(this._model.graph),this.initializeOps(this._model.graph),this._executionPlan=new xo(this._model.graph,this._ops,this.profiler)}),this._initialized=!0}async run(e){if(!this._initialized)throw new Error("session not initialized yet");return this.profiler.event("session","Session.run",async()=>{let t=this.normalizeAndValidateInputs(e),a=await this._executionPlan.execute(this.sessionHandler,t);return this.createOutput(a)})}normalizeAndValidateInputs(e){let t=this._model.graph.getInputNames();if(Array.isArray(e)){if(e.length!==t.length)throw new Error(`incorrect input array length: expected ${t.length} but got ${e.length}`)}else{if(e.size!==t.length)throw new Error(`incorrect input map size: expected ${t.length} but got ${e.size}`);let a=new Array(e.size),i=0;for(let u=0;u<t.length;++u){let n=e.get(t[u]);if(!n)throw new Error(`missing input tensor for: '${name}'`);a[i++]=n}e=a}if(!this.context.graphInputTypes||this.context.graphInputTypes.length===0||!this.context.graphInputDims||this.context.graphInputDims.length===0){let a=this._model.graph.getInputIndices(),i=this._model.graph.getValues(),u=new Array(a.length);for(let n=0;n<a.length;++n){let o=i[a[n]];u[n]=o.type.shape.dims,this.context.graphInputTypes.push(o.type.tensorType),this.context.graphInputDims.push(e[n].dims)}this.validateInputTensorDims(u,e,!0)}else this.validateInputTensorDims(this.context.graphInputDims,e,!1);return this.validateInputTensorTypes(this.context.graphInputTypes,e),e}validateInputTensorTypes(e,t){for(let a=0;a<t.length;a++){let i=e[a],u=t[a].type;if(i!==u)throw new Error(`input tensor[${a}] check failed: expected type '${i}' but got ${u}`)}}validateInputTensorDims(e,t,a){for(let i=0;i<t.length;i++){let u=e[i],n=t[i].dims;if(!this.compareTensorDims(u,n,a))throw new Error(`input tensor[${i}] check failed: expected shape '[${u.join(",")}]' but got [${n.join(",")}]`)}}compareTensorDims(e,t,a){if(e.length!==t.length)return!1;for(let i=0;i<e.length;++i)if(e[i]!==t[i]&&(!a||e[i]!==0))return!1;return!0}createOutput(e){let t=this._model.graph.getOutputNames();if(e.length!==t.length)throw new Error("expected number of outputs do not match number of generated outputs");let a=new Map;for(let i=0;i<t.length;++i)a.set(t[i],e[i]);return a}initializeOps(e){let t=e.getNodes();this._ops=new Array(t.length);for(let a=0;a<t.length;a++)this._ops[a]=this.sessionHandler.resolve(t[a],this._model.opsets,e)}}}),Io,vp=L(()=>{Ot(),yr(),Io=class{constructor(e){this.session=e,this.inputNames=this.session.inputNames,this.outputNames=this.session.outputNames}async dispose(){}async run(e,t,a){let i=new Map;for(let o in e)if(Object.hasOwnProperty.call(e,o)){let c=e[o];i.set(o,new $e(c.dims,c.type,void 0,void 0,c.data))}let u=await this.session.run(i),n={};return u.forEach((o,c)=>{n[c]=new Me(o.type,o.data,o.dims)}),n}startProfiling(){this.session.startProfiling()}endProfiling(){this.session.endProfiling()}}}),_p={};Sr(_p,{onnxjsBackend:()=>tg});var Ji,tg,Op=L(()=>{wp(),vp(),Ji=class{async init(){}async createInferenceSessionHandler(e,t){let a=new Oo(t);return typeof e=="string"?await a.loadModel(e):await a.loadModel(e),new Io(a)}},tg=new Ji}),Zi={};Sr(Zi,{createReadStream:()=>Ip,readFile:()=>rg,readFileSync:()=>ng});var rg,ng,Ip,Qi=L(()=>{rg=void 0,ng=void 0,Ip=void 0}),ea={};Sr(ea,{join:()=>og});var og,ta=L(()=>{og=void 0}),Pp=me((e,t)=>{var a=(()=>{var u;var i=typeof document<"u"?(u=document.currentScript)==null?void 0:u.src:void 0;return typeof __filename<"u"&&(i||(i=__filename)),function(n={}){var o=n,c,p,r=new Promise((g,x)=>{c=g,p=x}),l=Object.assign({},o),s="./this.program",h=typeof window=="object",d=typeof importScripts=="function",m=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",b="",v,O,T;if(m){var E=(Qi(),ar(Zi)),$=(ta(),ar(ea));b=d?$.dirname(b)+"/":__dirname+"/",v=(g,x)=>(g=Ie(g)?new URL(g):$.normalize(g),E.readFileSync(g,x?void 0:"utf8")),T=g=>(g=v(g,!0),g.buffer||(g=new Uint8Array(g)),g),O=(g,x,S,N=!0)=>{g=Ie(g)?new URL(g):$.normalize(g),E.readFile(g,N?void 0:"utf8",(F,q)=>{F?S(F):x(N?q.buffer:q)})},!o.thisProgram&&1<process.argv.length&&(s=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2)}else(h||d)&&(d?b=self.location.href:typeof document<"u"&&document.currentScript&&(b=document.currentScript.src),i&&(b=i),b.startsWith("blob:")?b="":b=b.substr(0,b.replace(/[?#].*/,"").lastIndexOf("/")+1),v=g=>{var x=new XMLHttpRequest;return x.open("GET",g,!1),x.send(null),x.responseText},d&&(T=g=>{var x=new XMLHttpRequest;return x.open("GET",g,!1),x.responseType="arraybuffer",x.send(null),new Uint8Array(x.response)}),O=(g,x,S)=>{var N=new XMLHttpRequest;N.open("GET",g,!0),N.responseType="arraybuffer",N.onload=()=>{N.status==200||N.status==0&&N.response?x(N.response):S()},N.onerror=S,N.send(null)});var C=console.log.bind(console),P=console.error.bind(console);Object.assign(o,l),l=null;var G,te=!1,xe,K,j,ie,He;function pe(){var g=G.buffer;o.HEAP8=xe=new Int8Array(g),o.HEAP16=new Int16Array(g),o.HEAPU8=K=new Uint8Array(g),o.HEAPU16=new Uint16Array(g),o.HEAP32=j=new Int32Array(g),o.HEAPU32=ie=new Uint32Array(g),o.HEAPF32=new Float32Array(g),o.HEAPF64=He=new Float64Array(g)}var he=[],W=[],ge=[],Ce=0,Ne=null;function Ge(g){throw g="Aborted("+g+")",P(g),te=!0,g=new WebAssembly.RuntimeError(g+". Build with -sASSERTIONS for more info."),p(g),g}var se=g=>g.startsWith("data:application/octet-stream;base64,"),Ie=g=>g.startsWith("file://"),qe;if(qe="ort-wasm.wasm",!se(qe)){var at=qe;qe=o.locateFile?o.locateFile(at,b):b+at}function yt(g){if(T)return T(g);throw"both async and sync fetching of the wasm failed"}function Ve(g){if(h||d){if(typeof fetch=="function"&&!Ie(g))return fetch(g,{credentials:"same-origin"}).then(x=>{if(!x.ok)throw`failed to load wasm binary file at '${g}'`;return x.arrayBuffer()}).catch(()=>yt(g));if(O)return new Promise((x,S)=>{O(g,N=>x(new Uint8Array(N)),S)})}return Promise.resolve().then(()=>yt(g))}function ot(g,x,S){return Ve(g).then(N=>WebAssembly.instantiate(N,x)).then(S,N=>{P(`failed to asynchronously prepare wasm: ${N}`),Ge(N)})}function Re(g,x){var S=qe;return typeof WebAssembly.instantiateStreaming!="function"||se(S)||Ie(S)||m||typeof fetch!="function"?ot(S,g,x):fetch(S,{credentials:"same-origin"}).then(N=>WebAssembly.instantiateStreaming(N,g).then(x,function(F){return P(`wasm streaming compile failed: ${F}`),P("falling back to ArrayBuffer instantiation"),ot(S,g,x)}))}var ke,je={798088:(g,x,S,N)=>{if(typeof o>"u"||!o.ya)return 1;if(g=J(g>>>0),g.startsWith("./")&&(g=g.substring(2)),g=o.ya.get(g),!g)return 2;if(x>>>=0,S>>>=0,x+S>g.byteLength)return 3;try{return K.set(g.subarray(x,x+S),N>>>0>>>0),0}catch{return 4}}};class Te{constructor(x){this.wa=x-24}}var Se=0,_t=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,xt=(g,x,S)=>{x>>>=0;var N=x+S;for(S=x;g[S]&&!(S>=N);)++S;if(16<S-x&&g.buffer&&_t)return _t.decode(g.subarray(x,S));for(N="";x<S;){var F=g[x++];if(F&128){var q=g[x++]&63;if((F&224)==192)N+=String.fromCharCode((F&31)<<6|q);else{var re=g[x++]&63;F=(F&240)==224?(F&15)<<12|q<<6|re:(F&7)<<18|q<<12|re<<6|g[x++]&63,65536>F?N+=String.fromCharCode(F):(F-=65536,N+=String.fromCharCode(55296|F>>10,56320|F&1023))}}else N+=String.fromCharCode(F)}return N},J=(g,x)=>(g>>>=0)?xt(K,g,x):"",ue=g=>{for(var x=0,S=0;S<g.length;++S){var N=g.charCodeAt(S);127>=N?x++:2047>=N?x+=2:55296<=N&&57343>=N?(x+=4,++S):x+=3}return x},de=(g,x,S,N)=>{if(S>>>=0,!(0<N))return 0;var F=S;N=S+N-1;for(var q=0;q<g.length;++q){var re=g.charCodeAt(q);if(55296<=re&&57343>=re){var ze=g.charCodeAt(++q);re=65536+((re&1023)<<10)|ze&1023}if(127>=re){if(S>=N)break;x[S++>>>0]=re}else{if(2047>=re){if(S+1>=N)break;x[S++>>>0]=192|re>>6}else{if(65535>=re){if(S+2>=N)break;x[S++>>>0]=224|re>>12}else{if(S+3>=N)break;x[S++>>>0]=240|re>>18,x[S++>>>0]=128|re>>12&63}x[S++>>>0]=128|re>>6&63}x[S++>>>0]=128|re&63}}return x[S>>>0]=0,S-F},st=g=>g%4===0&&(g%100!==0||g%400===0),Ye=[0,31,60,91,121,152,182,213,244,274,305,335],Ke=[0,31,59,90,120,151,181,212,243,273,304,334],Tt=[],pt={},Gt=()=>{if(!Lt){var g={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:s||"./this.program"},x;for(x in pt)pt[x]===void 0?delete g[x]:g[x]=pt[x];var S=[];for(x in g)S.push(`${x}=${g[x]}`);Lt=S}return Lt},Lt,qt=[null,[],[]],Yt=[31,29,31,30,31,30,31,31,30,31,30,31],Pt=[31,28,31,30,31,30,31,31,30,31,30,31];function Xr(g){var x=Array(ue(g)+1);return de(g,x,0,x.length),x}function Ae(g,x,S,N){function F(D,Oe,Le){for(D=typeof D=="number"?D.toString():D||"";D.length<Oe;)D=Le[0]+D;return D}function q(D,Oe){return F(D,Oe,"0")}function re(D,Oe){function Le(tr){return 0>tr?-1:0<tr?1:0}var At;return(At=Le(D.getFullYear()-Oe.getFullYear()))===0&&(At=Le(D.getMonth()-Oe.getMonth()))===0&&(At=Le(D.getDate()-Oe.getDate())),At}function ze(D){switch(D.getDay()){case 0:return new Date(D.getFullYear()-1,11,29);case 1:return D;case 2:return new Date(D.getFullYear(),0,3);case 3:return new Date(D.getFullYear(),0,2);case 4:return new Date(D.getFullYear(),0,1);case 5:return new Date(D.getFullYear()-1,11,31);case 6:return new Date(D.getFullYear()-1,11,30)}}function wt(D){var Oe=D.sa;for(D=new Date(new Date(D.ta+1900,0,1).getTime());0<Oe;){var Le=D.getMonth(),At=(st(D.getFullYear())?Yt:Pt)[Le];if(Oe>At-D.getDate())Oe-=At-D.getDate()+1,D.setDate(1),11>Le?D.setMonth(Le+1):(D.setMonth(0),D.setFullYear(D.getFullYear()+1));else{D.setDate(D.getDate()+Oe);break}}return Le=new Date(D.getFullYear()+1,0,4),Oe=ze(new Date(D.getFullYear(),0,4)),Le=ze(Le),0>=re(Oe,D)?0>=re(Le,D)?D.getFullYear()+1:D.getFullYear():D.getFullYear()-1}g>>>=0,x>>>=0,S>>>=0,N>>>=0;var et=ie[N+40>>>2>>>0];N={Ba:j[N>>>2>>>0],Aa:j[N+4>>>2>>>0],ua:j[N+8>>>2>>>0],xa:j[N+12>>>2>>>0],va:j[N+16>>>2>>>0],ta:j[N+20>>>2>>>0],na:j[N+24>>>2>>>0],sa:j[N+28>>>2>>>0],Da:j[N+32>>>2>>>0],za:j[N+36>>>2>>>0],Ca:et?J(et):""},S=J(S),et={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var tt in et)S=S.replace(new RegExp(tt,"g"),et[tt]);var Zt="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),Ct="January February March April May June July August September October November December".split(" ");et={"%a":D=>Zt[D.na].substring(0,3),"%A":D=>Zt[D.na],"%b":D=>Ct[D.va].substring(0,3),"%B":D=>Ct[D.va],"%C":D=>q((D.ta+1900)/100|0,2),"%d":D=>q(D.xa,2),"%e":D=>F(D.xa,2," "),"%g":D=>wt(D).toString().substring(2),"%G":wt,"%H":D=>q(D.ua,2),"%I":D=>(D=D.ua,D==0?D=12:12<D&&(D-=12),q(D,2)),"%j":D=>{for(var Oe=0,Le=0;Le<=D.va-1;Oe+=(st(D.ta+1900)?Yt:Pt)[Le++]);return q(D.xa+Oe,3)},"%m":D=>q(D.va+1,2),"%M":D=>q(D.Aa,2),"%n":()=>`
`,"%p":D=>0<=D.ua&&12>D.ua?"AM":"PM","%S":D=>q(D.Ba,2),"%t":()=>"	","%u":D=>D.na||7,"%U":D=>q(Math.floor((D.sa+7-D.na)/7),2),"%V":D=>{var Oe=Math.floor((D.sa+7-(D.na+6)%7)/7);if(2>=(D.na+371-D.sa-2)%7&&Oe++,Oe)Oe==53&&(Le=(D.na+371-D.sa)%7,Le==4||Le==3&&st(D.ta)||(Oe=1));else{Oe=52;var Le=(D.na+7-D.sa-1)%7;(Le==4||Le==5&&st(D.ta%400-1))&&Oe++}return q(Oe,2)},"%w":D=>D.na,"%W":D=>q(Math.floor((D.sa+7-(D.na+6)%7)/7),2),"%y":D=>(D.ta+1900).toString().substring(2),"%Y":D=>D.ta+1900,"%z":D=>{D=D.za;var Oe=0<=D;return D=Math.abs(D)/60,(Oe?"+":"-")+("0000"+(D/60*100+D%60)).slice(-4)},"%Z":D=>D.Ca,"%%":()=>"%"},S=S.replace(/%%/g,"\0\0");for(tt in et)S.includes(tt)&&(S=S.replace(new RegExp(tt,"g"),et[tt](N)));return S=S.replace(/\0\0/g,"%"),tt=Xr(S),tt.length>x?0:(xe.set(tt,g>>>0),tt.length-1)}var pr={a:function(g,x,S){g>>>=0;var N=new Te(g);throw ie[N.wa+16>>>2>>>0]=0,ie[N.wa+4>>>2>>>0]=x>>>0,ie[N.wa+8>>>2>>>0]=S>>>0,Se=g,Se},e:function(){return 0},H:function(){},x:function(){},z:function(){},J:function(){return 0},F:function(){},A:function(){},E:function(){},g:function(){},y:function(){},v:function(){},G:function(){},w:function(){},k:()=>1,I:function(g,x,S){return x>>>=0,K.copyWithin(g>>>0>>>0,x>>>0,x+(S>>>0)>>>0)},n:function(g,x,S){g=x+2097152>>>0<4194305-!!g?(g>>>0)+4294967296*x:NaN,S>>>=0,g=new Date(1e3*g),j[S>>>2>>>0]=g.getUTCSeconds(),j[S+4>>>2>>>0]=g.getUTCMinutes(),j[S+8>>>2>>>0]=g.getUTCHours(),j[S+12>>>2>>>0]=g.getUTCDate(),j[S+16>>>2>>>0]=g.getUTCMonth(),j[S+20>>>2>>>0]=g.getUTCFullYear()-1900,j[S+24>>>2>>>0]=g.getUTCDay(),j[S+28>>>2>>>0]=(g.getTime()-Date.UTC(g.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},o:function(g,x,S){g=x+2097152>>>0<4194305-!!g?(g>>>0)+4294967296*x:NaN,S>>>=0,g=new Date(1e3*g),j[S>>>2>>>0]=g.getSeconds(),j[S+4>>>2>>>0]=g.getMinutes(),j[S+8>>>2>>>0]=g.getHours(),j[S+12>>>2>>>0]=g.getDate(),j[S+16>>>2>>>0]=g.getMonth(),j[S+20>>>2>>>0]=g.getFullYear()-1900,j[S+24>>>2>>>0]=g.getDay(),j[S+28>>>2>>>0]=(st(g.getFullYear())?Ye:Ke)[g.getMonth()]+g.getDate()-1|0,j[S+36>>>2>>>0]=-(60*g.getTimezoneOffset()),x=new Date(g.getFullYear(),6,1).getTimezoneOffset();var N=new Date(g.getFullYear(),0,1).getTimezoneOffset();j[S+32>>>2>>>0]=(x!=N&&g.getTimezoneOffset()==Math.min(N,x))|0},p:function(g){g>>>=0;var x=new Date(j[g+20>>>2>>>0]+1900,j[g+16>>>2>>>0],j[g+12>>>2>>>0],j[g+8>>>2>>>0],j[g+4>>>2>>>0],j[g>>>2>>>0],0),S=j[g+32>>>2>>>0],N=x.getTimezoneOffset(),F=new Date(x.getFullYear(),6,1).getTimezoneOffset(),q=new Date(x.getFullYear(),0,1).getTimezoneOffset(),re=Math.min(q,F);return 0>S?j[g+32>>>2>>>0]=+(F!=q&&re==N):0<S!=(re==N)&&(F=Math.max(q,F),x.setTime(x.getTime()+6e4*((0<S?re:F)-N))),j[g+24>>>2>>>0]=x.getDay(),j[g+28>>>2>>>0]=(st(x.getFullYear())?Ye:Ke)[x.getMonth()]+x.getDate()-1|0,j[g>>>2>>>0]=x.getSeconds(),j[g+4>>>2>>>0]=x.getMinutes(),j[g+8>>>2>>>0]=x.getHours(),j[g+12>>>2>>>0]=x.getDate(),j[g+16>>>2>>>0]=x.getMonth(),j[g+20>>>2>>>0]=x.getYear(),g=x.getTime(),g=isNaN(g)?-1:g/1e3,dr((ke=g,1<=+Math.abs(ke)?0<ke?+Math.floor(ke/4294967296)>>>0:~~+Math.ceil((ke-+(~~ke>>>0))/4294967296)>>>0:0)),g>>>0},l:function(){return-52},m:function(){},t:function(g,x,S,N){S>>>=0,N>>>=0;var F=new Date().getFullYear(),q=new Date(F,0,1),re=new Date(F,6,1);F=q.getTimezoneOffset();var ze=re.getTimezoneOffset();ie[g>>>0>>>2>>>0]=60*Math.max(F,ze),j[x>>>0>>>2>>>0]=+(F!=ze),g=wt=>wt.toLocaleTimeString(void 0,{hour12:!1,timeZoneName:"short"}).split(" ")[1],q=g(q),re=g(re),ze<F?(de(q,K,S,17),de(re,K,N,17)):(de(q,K,N,17),de(re,K,S,17))},d:()=>{Ge("")},B:function(g,x,S){g>>>=0,x>>>=0,S>>>=0,Tt.length=0;for(var N;N=K[x++>>>0];){var F=N!=105;F&=N!=112,S+=F&&S%8?4:0,Tt.push(N==112?ie[S>>>2>>>0]:N==105?j[S>>>2>>>0]:He[S>>>3>>>0]),S+=F?8:4}return je[g](...Tt)},h:()=>Date.now(),u:function(){return 4294901760},b:()=>performance.now(),s:function(g){g>>>=0;var x=K.length;if(4294901760<g)return!1;for(var S=1;4>=S;S*=2){var N=x*(1+.2/S);N=Math.min(N,g+100663296);var F=Math;N=Math.max(g,N);e:{F=(F.min.call(F,4294901760,N+(65536-N%65536)%65536)-G.buffer.byteLength+65535)/65536;try{G.grow(F),pe();var q=1;break e}catch{}q=void 0}if(q)return!0}return!1},C:function(g,x){g>>>=0,x>>>=0;var S=0;return Gt().forEach((N,F)=>{var q=x+S;for(F=ie[g+4*F>>>2>>>0]=q,q=0;q<N.length;++q)xe[F++>>>0]=N.charCodeAt(q);xe[F>>>0]=0,S+=N.length+1}),0},D:function(g,x){g>>>=0,x>>>=0;var S=Gt();ie[g>>>2>>>0]=S.length;var N=0;return S.forEach(F=>N+=F.length+1),ie[x>>>2>>>0]=N,0},f:()=>52,j:function(){return 52},q:function(){return 70},i:function(g,x,S,N){x>>>=0,S>>>=0,N>>>=0;for(var F=0,q=0;q<S;q++){var re=ie[x>>>2>>>0],ze=ie[x+4>>>2>>>0];x+=8;for(var wt=0;wt<ze;wt++){var et=K[re+wt>>>0],tt=qt[g];et===0||et===10?((g===1?C:P)(xt(tt,0)),tt.length=0):tt.push(et)}F+=ze}return ie[N>>>2>>>0]=F,0},r:Ae,c:function(g,x,S,N){return Ae(g>>>0,x>>>0,S>>>0,N>>>0)}},ee=function(){function g(S){return ee=S.exports,ee=jt(),G=ee.K,pe(),W.unshift(ee.L),Ce--,Ce==0&&Ne&&(S=Ne,Ne=null,S()),ee}var x={a:pr};if(Ce++,o.instantiateWasm)try{return o.instantiateWasm(x,g)}catch(S){P(`Module.instantiateWasm callback failed with error: ${S}`),p(S)}return Re(x,function(S){g(S.instance)}).catch(p),{}}();o._OrtInit=(g,x)=>(o._OrtInit=ee.M)(g,x),o._OrtGetLastError=(g,x)=>(o._OrtGetLastError=ee.N)(g,x),o._OrtCreateSessionOptions=(g,x,S,N,F,q,re,ze,wt,et)=>(o._OrtCreateSessionOptions=ee.O)(g,x,S,N,F,q,re,ze,wt,et),o._OrtAppendExecutionProvider=(g,x)=>(o._OrtAppendExecutionProvider=ee.P)(g,x),o._OrtAddFreeDimensionOverride=(g,x,S)=>(o._OrtAddFreeDimensionOverride=ee.Q)(g,x,S),o._OrtAddSessionConfigEntry=(g,x,S)=>(o._OrtAddSessionConfigEntry=ee.R)(g,x,S),o._OrtReleaseSessionOptions=g=>(o._OrtReleaseSessionOptions=ee.S)(g),o._OrtCreateSession=(g,x,S)=>(o._OrtCreateSession=ee.T)(g,x,S),o._OrtReleaseSession=g=>(o._OrtReleaseSession=ee.U)(g),o._OrtGetInputOutputCount=(g,x,S)=>(o._OrtGetInputOutputCount=ee.V)(g,x,S),o._OrtGetInputName=(g,x)=>(o._OrtGetInputName=ee.W)(g,x),o._OrtGetOutputName=(g,x)=>(o._OrtGetOutputName=ee.X)(g,x),o._OrtFree=g=>(o._OrtFree=ee.Y)(g),o._OrtCreateTensor=(g,x,S,N,F,q)=>(o._OrtCreateTensor=ee.Z)(g,x,S,N,F,q),o._OrtGetTensorData=(g,x,S,N,F)=>(o._OrtGetTensorData=ee._)(g,x,S,N,F),o._OrtReleaseTensor=g=>(o._OrtReleaseTensor=ee.$)(g),o._OrtCreateRunOptions=(g,x,S,N)=>(o._OrtCreateRunOptions=ee.aa)(g,x,S,N),o._OrtAddRunConfigEntry=(g,x,S)=>(o._OrtAddRunConfigEntry=ee.ba)(g,x,S),o._OrtReleaseRunOptions=g=>(o._OrtReleaseRunOptions=ee.ca)(g),o._OrtCreateBinding=g=>(o._OrtCreateBinding=ee.da)(g),o._OrtBindInput=(g,x,S)=>(o._OrtBindInput=ee.ea)(g,x,S),o._OrtBindOutput=(g,x,S,N)=>(o._OrtBindOutput=ee.fa)(g,x,S,N),o._OrtClearBoundOutputs=g=>(o._OrtClearBoundOutputs=ee.ga)(g),o._OrtReleaseBinding=g=>(o._OrtReleaseBinding=ee.ha)(g),o._OrtRunWithBinding=(g,x,S,N,F)=>(o._OrtRunWithBinding=ee.ia)(g,x,S,N,F),o._OrtRun=(g,x,S,N,F,q,re,ze)=>(o._OrtRun=ee.ja)(g,x,S,N,F,q,re,ze),o._OrtEndProfiling=g=>(o._OrtEndProfiling=ee.ka)(g),o._malloc=g=>(o._malloc=ee.la)(g),o._free=g=>(o._free=ee.ma)(g);var dr=g=>(dr=ee.oa)(g),Kt=g=>(Kt=ee.pa)(g),Or=g=>(Or=ee.qa)(g),X=()=>(X=ee.ra)();function jt(){var g=ee;g=Object.assign({},g);var x=S=>N=>S(N)>>>0;return g.la=x(g.la),g.qa=x(g.qa),g.ra=(S=>()=>S()>>>0)(g.ra),g}o.stackSave=()=>X(),o.stackRestore=g=>Kt(g),o.stackAlloc=g=>Or(g),o.UTF8ToString=J,o.stringToUTF8=(g,x,S)=>de(g,K,x,S),o.lengthBytesUTF8=ue;var kt;Ne=function g(){kt||Ft(),kt||(Ne=g)};function Ft(){if(!(0<Ce)){if(o.preRun)for(typeof o.preRun=="function"&&(o.preRun=[o.preRun]);o.preRun.length;){var g=o.preRun.shift();he.unshift(g)}for(;0<he.length;)he.shift()(o);if(!(0<Ce||kt||(kt=!0,o.calledRun=!0,te))){for(;0<W.length;)W.shift()(o);for(c(o);0<ge.length;)ge.shift()(o)}}}return Ft(),r}})();typeof e=="object"&&typeof t=="object"?t.exports=a:typeof define=="function"&&define.amd&&define([],()=>a)}),Ep=me(()=>{}),Dp=me(()=>{}),Lp={};Sr(Lp,{cpus:()=>ig});var ig,Cp=L(()=>{ig=void 0}),kp=me((e,t)=>{var a=(()=>{var u;var i=typeof document<"u"?(u=document.currentScript)==null?void 0:u.src:void 0;return typeof __filename<"u"&&(i||(i=__filename)),function(n={}){function o(){return ge.buffer!=se.buffer&&Ve(),se}function c(){return ge.buffer!=se.buffer&&Ve(),Ie}function p(){return ge.buffer!=se.buffer&&Ve(),qe}function r(){return ge.buffer!=se.buffer&&Ve(),at}function l(){return ge.buffer!=se.buffer&&Ve(),yt}var s=n,h,d,m=new Promise((f,y)=>{h=f,d=y}),b=Object.assign({},s),v="./this.program",O=(f,y)=>{throw y},T=typeof window=="object",E=typeof importScripts=="function",$=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",C=s.ENVIRONMENT_IS_PTHREAD||!1,P="";function G(f){return s.locateFile?s.locateFile(f,P):P+f}var te,xe,K;if($){var j=(Qi(),ar(Zi)),ie=(ta(),ar(ea));P=E?ie.dirname(P)+"/":__dirname+"/",te=(f,y)=>(f=ue(f)?new URL(f):ie.normalize(f),j.readFileSync(f,y?void 0:"utf8")),K=f=>(f=te(f,!0),f.buffer||(f=new Uint8Array(f)),f),xe=(f,y,w,A=!0)=>{f=ue(f)?new URL(f):ie.normalize(f),j.readFile(f,A?void 0:"utf8",(k,M)=>{k?w(k):y(A?M.buffer:M)})},!s.thisProgram&&1<process.argv.length&&(v=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),O=(f,y)=>{throw process.exitCode=f,y},global.Worker=Ep().Worker}else(T||E)&&(E?P=self.location.href:typeof document<"u"&&document.currentScript&&(P=document.currentScript.src),typeof i<"u"&&i&&(P=i),P.startsWith("blob:")?P="":P=P.substr(0,P.replace(/[?#].*/,"").lastIndexOf("/")+1),$||(te=f=>{var y=new XMLHttpRequest;return y.open("GET",f,!1),y.send(null),y.responseText},E&&(K=f=>{var y=new XMLHttpRequest;return y.open("GET",f,!1),y.responseType="arraybuffer",y.send(null),new Uint8Array(y.response)}),xe=(f,y,w)=>{var A=new XMLHttpRequest;A.open("GET",f,!0),A.responseType="arraybuffer",A.onload=()=>{A.status==200||A.status==0&&A.response?y(A.response):w()},A.onerror=w,A.send(null)}));$&&typeof performance>"u"&&(global.performance=Dp().performance);var He=console.log.bind(console),pe=console.error.bind(console);$&&(He=(...f)=>j.writeSync(1,f.join(" ")+`
`),pe=(...f)=>j.writeSync(2,f.join(" ")+`
`));var he=He,W=pe;Object.assign(s,b),b=null;var ge,Ce,Ne=!1,Ge,se,Ie,qe,at,yt;function Ve(){var f=ge.buffer;s.HEAP8=se=new Int8Array(f),s.HEAP16=new Int16Array(f),s.HEAPU8=Ie=new Uint8Array(f),s.HEAPU16=new Uint16Array(f),s.HEAP32=qe=new Int32Array(f),s.HEAPU32=at=new Uint32Array(f),s.HEAPF32=new Float32Array(f),s.HEAPF64=yt=new Float64Array(f)}var ot=16777216;if(C)ge=s.wasmMemory;else if(s.wasmMemory)ge=s.wasmMemory;else if(ge=new WebAssembly.Memory({initial:ot/65536,maximum:65536,shared:!0}),!(ge.buffer instanceof SharedArrayBuffer))throw W("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),$&&W("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");Ve(),ot=ge.buffer.byteLength;var Re=[],ke=[],je=[],Te=0,Se=null;function _t(){if(Te--,Te==0&&Se){var f=Se;Se=null,f()}}function xt(f){throw f="Aborted("+f+")",W(f),Ne=!0,Ge=1,f=new WebAssembly.RuntimeError(f+". Build with -sASSERTIONS for more info."),d(f),f}var J=f=>f.startsWith("data:application/octet-stream;base64,"),ue=f=>f.startsWith("file://"),de;de="ort-wasm-threaded.wasm",J(de)||(de=G(de));function st(f){if(K)return K(f);throw"both async and sync fetching of the wasm failed"}function Ye(f){if(T||E){if(typeof fetch=="function"&&!ue(f))return fetch(f,{credentials:"same-origin"}).then(y=>{if(!y.ok)throw`failed to load wasm binary file at '${f}'`;return y.arrayBuffer()}).catch(()=>st(f));if(xe)return new Promise((y,w)=>{xe(f,A=>y(new Uint8Array(A)),w)})}return Promise.resolve().then(()=>st(f))}function Ke(f,y,w){return Ye(f).then(A=>WebAssembly.instantiate(A,y)).then(w,A=>{W(`failed to asynchronously prepare wasm: ${A}`),xt(A)})}function Tt(f,y){var w=de;return typeof WebAssembly.instantiateStreaming!="function"||J(w)||ue(w)||$||typeof fetch!="function"?Ke(w,f,y):fetch(w,{credentials:"same-origin"}).then(A=>WebAssembly.instantiateStreaming(A,f).then(y,function(k){return W(`wasm streaming compile failed: ${k}`),W("falling back to ArrayBuffer instantiation"),Ke(w,f,y)}))}var pt,Gt={799444:(f,y,w,A)=>{if(typeof s>"u"||!s.bb)return 1;if(f=ze(f>>>0),f.startsWith("./")&&(f=f.substring(2)),f=s.bb.get(f),!f)return 2;if(y>>>=0,w>>>=0,A>>>=0,y+w>f.byteLength)return 3;try{return c().set(f.subarray(y,y+w),A>>>0),0}catch{return 4}}};function Lt(f){this.name="ExitStatus",this.message=`Program terminated with exit(${f})`,this.status=f}var qt=f=>{f.terminate(),f.onmessage=()=>{}},Yt=f=>{X.Oa.length==0&&(Kt(),X.Xa(X.Oa[0]));var y=X.Oa.pop();if(!y)return 6;X.Pa.push(y),X.La[f.Na]=y,y.Na=f.Na;var w={cmd:"run",start_routine:f.gb,arg:f.cb,pthread_ptr:f.Na};return $&&y.unref(),y.postMessage(w,f.mb),0},Pt=0,Xr=f=>{var y=wn();return f=f(),jr(y),f},Ae=(f,y,...w)=>Xr(()=>{for(var A=w.length,k=vn(8*A),M=k>>>3,z=0;z<w.length;z++){var Be=w[z];l()[M+z>>>0]=Be}return ha(f,0,A,k,y)});function pr(f){var y;if(C)return Ae(0,1,f);Ge=f,0<Pt||(X.hb(),(y=s.onExit)==null||y.call(s,f),Ne=!0),O(f,new Lt(f))}var ee=f=>{if(Ge=f,C)throw kt(f),"unwind";pr(f)};function dr(){for(var f=s.numThreads;f--;)Kt();Re.unshift(()=>{Te++,Or(()=>_t())})}function Kt(){var f=G("ort-wasm-threaded.worker.js");f=new Worker(f),X.Oa.push(f)}function Or(f){C?f():Promise.all(X.Oa.map(X.Xa)).then(f)}var X={Oa:[],Pa:[],ab:[],La:{},Va(){C?(X.receiveObjectTransfer=X.fb,X.threadInitTLS=X.$a,X.setExitStatus=X.Za):dr()},Za:f=>Ge=f,pb:["$terminateWorker"],hb:()=>{for(var f of X.Pa)qt(f);for(f of X.Oa)qt(f);X.Oa=[],X.Pa=[],X.La=[]},Ya:f=>{var y=f.Na;delete X.La[y],X.Oa.push(f),X.Pa.splice(X.Pa.indexOf(f),1),f.Na=0,nn(y)},fb(){},$a(){X.ab.forEach(f=>f())},Xa:f=>new Promise(y=>{f.onmessage=M=>{M=M.data;var z=M.cmd;if(M.targetThread&&M.targetThread!=Lr()){var Be=X.La[M.targetThread];Be?Be.postMessage(M,M.transferList):W(`Internal error! Worker sent a message "${z}" to target pthread ${M.targetThread}, but that thread no longer exists!`)}else z==="checkMailbox"?Ir():z==="spawnThread"?Yt(M):z==="cleanupThread"?X.Ya(X.La[M.thread]):z==="killThread"?(M=M.thread,z=X.La[M],delete X.La[M],qt(z),nn(M),X.Pa.splice(X.Pa.indexOf(z),1),z.Na=0):z==="cancelThread"?X.La[M.thread].postMessage({cmd:"cancel"}):z==="loaded"?(f.loaded=!0,$&&!f.Na&&f.unref(),y(f)):z==="alert"?alert(`Thread ${M.threadId}: ${M.text}`):M.target==="setimmediate"?f.postMessage(M):z==="callHandler"?s[M.handler](...M.args):z&&W(`worker sent an unknown command ${z}`)},f.onerror=M=>{throw W(`worker sent an error! ${M.filename}:${M.lineno}: ${M.message}`),M},$&&(f.on("message",M=>f.onmessage({data:M})),f.on("error",M=>f.onerror(M)));var w=[],A=["onExit"],k;for(k of A)s.hasOwnProperty(k)&&w.push(k);f.postMessage({cmd:"load",handlers:w,urlOrBlob:s.mainScriptUrlOrBlob||i,wasmMemory:ge,wasmModule:Ce})})};s.PThread=X;var jt=f=>{for(;0<f.length;)f.shift()(s)};s.establishStackSpace=()=>{var f=Lr(),y=r()[f+52>>>2>>>0];f=r()[f+56>>>2>>>0],ba(y,y-f),jr(y)};function kt(f){if(C)return Ae(1,0,f);ee(f)}var Ft=[],g;s.invokeEntryPoint=(f,y)=>{Pt=0;var w=Ft[f];w||(f>=Ft.length&&(Ft.length=f+1),Ft[f]=w=g.get(f)),f=w(y),0<Pt?X.Za(f):on(f)};class x{constructor(y){this.Ua=y-24}Va(y,w){r()[this.Ua+16>>>2>>>0]=0,r()[this.Ua+4>>>2>>>0]=y,r()[this.Ua+8>>>2>>>0]=w}}var S=0;function N(f,y,w,A){return C?Ae(2,1,f,y,w,A):F(f,y,w,A)}function F(f,y,w,A){if(f>>>=0,y>>>=0,w>>>=0,A>>>=0,typeof SharedArrayBuffer>"u")return W("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var k=[];return C&&k.length===0?N(f,y,w,A):(f={gb:w,Na:f,cb:A,mb:k},C?(f.ob="spawnThread",postMessage(f,k),0):Yt(f))}var q=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,re=(f,y,w)=>{y>>>=0;var A=y+w;for(w=y;f[w]&&!(w>=A);)++w;if(16<w-y&&f.buffer&&q)return q.decode(f.buffer instanceof SharedArrayBuffer?f.slice(y,w):f.subarray(y,w));for(A="";y<w;){var k=f[y++];if(k&128){var M=f[y++]&63;if((k&224)==192)A+=String.fromCharCode((k&31)<<6|M);else{var z=f[y++]&63;k=(k&240)==224?(k&15)<<12|M<<6|z:(k&7)<<18|M<<12|z<<6|f[y++]&63,65536>k?A+=String.fromCharCode(k):(k-=65536,A+=String.fromCharCode(55296|k>>10,56320|k&1023))}}else A+=String.fromCharCode(k)}return A},ze=(f,y)=>(f>>>=0)?re(c(),f,y):"";function wt(f,y,w){return C?Ae(3,1,f,y,w):0}function et(f,y){if(C)return Ae(4,1,f,y)}var tt=f=>{for(var y=0,w=0;w<f.length;++w){var A=f.charCodeAt(w);127>=A?y++:2047>=A?y+=2:55296<=A&&57343>=A?(y+=4,++w):y+=3}return y},Zt=(f,y,w,A)=>{if(w>>>=0,!(0<A))return 0;var k=w;A=w+A-1;for(var M=0;M<f.length;++M){var z=f.charCodeAt(M);if(55296<=z&&57343>=z){var Be=f.charCodeAt(++M);z=65536+((z&1023)<<10)|Be&1023}if(127>=z){if(w>=A)break;y[w++>>>0]=z}else{if(2047>=z){if(w+1>=A)break;y[w++>>>0]=192|z>>6}else{if(65535>=z){if(w+2>=A)break;y[w++>>>0]=224|z>>12}else{if(w+3>=A)break;y[w++>>>0]=240|z>>18,y[w++>>>0]=128|z>>12&63}y[w++>>>0]=128|z>>6&63}y[w++>>>0]=128|z&63}}return y[w>>>0]=0,w-k},Ct=(f,y,w)=>Zt(f,c(),y,w);function D(f,y){if(C)return Ae(5,1,f,y)}function Oe(f,y,w){if(C)return Ae(6,1,f,y,w)}function Le(f,y,w){return C?Ae(7,1,f,y,w):0}function At(f,y){if(C)return Ae(8,1,f,y)}function tr(f,y,w){if(C)return Ae(9,1,f,y,w)}function xn(f,y,w,A){if(C)return Ae(10,1,f,y,w,A)}function Sn(f,y,w,A){if(C)return Ae(11,1,f,y,w,A)}function On(f,y,w,A){if(C)return Ae(12,1,f,y,w,A)}function An(f){if(C)return Ae(13,1,f)}function In(f,y){if(C)return Ae(14,1,f,y)}function Hn(f,y,w){if(C)return Ae(15,1,f,y,w)}function Yr(f){f>>>=0,typeof Atomics.nb=="function"&&(Atomics.nb(p(),f>>>2,f).value.then(Ir),f+=128,Atomics.store(p(),f>>>2,1))}s.__emscripten_thread_mailbox_await=Yr;var Ir=()=>{var f=Lr();if(f&&(Yr(f),f=ma,!Ne))try{if(f(),!(0<Pt))try{C?on(Ge):ee(Ge)}catch(y){y instanceof Lt||y=="unwind"||O(1,y)}}catch(y){y instanceof Lt||y=="unwind"||O(1,y)}};s.checkMailbox=Ir;var Kr=[],Ht=f=>f%4===0&&(f%100!==0||f%400===0),Vn=[0,31,60,91,121,152,182,213,244,274,305,335],Wn=[0,31,59,90,120,151,181,212,243,273,304,334];function qn(f,y,w,A,k,M,z,Be){return C?Ae(16,1,f,y,w,A,k,M,z,Be):-52}function ei(f,y,w,A,k,M,z){if(C)return Ae(17,1,f,y,w,A,k,M,z)}var Jr=[],Zr={},ti=()=>{if(!rn){var f={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:v||"./this.program"},y;for(y in Zr)Zr[y]===void 0?delete f[y]:f[y]=Zr[y];var w=[];for(y in f)w.push(`${y}=${f[y]}`);rn=w}return rn},rn;function ri(f,y){if(C)return Ae(18,1,f,y);f>>>=0,y>>>=0;var w=0;return ti().forEach((A,k)=>{var M=y+w;for(k=r()[f+4*k>>>2>>>0]=M,M=0;M<A.length;++M)o()[k++>>>0]=A.charCodeAt(M);o()[k>>>0]=0,w+=A.length+1}),0}function ni(f,y){if(C)return Ae(19,1,f,y);f>>>=0,y>>>=0;var w=ti();r()[f>>>2>>>0]=w.length;var A=0;return w.forEach(k=>A+=k.length+1),r()[y>>>2>>>0]=A,0}function ii(f){return C?Ae(20,1,f):52}function ai(f,y,w,A){return C?Ae(21,1,f,y,w,A):52}function oi(f,y,w,A,k){return C?Ae(22,1,f,y,w,A,k):70}var Oa=[null,[],[]];function li(f,y,w,A){if(C)return Ae(23,1,f,y,w,A);y>>>=0,w>>>=0,A>>>=0;for(var k=0,M=0;M<w;M++){var z=r()[y>>>2>>>0],Be=r()[y+4>>>2>>>0];y+=8;for(var Et=0;Et<Be;Et++){var rt=c()[z+Et>>>0],vt=Oa[f];rt===0||rt===10?((f===1?he:W)(re(vt,0)),vt.length=0):vt.push(rt)}k+=Be}return r()[A>>>2>>>0]=k,0}var ui=[31,29,31,30,31,30,31,31,30,31,30,31],ci=[31,28,31,30,31,30,31,31,30,31,30,31];function Aa(f){var y=Array(tt(f)+1);return Zt(f,y,0,y.length),y}var Ea=(f,y)=>{o().set(f,y>>>0)};function ra(f,y,w,A){function k(I,Pe,Fe){for(I=typeof I=="number"?I.toString():I||"";I.length<Pe;)I=Fe[0]+I;return I}function M(I,Pe){return k(I,Pe,"0")}function z(I,Pe){function Fe(_a){return 0>_a?-1:0<_a?1:0}var Ut;return(Ut=Fe(I.getFullYear()-Pe.getFullYear()))===0&&(Ut=Fe(I.getMonth()-Pe.getMonth()))===0&&(Ut=Fe(I.getDate()-Pe.getDate())),Ut}function Be(I){switch(I.getDay()){case 0:return new Date(I.getFullYear()-1,11,29);case 1:return I;case 2:return new Date(I.getFullYear(),0,3);case 3:return new Date(I.getFullYear(),0,2);case 4:return new Date(I.getFullYear(),0,1);case 5:return new Date(I.getFullYear()-1,11,31);case 6:return new Date(I.getFullYear()-1,11,30)}}function Et(I){var Pe=I.Qa;for(I=new Date(new Date(I.Ra+1900,0,1).getTime());0<Pe;){var Fe=I.getMonth(),Ut=(Ht(I.getFullYear())?ui:ci)[Fe];if(Pe>Ut-I.getDate())Pe-=Ut-I.getDate()+1,I.setDate(1),11>Fe?I.setMonth(Fe+1):(I.setMonth(0),I.setFullYear(I.getFullYear()+1));else{I.setDate(I.getDate()+Pe);break}}return Fe=new Date(I.getFullYear()+1,0,4),Pe=Be(new Date(I.getFullYear(),0,4)),Fe=Be(Fe),0>=z(Pe,I)?0>=z(Fe,I)?I.getFullYear()+1:I.getFullYear():I.getFullYear()-1}f>>>=0,y>>>=0,w>>>=0,A>>>=0;var rt=r()[A+40>>>2>>>0];A={kb:p()[A>>>2>>>0],jb:p()[A+4>>>2>>>0],Sa:p()[A+8>>>2>>>0],Wa:p()[A+12>>>2>>>0],Ta:p()[A+16>>>2>>>0],Ra:p()[A+20>>>2>>>0],Ma:p()[A+24>>>2>>>0],Qa:p()[A+28>>>2>>>0],qb:p()[A+32>>>2>>>0],ib:p()[A+36>>>2>>>0],lb:rt?ze(rt):""},w=ze(w),rt={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var vt in rt)w=w.replace(new RegExp(vt,"g"),rt[vt]);var va="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),wa="January February March April May June July August September October November December".split(" ");rt={"%a":I=>va[I.Ma].substring(0,3),"%A":I=>va[I.Ma],"%b":I=>wa[I.Ta].substring(0,3),"%B":I=>wa[I.Ta],"%C":I=>M((I.Ra+1900)/100|0,2),"%d":I=>M(I.Wa,2),"%e":I=>k(I.Wa,2," "),"%g":I=>Et(I).toString().substring(2),"%G":Et,"%H":I=>M(I.Sa,2),"%I":I=>(I=I.Sa,I==0?I=12:12<I&&(I-=12),M(I,2)),"%j":I=>{for(var Pe=0,Fe=0;Fe<=I.Ta-1;Pe+=(Ht(I.Ra+1900)?ui:ci)[Fe++]);return M(I.Wa+Pe,3)},"%m":I=>M(I.Ta+1,2),"%M":I=>M(I.jb,2),"%n":()=>`
`,"%p":I=>0<=I.Sa&&12>I.Sa?"AM":"PM","%S":I=>M(I.kb,2),"%t":()=>"	","%u":I=>I.Ma||7,"%U":I=>M(Math.floor((I.Qa+7-I.Ma)/7),2),"%V":I=>{var Pe=Math.floor((I.Qa+7-(I.Ma+6)%7)/7);if(2>=(I.Ma+371-I.Qa-2)%7&&Pe++,Pe)Pe==53&&(Fe=(I.Ma+371-I.Qa)%7,Fe==4||Fe==3&&Ht(I.Ra)||(Pe=1));else{Pe=52;var Fe=(I.Ma+7-I.Qa-1)%7;(Fe==4||Fe==5&&Ht(I.Ra%400-1))&&Pe++}return M(Pe,2)},"%w":I=>I.Ma,"%W":I=>M(Math.floor((I.Qa+7-(I.Ma+6)%7)/7),2),"%y":I=>(I.Ra+1900).toString().substring(2),"%Y":I=>I.Ra+1900,"%z":I=>{I=I.ib;var Pe=0<=I;return I=Math.abs(I)/60,(Pe?"+":"-")+("0000"+(I/60*100+I%60)).slice(-4)},"%Z":I=>I.lb,"%%":()=>"%"},w=w.replace(/%%/g,"\0\0");for(vt in rt)w.includes(vt)&&(w=w.replace(new RegExp(vt,"g"),rt[vt](A)));return w=w.replace(/\0\0/g,"%"),vt=Aa(w),vt.length>y?0:(Ea(vt,f),vt.length-1)}X.Va();var Pa=[pr,kt,N,wt,et,D,Oe,Le,At,tr,xn,Sn,On,An,In,Hn,qn,ei,ri,ni,ii,ai,oi,li],Da={b:function(f,y,w){throw f>>>=0,new x(f).Va(y>>>0,w>>>0),S=f,S},L:function(f){na(f>>>0,!E,1,!T,131072,!1),X.$a()},j:function(f){f>>>=0,C?postMessage({cmd:"cleanupThread",thread:f}):X.Ya(X.La[f])},H:F,h:wt,S:et,D,F:Oe,T:Le,Q:At,J:tr,P:xn,n:Sn,E:On,B:An,R:In,C:Hn,p:()=>1,z:function(f,y){f>>>=0,f==y>>>0?setTimeout(Ir):C?postMessage({targetThread:f,cmd:"checkMailbox"}):(f=X.La[f])&&f.postMessage({cmd:"checkMailbox"})},I:function(f,y,w,A,k){y>>>=0,w>>>=0,Kr.length=A,k=k>>>0>>>3;for(var M=0;M<A;M++)Kr[M]=l()[k+M>>>0];return f=y?Gt[y]:Pa[f],X.eb=w,w=f(...Kr),X.eb=0,w},K:Yr,o:function(f){$&&X.La[f>>>0].ref()},s:function(f,y,w){f=y+2097152>>>0<4194305-!!f?(f>>>0)+4294967296*y:NaN,w>>>=0,f=new Date(1e3*f),p()[w>>>2>>>0]=f.getUTCSeconds(),p()[w+4>>>2>>>0]=f.getUTCMinutes(),p()[w+8>>>2>>>0]=f.getUTCHours(),p()[w+12>>>2>>>0]=f.getUTCDate(),p()[w+16>>>2>>>0]=f.getUTCMonth(),p()[w+20>>>2>>>0]=f.getUTCFullYear()-1900,p()[w+24>>>2>>>0]=f.getUTCDay(),f=(f.getTime()-Date.UTC(f.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,p()[w+28>>>2>>>0]=f},t:function(f,y,w){f=y+2097152>>>0<4194305-!!f?(f>>>0)+4294967296*y:NaN,w>>>=0,f=new Date(1e3*f),p()[w>>>2>>>0]=f.getSeconds(),p()[w+4>>>2>>>0]=f.getMinutes(),p()[w+8>>>2>>>0]=f.getHours(),p()[w+12>>>2>>>0]=f.getDate(),p()[w+16>>>2>>>0]=f.getMonth(),p()[w+20>>>2>>>0]=f.getFullYear()-1900,p()[w+24>>>2>>>0]=f.getDay(),y=(Ht(f.getFullYear())?Vn:Wn)[f.getMonth()]+f.getDate()-1|0,p()[w+28>>>2>>>0]=y,p()[w+36>>>2>>>0]=-(60*f.getTimezoneOffset()),y=new Date(f.getFullYear(),6,1).getTimezoneOffset();var A=new Date(f.getFullYear(),0,1).getTimezoneOffset();f=(y!=A&&f.getTimezoneOffset()==Math.min(A,y))|0,p()[w+32>>>2>>>0]=f},u:function(f){f>>>=0;var y=new Date(p()[f+20>>>2>>>0]+1900,p()[f+16>>>2>>>0],p()[f+12>>>2>>>0],p()[f+8>>>2>>>0],p()[f+4>>>2>>>0],p()[f>>>2>>>0],0),w=p()[f+32>>>2>>>0],A=y.getTimezoneOffset(),k=new Date(y.getFullYear(),6,1).getTimezoneOffset(),M=new Date(y.getFullYear(),0,1).getTimezoneOffset(),z=Math.min(M,k);return 0>w?p()[f+32>>>2>>>0]=+(k!=M&&z==A):0<w!=(z==A)&&(k=Math.max(M,k),y.setTime(y.getTime()+6e4*((0<w?z:k)-A))),p()[f+24>>>2>>>0]=y.getDay(),w=(Ht(y.getFullYear())?Vn:Wn)[y.getMonth()]+y.getDate()-1|0,p()[f+28>>>2>>>0]=w,p()[f>>>2>>>0]=y.getSeconds(),p()[f+4>>>2>>>0]=y.getMinutes(),p()[f+8>>>2>>>0]=y.getHours(),p()[f+12>>>2>>>0]=y.getDate(),p()[f+16>>>2>>>0]=y.getMonth(),p()[f+20>>>2>>>0]=y.getYear(),f=y.getTime(),f=isNaN(f)?-1:f/1e3,ga((pt=f,1<=+Math.abs(pt)?0<pt?+Math.floor(pt/4294967296)>>>0:~~+Math.ceil((pt-+(~~pt>>>0))/4294967296)>>>0:0)),f>>>0},q:qn,r:ei,y:function(f,y,w,A){f>>>=0,y>>>=0,w>>>=0,A>>>=0;var k=new Date().getFullYear(),M=new Date(k,0,1),z=new Date(k,6,1);k=M.getTimezoneOffset();var Be=z.getTimezoneOffset(),Et=Math.max(k,Be);r()[f>>>2>>>0]=60*Et,p()[y>>>2>>>0]=+(k!=Be),f=rt=>rt.toLocaleTimeString(void 0,{hour12:!1,timeZoneName:"short"}).split(" ")[1],M=f(M),z=f(z),Be<k?(Ct(M,w,17),Ct(z,A,17)):(Ct(M,A,17),Ct(z,w,17))},c:()=>{xt("")},O:function(f,y,w){f>>>=0,y>>>=0,w>>>=0,Jr.length=0;for(var A;A=c()[y++>>>0];){var k=A!=105;k&=A!=112,w+=k&&w%8?4:0,Jr.push(A==112?r()[w>>>2>>>0]:A==105?p()[w>>>2>>>0]:l()[w>>>3>>>0]),w+=k?8:4}return Gt[f](...Jr)},k:()=>{},i:()=>Date.now(),U:()=>{throw Pt+=1,"unwind"},A:function(){return 4294901760},e:()=>performance.timeOrigin+performance.now(),f:()=>$?(Cp(),ar(Lp)).cpus().length:navigator.hardwareConcurrency,x:function(f){f>>>=0;var y=c().length;if(f<=y||4294901760<f)return!1;for(var w=1;4>=w;w*=2){var A=y*(1+.2/w);A=Math.min(A,f+100663296);var k=Math;A=Math.max(f,A);e:{k=(k.min.call(k,4294901760,A+(65536-A%65536)%65536)-ge.buffer.byteLength+65535)/65536;try{ge.grow(k),Ve();var M=1;break e}catch{}M=void 0}if(M)return!0}return!1},M:ri,N:ni,G:ee,g:ii,m:ai,v:oi,l:li,a:ge||s.wasmMemory,w:ra,d:function(f,y,w,A){return ra(f>>>0,y>>>0,w>>>0,A>>>0)}},Y=function(){function f(w,A){return Y=w.exports,Y=Ia(),X.ab.push(Y.ya),g=Y.za,ke.unshift(Y.V),Ce=A,_t(),Y}var y={a:Da};if(Te++,s.instantiateWasm)try{return s.instantiateWasm(y,f)}catch(w){W(`Module.instantiateWasm callback failed with error: ${w}`),d(w)}return Tt(y,function(w){f(w.instance,w.module)}).catch(d),{}}();s._OrtInit=(f,y)=>(s._OrtInit=Y.W)(f,y),s._OrtGetLastError=(f,y)=>(s._OrtGetLastError=Y.X)(f,y),s._OrtCreateSessionOptions=(f,y,w,A,k,M,z,Be,Et,rt)=>(s._OrtCreateSessionOptions=Y.Y)(f,y,w,A,k,M,z,Be,Et,rt),s._OrtAppendExecutionProvider=(f,y)=>(s._OrtAppendExecutionProvider=Y.Z)(f,y),s._OrtAddFreeDimensionOverride=(f,y,w)=>(s._OrtAddFreeDimensionOverride=Y._)(f,y,w),s._OrtAddSessionConfigEntry=(f,y,w)=>(s._OrtAddSessionConfigEntry=Y.$)(f,y,w),s._OrtReleaseSessionOptions=f=>(s._OrtReleaseSessionOptions=Y.aa)(f),s._OrtCreateSession=(f,y,w)=>(s._OrtCreateSession=Y.ba)(f,y,w),s._OrtReleaseSession=f=>(s._OrtReleaseSession=Y.ca)(f),s._OrtGetInputOutputCount=(f,y,w)=>(s._OrtGetInputOutputCount=Y.da)(f,y,w),s._OrtGetInputName=(f,y)=>(s._OrtGetInputName=Y.ea)(f,y),s._OrtGetOutputName=(f,y)=>(s._OrtGetOutputName=Y.fa)(f,y),s._OrtFree=f=>(s._OrtFree=Y.ga)(f),s._OrtCreateTensor=(f,y,w,A,k,M)=>(s._OrtCreateTensor=Y.ha)(f,y,w,A,k,M),s._OrtGetTensorData=(f,y,w,A,k)=>(s._OrtGetTensorData=Y.ia)(f,y,w,A,k),s._OrtReleaseTensor=f=>(s._OrtReleaseTensor=Y.ja)(f),s._OrtCreateRunOptions=(f,y,w,A)=>(s._OrtCreateRunOptions=Y.ka)(f,y,w,A),s._OrtAddRunConfigEntry=(f,y,w)=>(s._OrtAddRunConfigEntry=Y.la)(f,y,w),s._OrtReleaseRunOptions=f=>(s._OrtReleaseRunOptions=Y.ma)(f),s._OrtCreateBinding=f=>(s._OrtCreateBinding=Y.na)(f),s._OrtBindInput=(f,y,w)=>(s._OrtBindInput=Y.oa)(f,y,w),s._OrtBindOutput=(f,y,w,A)=>(s._OrtBindOutput=Y.pa)(f,y,w,A),s._OrtClearBoundOutputs=f=>(s._OrtClearBoundOutputs=Y.qa)(f),s._OrtReleaseBinding=f=>(s._OrtReleaseBinding=Y.ra)(f),s._OrtRunWithBinding=(f,y,w,A,k)=>(s._OrtRunWithBinding=Y.sa)(f,y,w,A,k),s._OrtRun=(f,y,w,A,k,M,z,Be)=>(s._OrtRun=Y.ta)(f,y,w,A,k,M,z,Be),s._OrtEndProfiling=f=>(s._OrtEndProfiling=Y.ua)(f);var Lr=s._pthread_self=()=>(Lr=s._pthread_self=Y.va)();s._malloc=f=>(s._malloc=Y.wa)(f),s._free=f=>(s._free=Y.xa)(f),s.__emscripten_tls_init=()=>(s.__emscripten_tls_init=Y.ya)();var na=s.__emscripten_thread_init=(f,y,w,A,k,M)=>(na=s.__emscripten_thread_init=Y.Aa)(f,y,w,A,k,M);s.__emscripten_thread_crashed=()=>(s.__emscripten_thread_crashed=Y.Ba)();var ha=(f,y,w,A,k)=>(ha=Y.Ca)(f,y,w,A,k),nn=f=>(nn=Y.Da)(f),on=s.__emscripten_thread_exit=f=>(on=s.__emscripten_thread_exit=Y.Ea)(f),ma=()=>(ma=Y.Fa)(),ga=f=>(ga=Y.Ga)(f),ba=(f,y)=>(ba=Y.Ha)(f,y),jr=f=>(jr=Y.Ia)(f),vn=f=>(vn=Y.Ja)(f),wn=()=>(wn=Y.Ka)();function Ia(){var f=Y;f=Object.assign({},f);var y=A=>()=>A()>>>0,w=A=>k=>A(k)>>>0;return f.va=y(f.va),f.wa=w(f.wa),f.emscripten_main_runtime_thread_id=y(f.emscripten_main_runtime_thread_id),f.Ja=w(f.Ja),f.Ka=y(f.Ka),f}s.wasmMemory=ge,s.stackSave=()=>wn(),s.stackRestore=f=>jr(f),s.stackAlloc=f=>vn(f),s.keepRuntimeAlive=()=>0<Pt,s.UTF8ToString=ze,s.stringToUTF8=Ct,s.lengthBytesUTF8=tt,s.ExitStatus=Lt,s.PThread=X;var Hr;Se=function f(){Hr||ya(),Hr||(Se=f)};function ya(){if(!(0<Te))if(C)h(s),C||jt(ke),startWorker(s);else{if(s.preRun)for(typeof s.preRun=="function"&&(s.preRun=[s.preRun]);s.preRun.length;)Re.unshift(s.preRun.shift());jt(Re),0<Te||Hr||(Hr=!0,s.calledRun=!0,Ne||(C||jt(ke),h(s),C||jt(je)))}}return ya(),m}})();typeof e=="object"&&typeof t=="object"?t.exports=a:typeof define=="function"&&define.amd&&define([],()=>a)}),Bp=me((e,t)=>{t.exports='"use strict";var Module={},ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string";if(ENVIRONMENT_IS_NODE){var nodeWorkerThreads=require("worker_threads"),parentPort=nodeWorkerThreads.parentPort;parentPort.on("message",e=>onmessage({data:e}));var fs=require("fs"),vm=require("vm");Object.assign(global,{self:global,require,Module,location:{href:__filename},Worker:nodeWorkerThreads.Worker,importScripts:e=>vm.runInThisContext(fs.readFileSync(e,"utf8"),{filename:e}),postMessage:e=>parentPort.postMessage(e),performance:global.performance||{now:Date.now}})}var initializedJS=!1;function threadPrintErr(...e){var a=e.join(" ");if(ENVIRONMENT_IS_NODE){fs.writeSync(2,a+`\n`);return}console.error(a)}function threadAlert(...e){var a=e.join(" ");postMessage({cmd:"alert",text:a,threadId:Module._pthread_self()})}var err=threadPrintErr;self.alert=threadAlert,Module.instantiateWasm=(e,a)=>{var r=Module.wasmModule;Module.wasmModule=null;var t=new WebAssembly.Instance(r,e);return a(t)},self.onunhandledrejection=e=>{throw e.reason||e};function handleMessage(e){try{if(e.data.cmd==="load"){let r=[];self.onmessage=t=>r.push(t),self.startWorker=t=>{Module=t,postMessage({cmd:"loaded"});for(let s of r)handleMessage(s);self.onmessage=handleMessage},Module.wasmModule=e.data.wasmModule;for(const t of e.data.handlers)Module[t]=(...s)=>{postMessage({cmd:"callHandler",handler:t,args:s})};if(Module.wasmMemory=e.data.wasmMemory,Module.buffer=Module.wasmMemory.buffer,Module.ENVIRONMENT_IS_PTHREAD=!0,typeof e.data.urlOrBlob=="string")importScripts(e.data.urlOrBlob);else{var a=URL.createObjectURL(e.data.urlOrBlob);importScripts(a),URL.revokeObjectURL(a)}ortWasmThreaded(Module)}else if(e.data.cmd==="run"){Module.__emscripten_thread_init(e.data.pthread_ptr,0,0,1),Module.__emscripten_thread_mailbox_await(e.data.pthread_ptr),Module.establishStackSpace(),Module.PThread.receiveObjectTransfer(e.data),Module.PThread.threadInitTLS(),initializedJS||(initializedJS=!0);try{Module.invokeEntryPoint(e.data.start_routine,e.data.arg)}catch(r){if(r!="unwind")throw r}}else e.data.cmd==="cancel"?Module._pthread_self()&&Module.__emscripten_thread_exit(-1):e.data.target==="setimmediate"||(e.data.cmd==="checkMailbox"?initializedJS&&Module.checkMailbox():e.data.cmd&&(err(`worker.js received unknown command ${e.data.cmd}`),err(e.data)))}catch(r){throw Module.__emscripten_thread_crashed?.(),r}}self.onmessage=handleMessage;\n'}),Rp,sg,oa,ia,So,Np,ug,lg,fg,Mp,De,Ur=L(()=>{Rp=Pp(),sg=kp(),ia=!1,So=!1,Np=!1,ug=e=>{if(e===1)return!1;if(typeof SharedArrayBuffer>"u")return typeof self<"u"&&!self.crossOriginIsolated&&console.warn("env.wasm.numThreads is set to "+e+", but this will not work unless you enable crossOriginIsolated mode. See https://web.dev/cross-origin-isolation-guide/ for more info."),!1;typeof process<"u"&&process.versions&&process.versions.node&&console.warn("env.wasm.numThreads is set to "+e+", however, currently onnxruntime-web does not support multi-threads in Node.js. Please consider using onnxruntime-node for performance critical scenarios.");try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))}catch{return!1}},lg=()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}},fg=(e,t)=>e?t?"ort-wasm-simd-threaded.wasm":"ort-wasm-simd.wasm":t?"ort-wasm-threaded.wasm":"ort-wasm.wasm",Mp=async e=>{if(ia)return Promise.resolve();if(So)throw new Error("multiple calls to 'initializeWebAssembly()' detected.");if(Np)throw new Error("previous call to 'initializeWebAssembly()' failed.");So=!0;let t=e.initTimeout,a=e.numThreads,i=e.simd,u=ug(a),n=i&&lg(),o=e.wasmPaths,c=typeof o=="string"?o:void 0,p=fg(n,u),r=typeof o=="object"?o[p]:void 0,l=!1,s=[];if(t>0&&s.push(new Promise(h=>{setTimeout(()=>{l=!0,h()},t)})),s.push(new Promise((h,d)=>{let m=u?sg:Rp,b={locateFile:(v,O)=>u&&v.endsWith(".worker.js")&&typeof Blob<"u"?URL.createObjectURL(new Blob([Bp()],{type:"text/javascript"})):v.endsWith(".wasm")?r||(c??O)+p:O+v};if(u)if(b.numThreads=a,typeof Blob>"u")b.mainScriptUrlOrBlob=(void 0)(__dirname,"ort-wasm-threaded.js");else{let v=`var ortWasmThreaded=${m.toString()};`;b.mainScriptUrlOrBlob=new Blob([v],{type:"text/javascript"})}m(b).then(v=>{So=!1,ia=!0,oa=v,h()},v=>{So=!1,Np=!0,d(v)})})),await Promise.race(s),l)throw new Error(`WebAssembly backend initializing failed due to timeout: ${t}ms`)},De=()=>{if(ia&&oa)return oa;throw new Error("WebAssembly is not initialized yet.")}}),ve,bn,_e,Ao=L(()=>{Ur(),ve=(e,t)=>{let a=De(),i=a.lengthBytesUTF8(e)+1,u=a._malloc(i);return a.stringToUTF8(e,u,i),t.push(u),u},bn=(e,t,a,i)=>{if(typeof e=="object"&&e!==null){if(a.has(e))throw new Error("Circular reference in options");a.add(e)}Object.entries(e).forEach(([u,n])=>{let o=t?t+u:u;if(typeof n=="object")bn(n,o+".",a,i);else if(typeof n=="string"||typeof n=="number")i(o,n.toString());else if(typeof n=="boolean")i(o,n?"1":"0");else throw new Error(`Can't handle extra config type: ${typeof n}`)})},_e=e=>{let t=De(),a=t.stackSave();try{let i=t.stackAlloc(8);t._OrtGetLastError(i,i+4);let u=t.HEAP32[i/4],n=t.HEAPU32[i/4+1],o=n?t.UTF8ToString(n):"";throw new Error(`${e} ERROR_CODE: ${u}, ERROR_MESSAGE: ${o}`)}finally{t.stackRestore(a)}}}),Gp,Up=L(()=>{Ur(),Ao(),Gp=e=>{let t=De(),a=0,i=[],u=e||{};try{if((e==null?void 0:e.logSeverityLevel)===void 0)u.logSeverityLevel=2;else if(typeof e.logSeverityLevel!="number"||!Number.isInteger(e.logSeverityLevel)||e.logSeverityLevel<0||e.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${e.logSeverityLevel}`);if((e==null?void 0:e.logVerbosityLevel)===void 0)u.logVerbosityLevel=0;else if(typeof e.logVerbosityLevel!="number"||!Number.isInteger(e.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${e.logVerbosityLevel}`);(e==null?void 0:e.terminate)===void 0&&(u.terminate=!1);let n=0;return(e==null?void 0:e.tag)!==void 0&&(n=ve(e.tag,i)),a=t._OrtCreateRunOptions(u.logSeverityLevel,u.logVerbosityLevel,!!u.terminate,n),a===0&&_e("Can't create run options."),(e==null?void 0:e.extra)!==void 0&&bn(e.extra,"",new WeakSet,(o,c)=>{let p=ve(o,i),r=ve(c,i);t._OrtAddRunConfigEntry(a,p,r)!==0&&_e(`Can't set a run config entry: ${o} - ${c}.`)}),[a,i]}catch(n){throw a!==0&&t._OrtReleaseRunOptions(a),i.forEach(o=>t._free(o)),n}}}),cg,pg,dg,hg,zp,Vp=L(()=>{Ur(),Ao(),cg=e=>{switch(e){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${e}`)}},pg=e=>{switch(e){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${e}`)}},dg=e=>{e.extra||(e.extra={}),e.extra.session||(e.extra.session={});let t=e.extra.session;t.use_ort_model_bytes_directly||(t.use_ort_model_bytes_directly="1"),e.executionProviders&&e.executionProviders.some(a=>(typeof a=="string"?a:a.name)==="webgpu")&&(e.enableMemPattern=!1)},hg=(e,t,a)=>{for(let i of t){let u=typeof i=="string"?i:i.name;switch(u){case"webnn":if(u="WEBNN",typeof i!="string"){let o=i;if(o!=null&&o.deviceType){let c=ve("deviceType",a),p=ve(o.deviceType,a);De()._OrtAddSessionConfigEntry(e,c,p)!==0&&_e(`Can't set a session config entry: 'deviceType' - ${o.deviceType}.`)}if(o!=null&&o.numThreads){let c=o.numThreads;(typeof c!="number"||!Number.isInteger(c)||c<0)&&(c=0);let p=ve("numThreads",a),r=ve(c.toString(),a);De()._OrtAddSessionConfigEntry(e,p,r)!==0&&_e(`Can't set a session config entry: 'numThreads' - ${o.numThreads}.`)}if(o!=null&&o.powerPreference){let c=ve("powerPreference",a),p=ve(o.powerPreference,a);De()._OrtAddSessionConfigEntry(e,c,p)!==0&&_e(`Can't set a session config entry: 'powerPreference' - ${o.powerPreference}.`)}}break;case"webgpu":if(u="JS",typeof i!="string"){let o=i;if(o!=null&&o.preferredLayout){if(o.preferredLayout!=="NCHW"&&o.preferredLayout!=="NHWC")throw new Error(`preferredLayout must be either 'NCHW' or 'NHWC': ${o.preferredLayout}`);let c=ve("preferredLayout",a),p=ve(o.preferredLayout,a);De()._OrtAddSessionConfigEntry(e,c,p)!==0&&_e(`Can't set a session config entry: 'preferredLayout' - ${o.preferredLayout}.`)}}break;case"wasm":case"cpu":continue;default:throw new Error(`not supported execution provider: ${u}`)}let n=ve(u,a);De()._OrtAppendExecutionProvider(e,n)!==0&&_e(`Can't append execution provider: ${u}.`)}},zp=e=>{let t=De(),a=0,i=[],u=e||{};dg(u);try{let n=cg(u.graphOptimizationLevel??"all"),o=pg(u.executionMode??"sequential"),c=typeof u.logId=="string"?ve(u.logId,i):0,p=u.logSeverityLevel??2;if(!Number.isInteger(p)||p<0||p>4)throw new Error(`log serverity level is not valid: ${p}`);let r=u.logVerbosityLevel??0;if(!Number.isInteger(r)||r<0||r>4)throw new Error(`log verbosity level is not valid: ${r}`);let l=typeof u.optimizedModelFilePath=="string"?ve(u.optimizedModelFilePath,i):0;if(a=t._OrtCreateSessionOptions(n,!!u.enableCpuMemArena,!!u.enableMemPattern,o,!!u.enableProfiling,0,c,p,r,l),a===0&&_e("Can't create session options."),u.executionProviders&&hg(a,u.executionProviders,i),u.enableGraphCapture!==void 0){if(typeof u.enableGraphCapture!="boolean")throw new Error(`enableGraphCapture must be a boolean value: ${u.enableGraphCapture}`);let s=ve("enableGraphCapture",i),h=ve(u.enableGraphCapture.toString(),i);t._OrtAddSessionConfigEntry(a,s,h)!==0&&_e(`Can't set a session config entry: 'enableGraphCapture' - ${u.enableGraphCapture}.`)}if(u.freeDimensionOverrides)for(let[s,h]of Object.entries(u.freeDimensionOverrides)){if(typeof s!="string")throw new Error(`free dimension override name must be a string: ${s}`);if(typeof h!="number"||!Number.isInteger(h)||h<0)throw new Error(`free dimension override value must be a non-negative integer: ${h}`);let d=ve(s,i);t._OrtAddFreeDimensionOverride(a,d,h)!==0&&_e(`Can't set a free dimension override: ${s} - ${h}.`)}return u.extra!==void 0&&bn(u.extra,"",new WeakSet,(s,h)=>{let d=ve(s,i),m=ve(h,i);t._OrtAddSessionConfigEntry(a,d,m)!==0&&_e(`Can't set a session config entry: ${s} - ${h}.`)}),[a,i]}catch(n){throw a!==0&&t._OrtReleaseSessionOptions(a),i.forEach(o=>t._free(o)),n}}}),aa,Wp,sa,Hp,qp,Po,jp,ua=L(()=>{aa=e=>{switch(e){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${e}`)}},Wp=e=>{switch(e){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${e}`)}},sa=e=>[void 0,4,1,1,2,2,4,8,void 0,1,2,8,4,8,void 0,void 0,void 0][e],Hp=e=>{switch(e){case"float16":return typeof Float16Array<"u"&&Float16Array.from?Float16Array:Uint16Array;case"float32":return Float32Array;case"uint8":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"bool":return Uint8Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${e}`)}},qp=e=>{switch(e){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${e}`)}},Po=e=>e==="float32"||e==="float16"||e==="int32"||e==="int64"||e==="uint32"||e==="uint8"||e==="bool",jp=e=>{switch(e){case"none":return 0;case"cpu":return 1;case"cpu-pinned":return 2;case"texture":return 3;case"gpu-buffer":return 4;default:throw new Error(`unsupported data location: ${e}`)}}}),gn,la=L(()=>{gn=async e=>{if(typeof e=="string")if(typeof process<"u"&&process.versions&&process.versions.node)try{return new Uint8Array(await(void 0)(e))}catch(t){if(t.code==="ERR_FS_FILE_TOO_LARGE"){let a=(void 0)(e),i=[];for await(let u of a)i.push(u);return new Uint8Array(Buffer.concat(i))}throw t}else{let t=await fetch(e);if(!t.ok)throw new Error(`failed to load external data file: ${e}`);let a=t.headers.get("Content-Length"),i=a?parseInt(a,10):0;if(i<1073741824)return new Uint8Array(await t.arrayBuffer());{if(!t.body)throw new Error(`failed to load external data file: ${e}, no response body.`);let u=t.body.getReader(),n;try{n=new ArrayBuffer(i)}catch(c){if(c instanceof RangeError){let p=Math.ceil(i/65536);n=new WebAssembly.Memory({initial:p,maximum:p}).buffer}else throw c}let o=0;for(;;){let{done:c,value:p}=await u.read();if(c)break;let r=p.byteLength;new Uint8Array(n,o,r).set(p),o+=r}return new Uint8Array(n,0,i)}}else return e instanceof Blob?new Uint8Array(await e.arrayBuffer()):e instanceof Uint8Array?e:new Uint8Array(e)}}),mg,Xp,Kp,zr,bg,fa,Jp,Zp,Yp,Qp,ed,td,rd=L(()=>{Up(),Vp(),ua(),Ur(),Ao(),la(),mg=(e,t)=>{De()._OrtInit(e,t)!==0&&_e("Can't initialize onnxruntime.")},Xp=async e=>{mg(e.wasm.numThreads,qp(e.logLevel))},Kp=async(e,t)=>{},zr=new Map,bg=e=>{let t=De(),a=t.stackSave();try{let i=t.stackAlloc(8);return t._OrtGetInputOutputCount(e,i,i+4)!==0&&_e("Can't get session input/output count."),[t.HEAP32[i/4],t.HEAP32[i/4+1]]}finally{t.stackRestore(a)}},fa=e=>{let t=De(),a=t._malloc(e.byteLength);if(a===0)throw new Error(`Can't create a session. failed to allocate a buffer of size ${e.byteLength}.`);return t.HEAPU8.set(e,a),[a,e.byteLength]},Jp=async(e,t)=>{var l;let a,i,u=De();Array.isArray(e)?[a,i]=e:e.buffer===u.HEAPU8.buffer?[a,i]=[e.byteOffset,e.byteLength]:[a,i]=fa(e);let n=0,o=0,c=[],p=[],r=[];try{if([o,c]=zp(t),(t==null?void 0:t.externalData)&&u.mountExternalData){let T=[];for(let E of t.externalData){let $=typeof E=="string"?E:E.path;T.push(gn(typeof E=="string"?E:E.data).then(C=>{u.mountExternalData($,C)}))}await Promise.all(T)}n=await u._OrtCreateSession(a,i,o),n===0&&_e("Can't create a session.");let[s,h]=bg(n),d=!!(t!=null&&t.enableGraphCapture),m=[],b=[],v=[];for(let T=0;T<s;T++){let E=u._OrtGetInputName(n,T);E===0&&_e("Can't get an input name."),p.push(E),m.push(u.UTF8ToString(E))}for(let T=0;T<h;T++){let E=u._OrtGetOutputName(n,T);E===0&&_e("Can't get an output name."),r.push(E);let $=u.UTF8ToString(E);b.push($)}return zr.set(n,[n,p,r,null,d,!1]),[n,m,b]}catch(s){throw p.forEach(h=>u._OrtFree(h)),r.forEach(h=>u._OrtFree(h)),n!==0&&u._OrtReleaseSession(n),s}finally{u._free(a),o!==0&&u._OrtReleaseSessionOptions(o),c.forEach(s=>u._free(s)),(l=u.unmountExternalData)==null||l.call(u)}},Zp=e=>{var p;let t=De(),a=zr.get(e);if(!a)throw new Error(`cannot release session. invalid session id: ${e}`);let[i,u,n,o,c]=a;o&&(c&&t._OrtClearBoundOutputs(o.handle),t._OrtReleaseBinding(o.handle)),(p=t.jsepOnReleaseSession)==null||p.call(t,e),u.forEach(r=>t._OrtFree(r)),n.forEach(r=>t._OrtFree(r)),t._OrtReleaseSession(i),zr.delete(e)},Yp=(e,t,a,i,u,n=!1)=>{if(!e){t.push(0);return}let o=De(),c=e[0],p=e[1],r=e[3],l,s;if(c==="string"&&r==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");if(n&&r!=="gpu-buffer")throw new Error(`External buffer must be provided for input/output index ${u} when enableGraphCapture is true.`);if(r==="gpu-buffer"){let m=e[2].gpuBuffer,b=sa(aa(c));s=p.reduce((O,T)=>O*T,1)*b;let v=o.jsepRegisterBuffer;if(!v)throw new Error('Tensor location "gpu-buffer" is not supported without using WebGPU.');l=v(i,u,m,s)}else{let m=e[2];if(Array.isArray(m)){s=4*m.length,l=o._malloc(s),a.push(l);let b=l/4;for(let v=0;v<m.length;v++){if(typeof m[v]!="string")throw new TypeError(`tensor data at index ${v} is not a string`);o.HEAPU32[b++]=ve(m[v],a)}}else s=m.byteLength,l=o._malloc(s),a.push(l),o.HEAPU8.set(new Uint8Array(m.buffer,m.byteOffset,s),l)}let h=o.stackSave(),d=o.stackAlloc(4*p.length);try{let m=d/4;p.forEach(v=>o.HEAP32[m++]=v);let b=o._OrtCreateTensor(aa(c),l,s,d,p.length,jp(r));b===0&&_e(`Can't create tensor for input/output. session=${i}, index=${u}.`),t.push(b)}finally{o.stackRestore(h)}},Qp=async(e,t,a,i,u,n)=>{var xe;let o=De(),c=zr.get(e);if(!c)throw new Error(`cannot run inference. invalid session id: ${e}`);let p=c[0],r=c[1],l=c[2],s=c[3],h=c[4];c[5];let d=t.length,m=i.length,b=0,v=[],O=[],T=[],E=[],$=o.stackSave(),C=o.stackAlloc(d*4),P=o.stackAlloc(d*4),G=o.stackAlloc(m*4),te=o.stackAlloc(m*4);try{[b,v]=Gp(n);for(let W=0;W<d;W++)Yp(a[W],O,E,e,t[W],h);for(let W=0;W<m;W++)Yp(u[W],T,E,e,d+i[W],h);let K=C/4,j=P/4,ie=G/4,He=te/4;for(let W=0;W<d;W++)o.HEAPU32[K++]=O[W],o.HEAPU32[j++]=r[t[W]];for(let W=0;W<m;W++)o.HEAPU32[ie++]=T[W],o.HEAPU32[He++]=l[i[W]];(xe=o.jsepOnRunStart)==null||xe.call(o,p);let pe;pe=await o._OrtRun(p,P,C,d,te,m,G,b),pe!==0&&_e("failed to call OrtRun().");let he=[];for(let W=0;W<m;W++){let ge=o.HEAPU32[G/4+W];if(ge===T[W]){he.push(u[W]);continue}let Ce=o.stackSave(),Ne=o.stackAlloc(4*4),Ge=!1,se,Ie=0;try{o._OrtGetTensorData(ge,Ne,Ne+4,Ne+8,Ne+12)!==0&&_e(`Can't access output tensor data on index ${W}.`);let qe=Ne/4,at=o.HEAPU32[qe++];Ie=o.HEAPU32[qe++];let yt=o.HEAPU32[qe++],Ve=o.HEAPU32[qe++],ot=[];for(let je=0;je<Ve;je++)ot.push(o.HEAPU32[yt/4+je]);o._OrtFree(yt);let Re=ot.reduce((je,Te)=>je*Te,1);se=Wp(at);let ke=s==null?void 0:s.outputPreferredLocations[i[W]];if(se==="string"){if(ke==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");let je=[],Te=Ie/4;for(let Se=0;Se<Re;Se++){let _t=o.HEAPU32[Te++],xt=Se===Re-1?void 0:o.HEAPU32[Te]-_t;je.push(o.UTF8ToString(_t,xt))}he.push([se,ot,je,"cpu"])}else if(ke==="gpu-buffer"&&Re>0){let je=o.jsepGetBuffer;if(!je)throw new Error('preferredLocation "gpu-buffer" is not supported without using WebGPU.');let Te=je(Ie),Se=sa(at);if(Se===void 0||!Po(se))throw new Error(`Unsupported data type: ${se}`);Ge=!0,he.push([se,ot,{gpuBuffer:Te,download:o.jsepCreateDownloader(Te,Re*Se,se),dispose:()=>{o._OrtReleaseTensor(ge)}},"gpu-buffer"])}else{let je=Hp(se),Te=new je(Re);new Uint8Array(Te.buffer,Te.byteOffset,Te.byteLength).set(o.HEAPU8.subarray(Ie,Ie+Te.byteLength)),he.push([se,ot,Te,"cpu"])}}finally{o.stackRestore(Ce),se==="string"&&Ie&&o._free(Ie),Ge||o._OrtReleaseTensor(ge)}}return s&&!h&&(o._OrtClearBoundOutputs(s.handle),zr.set(e,[p,r,l,s,h,!1])),he}finally{o.stackRestore($),O.forEach(K=>o._OrtReleaseTensor(K)),T.forEach(K=>o._OrtReleaseTensor(K)),E.forEach(K=>o._free(K)),b!==0&&o._OrtReleaseRunOptions(b),v.forEach(K=>o._free(K))}},ed=e=>{let t=De(),a=zr.get(e);if(!a)throw new Error("invalid session id");let i=a[0],u=t._OrtEndProfiling(i);u===0&&_e("Can't get an profile file name."),t._OrtFree(u)},td=e=>{let t=[];for(let a of e){let i=a[2];!Array.isArray(i)&&"buffer"in i&&t.push(i.buffer)}return t}}),nd=me((e,t)=>{t.exports='/*!\n * ONNX Runtime Web v1.18.0\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n"use strict";(()=>{var vt=Object.defineProperty;var qr=Object.getOwnPropertyDescriptor;var Vr=Object.getOwnPropertyNames;var Jr=Object.prototype.hasOwnProperty;var _t=(i,c)=>()=>(i&&(c=i(i=0)),c);var Ke=(i,c)=>()=>(c||i((c={exports:{}}).exports,c),c.exports),Et=(i,c)=>{for(var a in c)vt(i,a,{get:c[a],enumerable:!0})},Xr=(i,c,a,h)=>{if(c&&typeof c=="object"||typeof c=="function")for(let f of Vr(c))!Jr.call(i,f)&&f!==a&&vt(i,f,{get:()=>c[f],enumerable:!(h=qr(c,f))||h.enumerable});return i};var et=i=>Xr(vt({},"__esModule",{value:!0}),i);var St={};Et(St,{createReadStream:()=>lr,readFile:()=>Qr,readFileSync:()=>Zr});var Qr,Zr,lr,At=_t(()=>{Qr=void 0,Zr=void 0,lr=void 0});var Tt={};Et(Tt,{join:()=>Kr});var Kr,Mt=_t(()=>{Kr=void 0});var pr=Ke((dr,Ct)=>{"use strict";var cr=(()=>{var i=typeof document<"u"?document.currentScript?.src:void 0;return typeof __filename<"u"&&(i||=__filename),function(c={}){var a=c,h,f,w=new Promise((t,o)=>{h=t,f=o}),g=Object.assign({},a),s="./this.program",S=typeof window=="object",x=typeof importScripts=="function",H=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",A="",I,V,R;if(H){var B=(At(),et(St)),D=(Mt(),et(Tt));A=x?D.dirname(A)+"/":__dirname+"/",I=(t,o)=>(t=ce(t)?new URL(t):D.normalize(t),B.readFileSync(t,o?void 0:"utf8")),R=t=>(t=I(t,!0),t.buffer||(t=new Uint8Array(t)),t),V=(t,o,u,m=!0)=>{t=ce(t)?new URL(t):D.normalize(t),B.readFile(t,m?void 0:"utf8",(O,E)=>{O?u(O):o(m?E.buffer:E)})},!a.thisProgram&&1<process.argv.length&&(s=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2)}else(S||x)&&(x?A=self.location.href:typeof document<"u"&&document.currentScript&&(A=document.currentScript.src),i&&(A=i),A.startsWith("blob:")?A="":A=A.substr(0,A.replace(/[?#].*/,"").lastIndexOf("/")+1),I=t=>{var o=new XMLHttpRequest;return o.open("GET",t,!1),o.send(null),o.responseText},x&&(R=t=>{var o=new XMLHttpRequest;return o.open("GET",t,!1),o.responseType="arraybuffer",o.send(null),new Uint8Array(o.response)}),V=(t,o,u)=>{var m=new XMLHttpRequest;m.open("GET",t,!0),m.responseType="arraybuffer",m.onload=()=>{m.status==200||m.status==0&&m.response?o(m.response):u()},m.onerror=u,m.send(null)});var T=console.log.bind(console),L=console.error.bind(console);Object.assign(a,g),g=null;var W,de=!1,pe,Z,_,J,Pe;function le(){var t=W.buffer;a.HEAP8=pe=new Int8Array(t),a.HEAP16=new Int16Array(t),a.HEAPU8=Z=new Uint8Array(t),a.HEAPU16=new Uint16Array(t),a.HEAP32=_=new Int32Array(t),a.HEAPU32=J=new Uint32Array(t),a.HEAPF32=new Float32Array(t),a.HEAPF64=Pe=new Float64Array(t)}var Ie=[],ne=[],X=[],we=0,me=null,F=null;function ie(t){throw t="Aborted("+t+")",L(t),de=!0,t=new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info."),f(t),t}var xe=t=>t.startsWith("data:application/octet-stream;base64,"),ce=t=>t.startsWith("file://"),be;if(be="ort-wasm.wasm",!xe(be)){var ae=be;be=a.locateFile?a.locateFile(ae,A):A+ae}function K(t){if(R)return R(t);throw"both async and sync fetching of the wasm failed"}function je(t){if(S||x){if(typeof fetch=="function"&&!ce(t))return fetch(t,{credentials:"same-origin"}).then(o=>{if(!o.ok)throw`failed to load wasm binary file at \'${t}\'`;return o.arrayBuffer()}).catch(()=>K(t));if(V)return new Promise((o,u)=>{V(t,m=>o(new Uint8Array(m)),u)})}return Promise.resolve().then(()=>K(t))}function Oe(t,o,u){return je(t).then(m=>WebAssembly.instantiate(m,o)).then(u,m=>{L(`failed to asynchronously prepare wasm: ${m}`),ie(m)})}function Ue(t,o){var u=be;return typeof WebAssembly.instantiateStreaming!="function"||xe(u)||ce(u)||H||typeof fetch!="function"?Oe(u,t,o):fetch(u,{credentials:"same-origin"}).then(m=>WebAssembly.instantiateStreaming(m,t).then(o,function(O){return L(`wasm streaming compile failed: ${O}`),L("falling back to ArrayBuffer instantiation"),Oe(u,t,o)}))}var ve,Ae={798088:(t,o,u,m)=>{if(typeof a>"u"||!a.ya)return 1;if(t=ue(t>>>0),t.startsWith("./")&&(t=t.substring(2)),t=a.ya.get(t),!t)return 2;if(o>>>=0,u>>>=0,o+u>t.byteLength)return 3;try{return Z.set(t.subarray(o,o+u),m>>>0>>>0),0}catch{return 4}}};class _e{constructor(o){this.wa=o-24}}var ge=0,Be=0,te=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,re=(t,o,u)=>{o>>>=0;var m=o+u;for(u=o;t[u]&&!(u>=m);)++u;if(16<u-o&&t.buffer&&te)return te.decode(t.subarray(o,u));for(m="";o<u;){var O=t[o++];if(O&128){var E=t[o++]&63;if((O&224)==192)m+=String.fromCharCode((O&31)<<6|E);else{var U=t[o++]&63;O=(O&240)==224?(O&15)<<12|E<<6|U:(O&7)<<18|E<<12|U<<6|t[o++]&63,65536>O?m+=String.fromCharCode(O):(O-=65536,m+=String.fromCharCode(55296|O>>10,56320|O&1023))}}else m+=String.fromCharCode(O)}return m},ue=(t,o)=>(t>>>=0)?re(Z,t,o):"",Ee=t=>{for(var o=0,u=0;u<t.length;++u){var m=t.charCodeAt(u);127>=m?o++:2047>=m?o+=2:55296<=m&&57343>=m?(o+=4,++u):o+=3}return o},Se=(t,o,u,m)=>{if(u>>>=0,!(0<m))return 0;var O=u;m=u+m-1;for(var E=0;E<t.length;++E){var U=t.charCodeAt(E);if(55296<=U&&57343>=U){var ee=t.charCodeAt(++E);U=65536+((U&1023)<<10)|ee&1023}if(127>=U){if(u>=m)break;o[u++>>>0]=U}else{if(2047>=U){if(u+1>=m)break;o[u++>>>0]=192|U>>6}else{if(65535>=U){if(u+2>=m)break;o[u++>>>0]=224|U>>12}else{if(u+3>=m)break;o[u++>>>0]=240|U>>18,o[u++>>>0]=128|U>>12&63}o[u++>>>0]=128|U>>6&63}o[u++>>>0]=128|U&63}}return o[u>>>0]=0,u-O},Le=t=>t%4===0&&(t%100!==0||t%400===0),ze=[0,31,60,91,121,152,182,213,244,274,305,335],rt=[0,31,59,90,120,151,181,212,243,273,304,334],Te=[],Ge={},ke=()=>{if(!We){var t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:s||"./this.program"},o;for(o in Ge)Ge[o]===void 0?delete t[o]:t[o]=Ge[o];var u=[];for(o in t)u.push(`${o}=${t[o]}`);We=u}return We},We,nt=[null,[],[]],De=[31,29,31,30,31,30,31,31,30,31,30,31],at=[31,28,31,30,31,30,31,31,30,31,30,31];function G(t){var o=Array(Ee(t)+1);return Se(t,o,0,o.length),o}function qe(t,o,u,m){function O(d,k,$){for(d=typeof d=="number"?d.toString():d||"";d.length<k;)d=$[0]+d;return d}function E(d,k){return O(d,k,"0")}function U(d,k){function $(Ze){return 0>Ze?-1:0<Ze?1:0}var Me;return(Me=$(d.getFullYear()-k.getFullYear()))===0&&(Me=$(d.getMonth()-k.getMonth()))===0&&(Me=$(d.getDate()-k.getDate())),Me}function ee(d){switch(d.getDay()){case 0:return new Date(d.getFullYear()-1,11,29);case 1:return d;case 2:return new Date(d.getFullYear(),0,3);case 3:return new Date(d.getFullYear(),0,2);case 4:return new Date(d.getFullYear(),0,1);case 5:return new Date(d.getFullYear()-1,11,31);case 6:return new Date(d.getFullYear()-1,11,30)}}function ye(d){var k=d.sa;for(d=new Date(new Date(d.ta+1900,0,1).getTime());0<k;){var $=d.getMonth(),Me=(Le(d.getFullYear())?De:at)[$];if(k>Me-d.getDate())k-=Me-d.getDate()+1,d.setDate(1),11>$?d.setMonth($+1):(d.setMonth(0),d.setFullYear(d.getFullYear()+1));else{d.setDate(d.getDate()+k);break}}return $=new Date(d.getFullYear()+1,0,4),k=ee(new Date(d.getFullYear(),0,4)),$=ee($),0>=U(k,d)?0>=U($,d)?d.getFullYear()+1:d.getFullYear():d.getFullYear()-1}t>>>=0,o>>>=0,u>>>=0,m>>>=0;var oe=J[m+40>>>2>>>0];m={Ba:_[m>>>2>>>0],Aa:_[m+4>>>2>>>0],ua:_[m+8>>>2>>>0],xa:_[m+12>>>2>>>0],va:_[m+16>>>2>>>0],ta:_[m+20>>>2>>>0],na:_[m+24>>>2>>>0],sa:_[m+28>>>2>>>0],Da:_[m+32>>>2>>>0],za:_[m+36>>>2>>>0],Ca:oe?ue(oe):""},u=ue(u),oe={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var se in oe)u=u.replace(new RegExp(se,"g"),oe[se]);var Qe="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),Re="January February March April May June July August September October November December".split(" ");oe={"%a":d=>Qe[d.na].substring(0,3),"%A":d=>Qe[d.na],"%b":d=>Re[d.va].substring(0,3),"%B":d=>Re[d.va],"%C":d=>E((d.ta+1900)/100|0,2),"%d":d=>E(d.xa,2),"%e":d=>O(d.xa,2," "),"%g":d=>ye(d).toString().substring(2),"%G":ye,"%H":d=>E(d.ua,2),"%I":d=>(d=d.ua,d==0?d=12:12<d&&(d-=12),E(d,2)),"%j":d=>{for(var k=0,$=0;$<=d.va-1;k+=(Le(d.ta+1900)?De:at)[$++]);return E(d.xa+k,3)},"%m":d=>E(d.va+1,2),"%M":d=>E(d.Aa,2),"%n":()=>`\n`,"%p":d=>0<=d.ua&&12>d.ua?"AM":"PM","%S":d=>E(d.Ba,2),"%t":()=>"	","%u":d=>d.na||7,"%U":d=>E(Math.floor((d.sa+7-d.na)/7),2),"%V":d=>{var k=Math.floor((d.sa+7-(d.na+6)%7)/7);if(2>=(d.na+371-d.sa-2)%7&&k++,k)k==53&&($=(d.na+371-d.sa)%7,$==4||$==3&&Le(d.ta)||(k=1));else{k=52;var $=(d.na+7-d.sa-1)%7;($==4||$==5&&Le(d.ta%400-1))&&k++}return E(k,2)},"%w":d=>d.na,"%W":d=>E(Math.floor((d.sa+7-(d.na+6)%7)/7),2),"%y":d=>(d.ta+1900).toString().substring(2),"%Y":d=>d.ta+1900,"%z":d=>{d=d.za;var k=0<=d;return d=Math.abs(d)/60,(k?"+":"-")+("0000"+(d/60*100+d%60)).slice(-4)},"%Z":d=>d.Ca,"%%":()=>"%"},u=u.replace(/%%/g,"\\0\\0");for(se in oe)u.includes(se)&&(u=u.replace(new RegExp(se,"g"),oe[se](m)));return u=u.replace(/\\0\\0/g,"%"),se=G(u),se.length>o?0:(pe.set(se,t>>>0),se.length-1)}var Ve={a:function(t,o,u){t>>>=0;var m=new _e(t);throw J[m.wa+16>>>2>>>0]=0,J[m.wa+4>>>2>>>0]=o>>>0,J[m.wa+8>>>2>>>0]=u>>>0,ge=t,Be++,ge},e:function(){return 0},H:function(){},x:function(){},z:function(){},J:function(){return 0},F:function(){},A:function(){},E:function(){},g:function(){},y:function(){},v:function(){},G:function(){},w:function(){},k:()=>1,I:function(t,o,u){return o>>>=0,Z.copyWithin(t>>>0>>>0,o>>>0,o+(u>>>0)>>>0)},n:function(t,o,u){t=o+2097152>>>0<4194305-!!t?(t>>>0)+4294967296*o:NaN,u>>>=0,t=new Date(1e3*t),_[u>>>2>>>0]=t.getUTCSeconds(),_[u+4>>>2>>>0]=t.getUTCMinutes(),_[u+8>>>2>>>0]=t.getUTCHours(),_[u+12>>>2>>>0]=t.getUTCDate(),_[u+16>>>2>>>0]=t.getUTCMonth(),_[u+20>>>2>>>0]=t.getUTCFullYear()-1900,_[u+24>>>2>>>0]=t.getUTCDay(),_[u+28>>>2>>>0]=(t.getTime()-Date.UTC(t.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},o:function(t,o,u){t=o+2097152>>>0<4194305-!!t?(t>>>0)+4294967296*o:NaN,u>>>=0,t=new Date(1e3*t),_[u>>>2>>>0]=t.getSeconds(),_[u+4>>>2>>>0]=t.getMinutes(),_[u+8>>>2>>>0]=t.getHours(),_[u+12>>>2>>>0]=t.getDate(),_[u+16>>>2>>>0]=t.getMonth(),_[u+20>>>2>>>0]=t.getFullYear()-1900,_[u+24>>>2>>>0]=t.getDay(),_[u+28>>>2>>>0]=(Le(t.getFullYear())?ze:rt)[t.getMonth()]+t.getDate()-1|0,_[u+36>>>2>>>0]=-(60*t.getTimezoneOffset()),o=new Date(t.getFullYear(),6,1).getTimezoneOffset();var m=new Date(t.getFullYear(),0,1).getTimezoneOffset();_[u+32>>>2>>>0]=(o!=m&&t.getTimezoneOffset()==Math.min(m,o))|0},p:function(t){t>>>=0;var o=new Date(_[t+20>>>2>>>0]+1900,_[t+16>>>2>>>0],_[t+12>>>2>>>0],_[t+8>>>2>>>0],_[t+4>>>2>>>0],_[t>>>2>>>0],0),u=_[t+32>>>2>>>0],m=o.getTimezoneOffset(),O=new Date(o.getFullYear(),6,1).getTimezoneOffset(),E=new Date(o.getFullYear(),0,1).getTimezoneOffset(),U=Math.min(E,O);return 0>u?_[t+32>>>2>>>0]=+(O!=E&&U==m):0<u!=(U==m)&&(O=Math.max(E,O),o.setTime(o.getTime()+6e4*((0<u?U:O)-m))),_[t+24>>>2>>>0]=o.getDay(),_[t+28>>>2>>>0]=(Le(o.getFullYear())?ze:rt)[o.getMonth()]+o.getDate()-1|0,_[t>>>2>>>0]=o.getSeconds(),_[t+4>>>2>>>0]=o.getMinutes(),_[t+8>>>2>>>0]=o.getHours(),_[t+12>>>2>>>0]=o.getDate(),_[t+16>>>2>>>0]=o.getMonth(),_[t+20>>>2>>>0]=o.getYear(),t=o.getTime(),t=isNaN(t)?-1:t/1e3,Je((ve=t,1<=+Math.abs(ve)?0<ve?+Math.floor(ve/4294967296)>>>0:~~+Math.ceil((ve-+(~~ve>>>0))/4294967296)>>>0:0)),t>>>0},l:function(){return-52},m:function(){},t:function(t,o,u,m){u>>>=0,m>>>=0;var O=new Date().getFullYear(),E=new Date(O,0,1),U=new Date(O,6,1);O=E.getTimezoneOffset();var ee=U.getTimezoneOffset();J[t>>>0>>>2>>>0]=60*Math.max(O,ee),_[o>>>0>>>2>>>0]=+(O!=ee),t=ye=>ye.toLocaleTimeString(void 0,{hour12:!1,timeZoneName:"short"}).split(" ")[1],E=t(E),U=t(U),ee<O?(Se(E,Z,u,17),Se(U,Z,m,17)):(Se(E,Z,m,17),Se(U,Z,u,17))},d:()=>{ie("")},B:function(t,o,u){t>>>=0,o>>>=0,u>>>=0,Te.length=0;for(var m;m=Z[o++>>>0];){var O=m!=105;O&=m!=112,u+=O&&u%8?4:0,Te.push(m==112?J[u>>>2>>>0]:m==105?_[u>>>2>>>0]:Pe[u>>>3>>>0]),u+=O?8:4}return Ae[t](...Te)},h:()=>Date.now(),u:function(){return 4294901760},b:()=>performance.now(),s:function(t){t>>>=0;var o=Z.length;if(4294901760<t)return!1;for(var u=1;4>=u;u*=2){var m=o*(1+.2/u);m=Math.min(m,t+100663296);var O=Math;m=Math.max(t,m);e:{O=(O.min.call(O,4294901760,m+(65536-m%65536)%65536)-W.buffer.byteLength+65535)/65536;try{W.grow(O),le();var E=1;break e}catch{}E=void 0}if(E)return!0}return!1},C:function(t,o){t>>>=0,o>>>=0;var u=0;return ke().forEach((m,O)=>{var E=o+u;for(O=J[t+4*O>>>2>>>0]=E,E=0;E<m.length;++E)pe[O++>>>0]=m.charCodeAt(E);pe[O>>>0]=0,u+=m.length+1}),0},D:function(t,o){t>>>=0,o>>>=0;var u=ke();J[t>>>2>>>0]=u.length;var m=0;return u.forEach(O=>m+=O.length+1),J[o>>>2>>>0]=m,0},f:()=>52,j:function(){return 52},q:function(){return 70},i:function(t,o,u,m){o>>>=0,u>>>=0,m>>>=0;for(var O=0,E=0;E<u;E++){var U=J[o>>>2>>>0],ee=J[o+4>>>2>>>0];o+=8;for(var ye=0;ye<ee;ye++){var oe=Z[U+ye>>>0],se=nt[t];oe===0||oe===10?((t===1?T:L)(re(se,0)),se.length=0):se.push(oe)}O+=ee}return J[m>>>2>>>0]=O,0},r:qe,c:function(t,o,u,m){return qe(t>>>0,o>>>0,u>>>0,m>>>0)}},P=function(){function t(u){return P=u.exports,P=st(),W=P.K,le(),ne.unshift(P.L),we--,we==0&&(me!==null&&(clearInterval(me),me=null),F&&(u=F,F=null,u())),P}var o={a:Ve};if(we++,a.instantiateWasm)try{return a.instantiateWasm(o,t)}catch(u){L(`Module.instantiateWasm callback failed with error: ${u}`),f(u)}return Ue(o,function(u){t(u.instance)}).catch(f),{}}();a._OrtInit=(t,o)=>(a._OrtInit=P.M)(t,o),a._OrtGetLastError=(t,o)=>(a._OrtGetLastError=P.N)(t,o),a._OrtCreateSessionOptions=(t,o,u,m,O,E,U,ee,ye,oe)=>(a._OrtCreateSessionOptions=P.O)(t,o,u,m,O,E,U,ee,ye,oe),a._OrtAppendExecutionProvider=(t,o)=>(a._OrtAppendExecutionProvider=P.P)(t,o),a._OrtAddFreeDimensionOverride=(t,o,u)=>(a._OrtAddFreeDimensionOverride=P.Q)(t,o,u),a._OrtAddSessionConfigEntry=(t,o,u)=>(a._OrtAddSessionConfigEntry=P.R)(t,o,u),a._OrtReleaseSessionOptions=t=>(a._OrtReleaseSessionOptions=P.S)(t),a._OrtCreateSession=(t,o,u)=>(a._OrtCreateSession=P.T)(t,o,u),a._OrtReleaseSession=t=>(a._OrtReleaseSession=P.U)(t),a._OrtGetInputOutputCount=(t,o,u)=>(a._OrtGetInputOutputCount=P.V)(t,o,u),a._OrtGetInputName=(t,o)=>(a._OrtGetInputName=P.W)(t,o),a._OrtGetOutputName=(t,o)=>(a._OrtGetOutputName=P.X)(t,o),a._OrtFree=t=>(a._OrtFree=P.Y)(t),a._OrtCreateTensor=(t,o,u,m,O,E)=>(a._OrtCreateTensor=P.Z)(t,o,u,m,O,E),a._OrtGetTensorData=(t,o,u,m,O)=>(a._OrtGetTensorData=P._)(t,o,u,m,O),a._OrtReleaseTensor=t=>(a._OrtReleaseTensor=P.$)(t),a._OrtCreateRunOptions=(t,o,u,m)=>(a._OrtCreateRunOptions=P.aa)(t,o,u,m),a._OrtAddRunConfigEntry=(t,o,u)=>(a._OrtAddRunConfigEntry=P.ba)(t,o,u),a._OrtReleaseRunOptions=t=>(a._OrtReleaseRunOptions=P.ca)(t),a._OrtCreateBinding=t=>(a._OrtCreateBinding=P.da)(t),a._OrtBindInput=(t,o,u)=>(a._OrtBindInput=P.ea)(t,o,u),a._OrtBindOutput=(t,o,u,m)=>(a._OrtBindOutput=P.fa)(t,o,u,m),a._OrtClearBoundOutputs=t=>(a._OrtClearBoundOutputs=P.ga)(t),a._OrtReleaseBinding=t=>(a._OrtReleaseBinding=P.ha)(t),a._OrtRunWithBinding=(t,o,u,m,O)=>(a._OrtRunWithBinding=P.ia)(t,o,u,m,O),a._OrtRun=(t,o,u,m,O,E,U,ee)=>(a._OrtRun=P.ja)(t,o,u,m,O,E,U,ee),a._OrtEndProfiling=t=>(a._OrtEndProfiling=P.ka)(t),a._malloc=t=>(a._malloc=P.la)(t),a._free=t=>(a._free=P.ma)(t);var Je=t=>(Je=P.oa)(t),ot=t=>(ot=P.pa)(t),M=t=>(M=P.qa)(t),Ne=()=>(Ne=P.ra)();function st(){var t=P;t=Object.assign({},t);var o=u=>m=>u(m)>>>0;return t.la=o(t.la),t.qa=o(t.qa),t.ra=(u=>()=>u()>>>0)(t.ra),t}a.stackSave=()=>Ne(),a.stackRestore=t=>ot(t),a.stackAlloc=t=>M(t),a.UTF8ToString=ue,a.stringToUTF8=(t,o,u)=>Se(t,Z,o,u),a.lengthBytesUTF8=Ee;var Fe;F=function t(){Fe||Xe(),Fe||(F=t)};function Xe(){if(!(0<we)){if(a.preRun)for(typeof a.preRun=="function"&&(a.preRun=[a.preRun]);a.preRun.length;){var t=a.preRun.shift();Ie.unshift(t)}for(;0<Ie.length;)Ie.shift()(a);if(!(0<we||Fe||(Fe=!0,a.calledRun=!0,de))){for(;0<ne.length;)ne.shift()(a);for(h(a);0<X.length;)X.shift()(a)}}}return Xe(),w}})();typeof dr=="object"&&typeof Ct=="object"?Ct.exports=cr:typeof define=="function"&&define.amd&&define([],()=>cr)});var mr=Ke(()=>{});var gr=Ke(()=>{});var hr={};Et(hr,{cpus:()=>en});var en,br=_t(()=>{en=void 0});var Or=Ke((wr,Dt)=>{"use strict";var yr=(()=>{var i=typeof document<"u"?document.currentScript?.src:void 0;return typeof __filename<"u"&&(i||=__filename),function(c={}){function a(){return X.buffer!=ie.buffer&&K(),ie}function h(){return X.buffer!=ie.buffer&&K(),xe}function f(){return X.buffer!=ie.buffer&&K(),ce}function w(){return X.buffer!=ie.buffer&&K(),be}function g(){return X.buffer!=ie.buffer&&K(),ae}var s=c,S,x,H=new Promise((e,r)=>{S=e,x=r}),A=Object.assign({},s),I="./this.program",V=(e,r)=>{throw r},R=typeof window=="object",B=typeof importScripts=="function",D=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",T=s.ENVIRONMENT_IS_PTHREAD||!1,L="";function W(e){return s.locateFile?s.locateFile(e,L):L+e}var de,pe,Z;if(D){var _=(At(),et(St)),J=(Mt(),et(Tt));L=B?J.dirname(L)+"/":__dirname+"/",de=(e,r)=>(e=ue(e)?new URL(e):J.normalize(e),_.readFileSync(e,r?void 0:"utf8")),Z=e=>(e=de(e,!0),e.buffer||(e=new Uint8Array(e)),e),pe=(e,r,n,l=!0)=>{e=ue(e)?new URL(e):J.normalize(e),_.readFile(e,l?void 0:"utf8",(y,b)=>{y?n(y):r(l?b.buffer:b)})},!s.thisProgram&&1<process.argv.length&&(I=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),V=(e,r)=>{throw process.exitCode=e,r},global.Worker=mr().Worker}else(R||B)&&(B?L=self.location.href:typeof document<"u"&&document.currentScript&&(L=document.currentScript.src),typeof i<"u"&&i&&(L=i),L.startsWith("blob:")?L="":L=L.substr(0,L.replace(/[?#].*/,"").lastIndexOf("/")+1),D||(de=e=>{var r=new XMLHttpRequest;return r.open("GET",e,!1),r.send(null),r.responseText},B&&(Z=e=>{var r=new XMLHttpRequest;return r.open("GET",e,!1),r.responseType="arraybuffer",r.send(null),new Uint8Array(r.response)}),pe=(e,r,n)=>{var l=new XMLHttpRequest;l.open("GET",e,!0),l.responseType="arraybuffer",l.onload=()=>{l.status==200||l.status==0&&l.response?r(l.response):n()},l.onerror=n,l.send(null)}));D&&typeof performance>"u"&&(global.performance=gr().performance);var Pe=console.log.bind(console),le=console.error.bind(console);D&&(Pe=(...e)=>_.writeSync(1,e.join(" ")+`\n`),le=(...e)=>_.writeSync(2,e.join(" ")+`\n`));var Ie=Pe,ne=le;Object.assign(s,A),A=null;var X,we,me=!1,F,ie,xe,ce,be,ae;function K(){var e=X.buffer;s.HEAP8=ie=new Int8Array(e),s.HEAP16=new Int16Array(e),s.HEAPU8=xe=new Uint8Array(e),s.HEAPU16=new Uint16Array(e),s.HEAP32=ce=new Int32Array(e),s.HEAPU32=be=new Uint32Array(e),s.HEAPF32=new Float32Array(e),s.HEAPF64=ae=new Float64Array(e)}var je=16777216;if(T)X=s.wasmMemory;else if(s.wasmMemory)X=s.wasmMemory;else if(X=new WebAssembly.Memory({initial:je/65536,maximum:65536,shared:!0}),!(X.buffer instanceof SharedArrayBuffer))throw ne("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),D&&ne("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");K(),je=X.buffer.byteLength;var Oe=[],Ue=[],ve=[],Ae=0,_e=null,ge=null;function Be(){if(Ae--,Ae==0&&(_e!==null&&(clearInterval(_e),_e=null),ge)){var e=ge;ge=null,e()}}function te(e){throw e="Aborted("+e+")",ne(e),me=!0,F=1,e=new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info."),x(e),e}var re=e=>e.startsWith("data:application/octet-stream;base64,"),ue=e=>e.startsWith("file://"),Ee;Ee="ort-wasm-threaded.wasm",re(Ee)||(Ee=W(Ee));function Se(e){if(Z)return Z(e);throw"both async and sync fetching of the wasm failed"}function Le(e){if(R||B){if(typeof fetch=="function"&&!ue(e))return fetch(e,{credentials:"same-origin"}).then(r=>{if(!r.ok)throw`failed to load wasm binary file at \'${e}\'`;return r.arrayBuffer()}).catch(()=>Se(e));if(pe)return new Promise((r,n)=>{pe(e,l=>r(new Uint8Array(l)),n)})}return Promise.resolve().then(()=>Se(e))}function ze(e,r,n){return Le(e).then(l=>WebAssembly.instantiate(l,r)).then(n,l=>{ne(`failed to asynchronously prepare wasm: ${l}`),te(l)})}function rt(e,r){var n=Ee;return typeof WebAssembly.instantiateStreaming!="function"||re(n)||ue(n)||D||typeof fetch!="function"?ze(n,e,r):fetch(n,{credentials:"same-origin"}).then(l=>WebAssembly.instantiateStreaming(l,e).then(r,function(y){return ne(`wasm streaming compile failed: ${y}`),ne("falling back to ArrayBuffer instantiation"),ze(n,e,r)}))}var Te,Ge={799444:(e,r,n,l)=>{if(typeof s>"u"||!s.bb)return 1;if(e=ee(e>>>0),e.startsWith("./")&&(e=e.substring(2)),e=s.bb.get(e),!e)return 2;if(r>>>=0,n>>>=0,l>>>=0,r+n>e.byteLength)return 3;try{return h().set(e.subarray(r,r+n),l>>>0),0}catch{return 4}}};function ke(e){this.name="ExitStatus",this.message=`Program terminated with exit(${e})`,this.status=e}var We=e=>{e.terminate(),e.onmessage=()=>{}},nt=e=>{M.Oa.length==0&&(Je(),M.Xa(M.Oa[0]));var r=M.Oa.pop();if(!r)return 6;M.Pa.push(r),M.La[e.Na]=r,r.Na=e.Na;var n={cmd:"run",start_routine:e.gb,arg:e.cb,pthread_ptr:e.Na};return D&&r.unref(),r.postMessage(n,e.mb),0},De=0,at=e=>{var r=Ot();return e=e(),ft(r),e},G=(e,r,...n)=>at(()=>{for(var l=n.length,y=wt(8*l),b=y>>>3,v=0;v<n.length;v++){var z=n[v];g()[b+v>>>0]=z}return rr(e,0,l,y,r)});function qe(e){if(T)return G(0,1,e);F=e,0<De||(M.hb(),s.onExit?.(e),me=!0),V(e,new ke(e))}var Ve=e=>{if(F=e,T)throw st(e),"unwind";qe(e)};function P(){for(var e=s.numThreads;e--;)Je();Oe.unshift(()=>{Ae++,ot(()=>Be())})}function Je(){var e=W("ort-wasm-threaded.worker.js");e=new Worker(e),M.Oa.push(e)}function ot(e){T?e():Promise.all(M.Oa.map(M.Xa)).then(e)}var M={Oa:[],Pa:[],ab:[],La:{},Va(){T?(M.receiveObjectTransfer=M.fb,M.threadInitTLS=M.$a,M.setExitStatus=M.Za):P()},Za:e=>F=e,pb:["$terminateWorker"],hb:()=>{for(var e of M.Pa)We(e);for(e of M.Oa)We(e);M.Oa=[],M.Pa=[],M.La=[]},Ya:e=>{var r=e.Na;delete M.La[r],M.Oa.push(e),M.Pa.splice(M.Pa.indexOf(e),1),e.Na=0,bt(r)},fb(){},$a(){M.ab.forEach(e=>e())},Xa:e=>new Promise(r=>{e.onmessage=b=>{b=b.data;var v=b.cmd;if(b.targetThread&&b.targetThread!=ut()){var z=M.La[b.targetThread];z?z.postMessage(b,b.transferList):ne(`Internal error! Worker sent a message "${v}" to target pthread ${b.targetThread}, but that thread no longer exists!`)}else v==="checkMailbox"?it():v==="spawnThread"?nt(b):v==="cleanupThread"?M.Ya(M.La[b.thread]):v==="killThread"?(b=b.thread,v=M.La[b],delete M.La[b],We(v),bt(b),M.Pa.splice(M.Pa.indexOf(v),1),v.Na=0):v==="cancelThread"?M.La[b.thread].postMessage({cmd:"cancel"}):v==="loaded"?(e.loaded=!0,D&&!e.Na&&e.unref(),r(e)):v==="alert"?alert(`Thread ${b.threadId}: ${b.text}`):b.target==="setimmediate"?e.postMessage(b):v==="callHandler"?s[b.handler](...b.args):v&&ne(`worker sent an unknown command ${v}`)},e.onerror=b=>{throw ne(`worker sent an error! ${b.filename}:${b.lineno}: ${b.message}`),b},D&&(e.on("message",b=>e.onmessage({data:b})),e.on("error",b=>e.onerror(b)));var n=[],l=["onExit"],y;for(y of l)s.hasOwnProperty(y)&&n.push(y);e.postMessage({cmd:"load",handlers:n,urlOrBlob:s.mainScriptUrlOrBlob||i,wasmMemory:X,wasmModule:we})})};s.PThread=M;var Ne=e=>{for(;0<e.length;)e.shift()(s)};s.establishStackSpace=()=>{var e=ut(),r=w()[e+52>>>2>>>0];e=w()[e+56>>>2>>>0],or(r,r-e),ft(r)};function st(e){if(T)return G(1,0,e);Ve(e)}var Fe=[],Xe;s.invokeEntryPoint=(e,r)=>{De=0;var n=Fe[e];n||(e>=Fe.length&&(Fe.length=e+1),Fe[e]=n=Xe.get(e)),e=n(r),0<De?M.Za(e):yt(e)};class t{constructor(r){this.Ua=r-24}Va(r,n){w()[this.Ua+16>>>2>>>0]=0,w()[this.Ua+4>>>2>>>0]=r,w()[this.Ua+8>>>2>>>0]=n}}var o=0,u=0;function m(e,r,n,l){return T?G(2,1,e,r,n,l):O(e,r,n,l)}function O(e,r,n,l){if(e>>>=0,r>>>=0,n>>>=0,l>>>=0,typeof SharedArrayBuffer>"u")return ne("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var y=[];return T&&y.length===0?m(e,r,n,l):(e={gb:n,Na:e,cb:l,mb:y},T?(e.ob="spawnThread",postMessage(e,y),0):nt(e))}var E=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,U=(e,r,n)=>{r>>>=0;var l=r+n;for(n=r;e[n]&&!(n>=l);)++n;if(16<n-r&&e.buffer&&E)return E.decode(e.buffer instanceof SharedArrayBuffer?e.slice(r,n):e.subarray(r,n));for(l="";r<n;){var y=e[r++];if(y&128){var b=e[r++]&63;if((y&224)==192)l+=String.fromCharCode((y&31)<<6|b);else{var v=e[r++]&63;y=(y&240)==224?(y&15)<<12|b<<6|v:(y&7)<<18|b<<12|v<<6|e[r++]&63,65536>y?l+=String.fromCharCode(y):(y-=65536,l+=String.fromCharCode(55296|y>>10,56320|y&1023))}}else l+=String.fromCharCode(y)}return l},ee=(e,r)=>(e>>>=0)?U(h(),e,r):"";function ye(e,r,n){return T?G(3,1,e,r,n):0}function oe(e,r){if(T)return G(4,1,e,r)}var se=e=>{for(var r=0,n=0;n<e.length;++n){var l=e.charCodeAt(n);127>=l?r++:2047>=l?r+=2:55296<=l&&57343>=l?(r+=4,++n):r+=3}return r},Qe=(e,r,n,l)=>{if(n>>>=0,!(0<l))return 0;var y=n;l=n+l-1;for(var b=0;b<e.length;++b){var v=e.charCodeAt(b);if(55296<=v&&57343>=v){var z=e.charCodeAt(++b);v=65536+((v&1023)<<10)|z&1023}if(127>=v){if(n>=l)break;r[n++>>>0]=v}else{if(2047>=v){if(n+1>=l)break;r[n++>>>0]=192|v>>6}else{if(65535>=v){if(n+2>=l)break;r[n++>>>0]=224|v>>12}else{if(n+3>=l)break;r[n++>>>0]=240|v>>18,r[n++>>>0]=128|v>>12&63}r[n++>>>0]=128|v>>6&63}r[n++>>>0]=128|v&63}}return r[n>>>0]=0,n-y},Re=(e,r,n)=>Qe(e,h(),r,n);function d(e,r){if(T)return G(5,1,e,r)}function k(e,r,n){if(T)return G(6,1,e,r,n)}function $(e,r,n){return T?G(7,1,e,r,n):0}function Me(e,r){if(T)return G(8,1,e,r)}function Ze(e,r,n){if(T)return G(9,1,e,r,n)}function Rt(e,r,n,l){if(T)return G(10,1,e,r,n,l)}function It(e,r,n,l){if(T)return G(11,1,e,r,n,l)}function Bt(e,r,n,l){if(T)return G(12,1,e,r,n,l)}function kt(e){if(T)return G(13,1,e)}function Wt(e,r){if(T)return G(14,1,e,r)}function Nt(e,r,n){if(T)return G(15,1,e,r,n)}function dt(e){e>>>=0,typeof Atomics.nb=="function"&&(Atomics.nb(f(),e>>>2,e).value.then(it),e+=128,Atomics.store(f(),e>>>2,1))}s.__emscripten_thread_mailbox_await=dt;var it=()=>{var e=ut();if(e&&(dt(e),e=nr,!me))try{if(e(),!(0<De))try{T?yt(F):Ve(F)}catch(r){r instanceof ke||r=="unwind"||V(1,r)}}catch(r){r instanceof ke||r=="unwind"||V(1,r)}};s.checkMailbox=it;var pt=[],$e=e=>e%4===0&&(e%100!==0||e%400===0),Ht=[0,31,60,91,121,152,182,213,244,274,305,335],Gt=[0,31,59,90,120,151,181,212,243,273,304,334];function $t(e,r,n,l,y,b,v,z){return T?G(16,1,e,r,n,l,y,b,v,z):-52}function Yt(e,r,n,l,y,b,v){if(T)return G(17,1,e,r,n,l,y,b,v)}var mt=[],gt={},jt=()=>{if(!ht){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:I||"./this.program"},r;for(r in gt)gt[r]===void 0?delete e[r]:e[r]=gt[r];var n=[];for(r in e)n.push(`${r}=${e[r]}`);ht=n}return ht},ht;function zt(e,r){if(T)return G(18,1,e,r);e>>>=0,r>>>=0;var n=0;return jt().forEach((l,y)=>{var b=r+n;for(y=w()[e+4*y>>>2>>>0]=b,b=0;b<l.length;++b)a()[y++>>>0]=l.charCodeAt(b);a()[y>>>0]=0,n+=l.length+1}),0}function qt(e,r){if(T)return G(19,1,e,r);e>>>=0,r>>>=0;var n=jt();w()[e>>>2>>>0]=n.length;var l=0;return n.forEach(y=>l+=y.length+1),w()[r>>>2>>>0]=l,0}function Vt(e){return T?G(20,1,e):52}function Jt(e,r,n,l){return T?G(21,1,e,r,n,l):52}function Xt(e,r,n,l,y){return T?G(22,1,e,r,n,l,y):70}var Hr=[null,[],[]];function Qt(e,r,n,l){if(T)return G(23,1,e,r,n,l);r>>>=0,n>>>=0,l>>>=0;for(var y=0,b=0;b<n;b++){var v=w()[r>>>2>>>0],z=w()[r+4>>>2>>>0];r+=8;for(var Ce=0;Ce<z;Ce++){var fe=h()[v+Ce>>>0],he=Hr[e];fe===0||fe===10?((e===1?Ie:ne)(U(he,0)),he.length=0):he.push(fe)}y+=z}return w()[l>>>2>>>0]=y,0}var Zt=[31,29,31,30,31,30,31,31,30,31,30,31],Kt=[31,28,31,30,31,30,31,31,30,31,30,31];function Gr(e){var r=Array(se(e)+1);return Qe(e,r,0,r.length),r}var $r=(e,r)=>{a().set(e,r>>>0)};function er(e,r,n,l){function y(p,N,q){for(p=typeof p=="number"?p.toString():p||"";p.length<N;)p=q[0]+p;return p}function b(p,N){return y(p,N,"0")}function v(p,N){function q(fr){return 0>fr?-1:0<fr?1:0}var He;return(He=q(p.getFullYear()-N.getFullYear()))===0&&(He=q(p.getMonth()-N.getMonth()))===0&&(He=q(p.getDate()-N.getDate())),He}function z(p){switch(p.getDay()){case 0:return new Date(p.getFullYear()-1,11,29);case 1:return p;case 2:return new Date(p.getFullYear(),0,3);case 3:return new Date(p.getFullYear(),0,2);case 4:return new Date(p.getFullYear(),0,1);case 5:return new Date(p.getFullYear()-1,11,31);case 6:return new Date(p.getFullYear()-1,11,30)}}function Ce(p){var N=p.Qa;for(p=new Date(new Date(p.Ra+1900,0,1).getTime());0<N;){var q=p.getMonth(),He=($e(p.getFullYear())?Zt:Kt)[q];if(N>He-p.getDate())N-=He-p.getDate()+1,p.setDate(1),11>q?p.setMonth(q+1):(p.setMonth(0),p.setFullYear(p.getFullYear()+1));else{p.setDate(p.getDate()+N);break}}return q=new Date(p.getFullYear()+1,0,4),N=z(new Date(p.getFullYear(),0,4)),q=z(q),0>=v(N,p)?0>=v(q,p)?p.getFullYear()+1:p.getFullYear():p.getFullYear()-1}e>>>=0,r>>>=0,n>>>=0,l>>>=0;var fe=w()[l+40>>>2>>>0];l={kb:f()[l>>>2>>>0],jb:f()[l+4>>>2>>>0],Sa:f()[l+8>>>2>>>0],Wa:f()[l+12>>>2>>>0],Ta:f()[l+16>>>2>>>0],Ra:f()[l+20>>>2>>>0],Ma:f()[l+24>>>2>>>0],Qa:f()[l+28>>>2>>>0],qb:f()[l+32>>>2>>>0],ib:f()[l+36>>>2>>>0],lb:fe?ee(fe):""},n=ee(n),fe={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var he in fe)n=n.replace(new RegExp(he,"g"),fe[he]);var ir="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),ur="January February March April May June July August September October November December".split(" ");fe={"%a":p=>ir[p.Ma].substring(0,3),"%A":p=>ir[p.Ma],"%b":p=>ur[p.Ta].substring(0,3),"%B":p=>ur[p.Ta],"%C":p=>b((p.Ra+1900)/100|0,2),"%d":p=>b(p.Wa,2),"%e":p=>y(p.Wa,2," "),"%g":p=>Ce(p).toString().substring(2),"%G":Ce,"%H":p=>b(p.Sa,2),"%I":p=>(p=p.Sa,p==0?p=12:12<p&&(p-=12),b(p,2)),"%j":p=>{for(var N=0,q=0;q<=p.Ta-1;N+=($e(p.Ra+1900)?Zt:Kt)[q++]);return b(p.Wa+N,3)},"%m":p=>b(p.Ta+1,2),"%M":p=>b(p.jb,2),"%n":()=>`\n`,"%p":p=>0<=p.Sa&&12>p.Sa?"AM":"PM","%S":p=>b(p.kb,2),"%t":()=>"	","%u":p=>p.Ma||7,"%U":p=>b(Math.floor((p.Qa+7-p.Ma)/7),2),"%V":p=>{var N=Math.floor((p.Qa+7-(p.Ma+6)%7)/7);if(2>=(p.Ma+371-p.Qa-2)%7&&N++,N)N==53&&(q=(p.Ma+371-p.Qa)%7,q==4||q==3&&$e(p.Ra)||(N=1));else{N=52;var q=(p.Ma+7-p.Qa-1)%7;(q==4||q==5&&$e(p.Ra%400-1))&&N++}return b(N,2)},"%w":p=>p.Ma,"%W":p=>b(Math.floor((p.Qa+7-(p.Ma+6)%7)/7),2),"%y":p=>(p.Ra+1900).toString().substring(2),"%Y":p=>p.Ra+1900,"%z":p=>{p=p.ib;var N=0<=p;return p=Math.abs(p)/60,(N?"+":"-")+("0000"+(p/60*100+p%60)).slice(-4)},"%Z":p=>p.lb,"%%":()=>"%"},n=n.replace(/%%/g,"\\0\\0");for(he in fe)n.includes(he)&&(n=n.replace(new RegExp(he,"g"),fe[he](l)));return n=n.replace(/\\0\\0/g,"%"),he=Gr(n),he.length>r?0:($r(he,e),he.length-1)}M.Va();var Yr=[qe,st,m,ye,oe,d,k,$,Me,Ze,Rt,It,Bt,kt,Wt,Nt,$t,Yt,zt,qt,Vt,Jt,Xt,Qt],jr={b:function(e,r,n){throw e>>>=0,new t(e).Va(r>>>0,n>>>0),o=e,u++,o},L:function(e){tr(e>>>0,!B,1,!R,131072,!1),M.$a()},j:function(e){e>>>=0,T?postMessage({cmd:"cleanupThread",thread:e}):M.Ya(M.La[e])},H:O,h:ye,S:oe,D:d,F:k,T:$,Q:Me,J:Ze,P:Rt,n:It,E:Bt,B:kt,R:Wt,C:Nt,p:()=>1,z:function(e,r){e>>>=0,e==r>>>0?setTimeout(it):T?postMessage({targetThread:e,cmd:"checkMailbox"}):(e=M.La[e])&&e.postMessage({cmd:"checkMailbox"})},I:function(e,r,n,l,y){r>>>=0,n>>>=0,pt.length=l,y=y>>>0>>>3;for(var b=0;b<l;b++)pt[b]=g()[y+b>>>0];return e=r?Ge[r]:Yr[e],M.eb=n,n=e(...pt),M.eb=0,n},K:dt,o:function(e){D&&M.La[e>>>0].ref()},s:function(e,r,n){e=r+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*r:NaN,n>>>=0,e=new Date(1e3*e),f()[n>>>2>>>0]=e.getUTCSeconds(),f()[n+4>>>2>>>0]=e.getUTCMinutes(),f()[n+8>>>2>>>0]=e.getUTCHours(),f()[n+12>>>2>>>0]=e.getUTCDate(),f()[n+16>>>2>>>0]=e.getUTCMonth(),f()[n+20>>>2>>>0]=e.getUTCFullYear()-1900,f()[n+24>>>2>>>0]=e.getUTCDay(),e=(e.getTime()-Date.UTC(e.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,f()[n+28>>>2>>>0]=e},t:function(e,r,n){e=r+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*r:NaN,n>>>=0,e=new Date(1e3*e),f()[n>>>2>>>0]=e.getSeconds(),f()[n+4>>>2>>>0]=e.getMinutes(),f()[n+8>>>2>>>0]=e.getHours(),f()[n+12>>>2>>>0]=e.getDate(),f()[n+16>>>2>>>0]=e.getMonth(),f()[n+20>>>2>>>0]=e.getFullYear()-1900,f()[n+24>>>2>>>0]=e.getDay(),r=($e(e.getFullYear())?Ht:Gt)[e.getMonth()]+e.getDate()-1|0,f()[n+28>>>2>>>0]=r,f()[n+36>>>2>>>0]=-(60*e.getTimezoneOffset()),r=new Date(e.getFullYear(),6,1).getTimezoneOffset();var l=new Date(e.getFullYear(),0,1).getTimezoneOffset();e=(r!=l&&e.getTimezoneOffset()==Math.min(l,r))|0,f()[n+32>>>2>>>0]=e},u:function(e){e>>>=0;var r=new Date(f()[e+20>>>2>>>0]+1900,f()[e+16>>>2>>>0],f()[e+12>>>2>>>0],f()[e+8>>>2>>>0],f()[e+4>>>2>>>0],f()[e>>>2>>>0],0),n=f()[e+32>>>2>>>0],l=r.getTimezoneOffset(),y=new Date(r.getFullYear(),6,1).getTimezoneOffset(),b=new Date(r.getFullYear(),0,1).getTimezoneOffset(),v=Math.min(b,y);return 0>n?f()[e+32>>>2>>>0]=+(y!=b&&v==l):0<n!=(v==l)&&(y=Math.max(b,y),r.setTime(r.getTime()+6e4*((0<n?v:y)-l))),f()[e+24>>>2>>>0]=r.getDay(),n=($e(r.getFullYear())?Ht:Gt)[r.getMonth()]+r.getDate()-1|0,f()[e+28>>>2>>>0]=n,f()[e>>>2>>>0]=r.getSeconds(),f()[e+4>>>2>>>0]=r.getMinutes(),f()[e+8>>>2>>>0]=r.getHours(),f()[e+12>>>2>>>0]=r.getDate(),f()[e+16>>>2>>>0]=r.getMonth(),f()[e+20>>>2>>>0]=r.getYear(),e=r.getTime(),e=isNaN(e)?-1:e/1e3,ar((Te=e,1<=+Math.abs(Te)?0<Te?+Math.floor(Te/4294967296)>>>0:~~+Math.ceil((Te-+(~~Te>>>0))/4294967296)>>>0:0)),e>>>0},q:$t,r:Yt,y:function(e,r,n,l){e>>>=0,r>>>=0,n>>>=0,l>>>=0;var y=new Date().getFullYear(),b=new Date(y,0,1),v=new Date(y,6,1);y=b.getTimezoneOffset();var z=v.getTimezoneOffset(),Ce=Math.max(y,z);w()[e>>>2>>>0]=60*Ce,f()[r>>>2>>>0]=+(y!=z),e=fe=>fe.toLocaleTimeString(void 0,{hour12:!1,timeZoneName:"short"}).split(" ")[1],b=e(b),v=e(v),z<y?(Re(b,n,17),Re(v,l,17)):(Re(b,l,17),Re(v,n,17))},c:()=>{te("")},O:function(e,r,n){e>>>=0,r>>>=0,n>>>=0,mt.length=0;for(var l;l=h()[r++>>>0];){var y=l!=105;y&=l!=112,n+=y&&n%8?4:0,mt.push(l==112?w()[n>>>2>>>0]:l==105?f()[n>>>2>>>0]:g()[n>>>3>>>0]),n+=y?8:4}return Ge[e](...mt)},k:()=>{},i:()=>Date.now(),U:()=>{throw De+=1,"unwind"},A:function(){return 4294901760},e:()=>performance.timeOrigin+performance.now(),f:()=>D?(br(),et(hr)).cpus().length:navigator.hardwareConcurrency,x:function(e){e>>>=0;var r=h().length;if(e<=r||4294901760<e)return!1;for(var n=1;4>=n;n*=2){var l=r*(1+.2/n);l=Math.min(l,e+100663296);var y=Math;l=Math.max(e,l);e:{y=(y.min.call(y,4294901760,l+(65536-l%65536)%65536)-X.buffer.byteLength+65535)/65536;try{X.grow(y),K();var b=1;break e}catch{}b=void 0}if(b)return!0}return!1},M:zt,N:qt,G:Ve,g:Vt,m:Jt,v:Xt,l:Qt,a:X||s.wasmMemory,w:er,d:function(e,r,n,l){return er(e>>>0,r>>>0,n>>>0,l>>>0)}},C=function(){function e(n,l){return C=n.exports,C=zr(),M.ab.push(C.ya),Xe=C.za,Ue.unshift(C.V),we=l,Be(),C}var r={a:jr};if(Ae++,s.instantiateWasm)try{return s.instantiateWasm(r,e)}catch(n){ne(`Module.instantiateWasm callback failed with error: ${n}`),x(n)}return rt(r,function(n){e(n.instance,n.module)}).catch(x),{}}();s._OrtInit=(e,r)=>(s._OrtInit=C.W)(e,r),s._OrtGetLastError=(e,r)=>(s._OrtGetLastError=C.X)(e,r),s._OrtCreateSessionOptions=(e,r,n,l,y,b,v,z,Ce,fe)=>(s._OrtCreateSessionOptions=C.Y)(e,r,n,l,y,b,v,z,Ce,fe),s._OrtAppendExecutionProvider=(e,r)=>(s._OrtAppendExecutionProvider=C.Z)(e,r),s._OrtAddFreeDimensionOverride=(e,r,n)=>(s._OrtAddFreeDimensionOverride=C._)(e,r,n),s._OrtAddSessionConfigEntry=(e,r,n)=>(s._OrtAddSessionConfigEntry=C.$)(e,r,n),s._OrtReleaseSessionOptions=e=>(s._OrtReleaseSessionOptions=C.aa)(e),s._OrtCreateSession=(e,r,n)=>(s._OrtCreateSession=C.ba)(e,r,n),s._OrtReleaseSession=e=>(s._OrtReleaseSession=C.ca)(e),s._OrtGetInputOutputCount=(e,r,n)=>(s._OrtGetInputOutputCount=C.da)(e,r,n),s._OrtGetInputName=(e,r)=>(s._OrtGetInputName=C.ea)(e,r),s._OrtGetOutputName=(e,r)=>(s._OrtGetOutputName=C.fa)(e,r),s._OrtFree=e=>(s._OrtFree=C.ga)(e),s._OrtCreateTensor=(e,r,n,l,y,b)=>(s._OrtCreateTensor=C.ha)(e,r,n,l,y,b),s._OrtGetTensorData=(e,r,n,l,y)=>(s._OrtGetTensorData=C.ia)(e,r,n,l,y),s._OrtReleaseTensor=e=>(s._OrtReleaseTensor=C.ja)(e),s._OrtCreateRunOptions=(e,r,n,l)=>(s._OrtCreateRunOptions=C.ka)(e,r,n,l),s._OrtAddRunConfigEntry=(e,r,n)=>(s._OrtAddRunConfigEntry=C.la)(e,r,n),s._OrtReleaseRunOptions=e=>(s._OrtReleaseRunOptions=C.ma)(e),s._OrtCreateBinding=e=>(s._OrtCreateBinding=C.na)(e),s._OrtBindInput=(e,r,n)=>(s._OrtBindInput=C.oa)(e,r,n),s._OrtBindOutput=(e,r,n,l)=>(s._OrtBindOutput=C.pa)(e,r,n,l),s._OrtClearBoundOutputs=e=>(s._OrtClearBoundOutputs=C.qa)(e),s._OrtReleaseBinding=e=>(s._OrtReleaseBinding=C.ra)(e),s._OrtRunWithBinding=(e,r,n,l,y)=>(s._OrtRunWithBinding=C.sa)(e,r,n,l,y),s._OrtRun=(e,r,n,l,y,b,v,z)=>(s._OrtRun=C.ta)(e,r,n,l,y,b,v,z),s._OrtEndProfiling=e=>(s._OrtEndProfiling=C.ua)(e);var ut=s._pthread_self=()=>(ut=s._pthread_self=C.va)();s._malloc=e=>(s._malloc=C.wa)(e),s._free=e=>(s._free=C.xa)(e),s.__emscripten_tls_init=()=>(s.__emscripten_tls_init=C.ya)();var tr=s.__emscripten_thread_init=(e,r,n,l,y,b)=>(tr=s.__emscripten_thread_init=C.Aa)(e,r,n,l,y,b);s.__emscripten_thread_crashed=()=>(s.__emscripten_thread_crashed=C.Ba)();var rr=(e,r,n,l,y)=>(rr=C.Ca)(e,r,n,l,y),bt=e=>(bt=C.Da)(e),yt=s.__emscripten_thread_exit=e=>(yt=s.__emscripten_thread_exit=C.Ea)(e),nr=()=>(nr=C.Fa)(),ar=e=>(ar=C.Ga)(e),or=(e,r)=>(or=C.Ha)(e,r),ft=e=>(ft=C.Ia)(e),wt=e=>(wt=C.Ja)(e),Ot=()=>(Ot=C.Ka)();function zr(){var e=C;e=Object.assign({},e);var r=l=>()=>l()>>>0,n=l=>y=>l(y)>>>0;return e.va=r(e.va),e.wa=n(e.wa),e.emscripten_main_runtime_thread_id=r(e.emscripten_main_runtime_thread_id),e.Ja=n(e.Ja),e.Ka=r(e.Ka),e}s.wasmMemory=X,s.stackSave=()=>Ot(),s.stackRestore=e=>ft(e),s.stackAlloc=e=>wt(e),s.keepRuntimeAlive=()=>0<De,s.UTF8ToString=ee,s.stringToUTF8=Re,s.lengthBytesUTF8=se,s.ExitStatus=ke,s.PThread=M;var lt;ge=function e(){lt||sr(),lt||(ge=e)};function sr(){if(!(0<Ae))if(T)S(s),T||Ne(Ue),startWorker(s);else{if(s.preRun)for(typeof s.preRun=="function"&&(s.preRun=[s.preRun]);s.preRun.length;)Oe.unshift(s.preRun.shift());Ne(Oe),0<Ae||lt||(lt=!0,s.calledRun=!0,me||(T||Ne(Ue),S(s),T||Ne(ve)))}}return sr(),H}})();typeof wr=="object"&&typeof Dt=="object"?Dt.exports=yr:typeof define=="function"&&define.amd&&define([],()=>yr)});var vr=Ke((yn,tn)=>{tn.exports=\'"use strict";var Module={},ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string";if(ENVIRONMENT_IS_NODE){var nodeWorkerThreads=require("worker_threads"),parentPort=nodeWorkerThreads.parentPort;parentPort.on("message",e=>onmessage({data:e}));var fs=require("fs"),vm=require("vm");Object.assign(global,{self:global,require,Module,location:{href:__filename},Worker:nodeWorkerThreads.Worker,importScripts:e=>vm.runInThisContext(fs.readFileSync(e,"utf8"),{filename:e}),postMessage:e=>parentPort.postMessage(e),performance:global.performance||{now:Date.now}})}var initializedJS=!1;function threadPrintErr(...e){var a=e.join(" ");if(ENVIRONMENT_IS_NODE){fs.writeSync(2,a+`\\n`);return}console.error(a)}function threadAlert(...e){var a=e.join(" ");postMessage({cmd:"alert",text:a,threadId:Module._pthread_self()})}var err=threadPrintErr;self.alert=threadAlert,Module.instantiateWasm=(e,a)=>{var r=Module.wasmModule;Module.wasmModule=null;var t=new WebAssembly.Instance(r,e);return a(t)},self.onunhandledrejection=e=>{throw e.reason||e};function handleMessage(e){try{if(e.data.cmd==="load"){let r=[];self.onmessage=t=>r.push(t),self.startWorker=t=>{Module=t,postMessage({cmd:"loaded"});for(let s of r)handleMessage(s);self.onmessage=handleMessage},Module.wasmModule=e.data.wasmModule;for(const t of e.data.handlers)Module[t]=(...s)=>{postMessage({cmd:"callHandler",handler:t,args:s})};if(Module.wasmMemory=e.data.wasmMemory,Module.buffer=Module.wasmMemory.buffer,Module.ENVIRONMENT_IS_PTHREAD=!0,typeof e.data.urlOrBlob=="string")importScripts(e.data.urlOrBlob);else{var a=URL.createObjectURL(e.data.urlOrBlob);importScripts(a),URL.revokeObjectURL(a)}ortWasmThreaded(Module)}else if(e.data.cmd==="run"){Module.__emscripten_thread_init(e.data.pthread_ptr,0,0,1),Module.__emscripten_thread_mailbox_await(e.data.pthread_ptr),Module.establishStackSpace(),Module.PThread.receiveObjectTransfer(e.data),Module.PThread.threadInitTLS(),initializedJS||(initializedJS=!0);try{Module.invokeEntryPoint(e.data.start_routine,e.data.arg)}catch(r){if(r!="unwind")throw r}}else e.data.cmd==="cancel"?Module._pthread_self()&&Module.__emscripten_thread_exit(-1):e.data.target==="setimmediate"||(e.data.cmd==="checkMailbox"?initializedJS&&Module.checkMailbox():e.data.cmd&&(err(`worker.js received unknown command ${e.data.cmd}`),err(e.data)))}catch(r){throw Module.__emscripten_thread_crashed?.(),r}}self.onmessage=handleMessage;\\n\'});var Er;Er=pr();var rn=Or(),Ft,Pt=!1,ct=!1,_r=!1,nn=i=>{if(i===1)return!1;if(typeof SharedArrayBuffer>"u")return typeof self<"u"&&!self.crossOriginIsolated&&console.warn("env.wasm.numThreads is set to "+i+", but this will not work unless you enable crossOriginIsolated mode. See https://web.dev/cross-origin-isolation-guide/ for more info."),!1;typeof process<"u"&&process.versions&&process.versions.node&&console.warn("env.wasm.numThreads is set to "+i+", however, currently onnxruntime-web does not support multi-threads in Node.js. Please consider using onnxruntime-node for performance critical scenarios.");try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))}catch{return!1}},an=()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}},on=(i,c)=>i?c?"ort-wasm-simd-threaded.wasm":"ort-wasm-simd.wasm":c?"ort-wasm-threaded.wasm":"ort-wasm.wasm",Sr=async i=>{if(Pt)return Promise.resolve();if(ct)throw new Error("multiple calls to \'initializeWebAssembly()\' detected.");if(_r)throw new Error("previous call to \'initializeWebAssembly()\' failed.");ct=!0;let c=i.initTimeout,a=i.numThreads,h=i.simd,f=nn(a),w=h&&an(),g=i.wasmPaths,s=typeof g=="string"?g:void 0,S=on(w,f),x=typeof g=="object"?g[S]:void 0,H=!1,A=[];if(c>0&&A.push(new Promise(I=>{setTimeout(()=>{H=!0,I()},c)})),A.push(new Promise((I,V)=>{let R=f?rn:Er,B={locateFile:(D,T)=>f&&D.endsWith(".worker.js")&&typeof Blob<"u"?URL.createObjectURL(new Blob([vr()],{type:"text/javascript"})):D.endsWith(".wasm")?x||(s??T)+S:T+D};if(f)if(B.numThreads=a,typeof Blob>"u")B.mainScriptUrlOrBlob=(void 0)(__dirname,"ort-wasm-threaded.js");else{let D=`var ortWasmThreaded=${R.toString()};`;B.mainScriptUrlOrBlob=new Blob([D],{type:"text/javascript"})}R(B).then(D=>{ct=!1,Pt=!0,Ft=D,I()},D=>{ct=!1,_r=!0,V(D)})})),await Promise.race(A),H)throw new Error(`WebAssembly backend initializing failed due to timeout: ${c}ms`)},Q=()=>{if(Pt&&Ft)return Ft;throw new Error("WebAssembly is not initialized yet.")};var Y=(i,c)=>{let a=Q(),h=a.lengthBytesUTF8(i)+1,f=a._malloc(h);return a.stringToUTF8(i,f,h),c.push(f),f},tt=(i,c,a,h)=>{if(typeof i=="object"&&i!==null){if(a.has(i))throw new Error("Circular reference in options");a.add(i)}Object.entries(i).forEach(([f,w])=>{let g=c?c+f:f;if(typeof w=="object")tt(w,g+".",a,h);else if(typeof w=="string"||typeof w=="number")h(g,w.toString());else if(typeof w=="boolean")h(g,w?"1":"0");else throw new Error(`Can\'t handle extra config type: ${typeof w}`)})},j=i=>{let c=Q(),a=c.stackSave();try{let h=c.stackAlloc(8);c._OrtGetLastError(h,h+4);let f=c.HEAP32[h/4],w=c.HEAPU32[h/4+1],g=w?c.UTF8ToString(w):"";throw new Error(`${i} ERROR_CODE: ${f}, ERROR_MESSAGE: ${g}`)}finally{c.stackRestore(a)}};var Ar=i=>{let c=Q(),a=0,h=[],f=i||{};try{if(i?.logSeverityLevel===void 0)f.logSeverityLevel=2;else if(typeof i.logSeverityLevel!="number"||!Number.isInteger(i.logSeverityLevel)||i.logSeverityLevel<0||i.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${i.logSeverityLevel}`);if(i?.logVerbosityLevel===void 0)f.logVerbosityLevel=0;else if(typeof i.logVerbosityLevel!="number"||!Number.isInteger(i.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${i.logVerbosityLevel}`);i?.terminate===void 0&&(f.terminate=!1);let w=0;return i?.tag!==void 0&&(w=Y(i.tag,h)),a=c._OrtCreateRunOptions(f.logSeverityLevel,f.logVerbosityLevel,!!f.terminate,w),a===0&&j("Can\'t create run options."),i?.extra!==void 0&&tt(i.extra,"",new WeakSet,(g,s)=>{let S=Y(g,h),x=Y(s,h);c._OrtAddRunConfigEntry(a,S,x)!==0&&j(`Can\'t set a run config entry: ${g} - ${s}.`)}),[a,h]}catch(w){throw a!==0&&c._OrtReleaseRunOptions(a),h.forEach(g=>c._free(g)),w}};var sn=i=>{switch(i){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${i}`)}},un=i=>{switch(i){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${i}`)}},fn=i=>{i.extra||(i.extra={}),i.extra.session||(i.extra.session={});let c=i.extra.session;c.use_ort_model_bytes_directly||(c.use_ort_model_bytes_directly="1"),i.executionProviders&&i.executionProviders.some(a=>(typeof a=="string"?a:a.name)==="webgpu")&&(i.enableMemPattern=!1)},ln=(i,c,a)=>{for(let h of c){let f=typeof h=="string"?h:h.name;switch(f){case"webnn":if(f="WEBNN",typeof h!="string"){let g=h;if(g?.deviceType){let s=Y("deviceType",a),S=Y(g.deviceType,a);Q()._OrtAddSessionConfigEntry(i,s,S)!==0&&j(`Can\'t set a session config entry: \'deviceType\' - ${g.deviceType}.`)}if(g?.numThreads){let s=g.numThreads;(typeof s!="number"||!Number.isInteger(s)||s<0)&&(s=0);let S=Y("numThreads",a),x=Y(s.toString(),a);Q()._OrtAddSessionConfigEntry(i,S,x)!==0&&j(`Can\'t set a session config entry: \'numThreads\' - ${g.numThreads}.`)}if(g?.powerPreference){let s=Y("powerPreference",a),S=Y(g.powerPreference,a);Q()._OrtAddSessionConfigEntry(i,s,S)!==0&&j(`Can\'t set a session config entry: \'powerPreference\' - ${g.powerPreference}.`)}}break;case"webgpu":if(f="JS",typeof h!="string"){let g=h;if(g?.preferredLayout){if(g.preferredLayout!=="NCHW"&&g.preferredLayout!=="NHWC")throw new Error(`preferredLayout must be either \'NCHW\' or \'NHWC\': ${g.preferredLayout}`);let s=Y("preferredLayout",a),S=Y(g.preferredLayout,a);Q()._OrtAddSessionConfigEntry(i,s,S)!==0&&j(`Can\'t set a session config entry: \'preferredLayout\' - ${g.preferredLayout}.`)}}break;case"wasm":case"cpu":continue;default:throw new Error(`not supported execution provider: ${f}`)}let w=Y(f,a);Q()._OrtAppendExecutionProvider(i,w)!==0&&j(`Can\'t append execution provider: ${f}.`)}},Tr=i=>{let c=Q(),a=0,h=[],f=i||{};fn(f);try{let w=sn(f.graphOptimizationLevel??"all"),g=un(f.executionMode??"sequential"),s=typeof f.logId=="string"?Y(f.logId,h):0,S=f.logSeverityLevel??2;if(!Number.isInteger(S)||S<0||S>4)throw new Error(`log serverity level is not valid: ${S}`);let x=f.logVerbosityLevel??0;if(!Number.isInteger(x)||x<0||x>4)throw new Error(`log verbosity level is not valid: ${x}`);let H=typeof f.optimizedModelFilePath=="string"?Y(f.optimizedModelFilePath,h):0;if(a=c._OrtCreateSessionOptions(w,!!f.enableCpuMemArena,!!f.enableMemPattern,g,!!f.enableProfiling,0,s,S,x,H),a===0&&j("Can\'t create session options."),f.executionProviders&&ln(a,f.executionProviders,h),f.enableGraphCapture!==void 0){if(typeof f.enableGraphCapture!="boolean")throw new Error(`enableGraphCapture must be a boolean value: ${f.enableGraphCapture}`);let A=Y("enableGraphCapture",h),I=Y(f.enableGraphCapture.toString(),h);c._OrtAddSessionConfigEntry(a,A,I)!==0&&j(`Can\'t set a session config entry: \'enableGraphCapture\' - ${f.enableGraphCapture}.`)}if(f.freeDimensionOverrides)for(let[A,I]of Object.entries(f.freeDimensionOverrides)){if(typeof A!="string")throw new Error(`free dimension override name must be a string: ${A}`);if(typeof I!="number"||!Number.isInteger(I)||I<0)throw new Error(`free dimension override value must be a non-negative integer: ${I}`);let V=Y(A,h);c._OrtAddFreeDimensionOverride(a,V,I)!==0&&j(`Can\'t set a free dimension override: ${A} - ${I}.`)}return f.extra!==void 0&&tt(f.extra,"",new WeakSet,(A,I)=>{let V=Y(A,h),R=Y(I,h);c._OrtAddSessionConfigEntry(a,V,R)!==0&&j(`Can\'t set a session config entry: ${A} - ${I}.`)}),[a,h]}catch(w){throw a!==0&&c._OrtReleaseSessionOptions(a),h.forEach(g=>c._free(g)),w}};var xt=i=>{switch(i){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${i}`)}},Mr=i=>{switch(i){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${i}`)}},Ut=i=>[void 0,4,1,1,2,2,4,8,void 0,1,2,8,4,8,void 0,void 0,void 0][i],Cr=i=>{switch(i){case"float16":return typeof Float16Array<"u"&&Float16Array.from?Float16Array:Uint16Array;case"float32":return Float32Array;case"uint8":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"bool":return Uint8Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${i}`)}},Dr=i=>{switch(i){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${i}`)}},Fr=i=>i==="float32"||i==="float16"||i==="int32"||i==="int64"||i==="uint32"||i==="uint8"||i==="bool",Pr=i=>{switch(i){case"none":return 0;case"cpu":return 1;case"cpu-pinned":return 2;case"texture":return 3;case"gpu-buffer":return 4;default:throw new Error(`unsupported data location: ${i}`)}};var xr=async i=>{if(typeof i=="string")if(typeof process<"u"&&process.versions&&process.versions.node)try{return new Uint8Array(await(void 0)(i))}catch(c){if(c.code==="ERR_FS_FILE_TOO_LARGE"){let a=(void 0)(i),h=[];for await(let f of a)h.push(f);return new Uint8Array(Buffer.concat(h))}throw c}else{let c=await fetch(i);if(!c.ok)throw new Error(`failed to load external data file: ${i}`);let a=c.headers.get("Content-Length"),h=a?parseInt(a,10):0;if(h<1073741824)return new Uint8Array(await c.arrayBuffer());{if(!c.body)throw new Error(`failed to load external data file: ${i}, no response body.`);let f=c.body.getReader(),w;try{w=new ArrayBuffer(h)}catch(s){if(s instanceof RangeError){let S=Math.ceil(h/65536);w=new WebAssembly.Memory({initial:S,maximum:S}).buffer}else throw s}let g=0;for(;;){let{done:s,value:S}=await f.read();if(s)break;let x=S.byteLength;new Uint8Array(w,g,x).set(S),g+=x}return new Uint8Array(w,0,h)}}else return i instanceof Blob?new Uint8Array(await i.arrayBuffer()):i instanceof Uint8Array?i:new Uint8Array(i)};var cn=(i,c)=>{Q()._OrtInit(i,c)!==0&&j("Can\'t initialize onnxruntime.")},Lr=async i=>{cn(i.wasm.numThreads,Dr(i.logLevel))},Rr=async(i,c)=>{},Ye=new Map,dn=i=>{let c=Q(),a=c.stackSave();try{let h=c.stackAlloc(8);return c._OrtGetInputOutputCount(i,h,h+4)!==0&&j("Can\'t get session input/output count."),[c.HEAP32[h/4],c.HEAP32[h/4+1]]}finally{c.stackRestore(a)}},Lt=i=>{let c=Q(),a=c._malloc(i.byteLength);if(a===0)throw new Error(`Can\'t create a session. failed to allocate a buffer of size ${i.byteLength}.`);return c.HEAPU8.set(i,a),[a,i.byteLength]},Ir=async(i,c)=>{let a,h,f=Q();Array.isArray(i)?[a,h]=i:i.buffer===f.HEAPU8.buffer?[a,h]=[i.byteOffset,i.byteLength]:[a,h]=Lt(i);let w=0,g=0,s=0,S=[],x=[],H=[];try{if([g,S]=Tr(c),c?.externalData&&f.mountExternalData){let L=[];for(let W of c.externalData){let de=typeof W=="string"?W:W.path;L.push(xr(typeof W=="string"?W:W.data).then(pe=>{f.mountExternalData(de,pe)}))}await Promise.all(L)}w=await f._OrtCreateSession(a,h,g),w===0&&j("Can\'t create a session.");let[A,I]=dn(w),V=!!c?.enableGraphCapture,R=[],B=[],D=[];for(let L=0;L<A;L++){let W=f._OrtGetInputName(w,L);W===0&&j("Can\'t get an input name."),x.push(W),R.push(f.UTF8ToString(W))}for(let L=0;L<I;L++){let W=f._OrtGetOutputName(w,L);W===0&&j("Can\'t get an output name."),H.push(W);let de=f.UTF8ToString(W);B.push(de)}let T=null;return Ye.set(w,[w,x,H,T,V,!1]),[w,R,B]}catch(A){throw x.forEach(I=>f._OrtFree(I)),H.forEach(I=>f._OrtFree(I)),s!==0&&f._OrtReleaseBinding(s),w!==0&&f._OrtReleaseSession(w),A}finally{f._free(a),g!==0&&f._OrtReleaseSessionOptions(g),S.forEach(A=>f._free(A)),f.unmountExternalData?.()}},Br=i=>{let c=Q(),a=Ye.get(i);if(!a)throw new Error(`cannot release session. invalid session id: ${i}`);let[h,f,w,g,s]=a;g&&(s&&c._OrtClearBoundOutputs(g.handle),c._OrtReleaseBinding(g.handle)),c.jsepOnReleaseSession?.(i),f.forEach(S=>c._OrtFree(S)),w.forEach(S=>c._OrtFree(S)),c._OrtReleaseSession(h),Ye.delete(i)},Ur=(i,c,a,h,f,w=!1)=>{if(!i){c.push(0);return}let g=Q(),s=i[0],S=i[1],x=i[3],H,A;if(s==="string"&&x==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");if(w&&x!=="gpu-buffer")throw new Error(`External buffer must be provided for input/output index ${f} when enableGraphCapture is true.`);if(x==="gpu-buffer"){let R=i[2].gpuBuffer,B=Ut(xt(s));A=S.reduce((T,L)=>T*L,1)*B;let D=g.jsepRegisterBuffer;if(!D)throw new Error(\'Tensor location "gpu-buffer" is not supported without using WebGPU.\');H=D(h,f,R,A)}else{let R=i[2];if(Array.isArray(R)){A=4*R.length,H=g._malloc(A),a.push(H);let B=H/4;for(let D=0;D<R.length;D++){if(typeof R[D]!="string")throw new TypeError(`tensor data at index ${D} is not a string`);g.HEAPU32[B++]=Y(R[D],a)}}else A=R.byteLength,H=g._malloc(A),a.push(H),g.HEAPU8.set(new Uint8Array(R.buffer,R.byteOffset,A),H)}let I=g.stackSave(),V=g.stackAlloc(4*S.length);try{let R=V/4;S.forEach(D=>g.HEAP32[R++]=D);let B=g._OrtCreateTensor(xt(s),H,A,V,S.length,Pr(x));B===0&&j(`Can\'t create tensor for input/output. session=${h}, index=${f}.`),c.push(B)}finally{g.stackRestore(I)}},kr=async(i,c,a,h,f,w)=>{let g=Q(),s=Ye.get(i);if(!s)throw new Error(`cannot run inference. invalid session id: ${i}`);let S=s[0],x=s[1],H=s[2],A=s[3],I=s[4],V=s[5],R=c.length,B=h.length,D=0,T=[],L=[],W=[],de=[],pe=g.stackSave(),Z=g.stackAlloc(R*4),_=g.stackAlloc(R*4),J=g.stackAlloc(B*4),Pe=g.stackAlloc(B*4);try{[D,T]=Ar(w);for(let F=0;F<R;F++)Ur(a[F],L,de,i,c[F],I);for(let F=0;F<B;F++)Ur(f[F],W,de,i,R+h[F],I);let le=Z/4,Ie=_/4,ne=J/4,X=Pe/4;for(let F=0;F<R;F++)g.HEAPU32[le++]=L[F],g.HEAPU32[Ie++]=x[c[F]];for(let F=0;F<B;F++)g.HEAPU32[ne++]=W[F],g.HEAPU32[X++]=H[h[F]];g.jsepOnRunStart?.(S);let we;we=await g._OrtRun(S,_,Z,R,Pe,B,J,D),we!==0&&j("failed to call OrtRun().");let me=[];for(let F=0;F<B;F++){let ie=g.HEAPU32[J/4+F];if(ie===W[F]){me.push(f[F]);continue}let xe=g.stackSave(),ce=g.stackAlloc(4*4),be=!1,ae,K=0;try{g._OrtGetTensorData(ie,ce,ce+4,ce+8,ce+12)!==0&&j(`Can\'t access output tensor data on index ${F}.`);let Oe=ce/4,Ue=g.HEAPU32[Oe++];K=g.HEAPU32[Oe++];let ve=g.HEAPU32[Oe++],Ae=g.HEAPU32[Oe++],_e=[];for(let te=0;te<Ae;te++)_e.push(g.HEAPU32[ve/4+te]);g._OrtFree(ve);let ge=_e.reduce((te,re)=>te*re,1);ae=Mr(Ue);let Be=A?.outputPreferredLocations[h[F]];if(ae==="string"){if(Be==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");let te=[],re=K/4;for(let ue=0;ue<ge;ue++){let Ee=g.HEAPU32[re++],Se=ue===ge-1?void 0:g.HEAPU32[re]-Ee;te.push(g.UTF8ToString(Ee,Se))}me.push([ae,_e,te,"cpu"])}else if(Be==="gpu-buffer"&&ge>0){let te=g.jsepGetBuffer;if(!te)throw new Error(\'preferredLocation "gpu-buffer" is not supported without using WebGPU.\');let re=te(K),ue=Ut(Ue);if(ue===void 0||!Fr(ae))throw new Error(`Unsupported data type: ${ae}`);be=!0,me.push([ae,_e,{gpuBuffer:re,download:g.jsepCreateDownloader(re,ge*ue,ae),dispose:()=>{g._OrtReleaseTensor(ie)}},"gpu-buffer"])}else{let te=Cr(ae),re=new te(ge);new Uint8Array(re.buffer,re.byteOffset,re.byteLength).set(g.HEAPU8.subarray(K,K+re.byteLength)),me.push([ae,_e,re,"cpu"])}}finally{g.stackRestore(xe),ae==="string"&&K&&g._free(K),be||g._OrtReleaseTensor(ie)}}return A&&!I&&(g._OrtClearBoundOutputs(A.handle),Ye.set(i,[S,x,H,A,I,!1])),me}finally{g.stackRestore(pe),L.forEach(le=>g._OrtReleaseTensor(le)),W.forEach(le=>g._OrtReleaseTensor(le)),de.forEach(le=>g._free(le)),D!==0&&g._OrtReleaseRunOptions(D),T.forEach(le=>g._free(le))}},Wr=i=>{let c=Q(),a=Ye.get(i);if(!a)throw new Error("invalid session id");let h=a[0],f=c._OrtEndProfiling(h);f===0&&j("Can\'t get an profile file name."),c._OrtFree(f)},Nr=i=>{let c=[];for(let a of i){let h=a[2];!Array.isArray(h)&&"buffer"in h&&c.push(h.buffer)}return c};self.onmessage=i=>{let{type:c,in:a}=i.data;try{switch(c){case"init-wasm":Sr(a.wasm).then(()=>{Lr(a).then(()=>{postMessage({type:c})},h=>{postMessage({type:c,err:h})})},h=>{postMessage({type:c,err:h})});break;case"init-ep":{let{epName:h,env:f}=a;Rr(f,h).then(()=>{postMessage({type:c})},w=>{postMessage({type:c,err:w})});break}case"copy-from":{let{buffer:h}=a,f=Lt(h);postMessage({type:c,out:f});break}case"create":{let{model:h,options:f}=a;Ir(h,f).then(w=>{postMessage({type:c,out:w})},w=>{postMessage({type:c,err:w})});break}case"release":Br(a),postMessage({type:c});break;case"run":{let{sessionId:h,inputIndices:f,inputs:w,outputIndices:g,options:s}=a;kr(h,f,w,g,new Array(g.length).fill(null),s).then(S=>{S.some(x=>x[3]!=="cpu")?postMessage({type:c,err:"Proxy does not support non-cpu tensor location."}):postMessage({type:c,out:S},Nr([...w,...S]))},S=>{postMessage({type:c,err:S})});break}case"end-profiling":Wr(a),postMessage({type:c});break;default:}}catch(h){postMessage({type:c,err:h})}};})();\n'}),_r,gt,yn,Do,Lo,ca,pa,Vr,Wr,Tg,Eo,od,id,ad,sd,ud,ld,fd,da=L(()=>{var e;Ot(),rd(),Ur(),_r=()=>!!Z.wasm.proxy&&typeof document<"u",yn=!1,Do=!1,Lo=!1,pa=new Map,Vr=(t,a)=>{let i=pa.get(t);i?i.push(a):pa.set(t,[a])},Wr=()=>{if(yn||!Do||Lo||!gt)throw new Error("worker not ready")},Tg=t=>{switch(t.data.type){case"init-wasm":yn=!1,t.data.err?(Lo=!0,ca[1](t.data.err)):(Do=!0,ca[0]());break;case"init-ep":case"copy-from":case"create":case"release":case"run":case"end-profiling":{let a=pa.get(t.data.type);t.data.err?a.shift()[1](t.data.err):a.shift()[0](t.data.out);break}}},Eo=typeof document<"u"?(e=document==null?void 0:document.currentScript)==null?void 0:e.src:void 0,od=async()=>{if(!Do){if(yn)throw new Error("multiple calls to 'initWasm()' detected.");if(Lo)throw new Error("previous call to 'initWasm()' failed.");if(yn=!0,_r())return Z.wasm.wasmPaths===void 0&&Eo&&Eo.indexOf("blob:")!==0&&(Z.wasm.wasmPaths=Eo.substr(0,+Eo.lastIndexOf("/")+1)),new Promise((t,a)=>{gt==null||gt.terminate();let i=URL.createObjectURL(new Blob([nd()],{type:"text/javascript"}));gt=new Worker(i,{name:"ort-wasm-proxy-worker"}),gt.onerror=n=>a(n),gt.onmessage=Tg,URL.revokeObjectURL(i),ca=[t,a];let u={type:"init-wasm",in:Z};gt.postMessage(u)});try{await Mp(Z.wasm),await Xp(Z),Do=!0}catch(t){throw Lo=!0,t}finally{yn=!1}}},id=async t=>{if(_r())return Wr(),new Promise((a,i)=>{Vr("init-ep",[a,i]);let u={type:"init-ep",in:{epName:t,env:Z}};gt.postMessage(u)});await Kp(Z,t)},ad=async t=>_r()?(Wr(),new Promise((a,i)=>{Vr("copy-from",[a,i]);let u={type:"copy-from",in:{buffer:t}};gt.postMessage(u,[t.buffer])})):fa(t),sd=async(t,a)=>{if(_r()){if(a!=null&&a.preferredOutputLocation)throw new Error('session option "preferredOutputLocation" is not supported for proxy.');return Wr(),new Promise((i,u)=>{Vr("create",[i,u]);let n={type:"create",in:{model:t,options:{...a}}},o=[];t instanceof Uint8Array&&o.push(t.buffer),gt.postMessage(n,o)})}else return Jp(t,a)},ud=async t=>{if(_r())return Wr(),new Promise((a,i)=>{Vr("release",[a,i]);let u={type:"release",in:t};gt.postMessage(u)});Zp(t)},ld=async(t,a,i,u,n,o)=>{if(_r()){if(i.some(c=>c[3]!=="cpu"))throw new Error("input tensor on GPU is not supported for proxy.");if(n.some(c=>c))throw new Error("pre-allocated output tensor is not supported for proxy.");return Wr(),new Promise((c,p)=>{Vr("run",[c,p]);let r=i,l={type:"run",in:{sessionId:t,inputIndices:a,inputs:r,outputIndices:u,options:o}};gt.postMessage(l,td(r))})}else return Qp(t,a,i,u,n,o)},fd=async t=>{if(_r())return Wr(),new Promise((a,i)=>{Vr("end-profiling",[a,i]);let u={type:"end-profiling",in:t};gt.postMessage(u)});ed(t)}}),cd,xg,Co,pd=L(()=>{Ot(),da(),ua(),la(),cd=(e,t)=>{switch(e.location){case"cpu":return[e.type,e.dims,e.data,"cpu"];case"gpu-buffer":return[e.type,e.dims,{gpuBuffer:e.gpuBuffer},"gpu-buffer"];default:throw new Error(`invalid data location: ${e.location} for ${t()}`)}},xg=e=>{switch(e[3]){case"cpu":return new Me(e[0],e[2],e[1]);case"gpu-buffer":{let t=e[0];if(!Po(t))throw new Error(`not supported data type: ${t} for deserializing GPU tensor`);let{gpuBuffer:a,download:i,dispose:u}=e[2];return Me.fromGpuBuffer(a,{dataType:t,dims:e[1],download:i,dispose:u})}default:throw new Error(`invalid data location: ${e[3]}`)}},Co=class{async fetchModelAndCopyToWasmMemory(e){return ad(await gn(e))}async loadModel(e,t){lr();let a;typeof e=="string"?typeof process<"u"&&process.versions&&process.versions.node?a=await gn(e):a=await this.fetchModelAndCopyToWasmMemory(e):a=e,[this.sessionId,this.inputNames,this.outputNames]=await sd(a,t),fr()}async dispose(){return ud(this.sessionId)}async run(e,t,a){lr();let i=[],u=[];Object.entries(e).forEach(s=>{let h=s[0],d=s[1],m=this.inputNames.indexOf(h);if(m===-1)throw new Error(`invalid input '${h}'`);i.push(d),u.push(m)});let n=[],o=[];Object.entries(t).forEach(s=>{let h=s[0],d=s[1],m=this.outputNames.indexOf(h);if(m===-1)throw new Error(`invalid output '${h}'`);n.push(d),o.push(m)});let c=i.map((s,h)=>cd(s,()=>`input "${this.inputNames[u[h]]}"`)),p=n.map((s,h)=>s?cd(s,()=>`output "${this.outputNames[o[h]]}"`):null),r=await ld(this.sessionId,u,c,o,p,a),l={};for(let s=0;s<r.length;s++)l[this.outputNames[o[s]]]=n[s]??xg(r[s]);return fr(),l}startProfiling(){}endProfiling(){fd(this.sessionId)}}}),wg,Fo,dd=L(()=>{Ot(),da(),pd(),wg=()=>{if((typeof Z.wasm.initTimeout!="number"||Z.wasm.initTimeout<0)&&(Z.wasm.initTimeout=0),typeof Z.wasm.simd!="boolean"&&(Z.wasm.simd=!0),typeof Z.wasm.proxy!="boolean"&&(Z.wasm.proxy=!1),typeof Z.wasm.trace!="boolean"&&(Z.wasm.trace=!1),typeof Z.wasm.numThreads!="number"||!Number.isInteger(Z.wasm.numThreads)||Z.wasm.numThreads<=0){(typeof self<"u"&&!self.crossOriginIsolated||typeof process<"u"&&process.versions&&process.versions.node)&&(Z.wasm.numThreads=1);let e=typeof navigator>"u"?(void 0)().length:navigator.hardwareConcurrency;Z.wasm.numThreads=Math.min(4,Math.ceil((e||1)/2))}},Fo=class{async init(e){wg(),await od(),await id(e)}async createInferenceSessionHandler(e,t){let a=new Co;return await a.loadModel(e,t),Promise.resolve(a)}}}),hd={};Sr(hd,{wasmBackend:()=>vg});var vg,md=L(()=>{dd(),vg=new Fo});Ot();Ot();Ot();var Ts="1.18.0";{let e=(Op(),ar(_p)).onnxjsBackend;Pr("webgl",e,-10)}{let e=(md(),ar(hd)).wasmBackend;Pr("cpu",e,10),Pr("wasm",e,10)}Object.defineProperty(Z.versions,"web",{value:Ts,enumerable:!0});/*! Bundled license information:

long/index.js:
  (**
   * @license
   * Copyright 2009 The Closure Library Authors
   * Copyright 2020 Daniel Wirtz / The long.js Authors.
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *     http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *
   * SPDX-License-Identifier: Apache-2.0
   *)
*//*!
 * Cropper.js v1.6.2
 * https://fengyuanchen.github.io/cropperjs
 *
 * Copyright 2015-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2024-04-21T07:43:05.335Z
 */function ownKeys(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),a.push.apply(a,i)}return a}function _objectSpread2(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?ownKeys(Object(a),!0).forEach(function(i){_defineProperty(e,i,a[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ownKeys(Object(a)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(a,i))})}return e}function _toPrimitive(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var i=a.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return typeof t=="symbol"?t:t+""}function _typeof(e){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,_toPropertyKey(i.key),i)}}function _createClass(e,t,a){return t&&_defineProperties(e.prototype,t),a&&_defineProperties(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function _defineProperty(e,t,a){return t=_toPropertyKey(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _iterableToArray(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function _unsupportedIterableToArray(e,t){if(e){if(typeof e=="string")return _arrayLikeToArray(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return _arrayLikeToArray(e,t)}}function _arrayLikeToArray(e,t){(t==null||t>e.length)&&(t=e.length);for(var a=0,i=new Array(t);a<t;a++)i[a]=e[a];return i}function _nonIterableSpread(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var IS_BROWSER=typeof window<"u"&&typeof window.document<"u",WINDOW=IS_BROWSER?window:{},IS_TOUCH_DEVICE=IS_BROWSER&&WINDOW.document.documentElement?"ontouchstart"in WINDOW.document.documentElement:!1,HAS_POINTER_EVENT=IS_BROWSER?"PointerEvent"in WINDOW:!1,NAMESPACE="cropper",ACTION_ALL="all",ACTION_CROP="crop",ACTION_MOVE="move",ACTION_ZOOM="zoom",ACTION_EAST="e",ACTION_WEST="w",ACTION_SOUTH="s",ACTION_NORTH="n",ACTION_NORTH_EAST="ne",ACTION_NORTH_WEST="nw",ACTION_SOUTH_EAST="se",ACTION_SOUTH_WEST="sw",CLASS_CROP="".concat(NAMESPACE,"-crop"),CLASS_DISABLED="".concat(NAMESPACE,"-disabled"),CLASS_HIDDEN="".concat(NAMESPACE,"-hidden"),CLASS_HIDE="".concat(NAMESPACE,"-hide"),CLASS_INVISIBLE="".concat(NAMESPACE,"-invisible"),CLASS_MODAL="".concat(NAMESPACE,"-modal"),CLASS_MOVE="".concat(NAMESPACE,"-move"),DATA_ACTION="".concat(NAMESPACE,"Action"),DATA_PREVIEW="".concat(NAMESPACE,"Preview"),DRAG_MODE_CROP="crop",DRAG_MODE_MOVE="move",DRAG_MODE_NONE="none",EVENT_CROP="crop",EVENT_CROP_END="cropend",EVENT_CROP_MOVE="cropmove",EVENT_CROP_START="cropstart",EVENT_DBLCLICK="dblclick",EVENT_TOUCH_START=IS_TOUCH_DEVICE?"touchstart":"mousedown",EVENT_TOUCH_MOVE=IS_TOUCH_DEVICE?"touchmove":"mousemove",EVENT_TOUCH_END=IS_TOUCH_DEVICE?"touchend touchcancel":"mouseup",EVENT_POINTER_DOWN=HAS_POINTER_EVENT?"pointerdown":EVENT_TOUCH_START,EVENT_POINTER_MOVE=HAS_POINTER_EVENT?"pointermove":EVENT_TOUCH_MOVE,EVENT_POINTER_UP=HAS_POINTER_EVENT?"pointerup pointercancel":EVENT_TOUCH_END,EVENT_READY="ready",EVENT_RESIZE="resize",EVENT_WHEEL="wheel",EVENT_ZOOM="zoom",MIME_TYPE_JPEG="image/jpeg",REGEXP_ACTIONS=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,REGEXP_DATA_URL=/^data:/,REGEXP_DATA_URL_JPEG=/^data:image\/jpeg;base64,/,REGEXP_TAG_NAME=/^img|canvas$/i,MIN_CONTAINER_WIDTH=200,MIN_CONTAINER_HEIGHT=100,DEFAULTS={viewMode:0,dragMode:DRAG_MODE_CROP,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:MIN_CONTAINER_WIDTH,minContainerHeight:MIN_CONTAINER_HEIGHT,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},TEMPLATE='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>',isNaN$1=Number.isNaN||WINDOW.isNaN;function isNumber(e){return typeof e=="number"&&!isNaN$1(e)}var isPositiveNumber=function e(t){return t>0&&t<1/0};function isUndefined(e){return typeof e>"u"}function isObject(e){return _typeof(e)==="object"&&e!==null}var hasOwnProperty=Object.prototype.hasOwnProperty;function isPlainObject(e){if(!isObject(e))return!1;try{var t=e.constructor,a=t.prototype;return t&&a&&hasOwnProperty.call(a,"isPrototypeOf")}catch{return!1}}function isFunction(e){return typeof e=="function"}var slice=Array.prototype.slice;function toArray(e){return Array.from?Array.from(e):slice.call(e)}function forEach(e,t){return e&&isFunction(t)&&(Array.isArray(e)||isNumber(e.length)?toArray(e).forEach(function(a,i){t.call(e,a,i,e)}):isObject(e)&&Object.keys(e).forEach(function(a){t.call(e,e[a],a,e)})),e}var assign=Object.assign||function e(t){for(var a=arguments.length,i=new Array(a>1?a-1:0),u=1;u<a;u++)i[u-1]=arguments[u];return isObject(t)&&i.length>0&&i.forEach(function(n){isObject(n)&&Object.keys(n).forEach(function(o){t[o]=n[o]})}),t},REGEXP_DECIMALS=/\.\d*(?:0|9){12}\d*$/;function normalizeDecimalNumber(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return REGEXP_DECIMALS.test(e)?Math.round(e*t)/t:e}var REGEXP_SUFFIX=/^width|height|left|top|marginLeft|marginTop$/;function setStyle(e,t){var a=e.style;forEach(t,function(i,u){REGEXP_SUFFIX.test(u)&&isNumber(i)&&(i="".concat(i,"px")),a[u]=i})}function hasClass(e,t){return e.classList?e.classList.contains(t):e.className.indexOf(t)>-1}function addClass(e,t){if(t){if(isNumber(e.length)){forEach(e,function(i){addClass(i,t)});return}if(e.classList){e.classList.add(t);return}var a=e.className.trim();a?a.indexOf(t)<0&&(e.className="".concat(a," ").concat(t)):e.className=t}}function removeClass(e,t){if(t){if(isNumber(e.length)){forEach(e,function(a){removeClass(a,t)});return}if(e.classList){e.classList.remove(t);return}e.className.indexOf(t)>=0&&(e.className=e.className.replace(t,""))}}function toggleClass(e,t,a){if(t){if(isNumber(e.length)){forEach(e,function(i){toggleClass(i,t,a)});return}a?addClass(e,t):removeClass(e,t)}}var REGEXP_CAMEL_CASE=/([a-z\d])([A-Z])/g;function toParamCase(e){return e.replace(REGEXP_CAMEL_CASE,"$1-$2").toLowerCase()}function getData(e,t){return isObject(e[t])?e[t]:e.dataset?e.dataset[t]:e.getAttribute("data-".concat(toParamCase(t)))}function setData(e,t,a){isObject(a)?e[t]=a:e.dataset?e.dataset[t]=a:e.setAttribute("data-".concat(toParamCase(t)),a)}function removeData(e,t){if(isObject(e[t]))try{delete e[t]}catch{e[t]=void 0}else if(e.dataset)try{delete e.dataset[t]}catch{e.dataset[t]=void 0}else e.removeAttribute("data-".concat(toParamCase(t)))}var REGEXP_SPACES=/\s\s*/,onceSupported=function(){var e=!1;if(IS_BROWSER){var t=!1,a=function(){},i=Object.defineProperty({},"once",{get:function(){return e=!0,t},set:function(n){t=n}});WINDOW.addEventListener("test",a,i),WINDOW.removeEventListener("test",a,i)}return e}();function removeListener(e,t,a){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},u=a;t.trim().split(REGEXP_SPACES).forEach(function(n){if(!onceSupported){var o=e.listeners;o&&o[n]&&o[n][a]&&(u=o[n][a],delete o[n][a],Object.keys(o[n]).length===0&&delete o[n],Object.keys(o).length===0&&delete e.listeners)}e.removeEventListener(n,u,i)})}function addListener(e,t,a){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},u=a;t.trim().split(REGEXP_SPACES).forEach(function(n){if(i.once&&!onceSupported){var o=e.listeners,c=o===void 0?{}:o;u=function(){delete c[n][a],e.removeEventListener(n,u,i);for(var r=arguments.length,l=new Array(r),s=0;s<r;s++)l[s]=arguments[s];a.apply(e,l)},c[n]||(c[n]={}),c[n][a]&&e.removeEventListener(n,c[n][a],i),c[n][a]=u,e.listeners=c}e.addEventListener(n,u,i)})}function dispatchEvent(e,t,a){var i;return isFunction(Event)&&isFunction(CustomEvent)?i=new CustomEvent(t,{detail:a,bubbles:!0,cancelable:!0}):(i=document.createEvent("CustomEvent"),i.initCustomEvent(t,!0,!0,a)),e.dispatchEvent(i)}function getOffset(e){var t=e.getBoundingClientRect();return{left:t.left+(window.pageXOffset-document.documentElement.clientLeft),top:t.top+(window.pageYOffset-document.documentElement.clientTop)}}var location=WINDOW.location,REGEXP_ORIGINS=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function isCrossOriginURL(e){var t=e.match(REGEXP_ORIGINS);return t!==null&&(t[1]!==location.protocol||t[2]!==location.hostname||t[3]!==location.port)}function addTimestamp(e){var t="timestamp=".concat(new Date().getTime());return e+(e.indexOf("?")===-1?"?":"&")+t}function getTransforms(e){var t=e.rotate,a=e.scaleX,i=e.scaleY,u=e.translateX,n=e.translateY,o=[];isNumber(u)&&u!==0&&o.push("translateX(".concat(u,"px)")),isNumber(n)&&n!==0&&o.push("translateY(".concat(n,"px)")),isNumber(t)&&t!==0&&o.push("rotate(".concat(t,"deg)")),isNumber(a)&&a!==1&&o.push("scaleX(".concat(a,")")),isNumber(i)&&i!==1&&o.push("scaleY(".concat(i,")"));var c=o.length?o.join(" "):"none";return{WebkitTransform:c,msTransform:c,transform:c}}function getMaxZoomRatio(e){var t=_objectSpread2({},e),a=0;return forEach(e,function(i,u){delete t[u],forEach(t,function(n){var o=Math.abs(i.startX-n.startX),c=Math.abs(i.startY-n.startY),p=Math.abs(i.endX-n.endX),r=Math.abs(i.endY-n.endY),l=Math.sqrt(o*o+c*c),s=Math.sqrt(p*p+r*r),h=(s-l)/l;Math.abs(h)>Math.abs(a)&&(a=h)})}),a}function getPointer(e,t){var a=e.pageX,i=e.pageY,u={endX:a,endY:i};return t?u:_objectSpread2({startX:a,startY:i},u)}function getPointersCenter(e){var t=0,a=0,i=0;return forEach(e,function(u){var n=u.startX,o=u.startY;t+=n,a+=o,i+=1}),t/=i,a/=i,{pageX:t,pageY:a}}function getAdjustedSizes(e){var t=e.aspectRatio,a=e.height,i=e.width,u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"contain",n=isPositiveNumber(i),o=isPositiveNumber(a);if(n&&o){var c=a*t;u==="contain"&&c>i||u==="cover"&&c<i?a=i/t:i=a*t}else n?a=i/t:o&&(i=a*t);return{width:i,height:a}}function getRotatedSizes(e){var t=e.width,a=e.height,i=e.degree;if(i=Math.abs(i)%180,i===90)return{width:a,height:t};var u=i%90*Math.PI/180,n=Math.sin(u),o=Math.cos(u),c=t*o+a*n,p=t*n+a*o;return i>90?{width:p,height:c}:{width:c,height:p}}function getSourceCanvas(e,t,a,i){var u=t.aspectRatio,n=t.naturalWidth,o=t.naturalHeight,c=t.rotate,p=c===void 0?0:c,r=t.scaleX,l=r===void 0?1:r,s=t.scaleY,h=s===void 0?1:s,d=a.aspectRatio,m=a.naturalWidth,b=a.naturalHeight,v=i.fillColor,O=v===void 0?"transparent":v,T=i.imageSmoothingEnabled,E=T===void 0?!0:T,$=i.imageSmoothingQuality,C=$===void 0?"low":$,P=i.maxWidth,G=P===void 0?1/0:P,te=i.maxHeight,xe=te===void 0?1/0:te,K=i.minWidth,j=K===void 0?0:K,ie=i.minHeight,He=ie===void 0?0:ie,pe=document.createElement("canvas"),he=pe.getContext("2d"),W=getAdjustedSizes({aspectRatio:d,width:G,height:xe}),ge=getAdjustedSizes({aspectRatio:d,width:j,height:He},"cover"),Ce=Math.min(W.width,Math.max(ge.width,m)),Ne=Math.min(W.height,Math.max(ge.height,b)),Ge=getAdjustedSizes({aspectRatio:u,width:G,height:xe}),se=getAdjustedSizes({aspectRatio:u,width:j,height:He},"cover"),Ie=Math.min(Ge.width,Math.max(se.width,n)),qe=Math.min(Ge.height,Math.max(se.height,o)),at=[-Ie/2,-qe/2,Ie,qe];return pe.width=normalizeDecimalNumber(Ce),pe.height=normalizeDecimalNumber(Ne),he.fillStyle=O,he.fillRect(0,0,Ce,Ne),he.save(),he.translate(Ce/2,Ne/2),he.rotate(p*Math.PI/180),he.scale(l,h),he.imageSmoothingEnabled=E,he.imageSmoothingQuality=C,he.drawImage.apply(he,[e].concat(_toConsumableArray(at.map(function(yt){return Math.floor(normalizeDecimalNumber(yt))})))),he.restore(),pe}var fromCharCode=String.fromCharCode;function getStringFromCharCode(e,t,a){var i="";a+=t;for(var u=t;u<a;u+=1)i+=fromCharCode(e.getUint8(u));return i}var REGEXP_DATA_URL_HEAD=/^data:.*,/;function dataURLToArrayBuffer(e){var t=e.replace(REGEXP_DATA_URL_HEAD,""),a=atob(t),i=new ArrayBuffer(a.length),u=new Uint8Array(i);return forEach(u,function(n,o){u[o]=a.charCodeAt(o)}),i}function arrayBufferToDataURL(e,t){for(var a=[],i=8192,u=new Uint8Array(e);u.length>0;)a.push(fromCharCode.apply(null,toArray(u.subarray(0,i)))),u=u.subarray(i);return"data:".concat(t,";base64,").concat(btoa(a.join("")))}function resetAndGetOrientation(e){var t=new DataView(e),a;try{var i,u,n;if(t.getUint8(0)===255&&t.getUint8(1)===216)for(var o=t.byteLength,c=2;c+1<o;){if(t.getUint8(c)===255&&t.getUint8(c+1)===225){u=c;break}c+=1}if(u){var p=u+4,r=u+10;if(getStringFromCharCode(t,p,4)==="Exif"){var l=t.getUint16(r);if(i=l===18761,(i||l===19789)&&t.getUint16(r+2,i)===42){var s=t.getUint32(r+4,i);s>=8&&(n=r+s)}}}if(n){var h=t.getUint16(n,i),d,m;for(m=0;m<h;m+=1)if(d=n+m*12+2,t.getUint16(d,i)===274){d+=8,a=t.getUint16(d,i),t.setUint16(d,1,i);break}}}catch{a=1}return a}function parseOrientation(e){var t=0,a=1,i=1;switch(e){case 2:a=-1;break;case 3:t=-180;break;case 4:i=-1;break;case 5:t=90,i=-1;break;case 6:t=90;break;case 7:t=90,a=-1;break;case 8:t=-90;break}return{rotate:t,scaleX:a,scaleY:i}}var render={render:function e(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function e(){var t=this.element,a=this.options,i=this.container,u=this.cropper,n=Number(a.minContainerWidth),o=Number(a.minContainerHeight);addClass(u,CLASS_HIDDEN),removeClass(t,CLASS_HIDDEN);var c={width:Math.max(i.offsetWidth,n>=0?n:MIN_CONTAINER_WIDTH),height:Math.max(i.offsetHeight,o>=0?o:MIN_CONTAINER_HEIGHT)};this.containerData=c,setStyle(u,{width:c.width,height:c.height}),addClass(t,CLASS_HIDDEN),removeClass(u,CLASS_HIDDEN)},initCanvas:function e(){var t=this.containerData,a=this.imageData,i=this.options.viewMode,u=Math.abs(a.rotate)%180===90,n=u?a.naturalHeight:a.naturalWidth,o=u?a.naturalWidth:a.naturalHeight,c=n/o,p=t.width,r=t.height;t.height*c>t.width?i===3?p=t.height*c:r=t.width/c:i===3?r=t.width/c:p=t.height*c;var l={aspectRatio:c,naturalWidth:n,naturalHeight:o,width:p,height:r};this.canvasData=l,this.limited=i===1||i===2,this.limitCanvas(!0,!0),l.width=Math.min(Math.max(l.width,l.minWidth),l.maxWidth),l.height=Math.min(Math.max(l.height,l.minHeight),l.maxHeight),l.left=(t.width-l.width)/2,l.top=(t.height-l.height)/2,l.oldLeft=l.left,l.oldTop=l.top,this.initialCanvasData=assign({},l)},limitCanvas:function e(t,a){var i=this.options,u=this.containerData,n=this.canvasData,o=this.cropBoxData,c=i.viewMode,p=n.aspectRatio,r=this.cropped&&o;if(t){var l=Number(i.minCanvasWidth)||0,s=Number(i.minCanvasHeight)||0;c>1?(l=Math.max(l,u.width),s=Math.max(s,u.height),c===3&&(s*p>l?l=s*p:s=l/p)):c>0&&(l?l=Math.max(l,r?o.width:0):s?s=Math.max(s,r?o.height:0):r&&(l=o.width,s=o.height,s*p>l?l=s*p:s=l/p));var h=getAdjustedSizes({aspectRatio:p,width:l,height:s});l=h.width,s=h.height,n.minWidth=l,n.minHeight=s,n.maxWidth=1/0,n.maxHeight=1/0}if(a)if(c>(r?0:1)){var d=u.width-n.width,m=u.height-n.height;n.minLeft=Math.min(0,d),n.minTop=Math.min(0,m),n.maxLeft=Math.max(0,d),n.maxTop=Math.max(0,m),r&&this.limited&&(n.minLeft=Math.min(o.left,o.left+(o.width-n.width)),n.minTop=Math.min(o.top,o.top+(o.height-n.height)),n.maxLeft=o.left,n.maxTop=o.top,c===2&&(n.width>=u.width&&(n.minLeft=Math.min(0,d),n.maxLeft=Math.max(0,d)),n.height>=u.height&&(n.minTop=Math.min(0,m),n.maxTop=Math.max(0,m))))}else n.minLeft=-n.width,n.minTop=-n.height,n.maxLeft=u.width,n.maxTop=u.height},renderCanvas:function e(t,a){var i=this.canvasData,u=this.imageData;if(a){var n=getRotatedSizes({width:u.naturalWidth*Math.abs(u.scaleX||1),height:u.naturalHeight*Math.abs(u.scaleY||1),degree:u.rotate||0}),o=n.width,c=n.height,p=i.width*(o/i.naturalWidth),r=i.height*(c/i.naturalHeight);i.left-=(p-i.width)/2,i.top-=(r-i.height)/2,i.width=p,i.height=r,i.aspectRatio=o/c,i.naturalWidth=o,i.naturalHeight=c,this.limitCanvas(!0,!1)}(i.width>i.maxWidth||i.width<i.minWidth)&&(i.left=i.oldLeft),(i.height>i.maxHeight||i.height<i.minHeight)&&(i.top=i.oldTop),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),this.limitCanvas(!1,!0),i.left=Math.min(Math.max(i.left,i.minLeft),i.maxLeft),i.top=Math.min(Math.max(i.top,i.minTop),i.maxTop),i.oldLeft=i.left,i.oldTop=i.top,setStyle(this.canvas,assign({width:i.width,height:i.height},getTransforms({translateX:i.left,translateY:i.top}))),this.renderImage(t),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function e(t){var a=this.canvasData,i=this.imageData,u=i.naturalWidth*(a.width/a.naturalWidth),n=i.naturalHeight*(a.height/a.naturalHeight);assign(i,{width:u,height:n,left:(a.width-u)/2,top:(a.height-n)/2}),setStyle(this.image,assign({width:i.width,height:i.height},getTransforms(assign({translateX:i.left,translateY:i.top},i)))),t&&this.output()},initCropBox:function e(){var t=this.options,a=this.canvasData,i=t.aspectRatio||t.initialAspectRatio,u=Number(t.autoCropArea)||.8,n={width:a.width,height:a.height};i&&(a.height*i>a.width?n.height=n.width/i:n.width=n.height*i),this.cropBoxData=n,this.limitCropBox(!0,!0),n.width=Math.min(Math.max(n.width,n.minWidth),n.maxWidth),n.height=Math.min(Math.max(n.height,n.minHeight),n.maxHeight),n.width=Math.max(n.minWidth,n.width*u),n.height=Math.max(n.minHeight,n.height*u),n.left=a.left+(a.width-n.width)/2,n.top=a.top+(a.height-n.height)/2,n.oldLeft=n.left,n.oldTop=n.top,this.initialCropBoxData=assign({},n)},limitCropBox:function e(t,a){var i=this.options,u=this.containerData,n=this.canvasData,o=this.cropBoxData,c=this.limited,p=i.aspectRatio;if(t){var r=Number(i.minCropBoxWidth)||0,l=Number(i.minCropBoxHeight)||0,s=c?Math.min(u.width,n.width,n.width+n.left,u.width-n.left):u.width,h=c?Math.min(u.height,n.height,n.height+n.top,u.height-n.top):u.height;r=Math.min(r,u.width),l=Math.min(l,u.height),p&&(r&&l?l*p>r?l=r/p:r=l*p:r?l=r/p:l&&(r=l*p),h*p>s?h=s/p:s=h*p),o.minWidth=Math.min(r,s),o.minHeight=Math.min(l,h),o.maxWidth=s,o.maxHeight=h}a&&(c?(o.minLeft=Math.max(0,n.left),o.minTop=Math.max(0,n.top),o.maxLeft=Math.min(u.width,n.left+n.width)-o.width,o.maxTop=Math.min(u.height,n.top+n.height)-o.height):(o.minLeft=0,o.minTop=0,o.maxLeft=u.width-o.width,o.maxTop=u.height-o.height))},renderCropBox:function e(){var t=this.options,a=this.containerData,i=this.cropBoxData;(i.width>i.maxWidth||i.width<i.minWidth)&&(i.left=i.oldLeft),(i.height>i.maxHeight||i.height<i.minHeight)&&(i.top=i.oldTop),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),this.limitCropBox(!1,!0),i.left=Math.min(Math.max(i.left,i.minLeft),i.maxLeft),i.top=Math.min(Math.max(i.top,i.minTop),i.maxTop),i.oldLeft=i.left,i.oldTop=i.top,t.movable&&t.cropBoxMovable&&setData(this.face,DATA_ACTION,i.width>=a.width&&i.height>=a.height?ACTION_MOVE:ACTION_ALL),setStyle(this.cropBox,assign({width:i.width,height:i.height},getTransforms({translateX:i.left,translateY:i.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function e(){this.preview(),dispatchEvent(this.element,EVENT_CROP,this.getData())}},preview={initPreview:function e(){var t=this.element,a=this.crossOrigin,i=this.options.preview,u=a?this.crossOriginUrl:this.url,n=t.alt||"The image to preview",o=document.createElement("img");if(a&&(o.crossOrigin=a),o.src=u,o.alt=n,this.viewBox.appendChild(o),this.viewBoxImage=o,!!i){var c=i;typeof i=="string"?c=t.ownerDocument.querySelectorAll(i):i.querySelector&&(c=[i]),this.previews=c,forEach(c,function(p){var r=document.createElement("img");setData(p,DATA_PREVIEW,{width:p.offsetWidth,height:p.offsetHeight,html:p.innerHTML}),a&&(r.crossOrigin=a),r.src=u,r.alt=n,r.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',p.innerHTML="",p.appendChild(r)})}},resetPreview:function e(){forEach(this.previews,function(t){var a=getData(t,DATA_PREVIEW);setStyle(t,{width:a.width,height:a.height}),t.innerHTML=a.html,removeData(t,DATA_PREVIEW)})},preview:function e(){var t=this.imageData,a=this.canvasData,i=this.cropBoxData,u=i.width,n=i.height,o=t.width,c=t.height,p=i.left-a.left-t.left,r=i.top-a.top-t.top;!this.cropped||this.disabled||(setStyle(this.viewBoxImage,assign({width:o,height:c},getTransforms(assign({translateX:-p,translateY:-r},t)))),forEach(this.previews,function(l){var s=getData(l,DATA_PREVIEW),h=s.width,d=s.height,m=h,b=d,v=1;u&&(v=h/u,b=n*v),n&&b>d&&(v=d/n,m=u*v,b=d),setStyle(l,{width:m,height:b}),setStyle(l.getElementsByTagName("img")[0],assign({width:o*v,height:c*v},getTransforms(assign({translateX:-p*v,translateY:-r*v},t))))}))}},events={bind:function e(){var t=this.element,a=this.options,i=this.cropper;isFunction(a.cropstart)&&addListener(t,EVENT_CROP_START,a.cropstart),isFunction(a.cropmove)&&addListener(t,EVENT_CROP_MOVE,a.cropmove),isFunction(a.cropend)&&addListener(t,EVENT_CROP_END,a.cropend),isFunction(a.crop)&&addListener(t,EVENT_CROP,a.crop),isFunction(a.zoom)&&addListener(t,EVENT_ZOOM,a.zoom),addListener(i,EVENT_POINTER_DOWN,this.onCropStart=this.cropStart.bind(this)),a.zoomable&&a.zoomOnWheel&&addListener(i,EVENT_WHEEL,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),a.toggleDragModeOnDblclick&&addListener(i,EVENT_DBLCLICK,this.onDblclick=this.dblclick.bind(this)),addListener(t.ownerDocument,EVENT_POINTER_MOVE,this.onCropMove=this.cropMove.bind(this)),addListener(t.ownerDocument,EVENT_POINTER_UP,this.onCropEnd=this.cropEnd.bind(this)),a.responsive&&addListener(window,EVENT_RESIZE,this.onResize=this.resize.bind(this))},unbind:function e(){var t=this.element,a=this.options,i=this.cropper;isFunction(a.cropstart)&&removeListener(t,EVENT_CROP_START,a.cropstart),isFunction(a.cropmove)&&removeListener(t,EVENT_CROP_MOVE,a.cropmove),isFunction(a.cropend)&&removeListener(t,EVENT_CROP_END,a.cropend),isFunction(a.crop)&&removeListener(t,EVENT_CROP,a.crop),isFunction(a.zoom)&&removeListener(t,EVENT_ZOOM,a.zoom),removeListener(i,EVENT_POINTER_DOWN,this.onCropStart),a.zoomable&&a.zoomOnWheel&&removeListener(i,EVENT_WHEEL,this.onWheel,{passive:!1,capture:!0}),a.toggleDragModeOnDblclick&&removeListener(i,EVENT_DBLCLICK,this.onDblclick),removeListener(t.ownerDocument,EVENT_POINTER_MOVE,this.onCropMove),removeListener(t.ownerDocument,EVENT_POINTER_UP,this.onCropEnd),a.responsive&&removeListener(window,EVENT_RESIZE,this.onResize)}},handlers={resize:function e(){if(!this.disabled){var t=this.options,a=this.container,i=this.containerData,u=a.offsetWidth/i.width,n=a.offsetHeight/i.height,o=Math.abs(u-1)>Math.abs(n-1)?u:n;if(o!==1){var c,p;t.restore&&(c=this.getCanvasData(),p=this.getCropBoxData()),this.render(),t.restore&&(this.setCanvasData(forEach(c,function(r,l){c[l]=r*o})),this.setCropBoxData(forEach(p,function(r,l){p[l]=r*o})))}}},dblclick:function e(){this.disabled||this.options.dragMode===DRAG_MODE_NONE||this.setDragMode(hasClass(this.dragBox,CLASS_CROP)?DRAG_MODE_MOVE:DRAG_MODE_CROP)},wheel:function e(t){var a=this,i=Number(this.options.wheelZoomRatio)||.1,u=1;this.disabled||(t.preventDefault(),!this.wheeling&&(this.wheeling=!0,setTimeout(function(){a.wheeling=!1},50),t.deltaY?u=t.deltaY>0?1:-1:t.wheelDelta?u=-t.wheelDelta/120:t.detail&&(u=t.detail>0?1:-1),this.zoom(-u*i,t)))},cropStart:function e(t){var a=t.buttons,i=t.button;if(!(this.disabled||(t.type==="mousedown"||t.type==="pointerdown"&&t.pointerType==="mouse")&&(isNumber(a)&&a!==1||isNumber(i)&&i!==0||t.ctrlKey))){var u=this.options,n=this.pointers,o;t.changedTouches?forEach(t.changedTouches,function(c){n[c.identifier]=getPointer(c)}):n[t.pointerId||0]=getPointer(t),Object.keys(n).length>1&&u.zoomable&&u.zoomOnTouch?o=ACTION_ZOOM:o=getData(t.target,DATA_ACTION),REGEXP_ACTIONS.test(o)&&dispatchEvent(this.element,EVENT_CROP_START,{originalEvent:t,action:o})!==!1&&(t.preventDefault(),this.action=o,this.cropping=!1,o===ACTION_CROP&&(this.cropping=!0,addClass(this.dragBox,CLASS_MODAL)))}},cropMove:function e(t){var a=this.action;if(!(this.disabled||!a)){var i=this.pointers;t.preventDefault(),dispatchEvent(this.element,EVENT_CROP_MOVE,{originalEvent:t,action:a})!==!1&&(t.changedTouches?forEach(t.changedTouches,function(u){assign(i[u.identifier]||{},getPointer(u,!0))}):assign(i[t.pointerId||0]||{},getPointer(t,!0)),this.change(t))}},cropEnd:function e(t){if(!this.disabled){var a=this.action,i=this.pointers;t.changedTouches?forEach(t.changedTouches,function(u){delete i[u.identifier]}):delete i[t.pointerId||0],a&&(t.preventDefault(),Object.keys(i).length||(this.action=""),this.cropping&&(this.cropping=!1,toggleClass(this.dragBox,CLASS_MODAL,this.cropped&&this.options.modal)),dispatchEvent(this.element,EVENT_CROP_END,{originalEvent:t,action:a}))}}},change={change:function e(t){var a=this.options,i=this.canvasData,u=this.containerData,n=this.cropBoxData,o=this.pointers,c=this.action,p=a.aspectRatio,r=n.left,l=n.top,s=n.width,h=n.height,d=r+s,m=l+h,b=0,v=0,O=u.width,T=u.height,E=!0,$;!p&&t.shiftKey&&(p=s&&h?s/h:1),this.limited&&(b=n.minLeft,v=n.minTop,O=b+Math.min(u.width,i.width,i.left+i.width),T=v+Math.min(u.height,i.height,i.top+i.height));var C=o[Object.keys(o)[0]],P={x:C.endX-C.startX,y:C.endY-C.startY},G=function(xe){switch(xe){case ACTION_EAST:d+P.x>O&&(P.x=O-d);break;case ACTION_WEST:r+P.x<b&&(P.x=b-r);break;case ACTION_NORTH:l+P.y<v&&(P.y=v-l);break;case ACTION_SOUTH:m+P.y>T&&(P.y=T-m);break}};switch(c){case ACTION_ALL:r+=P.x,l+=P.y;break;case ACTION_EAST:if(P.x>=0&&(d>=O||p&&(l<=v||m>=T))){E=!1;break}G(ACTION_EAST),s+=P.x,s<0&&(c=ACTION_WEST,s=-s,r-=s),p&&(h=s/p,l+=(n.height-h)/2);break;case ACTION_NORTH:if(P.y<=0&&(l<=v||p&&(r<=b||d>=O))){E=!1;break}G(ACTION_NORTH),h-=P.y,l+=P.y,h<0&&(c=ACTION_SOUTH,h=-h,l-=h),p&&(s=h*p,r+=(n.width-s)/2);break;case ACTION_WEST:if(P.x<=0&&(r<=b||p&&(l<=v||m>=T))){E=!1;break}G(ACTION_WEST),s-=P.x,r+=P.x,s<0&&(c=ACTION_EAST,s=-s,r-=s),p&&(h=s/p,l+=(n.height-h)/2);break;case ACTION_SOUTH:if(P.y>=0&&(m>=T||p&&(r<=b||d>=O))){E=!1;break}G(ACTION_SOUTH),h+=P.y,h<0&&(c=ACTION_NORTH,h=-h,l-=h),p&&(s=h*p,r+=(n.width-s)/2);break;case ACTION_NORTH_EAST:if(p){if(P.y<=0&&(l<=v||d>=O)){E=!1;break}G(ACTION_NORTH),h-=P.y,l+=P.y,s=h*p}else G(ACTION_NORTH),G(ACTION_EAST),P.x>=0?d<O?s+=P.x:P.y<=0&&l<=v&&(E=!1):s+=P.x,P.y<=0?l>v&&(h-=P.y,l+=P.y):(h-=P.y,l+=P.y);s<0&&h<0?(c=ACTION_SOUTH_WEST,h=-h,s=-s,l-=h,r-=s):s<0?(c=ACTION_NORTH_WEST,s=-s,r-=s):h<0&&(c=ACTION_SOUTH_EAST,h=-h,l-=h);break;case ACTION_NORTH_WEST:if(p){if(P.y<=0&&(l<=v||r<=b)){E=!1;break}G(ACTION_NORTH),h-=P.y,l+=P.y,s=h*p,r+=n.width-s}else G(ACTION_NORTH),G(ACTION_WEST),P.x<=0?r>b?(s-=P.x,r+=P.x):P.y<=0&&l<=v&&(E=!1):(s-=P.x,r+=P.x),P.y<=0?l>v&&(h-=P.y,l+=P.y):(h-=P.y,l+=P.y);s<0&&h<0?(c=ACTION_SOUTH_EAST,h=-h,s=-s,l-=h,r-=s):s<0?(c=ACTION_NORTH_EAST,s=-s,r-=s):h<0&&(c=ACTION_SOUTH_WEST,h=-h,l-=h);break;case ACTION_SOUTH_WEST:if(p){if(P.x<=0&&(r<=b||m>=T)){E=!1;break}G(ACTION_WEST),s-=P.x,r+=P.x,h=s/p}else G(ACTION_SOUTH),G(ACTION_WEST),P.x<=0?r>b?(s-=P.x,r+=P.x):P.y>=0&&m>=T&&(E=!1):(s-=P.x,r+=P.x),P.y>=0?m<T&&(h+=P.y):h+=P.y;s<0&&h<0?(c=ACTION_NORTH_EAST,h=-h,s=-s,l-=h,r-=s):s<0?(c=ACTION_SOUTH_EAST,s=-s,r-=s):h<0&&(c=ACTION_NORTH_WEST,h=-h,l-=h);break;case ACTION_SOUTH_EAST:if(p){if(P.x>=0&&(d>=O||m>=T)){E=!1;break}G(ACTION_EAST),s+=P.x,h=s/p}else G(ACTION_SOUTH),G(ACTION_EAST),P.x>=0?d<O?s+=P.x:P.y>=0&&m>=T&&(E=!1):s+=P.x,P.y>=0?m<T&&(h+=P.y):h+=P.y;s<0&&h<0?(c=ACTION_NORTH_WEST,h=-h,s=-s,l-=h,r-=s):s<0?(c=ACTION_SOUTH_WEST,s=-s,r-=s):h<0&&(c=ACTION_NORTH_EAST,h=-h,l-=h);break;case ACTION_MOVE:this.move(P.x,P.y),E=!1;break;case ACTION_ZOOM:this.zoom(getMaxZoomRatio(o),t),E=!1;break;case ACTION_CROP:if(!P.x||!P.y){E=!1;break}$=getOffset(this.cropper),r=C.startX-$.left,l=C.startY-$.top,s=n.minWidth,h=n.minHeight,P.x>0?c=P.y>0?ACTION_SOUTH_EAST:ACTION_NORTH_EAST:P.x<0&&(r-=s,c=P.y>0?ACTION_SOUTH_WEST:ACTION_NORTH_WEST),P.y<0&&(l-=h),this.cropped||(removeClass(this.cropBox,CLASS_HIDDEN),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0));break}E&&(n.width=s,n.height=h,n.left=r,n.top=l,this.action=c,this.renderCropBox()),forEach(o,function(te){te.startX=te.endX,te.startY=te.endY})}},methods={crop:function e(){return this.ready&&!this.cropped&&!this.disabled&&(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&addClass(this.dragBox,CLASS_MODAL),removeClass(this.cropBox,CLASS_HIDDEN),this.setCropBoxData(this.initialCropBoxData)),this},reset:function e(){return this.ready&&!this.disabled&&(this.imageData=assign({},this.initialImageData),this.canvasData=assign({},this.initialCanvasData),this.cropBoxData=assign({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function e(){return this.cropped&&!this.disabled&&(assign(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),removeClass(this.dragBox,CLASS_MODAL),addClass(this.cropBox,CLASS_HIDDEN)),this},replace:function e(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return!this.disabled&&t&&(this.isImg&&(this.element.src=t),a?(this.url=t,this.image.src=t,this.ready&&(this.viewBoxImage.src=t,forEach(this.previews,function(i){i.getElementsByTagName("img")[0].src=t}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(t))),this},enable:function e(){return this.ready&&this.disabled&&(this.disabled=!1,removeClass(this.cropper,CLASS_DISABLED)),this},disable:function e(){return this.ready&&!this.disabled&&(this.disabled=!0,addClass(this.cropper,CLASS_DISABLED)),this},destroy:function e(){var t=this.element;return t[NAMESPACE]?(t[NAMESPACE]=void 0,this.isImg&&this.replaced&&(t.src=this.originalUrl),this.uncreate(),this):this},move:function e(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,i=this.canvasData,u=i.left,n=i.top;return this.moveTo(isUndefined(t)?t:u+Number(t),isUndefined(a)?a:n+Number(a))},moveTo:function e(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,i=this.canvasData,u=!1;return t=Number(t),a=Number(a),this.ready&&!this.disabled&&this.options.movable&&(isNumber(t)&&(i.left=t,u=!0),isNumber(a)&&(i.top=a,u=!0),u&&this.renderCanvas(!0)),this},zoom:function e(t,a){var i=this.canvasData;return t=Number(t),t<0?t=1/(1-t):t=1+t,this.zoomTo(i.width*t/i.naturalWidth,null,a)},zoomTo:function e(t,a,i){var u=this.options,n=this.canvasData,o=n.width,c=n.height,p=n.naturalWidth,r=n.naturalHeight;if(t=Number(t),t>=0&&this.ready&&!this.disabled&&u.zoomable){var l=p*t,s=r*t;if(dispatchEvent(this.element,EVENT_ZOOM,{ratio:t,oldRatio:o/p,originalEvent:i})===!1)return this;if(i){var h=this.pointers,d=getOffset(this.cropper),m=h&&Object.keys(h).length?getPointersCenter(h):{pageX:i.pageX,pageY:i.pageY};n.left-=(l-o)*((m.pageX-d.left-n.left)/o),n.top-=(s-c)*((m.pageY-d.top-n.top)/c)}else isPlainObject(a)&&isNumber(a.x)&&isNumber(a.y)?(n.left-=(l-o)*((a.x-n.left)/o),n.top-=(s-c)*((a.y-n.top)/c)):(n.left-=(l-o)/2,n.top-=(s-c)/2);n.width=l,n.height=s,this.renderCanvas(!0)}return this},rotate:function e(t){return this.rotateTo((this.imageData.rotate||0)+Number(t))},rotateTo:function e(t){return t=Number(t),isNumber(t)&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=t%360,this.renderCanvas(!0,!0)),this},scaleX:function e(t){var a=this.imageData.scaleY;return this.scale(t,isNumber(a)?a:1)},scaleY:function e(t){var a=this.imageData.scaleX;return this.scale(isNumber(a)?a:1,t)},scale:function e(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,i=this.imageData,u=!1;return t=Number(t),a=Number(a),this.ready&&!this.disabled&&this.options.scalable&&(isNumber(t)&&(i.scaleX=t,u=!0),isNumber(a)&&(i.scaleY=a,u=!0),u&&this.renderCanvas(!0,!0)),this},getData:function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,a=this.options,i=this.imageData,u=this.canvasData,n=this.cropBoxData,o;if(this.ready&&this.cropped){o={x:n.left-u.left,y:n.top-u.top,width:n.width,height:n.height};var c=i.width/i.naturalWidth;if(forEach(o,function(l,s){o[s]=l/c}),t){var p=Math.round(o.y+o.height),r=Math.round(o.x+o.width);o.x=Math.round(o.x),o.y=Math.round(o.y),o.width=r-o.x,o.height=p-o.y}}else o={x:0,y:0,width:0,height:0};return a.rotatable&&(o.rotate=i.rotate||0),a.scalable&&(o.scaleX=i.scaleX||1,o.scaleY=i.scaleY||1),o},setData:function e(t){var a=this.options,i=this.imageData,u=this.canvasData,n={};if(this.ready&&!this.disabled&&isPlainObject(t)){var o=!1;a.rotatable&&isNumber(t.rotate)&&t.rotate!==i.rotate&&(i.rotate=t.rotate,o=!0),a.scalable&&(isNumber(t.scaleX)&&t.scaleX!==i.scaleX&&(i.scaleX=t.scaleX,o=!0),isNumber(t.scaleY)&&t.scaleY!==i.scaleY&&(i.scaleY=t.scaleY,o=!0)),o&&this.renderCanvas(!0,!0);var c=i.width/i.naturalWidth;isNumber(t.x)&&(n.left=t.x*c+u.left),isNumber(t.y)&&(n.top=t.y*c+u.top),isNumber(t.width)&&(n.width=t.width*c),isNumber(t.height)&&(n.height=t.height*c),this.setCropBoxData(n)}return this},getContainerData:function e(){return this.ready?assign({},this.containerData):{}},getImageData:function e(){return this.sized?assign({},this.imageData):{}},getCanvasData:function e(){var t=this.canvasData,a={};return this.ready&&forEach(["left","top","width","height","naturalWidth","naturalHeight"],function(i){a[i]=t[i]}),a},setCanvasData:function e(t){var a=this.canvasData,i=a.aspectRatio;return this.ready&&!this.disabled&&isPlainObject(t)&&(isNumber(t.left)&&(a.left=t.left),isNumber(t.top)&&(a.top=t.top),isNumber(t.width)?(a.width=t.width,a.height=t.width/i):isNumber(t.height)&&(a.height=t.height,a.width=t.height*i),this.renderCanvas(!0)),this},getCropBoxData:function e(){var t=this.cropBoxData,a;return this.ready&&this.cropped&&(a={left:t.left,top:t.top,width:t.width,height:t.height}),a||{}},setCropBoxData:function e(t){var a=this.cropBoxData,i=this.options.aspectRatio,u,n;return this.ready&&this.cropped&&!this.disabled&&isPlainObject(t)&&(isNumber(t.left)&&(a.left=t.left),isNumber(t.top)&&(a.top=t.top),isNumber(t.width)&&t.width!==a.width&&(u=!0,a.width=t.width),isNumber(t.height)&&t.height!==a.height&&(n=!0,a.height=t.height),i&&(u?a.height=a.width/i:n&&(a.width=a.height*i)),this.renderCropBox()),this},getCroppedCanvas:function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var a=this.canvasData,i=getSourceCanvas(this.image,this.imageData,a,t);if(!this.cropped)return i;var u=this.getData(t.rounded),n=u.x,o=u.y,c=u.width,p=u.height,r=i.width/Math.floor(a.naturalWidth);r!==1&&(n*=r,o*=r,c*=r,p*=r);var l=c/p,s=getAdjustedSizes({aspectRatio:l,width:t.maxWidth||1/0,height:t.maxHeight||1/0}),h=getAdjustedSizes({aspectRatio:l,width:t.minWidth||0,height:t.minHeight||0},"cover"),d=getAdjustedSizes({aspectRatio:l,width:t.width||(r!==1?i.width:c),height:t.height||(r!==1?i.height:p)}),m=d.width,b=d.height;m=Math.min(s.width,Math.max(h.width,m)),b=Math.min(s.height,Math.max(h.height,b));var v=document.createElement("canvas"),O=v.getContext("2d");v.width=normalizeDecimalNumber(m),v.height=normalizeDecimalNumber(b),O.fillStyle=t.fillColor||"transparent",O.fillRect(0,0,m,b);var T=t.imageSmoothingEnabled,E=T===void 0?!0:T,$=t.imageSmoothingQuality;O.imageSmoothingEnabled=E,$&&(O.imageSmoothingQuality=$);var C=i.width,P=i.height,G=n,te=o,xe,K,j,ie,He,pe;G<=-c||G>C?(G=0,xe=0,j=0,He=0):G<=0?(j=-G,G=0,xe=Math.min(C,c+G),He=xe):G<=C&&(j=0,xe=Math.min(c,C-G),He=xe),xe<=0||te<=-p||te>P?(te=0,K=0,ie=0,pe=0):te<=0?(ie=-te,te=0,K=Math.min(P,p+te),pe=K):te<=P&&(ie=0,K=Math.min(p,P-te),pe=K);var he=[G,te,xe,K];if(He>0&&pe>0){var W=m/c;he.push(j*W,ie*W,He*W,pe*W)}return O.drawImage.apply(O,[i].concat(_toConsumableArray(he.map(function(ge){return Math.floor(normalizeDecimalNumber(ge))})))),v},setAspectRatio:function e(t){var a=this.options;return!this.disabled&&!isUndefined(t)&&(a.aspectRatio=Math.max(0,t)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function e(t){var a=this.options,i=this.dragBox,u=this.face;if(this.ready&&!this.disabled){var n=t===DRAG_MODE_CROP,o=a.movable&&t===DRAG_MODE_MOVE;t=n||o?t:DRAG_MODE_NONE,a.dragMode=t,setData(i,DATA_ACTION,t),toggleClass(i,CLASS_CROP,n),toggleClass(i,CLASS_MOVE,o),a.cropBoxMovable||(setData(u,DATA_ACTION,t),toggleClass(u,CLASS_CROP,n),toggleClass(u,CLASS_MOVE,o))}return this}},AnotherCropper=WINDOW.Cropper,Cropper=function(){function e(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(_classCallCheck(this,e),!t||!REGEXP_TAG_NAME.test(t.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=t,this.options=assign({},DEFAULTS,isPlainObject(a)&&a),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return _createClass(e,[{key:"init",value:function(){var a=this.element,i=a.tagName.toLowerCase(),u;if(!a[NAMESPACE]){if(a[NAMESPACE]=this,i==="img"){if(this.isImg=!0,u=a.getAttribute("src")||"",this.originalUrl=u,!u)return;u=a.src}else i==="canvas"&&window.HTMLCanvasElement&&(u=a.toDataURL());this.load(u)}}},{key:"load",value:function(a){var i=this;if(a){this.url=a,this.imageData={};var u=this.element,n=this.options;if(!n.rotatable&&!n.scalable&&(n.checkOrientation=!1),!n.checkOrientation||!window.ArrayBuffer){this.clone();return}if(REGEXP_DATA_URL.test(a)){REGEXP_DATA_URL_JPEG.test(a)?this.read(dataURLToArrayBuffer(a)):this.clone();return}var o=new XMLHttpRequest,c=this.clone.bind(this);this.reloading=!0,this.xhr=o,o.onabort=c,o.onerror=c,o.ontimeout=c,o.onprogress=function(){o.getResponseHeader("content-type")!==MIME_TYPE_JPEG&&o.abort()},o.onload=function(){i.read(o.response)},o.onloadend=function(){i.reloading=!1,i.xhr=null},n.checkCrossOrigin&&isCrossOriginURL(a)&&u.crossOrigin&&(a=addTimestamp(a)),o.open("GET",a,!0),o.responseType="arraybuffer",o.withCredentials=u.crossOrigin==="use-credentials",o.send()}}},{key:"read",value:function(a){var i=this.options,u=this.imageData,n=resetAndGetOrientation(a),o=0,c=1,p=1;if(n>1){this.url=arrayBufferToDataURL(a,MIME_TYPE_JPEG);var r=parseOrientation(n);o=r.rotate,c=r.scaleX,p=r.scaleY}i.rotatable&&(u.rotate=o),i.scalable&&(u.scaleX=c,u.scaleY=p),this.clone()}},{key:"clone",value:function(){var a=this.element,i=this.url,u=a.crossOrigin,n=i;this.options.checkCrossOrigin&&isCrossOriginURL(i)&&(u||(u="anonymous"),n=addTimestamp(i)),this.crossOrigin=u,this.crossOriginUrl=n;var o=document.createElement("img");u&&(o.crossOrigin=u),o.src=n||i,o.alt=a.alt||"The image to crop",this.image=o,o.onload=this.start.bind(this),o.onerror=this.stop.bind(this),addClass(o,CLASS_HIDE),a.parentNode.insertBefore(o,a.nextSibling)}},{key:"start",value:function(){var a=this,i=this.image;i.onload=null,i.onerror=null,this.sizing=!0;var u=WINDOW.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(WINDOW.navigator.userAgent),n=function(r,l){assign(a.imageData,{naturalWidth:r,naturalHeight:l,aspectRatio:r/l}),a.initialImageData=assign({},a.imageData),a.sizing=!1,a.sized=!0,a.build()};if(i.naturalWidth&&!u){n(i.naturalWidth,i.naturalHeight);return}var o=document.createElement("img"),c=document.body||document.documentElement;this.sizingImage=o,o.onload=function(){n(o.width,o.height),u||c.removeChild(o)},o.src=i.src,u||(o.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",c.appendChild(o))}},{key:"stop",value:function(){var a=this.image;a.onload=null,a.onerror=null,a.parentNode.removeChild(a),this.image=null}},{key:"build",value:function(){if(!(!this.sized||this.ready)){var a=this.element,i=this.options,u=this.image,n=a.parentNode,o=document.createElement("div");o.innerHTML=TEMPLATE;var c=o.querySelector(".".concat(NAMESPACE,"-container")),p=c.querySelector(".".concat(NAMESPACE,"-canvas")),r=c.querySelector(".".concat(NAMESPACE,"-drag-box")),l=c.querySelector(".".concat(NAMESPACE,"-crop-box")),s=l.querySelector(".".concat(NAMESPACE,"-face"));this.container=n,this.cropper=c,this.canvas=p,this.dragBox=r,this.cropBox=l,this.viewBox=c.querySelector(".".concat(NAMESPACE,"-view-box")),this.face=s,p.appendChild(u),addClass(a,CLASS_HIDDEN),n.insertBefore(c,a.nextSibling),removeClass(u,CLASS_HIDE),this.initPreview(),this.bind(),i.initialAspectRatio=Math.max(0,i.initialAspectRatio)||NaN,i.aspectRatio=Math.max(0,i.aspectRatio)||NaN,i.viewMode=Math.max(0,Math.min(3,Math.round(i.viewMode)))||0,addClass(l,CLASS_HIDDEN),i.guides||addClass(l.getElementsByClassName("".concat(NAMESPACE,"-dashed")),CLASS_HIDDEN),i.center||addClass(l.getElementsByClassName("".concat(NAMESPACE,"-center")),CLASS_HIDDEN),i.background&&addClass(c,"".concat(NAMESPACE,"-bg")),i.highlight||addClass(s,CLASS_INVISIBLE),i.cropBoxMovable&&(addClass(s,CLASS_MOVE),setData(s,DATA_ACTION,ACTION_ALL)),i.cropBoxResizable||(addClass(l.getElementsByClassName("".concat(NAMESPACE,"-line")),CLASS_HIDDEN),addClass(l.getElementsByClassName("".concat(NAMESPACE,"-point")),CLASS_HIDDEN)),this.render(),this.ready=!0,this.setDragMode(i.dragMode),i.autoCrop&&this.crop(),this.setData(i.data),isFunction(i.ready)&&addListener(a,EVENT_READY,i.ready,{once:!0}),dispatchEvent(a,EVENT_READY)}}},{key:"unbuild",value:function(){if(this.ready){this.ready=!1,this.unbind(),this.resetPreview();var a=this.cropper.parentNode;a&&a.removeChild(this.cropper),removeClass(this.element,CLASS_HIDDEN)}}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],[{key:"noConflict",value:function(){return window.Cropper=AnotherCropper,e}},{key:"setDefaults",value:function(a){assign(DEFAULTS,isPlainObject(a)&&a)}}])}();assign(Cropper.prototype,render,preview,events,handlers,change,methods);const class_to_idx=["1355868","1355920","1355932","1355936","1355937","1355955","1355959","1355961","1355978","1355990","1356003","1356022","1356037","1356055","1356075","1356076","1356111","1356126","1356138","1356257","1356278","1356279","1356309","1356379","1356380","1356382","1356420","1356421","1356428","1356469","1356692","1356781","1356816","1356847","1356901","1357330","1357331","1357367","1357379","1357506","1357635","1357652","1357677","1357681","1357682","1357705","1358094","1358095","1358096","1358097","1358099","1358101","1358102","1358103","1358105","1358108","1358112","1358119","1358127","1358132","1358133","1358150","1358193","1358302","1358365","1358519","1358605","1358608","1358689","1358690","1358691","1358695","1358699","1358700","1358701","1358703","1358704","1358706","1358710","1358711","1358748","1358749","1358750","1358751","1358752","1358755","1358759","1358760","1358766","1359060","1359064","1359065","1359197","1359331","1359332","1359359","1359364","1359483","1359485","1359486","1359488","1359489","1359495","1359497","1359498","1359502","1359505","1359506","1359508","1359510","1359513","1359514","1359517","1359518","1359519","1359521","1359523","1359524","1359525","1359526","1359528","1359530","1359616","1359620","1359622","1359625","1359669","1359806","1359815","1359821","1360004","1360147","1360148","1360150","1360152","1360153","1360154","1360427","1360550","1360555","1360588","1360590","1360591","1360618","1360671","1360687","1360759","1360808","1360811","1360835","1360838","1360976","1360978","1360998","1361024","1361233","1361316","1361357","1361507","1361508","1361524","1361655","1361656","1361658","1361660","1361663","1361666","1361668","1361672","1361704","1361745","1361759","1361823","1361824","1361847","1361850","1361891","1362024","1362064","1362080","1362192","1362294","1362385","1362398","1362434","1362435","1362489","1362490","1362516","1362582","1362834","1362927","1362928","1362954","1363016","1363019","1363021","1363110","1363117","1363126","1363127","1363128","1363129","1363130","1363227","1363336","1363343","1363359","1363451","1363463","1363464","1363489","1363490","1363491","1363492","1363493","1363613","1363688","1363699","1363700","1363701","1363703","1363735","1363737","1363738","1363739","1363740","1363743","1363749","1363750","1363764","1363769","1363770","1363772","1363778","1363871","1363872","1363970","1363991","1364000","1364099","1364112","1364158","1364159","1364161","1364164","1364165","1364172","1364173","1364440","1364512","1365712","1365961","1366875","1366898","1366899","1366997","1367060","1367087","1367267","1367343","1367369","1367431","1367432","1367781","1367784","1367921","1367938","1367949","1367998","1369472","1369887","1369960","1370279","1370991","1370993","1371680","1371691","1372016","1372602","1373151","1373231","1373259","1373530","1373535","1374048","1374448","1374450","1374466","1374933","1375776","1375797","1375895","1375954","1375965","1375966","1376366","1376703","1376726","1379303","1379513","1379556","1379585","1380874","1380904","1381173","1381468","1382099","1383149","1383772","1383774","1384199","1384482","1384485","1384497","1384499","1384500","1384760","1385700","1385701","1385749","1385853","1385937","1387107","1387284","1387687","1387727","1388905","1388911","1389016","1389031","1389044","1389078","1389230","1389231","1389294","1389297","1389307","1389308","1389426","1389442","1389492","1389510","1389553","1389567","1389628","1389630","1389633","1389921","1389966","1390617","1390637","1390956","1390957","1391110","1391112","1391113","1391167","1391184","1391190","1391192","1391193","1391197","1391198","1391206","1391209","1391221","1391226","1391235","1391250","1391326","1391483","1391498","1391499","1391529","1391530","1391648","1391649","1391652","1391654","1391762","1391797","1391805","1391807","1391809","1391810","1391821","1391868","1391953","1391960","1391961","1391962","1391963","1391964","1391967","1392093","1392094","1392096","1392254","1392361","1392365","1392418","1392475","1392601","1392653","1392654","1392658","1392689","1392690","1392691","1392695","1392730","1392777","1393241","1393242","1393245","1393248","1393250","1393253","1393254","1393257","1393294","1393322","1393393","1393414","1393416","1393418","1393423","1393425","1393449","1393450","1393465","1393466","1393537","1393614","1393654","1393656","1393725","1393789","1393792","1393796","1393818","1393823","1393846","1393850","1393851","1393933","1393945","1393946","1393965","1393967","1393968","1393980","1393981","1394072","1394073","1394077","1394078","1394082","1394088","1394114","1394120","1394128","1394143","1394153","1394164","1394169","1394183","1394189","1394313","1394378","1394382","1394383","1394394","1394396","1394399","1394401","1394404","1394405","1394406","1394418","1394420","1394453","1394454","1394455","1394457","1394460","1394489","1394498","1394502","1394504","1394508","1394513","1394549","1394580","1394591","1394648","1394714","1394759","1394994","1394995","1395391","1395720","1395721","1395722","1396133","1396134","1396143","1396144","1396145","1396156","1396159","1396161","1396165","1396708","1396713","1396754","1396758","1396823","1396824","1396842","1396843","1396858","1396867","1396869","1397208","1397209","1397268","1397269","1397303","1397305","1397311","1397312","1397313","1397349","1397351","1397352","1397364","1397379","1397387","1397403","1397407","1397408","1397420","1397491","1397510","1397514","1397515","1397550","1397551","1397556","1397585","1397598","1397613","1397841","1397959","1398041","1398111","1398125","1398128","1398130","1398178","1398196","1398274","1398326","1398333","1398355","1398444","1398447","1398469","1398480","1398494","1398513","1398515","1398526","1398567","1398592","1398608","1398615","1398700","1398805","1398830","1399063","1399141","1399145","1399157","1399231","1399338","1399384","1399667","1399783","1399803","1399804","1399920","1400060","1400080","1400081","1400096","1400100","1400104","1400110","1400471","1400478","1400798","1400844","1401141","1401148","1401211","1401216","1401222","1401242","1401701","1401711","1401718","1401735","1401736","1401737","1401883","1402303","1402356","1402423","1402433","1402464","1402576","1402811","1402920","1402921","1402924","1402925","1402926","1403272","1403479","1403654","1403826","1403967","1404002","1404481","1404745","1404776","1404804","1405061","1405088","1405252","1405641","1405653","1405685","1405686","1405703","1406426","1406486","1406756","1406863","1407077","1407379","1407873","1407874","1408034","1408037","1408041","1408045","1408066","1408071","1408092","1408107","1408160","1408214","1408227","1408284","1408386","1408401","1408421","1408451","1408468","1408490","1408502","1408507","1408508","1408509","1408557","1408594","1408657","1408688","1408718","1408727","1408734","1408738","1408774","1408788","1408810","1408812","1408845","1408869","1408874","1408953","1408961","1408979","1409185","1409191","1409195","1409214","1409215","1409216","1409238","1409239","1409283","1409292","1409295","1409296","1409299","1409328","1409407","1409521","1409525","1409550","1409551","1409552","1409586","1409642","1409705","1409746","1409824","1409834","1409839","1409918","1409919","1409932","1410024","1410025","1410147","1410168","1411423","1411462","1411466","1411469","1411472","1411520","1411524","1411687","1411700","1411760","1411827","1411829","1411832","1411833","1411834","1411925","1412311","1412313","1412314","1412337","1412344","1412368","1412410","1412412","1412413","1412418","1412444","1412445","1412595","1412596","1412659","1412661","1412662","1412663","1412697","1412698","1412699","1412740","1412745","1412831","1412833","1412834","1412888","1412889","1412946","1412992","1413002","1413013","1413391","1413751","1413752","1413753","1413755","1413757","1413832","1413835","1414057","1414058","1414272","1414275","1414276","1414397","1414746","1414808","1414903","1414924","1415584","1415593","1415911","1416420","1416509","1417117","1417506","1417546","1417900","1417916","1418033","1418061","1418084","1418102","1418140","1418146","1418191","1418192","1418295","1418345","1418475","1418545","1418546","1418547","1418563","1418576","1418653","1418655","1418659","1418665","1418732","1418984","1419077","1419086","1419091","1419112","1419115","1419173","1419197","1419334","1419352","1419595","1419598","1419612","1419713","1419720","1419807","1419864","1419874","1419923","1419924","1419942","1419949","1420092","1420288","1420364","1420365","1420496","1420544","1420653","1420700","1420767","1420781","1420787","1420792","1420795","1420796","1420863","1420896","1420929","1420931","1421001","1421011","1421021","1421026","1421107","1421386","1421523","1421628","1422105","1422636","1422712","1422721","1423286","1423469","1423633","1423932","1424003","1424005","1424377","1425433","1425899","1427043","1427659","1427821","1428059","1430280","1430287","1430515","1431222","1431925","1432545","1432783","1432786","1432824","1433158","1433176","1433496","1434011","1434232","1434249","1434258","1434267","1434320","1434326","1434383","1434584","1434594","1434712","1435225","1435228","1435260","1435709","1435714","1436922","1436923","1437724","1438033","1438041","1438043","1438045","1438049","1438052","1438056","1438352","1438354","1438358","1438616","1438868","1439145","1439703","1440273","1440412","1440416","1440423","1440425","1440440","1440446","1440476","1441099","1441349","1441375","1441410","1442541","1442833","1442865","1442930","1444049","1444156","1444195","1444216","1447962","1449139","1449149","1453004","1455408","1460343","1463177","1464023","1464054","1464075","1464086","1464088","1464459","1464567","1465016","1465026","1465149","1465170","1470435","1486475","1486501","1486655","1488001","1488026","1488171","1488206","1488285","1491513","1494482","1497434","1497630","1497667","1503981","1506976","1513142","1513780","1514035","1514627","1516297","1518683","1522375","1522377","1529081","1529084","1529107","1529124","1529128","1529144","1529148","1529179","1529205","1529212","1529242","1529265","1529305","1529328","1535203","1538569","1542499","1550658","1550692","1550785","1550799","1560405","1567995","1568056","1568102","1568134","1568144","1568799","1568914","1576296","1580985","1584568","1600531","1608001","1608003","1608023","1608027","1608034","1608440","1617292","1617904","1618100","1618570","1618661","1621823","1638998","1643184","1643341","1643349","1643491","1643553","1643690","1643819","1643866","1643887","1644145","1644223","1646149","1662426","1663341","1663381","1664348","1667445","1675513","1682159","1689963","1694631","1697960","1697991","1698065","1711751","1711753","1711775","1711787","1711873","1712003","1712019","1712365","1713198","1713199","1717570","1718287"],id_to_species={1355868:"Lactuca virosa L.",1355920:"Pelargonium capitatum (L.) L'Hr.",1355932:"Pelargonium graveolens L'Hr.",1355936:"Cirsium arvense (L.) Scop.",1355937:"Cirsium vulgare (Savi) Ten.",1355955:"Pelargonium odoratissimum (L.) L'Hr.",1355959:"Pelargonium peltatum (L.) L'Hr.",1355961:"Pelargonium quercifolium (L. f.) L'Hr.",1355978:"Pelargonium zonale (L.) L'Hr.",1355990:"Mercurialis annua L.",1356003:"Phyllanthus tenellus Roxb.",1356022:"Hypericum perforatum L.",1356037:"Egeria densa Planch.",1356055:"Ibicella lutea (Lindl.) Van Eselt.",1356075:"Tradescantia fluminensis Vell.",1356076:"Tradescantia zebrina Heynh. ex Bosse",1356111:"Lamium amplexicaule L.",1356126:"Lavandula dentata L.",1356138:"Striga asiatica (L.) Kuntze",1356257:"Melilotus albus Medik.",1356278:"Trifolium fragiferum L.",1356279:"Asystasia gangetica (L.) T. Anderson",1356309:"Nymphaea nouchali Burm. f.",1356379:"Dryopteris aemula (Aiton) Kuntze",1356380:"Dryopteris affinis (Lowe) Fraser-Jenk.",1356382:"Dryopteris filix-mas (L.) Schott",1356420:"Nephrolepis cordifolia (L.) C. Presl",1356421:"Nephrolepis exaltata (L.) Schott",1356428:"Osmunda regalis L.",1356469:"Achyranthes aspera L.",1356692:"Lithodora fruticosa (L.) Griseb.",1356781:"Humulus lupulus L.",1356816:"Vaccaria hispanica (Mill.) Rauschert",1356847:"Spergularia rubra (L.) J. Presl & C. Presl",1356901:"Moehringia trinervia (L.) Clairv.",1357330:"Calendula officinalis L.",1357331:"Calendula stellata Cav.",1357367:"Carthamus caeruleus L.",1357379:"Carthamus lanatus L.",1357506:"Cirsium monspessulanum (L.) Hill",1357635:"Helminthotheca echioides (L.) Holub",1357652:"Hyoseris radiata L.",1357677:"Lactuca muralis (L.) Gaertn.",1357681:"Lactuca saligna L.",1357682:"Lactuca tenerrima Pourr.",1357705:"Limbarda crithmoides (L.) Dumort.",1358094:"Sedum acre L.",1358095:"Sedum album L.",1358096:"Sedum amplexicaule DC.",1358097:"Sedum andegavense (DC.) Desv.",1358099:"Sedum brevifolium DC.",1358101:"Sedum caeruleum L.",1358102:"Sedum caespitosum (Cav.) DC.",1358103:"Sedum cepaea L.",1358105:"Sedum dasyphyllum L.",1358108:"Sedum forsterianum Sm.",1358112:"Sedum hirsutum All.",1358119:"Sedum litoreum Guss.",1358127:"Sedum multiceps Coss. & Durieu",1358132:"Sedum rubens L.",1358133:"Sedum sediforme (Jacq.) Pau",1358150:"Alliaria petiolata (M. Bieb.) Cavara & Grande",1358193:"Boscia angustifolia A. Rich.",1358302:"Fibigia clypeata (L.) Medik.",1358365:"Maerua angolensis DC.",1358519:"Acalypha virginica L.",1358605:"Mercurialis perennis L.",1358608:"Phyllanthus reticulatus Poir.",1358689:"Hypericum androsaemum L.",1358690:"Hypericum australe Ten.",1358691:"Hypericum canariense L.",1358695:"Hypericum empetrifolium Willd.",1358699:"Hypericum hircinum L.",1358700:"Hypericum hirsutum L.",1358701:"Hypericum humifusum L.",1358703:"Hypericum linariifolium Vahl",1358704:"Hypericum montanum L.",1358706:"Hypericum perfoliatum L.",1358710:"Hypericum tetrapterum Fr.",1358711:"Hypericum tomentosum L.",1358748:"Lamium bifidum Cirillo",1358749:"Lamium flexuosum Ten.",1358750:"Lamium garganicum L.",1358751:"Lamium hybridum Vill.",1358752:"Lamium purpureum L.",1358755:"Lavandula canariensis Mill.",1358759:"Lavandula minutolii Bolle",1358760:"Lavandula multifida L.",1358766:"Lavandula stoechas L.",1359060:"Acacia mellifera (Vahl) Benth.",1359064:"Acacia seyal Delile",1359065:"Acacia tortilis (Forssk.) Hayne",1359197:"Galega officinalis L.",1359331:"Lupinus cosentinii Guss.",1359332:"Lupinus micranthus Guss.",1359359:"Melilotus italicus (L.) Lam.",1359364:"Melilotus sulcatus Desf.",1359483:"Trifolium angustifolium L.",1359485:"Trifolium arvense L.",1359486:"Trifolium aureum Pollich",1359488:"Trifolium campestre Schreb.",1359489:"Trifolium cherleri L.",1359495:"Trifolium hirtum All.",1359497:"Trifolium hybridum L.",1359498:"Trifolium incarnatum L.",1359502:"Trifolium lappaceum L.",1359505:"Trifolium michelianum Savi",1359506:"Trifolium micranthum Viv.",1359508:"Trifolium montanum L.",1359510:"Trifolium ochroleucon Huds.",1359513:"Trifolium pannonicum Jacq.",1359514:"Trifolium patens Schreb.",1359517:"Trifolium pratense L.",1359518:"Trifolium purpureum Loisel.",1359519:"Trifolium resupinatum L.",1359521:"Trifolium scabrum L.",1359523:"Trifolium spumosum L.",1359524:"Trifolium squamosum L.",1359525:"Trifolium stellatum L.",1359526:"Trifolium striatum L.",1359528:"Trifolium subterraneum L.",1359530:"Trifolium tomentosum L.",1359616:"Punica granatum L.",1359620:"Alcea rosea L.",1359622:"Althaea cannabina L.",1359625:"Althaea officinalis L.",1359669:"Nymphaea alba L.",1359806:"Hunnemannia fumariifolia Sweet",1359815:"Papaver atlanticum (Ball) Coss.",1359821:"Papaver rupifragum Boiss. & Reut.",1360004:"Goniolimon tataricum (L.) Boiss.",1360147:"Adonis aestivalis L.",1360148:"Adonis annua L.",1360150:"Adonis flammea Jacq.",1360152:"Adonis microcarpa DC.",1360153:"Anemone coronaria L.",1360154:"Anemone palmata L.",1360427:"Oldenlandia corymbosa L.",1360550:"Hyoscyamus albus L.",1360555:"Hyoscyamus niger L.",1360588:"Daphne gnidium L.",1360590:"Daphne laureola L.",1360591:"Daphne oleoides Schreb.",1360618:"Berula erecta (Huds.) Coville",1360671:"Chaerophyllum temulum L.",1360687:"Daucus muricatus (L.) L.",1360759:"Meum athamanticum Jacq.",1360808:"Thapsia garganica L.",1360811:"Thapsia villosa L.",1360835:"Centranthus calcitrapae (L.) Dufr.",1360838:"Fedia cornucopiae (L.) Gaertn.",1360976:"Pancratium canariense Ker Gawl.",1360978:"Pancratium maritimum L.",1360998:"Anthericum liliago L.",1361024:"Butomus umbellatus L.",1361233:"Danthonia decumbens (L.) DC.",1361316:"Leersia oryzoides (L.) Sw.",1361357:"Phalaris coerulescens Desf.",1361507:"Oncostema elongata (Parl.) Speta",1361508:"Oncostema peruviana (L.) Speta",1361524:"Elodea canadensis Michx.",1361655:"Neotinea maculata (Desf.) Stearn",1361656:"Ophrys apifera Huds.",1361658:"Ophrys bombyliflora Link",1361660:"Ophrys fusca Link",1361663:"Ophrys lutea Cav.",1361666:"Ophrys scolopax Cav.",1361668:"Ophrys speculum Link",1361672:"Ophrys tenthredinifera Willd.",1361704:"Groenlandia densa (L.) Fourr.",1361745:"Myosoton aquaticum (L.) Moench",1361759:"Cirsium palustre (L.) Scop.",1361823:"Lamium galeobdolon (L.) L.",1361824:"Lavandula angustifolia Mill.",1361847:"Casuarina cunninghamiana Miq.",1361850:"Trifolium rubens L.",1361891:"Falcaria vulgaris Bernh.",1362024:"Hypericum triquetrifolium Turra",1362064:"Wigandia caracasana Kunth",1362080:"Nymphaea lotus L.",1362192:"Sedum villosum L.",1362294:"Epipactis helleborine (L.) Crantz",1362385:"Thesium humifusum DC.",1362398:"Acacia etbaica Schweinf.",1362434:"Centranthus angustifolius (Mill.) DC.",1362435:"Centranthus lecoqii Jord.",1362489:"Sedum anglicum Huds.",1362490:"Sedum rupestre L.",1362516:"Ophrys insectifera L.",1362582:"Freesia refracta (Jacq.) Klatt",1362834:"Diatelia tuberaria (L.) Demoly",1362927:"Tradescantia pallida (Rose) D.R. Hunt",1362928:"Cenchrus longispinus (Hack.) Fernald",1362954:"Schefflera actinophylla (Endl.) Harms",1363016:"Cenchrus clandestinus (Hochst. ex Chiov.) Morrone",1363019:"Cenchrus purpureus (Schumach.) Morrone",1363021:"Cenchrus setaceus (Forssk.) Morrone",1363110:"Anemone hortensis L.",1363117:"Tradescantia cerinthoides Kunth",1363126:"Papaver argemone L.",1363127:"Papaver hybridum L.",1363128:"Papaver rhoeas L.",1363129:"Papaver dubium L.",1363130:"Papaver somniferum L.",1363227:"Daucus carota L.",1363336:"Smilax aspera L.",1363343:"Aizoon canariense L.",1363359:"Zannichellia palustris L.",1363451:"Secale cereale L.",1363463:"Cenchrus ciliaris L.",1363464:"Cenchrus echinatus L.",1363489:"Phalaris aquatica L.",1363490:"Phalaris arundinacea L.",1363491:"Phalaris canariensis L.",1363492:"Phalaris minor Retz.",1363493:"Phalaris paradoxa L.",1363613:"Sedum hispanicum L.",1363688:"Crotalaria juncea L.",1363699:"Lupinus angustifolius L.",1363700:"Lupinus luteus L.",1363701:"Lupinus pilosus L.",1363703:"Lupinus albus L.",1363735:"Trifolium alexandrinum L.",1363737:"Trifolium dubium Sibth.",1363738:"Trifolium glomeratum L.",1363739:"Trifolium nigrescens Viv.",1363740:"Trifolium repens L.",1363743:"Dalbergia melanoxylon Guill. & Perr.",1363749:"Melilotus indicus (L.) All.",1363750:"Melilotus officinalis (L.) Pall.",1363764:"Acacia dealbata Link",1363769:"Acacia longifolia (Andrews) Willd.",1363770:"Acacia mearnsii De Wild.",1363772:"Acacia pycnantha Benth.",1363778:"Acacia retinodes Schltdl.",1363871:"Barbarea verna (Mill.) Asch.",1363872:"Barbarea intermedia Boreau",1363970:"Myosurus minimus L.",1363991:"Fragaria vesca L.",1364e3:"Duchesnea indica (Jacks.) Focke",1364099:"Centranthus ruber (L.) DC.",1364112:"Guizotia abyssinica (L. f.) Cass.",1364158:"Tagetes minuta L.",1364159:"Tagetes patula L.",1364161:"Calendula arvensis (Vaill.) L.",1364164:"Lapsana communis L.",1364165:"Carthamus tinctorius L.",1364172:"Lactuca sativa L.",1364173:"Lactuca serriola L.",1364440:"Arthraxon hispidus (Thunb.) Makino",1364512:"Microchloa kunthii Desv.",1365712:"Harpachne schimperi Hochst. ex A. Rich.",1365961:"Cedrela odorata L.",1366875:"Aeschynomene americana L.",1366898:"Prosopis alba Griseb.",1366899:"Prosopis juliflora (Sw.) DC.",1366997:"Crotalaria spectabilis Roth",1367060:"Crotalaria chrysochlora Baker f. ex Harms",1367087:"Crotalaria deflersii Schweinf.",1367267:"Crotalaria polysperma Kotschy",1367343:"Crotalaria uguenensis Taub.",1367369:"Crotalaria verrucosa L.",1367431:"Lupinus perennis L.",1367432:"Lupinus polyphyllus Lindl.",1367781:"Dalbergia latifolia Roxb.",1367784:"Cordyla africana Lour.",1367921:"Acacia xanthophloea Benth.",1367938:"Acacia drepanolobium Harms ex Y. Sjstedt",1367949:"Acacia hockii De Wild.",1367998:"Acacia angustissima (Mill.) Kuntze",1369472:"Gomphocarpus integer (N.E. Br.) Bullock",1369887:"Trachelospermum jasminoides (Lindl.) Lem.",1369960:"Tradescantia spathacea Sw.",1370279:"Gymnosporia putterlickioides Loes.",1370991:"Conostomium kenyense Bremek.",1370993:"Conostomium quadrangulare (Rendle) Cufod.",1371680:"Mussaenda frondosa L.",1371691:"Mussaenda erythrophylla Schumach. & Thonn.",1372016:"Morinda citrifolia L.",1372602:"Pilocarpus racemosus Vahl",1373151:"Pelargonium alchemilloides (L.) L'Hr.",1373231:"Pelargonium quinquelobatum Hochst. ex A. Rich.",1373259:"Pelargonium glechomoides A. Rich.",1373530:"Gynura aurantiaca (Blume) DC.",1373535:"Gynura procumbens (Lour.) Merr.",1374048:"Tagetes erecta L.",1374448:"Aspilia mossambicensis (Oliv.) Wild",1374450:"Aspilia pluriseta Schweinf.",1374466:"Schkuhria pinnata (Lam.) Thell.",1374933:"Montanoa hibiscifolia Benth.",1375776:"Acalypha crenata Hochst. ex A. Rich.",1375797:"Acalypha hispida Burm. f.",1375895:"Phyllanthus fischeri Pax",1375954:"Phyllanthus suffrutescens Pax",1375965:"Phyllanthus acidus (L.) Skeels",1375966:"Phyllanthus amarus Schumach. & Thonn.",1376366:"Triadica sebifera (L.) Small",1376703:"Petiveria alliacea L.",1376726:"Peperomia pellucida (L.) Kunth",1379303:"Guaiacum officinale L.",1379513:"Hypericum annulatum Moris",1379556:"Mussaenda philippica A. Rich.",1379585:"Wigandia urens (Ruiz & Pav.) Kunth",1380874:"Boscia mossambicensis Klotzsch",1380904:"Boscia coriacea Pax",1381173:"Mecardonia procumbens (Mill.) Small",1381468:"Browallia americana L.",1382099:"Acacia mangium Willd.",1383149:"Casuarina equisetifolia L.",1383772:"Aristea abyssinica Pax",1383774:"Aristea ecklonii Baker",1384199:"Erianthemum dregei (Eckl. & Zeyh.) Tiegh.",1384482:"Cucurbita ficifolia Bouch",1384485:"Cucurbita pepo L.",1384497:"Luffa acutangula (L.) Roxb.",1384499:"Lagenaria siceraria (Molina) Standl.",1384500:"Lagenaria sphaerica (Sond.) Naudin",1384760:"Asystasia riparia Lindau",1385700:"Barringtonia asiatica (L.) Kurz",1385701:"Couroupita guianensis Aubl.",1385749:"Asystasia charmian S. Moore",1385853:"Raphia farinifera (Gaertn.) Hyl.",1385937:"Zamioculcas zamiifolia (Lodd.) Engl.",1387107:"Kniphofia linearifolia Baker",1387284:"Smilax anceps Willd.",1387687:"Vanilla planifolia Andrews",1387727:"Ansellia africana Lindl.",1388905:"Hypericum balearicum L.",1388911:"Ophrys druentica P.Delforge & Viglione",1389016:"Macrosyringion longiflorum (Vohl) Rothm.",1389031:"Pyracantha koidzumii (Hayata) Rehder",1389044:"Lactuca plumieri (L.) Gren. & Godr.",1389078:"Aizoanthemum hispanicum (L.) H.E.K.Hartmann",1389230:"Phedimus aizoon (L.) 't Hart",1389231:"Phedimus spurius (M.Bieb) 't Hart",1389294:"Nephrolepis cordifolia (L.) C.Presl",1389297:"Cereus jamacaru DC.",1389307:"Sedum pachyphyllum Rose",1389308:"Sedum dendroideum Moc. & Sess ex DC.",1389426:"Liriodendron chinensis (Hemsl.) Sarg.",1389442:"Atocion rupestre (L.) B.Oxelman",1389492:"Tagetes tenuifolia Cav.",1389510:"Aegopodium podagraria L.",1389553:"Acacia melanoxylon R.Br.",1389567:"Acacia saligna (Labill.) H.L.Wendl.",1389628:"Patzkea paniculata (L.) G.H.Loos",1389630:"Perovskia abrotanoides Kar.",1389633:"Ophrys occidentalis (Scappaticci) Scappaticci & M.Demange",1389921:"Erechtites hieraciifolius (L.) Raf. ex DC.",1389966:"Cenchrus longisetus M.C.Johnst.",1390617:"Nothofagus obliqua (Mirb.) Oerst.",1390637:"Calendula arvensis L.",1390956:"Carthamus carduncellus L.",1390957:"Carthamus mitissimus L.",1391110:"Chaerophyllum aureum L.",1391112:"Chaerophyllum hirsutum L.",1391113:"Chaerophyllum villarsii W.D.J.Koch",1391167:"Cirsium alsophilum (Pollini) Greuter",1391184:"Cirsium canum (L.) All.",1391190:"Cirsium dissectum (L.) Hill",1391192:"Cirsium eriophorum (L.) Scop.",1391193:"Cirsium erisithales (Jacq.) Scop.",1391197:"Cirsium ferox (L.) DC.",1391198:"Cirsium filipendulum Lange",1391206:"Cirsium glabrum DC.",1391209:"Cirsium heterophyllum (L.) Hill",1391221:"Cirsium morisianum Rchb.f.",1391226:"Cirsium oleraceum (L.) Scop.",1391235:"Cirsium rivulare (Jacq.) All.",1391250:"Cirsium tuberosum (L.) All.",1391326:"Collomia grandiflora Douglas ex Lindl.",1391483:"Cucurbita maxima Duchesne",1391498:"Cymbalaria aequitriloba (Viv.) A.Chev.",1391499:"Cymbalaria hepaticifolia (Poir.) Wettst.",1391529:"Cytinus hypocistis (L.) L.",1391530:"Cytinus ruber Fritsch",1391648:"Daphne alpina L.",1391649:"Daphne cneorum L.",1391652:"Daphne mezereum L.",1391654:"Daphne striata Tratt.",1391762:"Dorotheanthus bellidiformis (Burm.f.) N.E.Br.",1391797:"Dryas octopetala L.",1391805:"Dryopteris carthusiana (Vill.) H.P.Fuchs",1391807:"Dryopteris cristata (L.) A.Gray",1391809:"Dryopteris dilatata (Hoffm.) A.Gray",1391810:"Dryopteris expansa (C.Presl) Fraser-Jenk. & Jermy",1391821:"Dryopteris villarii (Bellardi) Woyn. ex Schinz & Thell.",1391868:"Empetrum nigrum L.",1391953:"Epipactis atrorubens (Hoffm.) Besser",1391960:"Epipactis leptochila (Godfery) Godfery",1391961:"Epipactis microphylla (Ehrh.) Sw.",1391962:"Epipactis muelleri Godfery",1391963:"Epipactis palustris (L.) Crantz",1391964:"Epipactis phyllanthes G.E.Sm.",1391967:"Epipactis purpurata Sm.",1392093:"Erucastrum gallicum (Willd.) O.E.Schulz",1392094:"Erucastrum incanum (L.) W.D.J.Koch",1392096:"Erucastrum nasturtiifolium (Poir.) O.E.Schulz",1392254:"Fedia graciliflora Fisch. & C.A.Mey.",1392361:"Fragaria moschata Weston",1392365:"Freesia x hybrida L.H.Bailey",1392418:"Galega orientalis Lam.",1392475:"Alliaria petiolata (M.Bieb.) Cavara & Grande",1392601:"Geropogon hybridus (L.) Sch.Bip.",1392653:"Gomphocarpus fruticosus (L.) R.Br.",1392654:"Gomphocarpus physocarpus E.Mey.",1392658:"Guizotia abyssinica (L.f.) Cass.",1392689:"Hebe andersonii (Lindl. & Paxton) Cockayne",1392690:"Hebe brachysiphon Summerh.",1392691:"Hebe ochracea Ashwin",1392695:"Hebe salicifolia (G.Forst.) Pennell",1392730:"Helicodiceros muscivorus (L.f.) Engl.",1392777:"Hippophae rhamnoides L.",1393241:"Hypericum calycinum L.",1393242:"Hypericum coris L.",1393245:"Hypericum elodes L.",1393248:"Hypericum x inodorum Mill.",1393250:"Hypericum maculatum Crantz",1393253:"Hypericum nummularium L.",1393254:"Hypericum pulchrum L.",1393257:"Hypericum richeri Vill.",1393294:"Dierama pulcherrimum (Hook.f.) Baker",1393322:"Iva xanthiifolia Nutt.",1393393:"Kniphofia uvaria (L.) Hook.",1393414:"Lactuca alpina (L.) Benth. & Hook.f.",1393416:"Lactuca macrophylla (Willd.) A.Gray",1393418:"Lactuca viminea (L.) J.Presl & C.Presl",1393423:"Lamium album L.",1393425:"Lamium maculatum (L.) L.",1393449:"Lathraea clandestina L.",1393450:"Lathraea squamaria L.",1393465:"Lavandula x intermedia Emeric ex Loisel.",1393466:"Lavandula latifolia Medik.",1393537:"Limnanthes douglasii R.Br.",1393614:"Liriodendron tulipifera L.",1393654:"Lupinus arboreus Sims",1393656:"Lupinus x regalis Bergmans",1393725:"Maianthemum bifolium (L.) F.W.Schmidt",1393789:"Melilotus altissimus Thuill.",1393792:"Melilotus officinalis (L.) Lam.",1393796:"Melilotus spicatus (Sm.) Breistr.",1393818:"Mercurialis ambigua L.f.",1393823:"Mercurialis tomentosa L.",1393846:"Moehringia ciliata (Scop.) Dalla Torre",1393850:"Moehringia muscosa L.",1393851:"Moehringia pentandra J.Gay",1393933:"Narthecium ossifragum (L.) Huds.",1393945:"Neotinea lactea (Poir.) R.M.Bateman, Pridgeon & M.W.Chase",1393946:"Neotinea ustulata (L.) R.M.Bateman, Pridgeon & M.W.Chase",1393965:"Noccaea caerulescens (J.Presl & C.Presl) F.K.Mey.",1393967:"Noccaea montana (L.) F.K.Mey.",1393968:"Noccaea rotundifolia (L.) Moench",1393980:"Nymphaea candida C.Presl",1393981:"Nymphoides peltata (S.G.Gmel.) Kuntze",1394072:"Ophrys arachnitiformis Gren. & M.Philippe",1394073:"Ophrys aranifera Huds.",1394077:"Ophrys aveyronensis (J.J.Wood) P.Delforge",1394078:"Ophrys aymoninii (Breistr.) Buttler",1394082:"Ophrys bertolonii Moretti",1394088:"Ophrys catalaunica O.Danesch & E.Danesch",1394114:"Ophrys exaltata Ten.",1394120:"Ophrys fuciflora (F.W.Schmidt) Moench",1394128:"Ophrys incubacea Bianca",1394143:"Ophrys lupercalis Devillers & Devillers-Tersch.",1394153:"Ophrys morisii (Martelli) So",1394164:"Ophrys passionis Sennen",1394169:"Ophrys provincialis (Baumann & Knkele) Paulus",1394183:"Ophrys saratoi E.G.Camus",1394189:"Ophrys sulcata Devillers & Devillers-Tersch.",1394313:"Oreopteris limbosperma (Bellardi ex All.) Holub",1394378:"Anemone x hybrida Paxton",1394382:"Anemone alpina L.",1394383:"Pancratium illyricum L.",1394394:"Anemone apennina L.",1394396:"Anemone baldensis L.",1394399:"Papaver alpinum L.",1394401:"Papaver croceum Ledeb.",1394404:"Papaver orientale L.",1394405:"Papaver pseudoorientale (Fedde) Medw.",1394406:"Papaver rhaeticum Leresche",1394418:"Anemone halleri All.",1394420:"Anemone hepatica L.",1394453:"Pelargonium x hybridum (L.) Aiton",1394454:"Pelargonium inquinans (L.) Aiton",1394455:"Pelargonium peltatum (L.) Aiton",1394457:"Anemone montana Hoppe",1394460:"Anemone nemorosa L.",1394489:"Anemone pulsatilla L.",1394498:"Anemone rubra Lam.",1394502:"Phedimus stellatus (L.) Raf.",1394504:"Anemone sylvestris L.",1394508:"Anemone trifolia L.",1394513:"Anemone vernalis L.",1394549:"Angelica heterocarpa J.Lloyd",1394580:"Angelica razulii Gouan",1394591:"Angelica sylvestris L.",1394648:"Pleurospermum austriacum (L.) Hoffm.",1394714:"Sasa palmata (Burb.) Camus",1394759:"Anthericum ramosum L.",1394994:"Pyracantha coccinea M.Roem.",1394995:"Pyracantha rogersiana (A.B.Jacks.) Coltm.-Rog.",1395391:"Holodiscus discolor (Pursh) Maxim.",1395720:"Sagittaria graminea Michx.",1395721:"Sagittaria latifolia Willd.",1395722:"Sagittaria sagittifolia L.",1396133:"Diascia rigescens E.Mey. ex Benth.",1396134:"Diascia vigilis Hilliard & Burtt",1396143:"Sedum sarmentosum Bunge",1396144:"Sedum alpestre Vill.",1396145:"Sedum annuum L.",1396156:"Sedum kamtschaticum Fisch. & C.A.Mey.",1396159:"Sedum mexicanum Britton",1396161:"Sedum ochroleucum Chaix",1396165:"Sedum sexangulare L.",1396708:"Metasequoia glyptostroboides Hu & W.C.Cheng",1396713:"Telekia speciosa (Schreb.) Baumg.",1396754:"Thesium alpinum L.",1396758:"Thesium linophyllon L.",1396823:"Tradescantia x andersoniana F.Ludw. & Rohweder",1396824:"Tradescantia virginiana L.",1396842:"Trifolium alpestre L.",1396843:"Trifolium alpinum L.",1396858:"Trifolium pallescens Schreb.",1396867:"Trifolium spadiceum L.",1396869:"Trifolium thalii Vill.",1397208:"Viscaria alpina (L.) G.Don",1397209:"Viscaria vulgaris Bernh.",1397268:"Anemone hupehensis (Lemoine) Lemoine",1397269:"Anemone vitifolia Buch.-Ham. ex DC.",1397303:"Adenostyles alpina (L.) Bluff & Fingerh.",1397305:"Alcea biennis Winterl",1397311:"Anemone narcissiflora L.",1397312:"Anemone ranunculoides L.",1397313:"Angelica archangelica L.",1397349:"Chaerophyllum bulbosum L.",1397351:"Cirsium acaulon (L.) Scop.",1397352:"Cirsium spinosissimum (L.) Scop.",1397364:"Cymbalaria muralis P.Gaertn., B.Mey. & Scherb.",1397379:"Eritrichium nanum (L.) Schrad. ex Gaudin",1397387:"Fragaria viridis Weston",1397403:"Honckenya peploides (L.) Ehrh.",1397407:"Hypericum hyssopifolium Chaix",1397408:"Hypericum mutilum L.",1397420:"Lactuca perennis L.",1397491:"Sedum atratum L.",1397510:"Thesium pyrenaicum Pourr.",1397514:"Trifolium medium L.",1397515:"Trinia glauca (L.) Dumort.",1397550:"Sedum montanum Perrier & Songeon",1397551:"Trifolium badium Schreb.",1397556:"Freesia refracta (Jacq.) Eckl. ex Klatt",1397585:"Freesia alba (G.L.Mey.) Grumbleton",1397598:"Cobaea scandens Cav.",1397613:"Fragaria virginiana Duchesne",1397841:"Anemone pratensis L.",1397959:"Sagittaria lancifolia L.",1398041:"Neotinea tridentata (Scop.) R.M.Bateman, Pridgeon & M.W.Chase",1398111:"Adenostyles alliariae (Gouan) A.Kern.",1398125:"Ophrys pseudoscolopax (Moggr.) Paulus & Gack",1398128:"Sedum palmeri S.Watson",1398130:"Hypericum olympicum L.",1398178:"Tradescantia zebrina Bosse",1398196:"Dryopteris erythrosora (Eaton) Kuntze",1398274:"Adenostyles leucophylla (Willd.) Rchb.",1398326:"Calycanthus floridus L.",1398333:"Phyllanthus niruri L.",1398355:"Ophrys araneola sensu auct.plur.",1398444:"Anemone blanda Schott & Kotschy",1398447:"Aralia elata (Miq.) Seem.",1398469:"Ophrys virescens Philippe",1398480:"Clethra alnifolia L.",1398494:"Corispermum pallasii Steven",1398513:"Hypericum patulum Thunb.",1398515:"Hypericum x hidcoteense Hilling ex Geerinck",1398526:"Lupinus nootkatensis Donn ex Sims",1398567:"Smilax rotundifolia L.",1398592:"Perovskia atriplicifolia Benth.",1398608:"Nothofagus antarctica (G.Forst.) Oerst.",1398615:"Iva annua L.",1398700:"Dryopteris fragrans (L.) Schott",1398805:"Neotinea conica (Willd.) R.M.Bateman",1398830:"Tetraclinis articulata (Vahl) Mast.",1399063:"Alcea setosa (Boiss.) Alef.",1399141:"Chaerophyllum aromaticum L.",1399145:"Cucurbita moschata Duchesne",1399157:"Daphne sericea Vahl",1399231:"Lamium orvala L.",1399338:"Paederota bonarota (L.) L.",1399384:"Rhodothamnus chamaecistus (L.) Rchb.",1399667:"Ophrys lunulata Parl.",1399783:"Schefflera actinophylla Harms",1399803:"Astydamia latifolia Baill.",1399804:"Lavandula pinnata Moench",1399920:"Angelica atropurpurea L.",1400060:"Acacia pravissima F.Muell.",1400080:"Adonis pyrenaica DC.",1400081:"Adonis vernalis L.",1400096:"Barbarea rupicola Moris",1400100:"Barbarea vulgaris R.Br.",1400104:"Acacia baileyana F.Muell.",1400110:"Bellium bellidioides L.",1400471:"Bocoa prouacensis Aubl.",1400478:"Nephrolepis biserrata (Sw.) Schott",1400798:"Vanilla pompona Schiede",1400844:"Guatteria anteridifera Scharf & Maas",1401141:"Caraipa densifolia Mart.",1401148:"Caraipa punctulata Ducke",1401211:"Vismia cayennensis (Jacq.) Pers.",1401216:"Vismia macrophylla Kunth",1401222:"Vismia sessilifolia (Aubl.) Choisy",1401242:"Dryopteris wallichiana (Spreng.) Hyl.",1401701:"Xylopia frutescens Aubl.",1401711:"Xylopia nitida Dunal",1401718:"Xylopia sericea A.St.-Hil.",1401735:"Phyllanthus urinaria L.",1401736:"Pogonophora schomburgkiana Miers ex Benth.",1401737:"Sagotia racemosa Baill.",1401883:"Bonafousia undulata (Vahl) A.DC.",1402303:"Guarea gomma Pulle",1402356:"Nymphoides indica (L.) Kuntze",1402423:"Anthurium hookeri Kunth",1402433:"Anthurium jenmanii Engl.",1402464:"Anthurium scandens (Aubl.) Engl.",1402576:"Dracontium polyphyllum L.",1402811:"Crotalaria retusa L.",1402920:"Peperomia magnoliifolia (Jacq.) A.Dietr.",1402921:"Peperomia obtusifolia (L.) A.Dietr.",1402924:"Peperomia quadrangularis (J.V.Thomps.) A.Dietr.",1402925:"Peperomia rotundifolia (L.) Kunth",1402926:"Peperomia serpens (Sw.) Loudon",1403272:"Declieuxia fruticosa (Willd. ex Roem. & Schult.) Kuntze",1403479:"Mauritia flexuosa L.f.",1403654:"Urera baccifera (L.) Gaudich. ex Wedd.",1403826:"Pereskia bleo (Kunth) DC.",1403967:"Cereus hexagonus (L.) Mill.",1404002:"Xylopia crinita R.E.Fr.",1404481:"Vanilla planifolia Jacks.",1404745:"Aciotis rubricaulis (Mart. ex DC.) Triana",1404776:"Guatteria amplifolia Triana & Planch.",1404804:"Luffa cylindrica (L.) M.Roem.",1405061:"Cryptostegia madagascariensis Bojer ex Decne.",1405088:"Schefflera decaphylla (Seem.) Harms",1405252:"Aphelandra scabra (Vahl) Sm.",1405641:"Asystasia gangetica (L.) T.Anderson",1405653:"Piriqueta cistoides (L.) Griseb.",1405685:"Acalypha wilkesiana Mll.Arg.",1405686:"Breynia disticha J.R.Forst. & G.Forst.",1405703:"Crotalaria incana L.",1406426:"Crotalaria pallida Aiton",1406486:"Kigelia africana (Lam.) Benth.",1406756:"Guatteria citriodora Ducke",1406863:"Acalypha indica L.",1407077:"Guatteria punctata (Aubl.) R.A.Howard",1407379:"Anthurium crystallinum Linden & Andr",1407873:"Cryptopus elatus (Thouars) Lindl.",1407874:"Cryptostegia grandiflora R.Br.",1408034:"Eranthemum pulchellum Andrews",1408037:"Alocasia cucullata (Lour.) G.Don",1408041:"Alocasia longiloba Miq.",1408045:"Alocasia macrorrhizos (L.) G.Don",1408066:"Faujasia salicifolia (Pers.) C.Jeffrey",1408071:"Fernelia buxifolia Lam.",1408092:"Fragaria x ananassa Duchesne ex Rozier",1408107:"Geniostoma borbonicum (Lam.) Spreng.",1408160:"Hernandia mascarenensis (Meisn.) Kubitzki",1408214:"Hypericum lanceolatum Lam.",1408227:"Acacia auriculiformis A.Cunn. ex Benth.",1408284:"Leonitis nepetifolia (L.) R.Br.",1408386:"Mussaenda arcuata Poir.",1408401:"Nephrolepis abrupta (Bory) Mett.",1408421:"Acacia heterophylla (Lam.) Willd.",1408451:"Paederia foetida L.",1408468:"Pelargonium x asperum Ehrh. ex Willd.",1408490:"Pereskia grandifolia Haw.",1408502:"Antirhea borbonica J.F.Gmel.",1408507:"Phyllanthus emblica L.",1408508:"Phyllanthus niruroides Mll.Arg.",1408509:"Phyllanthus phillyreifolius Poir.",1408557:"Pongamia pinnata (L.) Pierre",1408594:"Acacia podalyriifolia A.Cunn. ex G.Don",1408657:"Schefflera actinophylla (F.Muell.) Harms",1408688:"Acalypha hispida Burm.f.",1408718:"Acalypha integrifolia Willd.",1408727:"Stemodia verticillata (Mill.) Hassl.",1408734:"Stoebe passerinoides (Lam.) Willd.",1408738:"Strongylodon macrobotrys A.Gray",1408774:"Tradescantia pallida (Rose) D.R.Hunt",1408788:"Trimezia martinicensis (Jacq.) Herb.",1408810:"Vangueria madagascariensis J.F.Gmel.",1408812:"Vepris lanceolata (Lam.) G.Don",1408845:"Zaleya pentandra (L.) C.Jeffrey",1408869:"Cereus repandus (L.) Mill.",1408874:"Bismarckia nobilis Hildebr. & H.Wendl.",1408953:"Acacia nilotica (L.) Delile",1408961:"Schefflera arboricola (Hayata) Merr.",1408979:"Fragaria chiloensis (L.) Mill.",1409185:"Aphelandra squarrosa Nees",1409191:"Gynura aurantiaca (Blume) Sch.Bip. ex DC.",1409195:"Pereskia aculeata Mill.",1409214:"Peperomia argyreia (Miq.) E.Morren",1409215:"Peperomia caperata Yunck.",1409216:"Peperomia obtusifolia (L.) A. Dietr.",1409238:"Anthurium andraeanum Linden ex Andr",1409239:"Anthurium scherzerianum Schott",1409283:"Zamia furfuracea L.f.",1409292:"Dendrobium nobile Lindl.",1409295:"Nandina domestica Thunb.",1409296:"Nymphaea nouchali Burm.f.",1409299:"Falcataria moluccana (Miq.) Barneby & J.W.Grimes",1409328:"Acacia tortuosa (L.) Willd.",1409407:"Bourreria succulenta Jacq.",1409521:"Crotalaria brevidens Benth.",1409525:"Crotalaria pumila Ortega",1409550:"Dendrobium chrysotoxum Lindl.",1409551:"Dendrobium crumenatum Sw.",1409552:"Dendrobium moschatum (Buch.-Ham.) Sw.",1409586:"Entada gigas (L.) Fawc. & Rendle",1409642:"Fittonia albivenis (Lindl. ex Veitch) R.K. Brummitt",1409705:"Illicium verum Hook.f.",1409746:"Lactuca floridana (L.) Gaertn.",1409824:"Mussaenda pubescens Dryand.",1409834:"Neolamarckia cadamba (Roxb.) Bosser",1409839:"Nymphaea ampla (Salisb.) DC.",1409918:"Phyllanthus epiphyllanthus L.",1409919:"Phyllanthus mimosoides Sw.",1409932:"Pilosocereus royeni (L.) Byles & G. Rowley",1410024:"Selenicereus anthonyanus (Alexander) D.Hunt",1410025:"Selenicereus grandiflorus (L.) Britton & Rose",1410147:"Zamia pumila L.",1410168:"Acalypha aristata Kunth",1411423:"Chamerion latifolium (L.) Holub",1411462:"Cirsium discolor (Muhl. ex Willd.) Spreng.",1411466:"Cirsium foliosum (Hook.) DC.",1411469:"Cirsium muticum Michx.",1411472:"Cirsium undulatum (Nutt.) Spreng.",1411520:"Comptonia peregrina (L.) J.M. Coult.",1411524:"Conoclinium coelestinum (L.) DC.",1411687:"Dalea purpurea Vent.",1411700:"Daucus pusillus Michx.",1411760:"Diervilla lonicera Mill.",1411827:"Dryopteris carthusiana (Vill.) H.P. Fuchs",1411829:"Dryopteris cristata (L.) A. Gray",1411832:"Dryopteris intermedia (Muhl. ex Willd.) A. Gray",1411833:"Dryopteris marginalis (L.) A. Gray",1411834:"Duchesnea indica (Andrews) Teschem.",1411925:"Epipactis gigantea Douglas ex Hook.",1412311:"Hypericum kalmianum L.",1412313:"Hypericum prolificum L.",1412314:"Hypericum punctatum Lam.",1412337:"Anemone canadensis L.",1412344:"Iva frutescens L.",1412368:"Anemone multifida Poir.",1412410:"Anemone virginiana L.",1412412:"Lactuca biennis (Moench) Fernald",1412413:"Lactuca canadensis L.",1412418:"Lamium maculatum L.",1412444:"Leersia virginica Willd.",1412445:"Angelica lucida L.",1412595:"Lupinus argenteus Pursh",1412596:"Lupinus bicolor Lindl.",1412659:"Maianthemum canadense Desf.",1412661:"Maianthemum racemosum (L.) Link",1412662:"Maianthemum stellatum (L.) Link",1412663:"Maianthemum trifolium (L.) Sloboda",1412697:"Mertensia maritima (L.) Gray",1412698:"Mertensia paniculata (Aiton) G. Don",1412699:"Mertensia virginica (L.) Pers. ex Link",1412740:"Mitella diphylla L.",1412745:"Moehringia lateriflora (L.) Fenzl",1412831:"Nymphaea mexicana Zucc.",1412833:"Nymphaea odorata Aiton",1412834:"Nymphaea tetragona Georgi",1412888:"Osmunda cinnamomea L.",1412889:"Osmunda claytoniana L.",1412946:"Papaver nudicaule L.",1412992:"Aralia hispida Vent.",1413002:"Aralia nudicaulis L.",1413013:"Aralia racemosa L.",1413391:"Pyracantha coccinea M. Roem.",1413751:"Sedum divergens S. Watson",1413752:"Sedum lanceolatum Torr.",1413753:"Sedum oreganum Nutt.",1413755:"Sedum spathulifolium Hook.",1413757:"Sedum ternatum Michx.",1413832:"Smilax herbacea L.",1413835:"Smilax tamnoides L.",1414057:"Tradescantia occidentalis (Britton) Smyth",1414058:"Tradescantia ohiensis Raf.",1414272:"Balsamorhiza sagittata (Pursh) Nutt.",1414275:"Barbarea orthoceras Ledeb.",1414276:"Barbarea vulgaris W.T. Aiton",1414397:"Calochortus macrocarpus Douglas",1414746:"Entada phaseoloides (L.) Merr.",1414808:"Cerbera manghas L.",1414903:"Hernandia cordigera Vieill.",1414924:"Acacia simplex (Sparman) Pedley",1415584:"Dubouzetia confusa Guillaumin & Virot",1415593:"Dubouzetia campanulata Pancher ex Brongn. & Gris",1415911:"Acacia spirorbis Labill.",1416420:"Atractocarpus platyxylon (Vieill. ex Pancher & Sebert) Guillaumin",1416509:"Nepenthes vieillardii Hook. f.",1417117:"Dendrobium closterium Rchb.f.",1417506:"Dracophyllum verticillatum Labill.",1417546:"Schefflera spp.",1417900:"Tagetes lucida Cav.",1417916:"Anisocampium niponicum (Mett.) Y.C.Liu, W.L. Chiou & M. Kato",1418033:"Mertensia ciliata (James ex Torr.) G. Don",1418061:"Lithops fulviceps N.E.Br.",1418084:"Lithops karasmontana N.E.Br.",1418102:"Lithops marmorata N.E.Br.",1418140:"Lithops pseudotruncatella N.E.Br.",1418146:"Fittonia albivenis (Lindl. ex Veitch) Brummitt",1418191:"Lithops spp.",1418192:"Cereus hildmannianus K.Schum.",1418295:"Neobuxbaumia polylopha (DC.) Backeb.",1418345:"Calycanthus occidentalis Hook. & Arn.",1418475:"Tradescantia subaspera Ker Gawl.",1418545:"Sedum kamtschaticum Fisch.",1418546:"Sedum lineare Thunb.",1418547:"Sedum morganianum E.Walther",1418563:"Cucurbita foetidissima Kunth",1418576:"Eucryphia cordifolia Cav.",1418653:"Dryopteris cycadina (Franch. & Sav.) C. Chr.",1418655:"Dryopteris erythrosora (D.C. Eaton) Kuntze",1418659:"Dryopteris sieboldii (T. Moore) Kuntze",1418665:"Rumohra adiantiformis (G. Forst.) Ching",1418732:"Oxydendrum arboreum (L.) DC.",1418984:"Lupinus albifrons Benth.",1419077:"Lycoris radiata (L'Hr.) Herb.",1419086:"Garrya elliptica Douglas ex Lindl.",1419091:"Lycoris squamigera Maxim.",1419112:"Pelargonium crispum (P.J. Bergius) L'Hr.",1419115:"Pelargonium x hortorum L.H. Bailey",1419173:"Loropetalum chinense (R. Br.) Oliv.",1419197:"Hypericum frondosum Michx.",1419334:"Liriope muscari (Decne.) L.H.Bailey",1419352:"Limnanthes douglasii R. Br.",1419595:"Nothofagus alpina (Poepp. & Endl.) Oerst.",1419598:"Nothofagus pumilio (Poepp. & Endl.) Krasser",1419612:"Abeliophyllum distichum Nakai",1419713:"Dendrobium aphyllum (Roxb.) C.E.C.Fisch.",1419720:"Dendrobium spp.",1419807:"Vanilla planifolia Jacks. ex Andrews",1419864:"Heteromorpha arborescens (Spreng.) Cham. & Schltdl.",1419874:"Lapageria rosea Ruiz & Pav.",1419923:"Peperomia argyreia (Hook.f.) E.Morren",1419924:"Peperomia dolabriformis Kunth",1419942:"Hebe franciscana (Eastw.) Souster",1419949:"Maurandya barclayana Lindl.",1420092:"Sasa palmata (Burb.) E.G.Camus",1420288:"Anemone patens L.",1420364:"Fragaria virginiana Mill.",1420365:"Fragaria x ananassa (Duchesne ex Weston) Duchesne ex Rozier",1420496:"Mussaenda philippica A.Rich.",1420544:"Limonia acidissima Groff",1420653:"Illicium floridanum J. Ellis",1420700:"Browallia speciosa Hook.",1420767:"Alocasia cuprea K.Koch",1420781:"Alocasia micholitziana Sander",1420787:"Alocasia odora (Lindl.) K.Koch",1420792:"Daphne odora Thunb.",1420795:"Alocasia sanderiana W.Bull",1420796:"Daphne tangutica Maxim.",1420863:"Kniphofia uvaria (L.) Oken",1420896:"Zamia furfuracea L.f. ex Aiton",1420929:"Guaiacum sanctum L.",1420931:"Nepenthes spp.",1421001:"Pelargonium spp.",1421011:"Pancratium maritimum L. L.",1421021:"Sedum palmeri S. Watson",1421026:"Aphelandra sinclairiana Nees",1421107:"Alocasia macrorrhizos (L.) G. Don",1421386:"Acacia confusa Merr.",1421523:"Acacia koaia Hillebr.",1421628:"Nephrolepis falcata (Cav.) C. Chr.",1422105:"Tradescantia zebrina hort. ex Bosse",1422636:"Calodendrum capense (L.f.) Thunb.",1422712:"Pelargonium grandiflorum Willd.",1422721:"Hypericum revolutum Vahl",1423286:"Schkuhria pinnata (Lam.) Kuntze ex Thell.",1423469:"Maytenus boaria Molina",1423633:"Melampodium perfoliatum (Cav.) Kunth",1423932:"Hernandia nymphaeifolia (J.Presl) Kubitzki",1424003:"Mazus pumilus (Burm.f.) Steenis",1424005:"Melampodium divaricatum (Rich.) DC.",1424377:"Breynia vitis-idaea (Burm.f.) C.E.C.Fisch.",1425433:"Prosopis farcta (Banks & Sol.) J.F.Macbr.",1425899:"Acacia farnesiana Willd.",1427043:"Freycinetia cumingiana Gaudich.",1427659:"Crotalaria laburnifolia L.",1427821:"Dalbergia sissoo DC.",1428059:"Dischidia nummularia R.Br.",1430280:"Schefflera heptaphylla (L.) Frodin",1430287:"Schinopsis balansae Engl.",1430515:"Smilax china L.",1431222:"Barringtonia acutangula (L.) Gaertn.",1431925:"Maerua triphylla A. Rich.",1432545:"Asystasia mysorensis (Roth) T.Anderson",1432783:"Lactuca virosa Habl.",1432786:"Calendula arvensis M.Bieb.",1432824:"Herbertia lahue (Molina) Goldblatt",1433158:"Hypericum hypericoides (L.) Crantz",1433176:"Hypericum tetrapetalum Lam.",1433496:"Keckiella cordifolia (Benth.) Straw",1434011:"Liriope muscari (Decne.) L.H. Bailey",1434232:"Lupinus chamissonis Eschsch.",1434249:"Lupinus diffusus Nutt.",1434258:"Lupinus formosus Greene",1434267:"Lupinus hirsutissimus Benth.",1434320:"Lupinus subcarnosus Hook.",1434326:"Lupinus texensis Hook.",1434383:"Lyonothamnus floribundus A. Gray",1434584:"Mazus pumilus (Burm. f.) Steenis",1434594:"Melampodium leucanthum Torr. & A. Gray",1434712:"Metasequoia glyptostroboides Hu & W.C. Cheng",1435225:"Aralia californica S. Watson",1435228:"Nyctaginia capitata Choisy",1435260:"Aralia spinosa L.",1435709:"Pelargonium panduriforme Eckl. & Zeyh.",1435714:"Pelargonium zonale (L.) L'Hr. ex Aiton",1436922:"Prosopis glandulosa Torr.",1436923:"Prosopis pubescens Benth.",1437724:"Sagittaria montevidensis Cham. & Schltdl.",1438033:"Sedum albomarginatum R.T. Clausen",1438041:"Sedum glaucophyllum R.T. Clausen",1438043:"Sedum laxum (Britton) A. Berger",1438045:"Sedum moranense Kunth",1438049:"Sedum niveum Davidson",1438052:"Sedum obtusatum A. Gray",1438056:"Sedum pulchellum Michx.",1438352:"Smilax bona-nox L.",1438354:"Smilax glauca Walter",1438358:"Smilax laurifolia L.",1438616:"Stanleya pinnata (Pursh) Britton",1438868:"Tagetes lemmonii A. Gray",1439145:"Tradescantia crassifolia Cav.",1439703:"Xylococcus bicolor Nutt.",1440273:"Brodiaea elegans Hoover",1440412:"Calochortus eurycarpus S. Watson",1440416:"Calochortus gunnisonii S. Watson",1440423:"Calochortus leichtlinii Hook. f.",1440425:"Calochortus luteus Douglas ex Lindl.",1440440:"Calochortus splendens Douglas ex Benth.",1440446:"Calochortus tolmiei Hook. & Arn.",1440476:"Calylophus hartwegii (Benth.) P.H. Raven",1441099:"Chaerophyllum tainturieri Hook.",1441349:"Cirsium altissimum (L.) Hill",1441375:"Cirsium horridulum Michx.",1441410:"Cirsium texanum Buckley",1442541:"Diervilla sessilifolia Buckley",1442833:"Acacia berlandieri Benth.",1442865:"Elephantopus elatus Bertol.",1442930:"Alocasia cucullata (Lour.) G. Don",1444049:"Acacia redolens Maslin",1444156:"Acacia rigidula Benth.",1444195:"Hackelia velutina (Piper) I.M. Johnst.",1444216:"Haplophyton crooksii (L.D. Benson) L.D. Benson",1447962:"Aextoxicon punctatum Ruiz & Pav.",1449139:"Lithops aucampiae L. Bolus",1449149:"Lithops olivacea L. Bolus",1453004:"Cyrtanthus elatus (Jacq.) Traub",1455408:"Guatteria aeruginosa Standl.",1460343:"Dischidia ovata Benth.",1463177:"Trachelospermum asiaticum (Siebold & Zucc.) Nakai",1464023:"Alocasia baginda Kurniawan & P.C.Boyce",1464054:"Alocasia lauterbachiana (Engl.) A.Hay",1464075:"Alocasia reginula A.Hay",1464086:"Alocasia wentii Engl. & K.Krause",1464088:"Alocasia zebrina Schott ex Van Houtte",1464459:"Anthurium clarinervium Matuda",1464567:"Anthurium faustomirandae Prez-Farr. & Croat",1465016:"Anthurium salvinii Hemsl.",1465026:"Anthurium schlechtendalii Kunth",1465149:"Anthurium veitchii Mast.",1465170:"Anthurium warocqueanum T.Moore",1470435:"Wodyetia bifurcata A.K.Irvine",1486475:"Cereus forbesii C.F.Frst.",1486501:"Cereus uruguayanus R. Kiesling",1486655:"Coryphantha elephantidens (Lem.) Lem.",1488001:"Pilosocereus chrysostele (Vaupel) Byles & G.D.Rowley",1488026:"Pilosocereus pachycladus F. Ritter",1488171:"Selenicereus anthonyanus (Alexander) D.R. Hunt",1488206:"Stenocactus multicostatus (Hildm.) A. Berger ex A.W. Hill",1488285:"Tephrocactus geometricus (A. Cast.) Backeb.",1491513:"Pterocephalus perennis Coult.",1494482:"Maytenus ilicifolia Mart. ex Reissek",1497434:"Cyanotis somaliensis C.B.Clarke",1497630:"Tradescantia  andersoniana W.Ludw. & Rohweder",1497667:"Tradescantia sillamontana Matuda",1503981:"Cirsium palustre (L.) Coss. ex Scop.",1506976:"Erechtites minima (Poir.) DC.",1513142:"Lactuca alpina (L.) A.Gray",1513780:"Leptinella potentillina F.Muell.",1514035:"Leucophyta brownii Cass.",1514627:"Melampodium divaricatum (Rich. ex Rich.) DC.",1516297:"Othonna capensis L.H.Bailey",1518683:"Rhodanthe chlorocephala (Turcz.) Paul G.Wilson",1522375:"Tagetes lemmonii A.Gray",1522377:"Tagetes lunulata Ortega",1529081:"Sedum adolphii Raym.-Hamet",1529084:"Sedum allantoides Rose",1529107:"Sedum burrito Moran",1529124:"Sedum clavatum R.T. Clausen",1529128:"Sedum compressum Rose",1529144:"Sedum cyaneum J. Rudolph",1529148:"Sedum decumbens R.T. Clausen",1529179:"Sedum furfuraceum Moran",1529205:"Sedum hernandezii J. Meyrn",1529212:"Sedum japonicum Siebold ex Miq.",1529242:"Sedum makinoi Maxim.",1529265:"Sedum nussbaumerianum Bitter",1529305:"Sedum praealtum A.DC.",1529328:"Sedum rubrotinctum R.T. Clausen",1535203:"Uncinia rubra Colenso ex Boott",1538569:"Empetrum rubrum Vahl ex Willd.",1542499:"Acalypha macrostachya Jacq.",1550658:"Pelargonium echinatum Curtis",1550692:"Pelargonium  hortorum L.H. Bailey",1550785:"Pelargonium sidoides DC.",1550799:"Pelargonium tomentosum Jacq.",1560405:"Lavandula canariensis (L.) Mill.",1567995:"Acacia auriculiformis Benth.",1568056:"Acacia brevispica Harms",1568102:"Acacia caven (Molina) Molina",1568134:"Acacia cognata Domin",1568144:"Acacia confluens Maiden & Blakeley",1568799:"Acacia podalyriifolia G.Don",1568914:"Acacia saligna (Labill.) Wendl.",1576296:"Dalbergia retusa Hemsl.",1580985:"Lupinus nootkatensis Sims",1584568:"Prosopis pallida (Willd.) Kunth",1600531:"Cedrela fissilis Vell.",1608001:"Nepenthes mirabilis (Lour.) Druce",1608003:"Nepenthes  neglecta Macfarl.",1608023:"Nothofagus betuloides (Mirb.) Oerst.",1608027:"Nothofagus dombeyi (Mirb.) Oerst.",1608034:"Nothofagus nitida (Phil.) Krasser",1608440:"Nymphaea rubra Roxb. ex Andrews",1617292:"Dendrobium anosmum Lindl.",1617904:"Dendrobium kingianum Bidwill ex Lindl.",1618100:"Dendrobium munificum (Finet) Schltr.",1618570:"Dendrobium thyrsiflorum B.S.Williams",1618661:"Dendrobium victoriae-reginae Loher",1621823:"Erycina pusilla (L.) N.H.Williams & M.W.Chase",1638998:"Adlumia fungosa (Aiton) Britton, Sterns & Poggenb.",1643184:"Peperomia albovittata C. DC.",1643341:"Peperomia clusiifolia (Jacq.) Hook.",1643349:"Peperomia columella Rauh & Hutchison",1643491:"Peperomia ferreyrae Yunck.",1643553:"Peperomia graveolens Rauh & Barthlott",1643690:"Peperomia maculosa (L.) Hook.",1643819:"Peperomia pecuniifolia Trel. & Standl.",1643866:"Peperomia polybotrya Kunth",1643887:"Peperomia prostrata B.S. Williams",1644145:"Peperomia tetragona Ruiz & Pav.",1644223:"Peperomia verticillata (L.) A.Dietr.",1646149:"Hebe andersonii (Lindl. & J. Paxton) Cockayne",1662426:"Lomatia ferruginea R. Br.",1663341:"Anemone pavoniana Boiss.",1663381:"Anemone tomentosa (Maxim.) C.Pei",1664348:"Hepatica nobilis Mill.",1667445:"Fragaria  ananassa (Duchesne ex Weston) Duchesne ex Rozier",1675513:"Margaritopsis haematocarpa (Standl.) C.M.Taylor",1682159:"Angostura granulosa (Kallunki) Kallunki",1689963:"Smilax excelsa L.",1694631:"Coussapoa villosa Poepp. & Endl.",1697960:"Cyphostemma cyphopetalum (Fresen.) Desc. ex Wild & R.B.Drumm.",1697991:"Cyphostemma juttae (Dinter & Gilg) Desc.",1698065:"Cyphostemma serpens (Hochst. ex A.Rich.) Desc.",1711751:"Nepenthes alata Blanco",1711753:"Nepenthes truncata Macfarl.",1711775:"Lavandula spp.",1711787:"Cymbalaria muralis P.Gaertn.",1711873:"Aphelandra aurantiaca Lindl.",1712003:"Guatteria dolichopoda Donn. Sm.",1712019:"Stenanona costaricensis R.E. Fr.",1712365:"Schefflera morototoni (Aubl.) Maguire",1713198:"Bourreria andrieuxii (DC.) Hemsl.",1713199:"Bourreria costaricensis (Standl.) A.H. Gentry",1717570:"Alibertia edulis (Rich.) A. Rich.",1718287:"Acacia senegalensis (Houtt.) Roberty"};function imageDataToTensor(e,t){var a=e.data;const[i,u,n,o]=new Array(new Array,new Array,new Array,new Array);for(let h=0;h<a.length;h+=4)i.push(a[h]),u.push(a[h+1]),n.push(a[h+2]),o.push(1);for(let h=0;h<i.length;h++){let d=i[h];d/=255,d-=.485,d/=.229,i[h]=d}for(let h=0;h<u.length;h++){let d=u[h];d/=255,d-=.456,d/=.224,u[h]=d}for(let h=0;h<n.length;h++){let d=n[h];d/=255,d-=.406,d/=.225,n[h]=d}console.log(i);const c=i.concat(u).concat(n);let p,r=c.length;const l=new Float32Array(t[1]*t[2]*t[3]);for(p=0;p<r;p++)l[p]=c[p];return console.log(l),[new Me("float32",l,t),o]}function argmax(e){let t=0,a=-9999999;for(let i=0;i<e.length;i++)e[i]>a&&(a=e[i],t=i);return console.log(a),t}async function main(){Z.wasm.wasmPaths="wasm/";const e=await Pd.create("plantnet-18.onnx");var t=document.getElementById("input-canvas"),a=t.getContext("2d"),i=document.getElementById("input-img");a.drawImage(i,0,0,437,437,0,0,224,224);let u=a.getImageData(0,0,224,224);console.log(u);let[n,o]=imageDataToTensor(u,[1,3,224,224]),c=Array.from(n.data).concat(o);for(let d=0;d<c.length;d++)c[d]*=255;console.log(Uint8ClampedArray.from(c));let p=new ImageData(Uint8ClampedArray.from(c),224,224);a==null||a.putImageData(p,0,0),console.log(n);const r={pixels:n},l=await e.run(r);console.log(l);const s=l.class_idx.data;console.log(`data of result tensor 'c': ${argmax(s)}...`);let h=class_to_idx[argmax(s)];return console.log(id_to_species[h]),id_to_species[h]}function create_fragment$1(e){let t,a,i,u;const n=e[3].default,o=create_slot(n,e,e[2],null);return{c(){t=element("button"),o&&o.c(),this.h()},l(c){t=claim_element(c,"BUTTON",{class:!0});var p=children(t);o&&o.l(p),p.forEach(detach),this.h()},h(){attr(t,"class","lined thick w-full border-green-400 text-4xl sm:text-xl m-0 py-1 svelte-1doq2hy"),toggle_class(t,"animate-pulse",e[1]),toggle_class(t,"primary",e[0]=="primary")},m(c,p){insert_hydration(c,t,p),o&&o.m(t,null),a=!0,i||(u=[listen(t,"click",e[4]),listen(t,"mouseover",e[5]),listen(t,"mouseenter",e[6]),listen(t,"mouseleave",e[7]),listen(t,"focus",e[8])],i=!0)},p(c,[p]){o&&o.p&&(!a||p&4)&&update_slot_base(o,n,c,c[2],a?get_slot_changes(n,c[2],p,null):get_all_dirty_from_scope(c[2]),null),(!a||p&2)&&toggle_class(t,"animate-pulse",c[1]),(!a||p&1)&&toggle_class(t,"primary",c[0]=="primary")},i(c){a||(transition_in(o,c),a=!0)},o(c){transition_out(o,c),a=!1},d(c){c&&detach(t),o&&o.d(c),i=!1,run_all(u)}}}function instance$1(e,t,a){let{$$slots:i={},$$scope:u}=t,{type:n="secondary"}=t,{loading:o=!1}=t;function c(h){bubble.call(this,e,h)}function p(h){bubble.call(this,e,h)}function r(h){bubble.call(this,e,h)}function l(h){bubble.call(this,e,h)}function s(h){bubble.call(this,e,h)}return e.$$set=h=>{"type"in h&&a(0,n=h.type),"loading"in h&&a(1,o=h.loading),"$$scope"in h&&a(2,u=h.$$scope)},[n,o,u,i,c,p,r,l,s]}class Button extends SvelteComponent{constructor(t){super(),init(this,t,instance$1,create_fragment$1,safe_not_equal,{type:0,loading:1})}}const circle_svg=""+new URL("../assets/circle.DmmQF47_.svg",import.meta.url).href,back_svg=""+new URL("../assets/back.CLKGthFs.svg",import.meta.url).href,camera_svg=""+new URL("../assets/camera.CEYs9A3T.svg",import.meta.url).href,flip_svg=""+new URL("../assets/flip.CCeEKhN1.svg",import.meta.url).href,magnifying_svg=""+new URL("../assets/magnifying-glass.DXWU6kUc.svg",import.meta.url).href,shuffle_svg=""+new URL("../assets/shuffle.C0OyG-h2.svg",import.meta.url).href,snap_mp3=""+new URL("../assets/snap.DUnP3PkQ.mp3",import.meta.url).href,{document:document_1}=globals;function create_default_slot_4(e){let t,a=`<img src="${shuffle_svg}" class="h-10 sm:h-6 inline pr-4" alt=""/>Change image`;return{c(){t=element("span"),t.innerHTML=a},l(i){t=claim_element(i,"SPAN",{"data-svelte-h":!0}),get_svelte_dataset(t)!=="svelte-19b4xx6"&&(t.innerHTML=a)},m(i,u){insert_hydration(i,t,u)},p:noop,d(i){i&&detach(t)}}}function create_default_slot_3(e){let t,a=`<img src="${camera_svg}" class="h-10 sm:h-6 inline pr-4" alt=""/>Use camera`;return{c(){t=element("span"),t.innerHTML=a},l(i){t=claim_element(i,"SPAN",{"data-svelte-h":!0}),get_svelte_dataset(t)!=="svelte-1xjuipd"&&(t.innerHTML=a)},m(i,u){insert_hydration(i,t,u)},p:noop,d(i){i&&detach(t)}}}function create_default_slot_2(e){let t,a=`<img src="${magnifying_svg}" class="h-10 sm:h-6 inline pr-4" alt=""/>Identify`;return{c(){t=element("span"),t.innerHTML=a},l(i){t=claim_element(i,"SPAN",{"data-svelte-h":!0}),get_svelte_dataset(t)!=="svelte-1fg7p4h"&&(t.innerHTML=a)},m(i,u){insert_hydration(i,t,u)},p:noop,d(i){i&&detach(t)}}}function create_default_slot_1(e){let t,a="Go to Wikipedia";return{c(){t=element("span"),t.textContent=a},l(i){t=claim_element(i,"SPAN",{"data-svelte-h":!0}),get_svelte_dataset(t)!=="svelte-gyz1j2"&&(t.textContent=a)},m(i,u){insert_hydration(i,t,u)},p:noop,d(i){i&&detach(t)}}}function create_default_slot(e){let t,a=`<img src="${back_svg}" class="h-8 sm:h-6 inline pr-2" alt=""/>Search again`;return{c(){t=element("span"),t.innerHTML=a},l(i){t=claim_element(i,"SPAN",{"data-svelte-h":!0}),get_svelte_dataset(t)!=="svelte-xlri8c"&&(t.innerHTML=a)},m(i,u){insert_hydration(i,t,u)},p:noop,d(i){i&&detach(t)}}}function create_fragment(e){let t,a,i,u,n='<track kind="captions"/>',o,c,p,r,l,s,h,d,m,b,v,O,T,E="",$,C,P,G,te,xe,K,j,ie,He,pe,he,W=`<img src="${back_svg}" alt=""/>`,ge,Ce,Ne=`<img src="${circle_svg}" alt=""/>`,Ge,se,Ie,qe,at,yt,Ve,ot,Re,ke,je,Te,Se,_t,xt;return P=new Button({props:{$$slots:{default:[create_default_slot_4]},$$scope:{ctx:e}}}),P.$on("click",e[9]),te=new Button({props:{$$slots:{default:[create_default_slot_3]},$$scope:{ctx:e}}}),te.$on("click",e[6]),K=new Button({props:{type:"primary",loading:e[5],$$slots:{default:[create_default_slot_2]},$$scope:{ctx:e}}}),K.$on("click",e[10]),ke=new Button({props:{$$slots:{default:[create_default_slot_1]},$$scope:{ctx:e}}}),ke.$on("click",e[8]),Te=new Button({props:{$$slots:{default:[create_default_slot]},$$scope:{ctx:e}}}),Te.$on("click",e[11]),{c(){t=element("meta"),a=space(),i=element("section"),u=element("video"),u.innerHTML=n,o=space(),c=element("canvas"),p=space(),r=element("audio"),s=space(),h=element("img"),m=space(),b=element("p"),v=text(e[1]),O=space(),T=element("p"),T.innerHTML=E,$=space(),C=element("div"),create_component(P.$$.fragment),G=space(),create_component(te.$$.fragment),xe=space(),create_component(K.$$.fragment),j=space(),ie=element("canvas"),He=space(),pe=element("div"),he=element("button"),he.innerHTML=W,ge=space(),Ce=element("button"),Ce.innerHTML=Ne,Ge=space(),se=element("button"),Ie=element("img"),yt=space(),Ve=element("canvas"),ot=space(),Re=element("div"),create_component(ke.$$.fragment),je=space(),create_component(Te.$$.fragment),this.h()},l(J){const ue=head_selector("svelte-v38tx7",document_1.head);t=claim_element(ue,"META",{name:!0,content:!0}),ue.forEach(detach),a=claim_space(J),i=claim_element(J,"SECTION",{class:!0});var de=children(i);u=claim_element(de,"VIDEO",{class:!0,id:!0,width:!0,height:!0,"data-svelte-h":!0}),get_svelte_dataset(u)!=="svelte-10cq5ga"&&(u.innerHTML=n),o=claim_space(de),c=claim_element(de,"CANVAS",{id:!0,class:!0}),children(c).forEach(detach),p=claim_space(de),r=claim_element(de,"AUDIO",{id:!0,src:!0,preload:!0}),children(r).forEach(detach),s=claim_space(de),h=claim_element(de,"IMG",{src:!0,id:!0,alt:!0,class:!0}),m=claim_space(de),b=claim_element(de,"P",{class:!0});var st=children(b);v=claim_text(st,e[1]),st.forEach(detach),O=claim_space(de),T=claim_element(de,"P",{class:!0,id:!0,"data-svelte-h":!0}),get_svelte_dataset(T)!=="svelte-18syj8w"&&(T.innerHTML=E),$=claim_space(de),C=claim_element(de,"DIV",{id:!0,class:!0});var Ye=children(C);claim_component(P.$$.fragment,Ye),G=claim_space(Ye),claim_component(te.$$.fragment,Ye),xe=claim_space(Ye),claim_component(K.$$.fragment,Ye),j=claim_space(Ye),ie=claim_element(Ye,"CANVAS",{id:!0,width:!0,height:!0,class:!0}),children(ie).forEach(detach),Ye.forEach(detach),He=claim_space(de),pe=claim_element(de,"DIV",{id:!0,class:!0});var Ke=children(pe);he=claim_element(Ke,"BUTTON",{class:!0,"data-svelte-h":!0}),get_svelte_dataset(he)!=="svelte-1bty4r1"&&(he.innerHTML=W),ge=claim_space(Ke),Ce=claim_element(Ke,"BUTTON",{class:!0,"data-svelte-h":!0}),get_svelte_dataset(Ce)!=="svelte-128lds0"&&(Ce.innerHTML=Ne),Ge=claim_space(Ke),se=claim_element(Ke,"BUTTON",{class:!0});var Tt=children(se);Ie=claim_element(Tt,"IMG",{src:!0,alt:!0}),Tt.forEach(detach),yt=claim_space(Ke),Ve=claim_element(Ke,"CANVAS",{id:!0,width:!0,height:!0,class:!0}),children(Ve).forEach(detach),Ke.forEach(detach),ot=claim_space(de),Re=claim_element(de,"DIV",{id:!0,class:!0});var pt=children(Re);claim_component(ke.$$.fragment,pt),je=claim_space(pt),claim_component(Te.$$.fragment,pt),pt.forEach(detach),de.forEach(detach),this.h()},h(){document_1.title="Druid Plant ID",attr(t,"name","description"),attr(t,"content","Plant identification tool that runs on device"),attr(u,"class","rounded-xl"),attr(u,"id","webcam"),u.autoplay=!0,u.playsInline=!0,attr(u,"width","640"),attr(u,"height","640"),toggle_class(u,"hidden",!e[3]),attr(c,"id","canvas"),attr(c,"class","hidden"),attr(r,"id","snapSound"),src_url_equal(r.src,l=snap_mp3)||attr(r,"src",l),attr(r,"preload","auto"),src_url_equal(h.src,d=e[0])||attr(h,"src",d),attr(h,"id","input-img"),attr(h,"alt","Network input"),attr(h,"class","rounded-xl svelte-1tdrwgp"),toggle_class(h,"hidden",e[3]),attr(b,"class","text-2xl italic font-semibold text-center"),toggle_class(b,"hidden",e[3]),attr(T,"class","text-md"),attr(T,"id","species-desc"),toggle_class(T,"hidden",!e[4]),attr(ie,"id","input-canvas"),attr(ie,"width","224"),attr(ie,"height","224"),attr(ie,"class","hidden svelte-1tdrwgp"),attr(C,"id","button-group"),attr(C,"class","absolute sm:relative bottom-0 w-full flex flex-col items-center py-1 px-4"),toggle_class(C,"hidden",e[3]||e[4]),attr(he,"class","w-16 h-16"),attr(Ce,"class","w-16 h-16"),src_url_equal(Ie.src,qe=flip_svg)||attr(Ie,"src",qe),attr(Ie,"alt",""),attr(se,"class","w-16 h-16"),se.disabled=at=!e[2],toggle_class(se,"opacity-30",!e[2]),attr(Ve,"id","input-canvas"),attr(Ve,"width","224"),attr(Ve,"height","224"),attr(Ve,"class","hidden svelte-1tdrwgp"),attr(pe,"id","button-group"),attr(pe,"class","absolute bottom-0 w-full max-w-[45vh] flex flex-row items-center place-content-around py-4 px-auto"),toggle_class(pe,"hidden",!e[3]),attr(Re,"id","button-group"),attr(Re,"class","absolute bottom-0 w-full max-w-[45vh] flex flex-col items-center place-content-around py-4 px-auto"),toggle_class(Re,"hidden",!e[4]),attr(i,"class","svelte-1tdrwgp")},m(J,ue){append_hydration(document_1.head,t),insert_hydration(J,a,ue),insert_hydration(J,i,ue),append_hydration(i,u),append_hydration(i,o),append_hydration(i,c),append_hydration(i,p),append_hydration(i,r),append_hydration(i,s),append_hydration(i,h),append_hydration(i,m),append_hydration(i,b),append_hydration(b,v),append_hydration(i,O),append_hydration(i,T),append_hydration(i,$),append_hydration(i,C),mount_component(P,C,null),append_hydration(C,G),mount_component(te,C,null),append_hydration(C,xe),mount_component(K,C,null),append_hydration(C,j),append_hydration(C,ie),append_hydration(i,He),append_hydration(i,pe),append_hydration(pe,he),append_hydration(pe,ge),append_hydration(pe,Ce),append_hydration(pe,Ge),append_hydration(pe,se),append_hydration(se,Ie),append_hydration(pe,yt),append_hydration(pe,Ve),append_hydration(i,ot),append_hydration(i,Re),mount_component(ke,Re,null),append_hydration(Re,je),mount_component(Te,Re,null),Se=!0,_t||(xt=[listen(he,"click",e[7]),listen(Ce,"click",e[12]),listen(se,"click",e[13])],_t=!0)},p(J,[ue]){(!Se||ue&8)&&toggle_class(u,"hidden",!J[3]),(!Se||ue&1&&!src_url_equal(h.src,d=J[0]))&&attr(h,"src",d),(!Se||ue&8)&&toggle_class(h,"hidden",J[3]),(!Se||ue&2)&&set_data(v,J[1]),(!Se||ue&8)&&toggle_class(b,"hidden",J[3]),(!Se||ue&16)&&toggle_class(T,"hidden",!J[4]);const de={};ue&262144&&(de.$$scope={dirty:ue,ctx:J}),P.$set(de);const st={};ue&262144&&(st.$$scope={dirty:ue,ctx:J}),te.$set(st);const Ye={};ue&32&&(Ye.loading=J[5]),ue&262144&&(Ye.$$scope={dirty:ue,ctx:J}),K.$set(Ye),(!Se||ue&24)&&toggle_class(C,"hidden",J[3]||J[4]),(!Se||ue&4&&at!==(at=!J[2]))&&(se.disabled=at),(!Se||ue&4)&&toggle_class(se,"opacity-30",!J[2]),(!Se||ue&8)&&toggle_class(pe,"hidden",!J[3]);const Ke={};ue&262144&&(Ke.$$scope={dirty:ue,ctx:J}),ke.$set(Ke);const Tt={};ue&262144&&(Tt.$$scope={dirty:ue,ctx:J}),Te.$set(Tt),(!Se||ue&16)&&toggle_class(Re,"hidden",!J[4])},i(J){Se||(transition_in(P.$$.fragment,J),transition_in(te.$$.fragment,J),transition_in(K.$$.fragment,J),transition_in(ke.$$.fragment,J),transition_in(Te.$$.fragment,J),Se=!0)},o(J){transition_out(P.$$.fragment,J),transition_out(te.$$.fragment,J),transition_out(K.$$.fragment,J),transition_out(ke.$$.fragment,J),transition_out(Te.$$.fragment,J),Se=!1},d(J){J&&(detach(a),detach(i)),detach(t),destroy_component(P),destroy_component(te),destroy_component(K),destroy_component(ke),destroy_component(Te),_t=!1,run_all(xt)}}}async function searchWikipedia(e){const t=`https://en.wikipedia.org/w/api.php?action=query&list=search&prop=info&inprop=url&utf8=&format=json&origin=*&srlimit=20&srsearch=${e}`,a=await fetch(t);if(!a.ok)throw Error(a.statusText);return await a.json()}function dataURItoBlob(e){for(var t=atob(e.split(",")[1]),a=e.split(",")[0].split(":")[1].split(";")[0],i=new ArrayBuffer(t.length),u=new Uint8Array(i),n=0;n<t.length;n++)u[n]=t.charCodeAt(n);var o=new Blob([i],{type:a});return o}function instance(e,t,a){let i=["1391963","1355990","1357652","1358105","1359483","1363021","1364165","1385937","1391963","1397613","1497667"],u="",n="Mystery plant",o=!1,c=!1,p=!1,r=0,l=!1,s;function h(){const $=document.getElementById("webcam"),C=document.getElementById("canvas"),P=document.getElementById("snapSound");s=new Webcam($,"user",C,P),a(3,c=!0),s.start().then(G=>{console.log("webcam started")}).catch(G=>{console.log(G)}),a(2,o=s.webcamList.length>1)}function d(){a(3,c=!1),s.stop()}onMount(()=>{b(),h()});function m(){window.location.href=`http://en.wikipedia.org/wiki?curid=${r}`}function b(){console.log("Choosing random image.");let $=i[Math.floor(Math.random()*i.length)];a(0,u=`plants/${$}.jpg`),a(1,n="Mystery plant"),a(4,p=!1)}async function v(){a(5,l=!0),a(1,n=await main());let $=await searchWikipedia(n);d(),console.log($.query),$.query.search[0].snippet,r=$.query.search[0].pageid;const C=document.getElementById("species-desc");C.innerHTML=$.query.search[0].snippet+"...",a(4,p=!0),a(5,l=!1)}function O(){a(4,p=!1),console.log("Species details hidden")}async function T(){let $=s.snap();a(0,u=$),console.log($);let C=dataURItoBlob($),P=new Uint8Array(await C.arrayBuffer());console.log(P),d(),a(3,c=!1)}function E(){s.flip(),s.start(),console.log("Webcam flipped")}return[u,n,o,c,p,l,h,d,m,b,v,O,T,E]}class Page extends SvelteComponent{constructor(t){super(),init(this,t,instance,create_fragment,safe_not_equal,{})}}export{Page as component,_page as universal};
